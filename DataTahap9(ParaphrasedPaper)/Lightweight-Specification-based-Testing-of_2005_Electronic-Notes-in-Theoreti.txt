As the mobile device market continues to expand, there is a growing demand for the development of dependable memory cards. Samsung, a key player in the memory card business, is working to enhance the validation process for their memory card products. To this end, we undertook a pilot project to utilize a formal method and a specification-based testing technique to validate our MultiMediaCard (MMC) system. The system under testing (SUT) is an MMC card implemented in both Verilog for RTL and C for firmware. We formalized the general behavior model of the MMC host using Esterel and used it as a test oracle to automate testing of the SUT. We then co-simulated the two models of the host and card in a seamless verification environment, conducting scenario-based and random testing. 

Modern life heavily relies on systems embedded with computers, such as cellphones, electric ovens, traffic light controllers, power plant management systems, and car navigation systems. These embedded systems operate on specialized hardware, and the design decisions of the hardware significantly impact the software design, with both having complex application logics. However, unlike some embedded systems, off-the-shelf real-time OS is not commonly used in memory cards due to less critical concerns for safety or finances, and the pressing market needs for relatively reliable products to be shipped quickly.

Given these characteristics, we decided to design our own specification-based testing method rather than adopting an existing one. We developed a cycle-accurate model of the MMC host based solely on the official MMC specification, which also served as a test oracle. The testing was performed on a commercial platform, and the results were compared to those obtained from brute-force random testing.

The MMC system comprises an MMChost and MMC cards connected via a three-wire serial data bus. The main function of an MMC card is to read and write data, primarily using block-oriented mode due to its widespread support. In our approach, we aimed to take advantage of lightweight, specification-based testing that could be easily integrated into the existing testing process using formal modeling language.

The paper is organized as follows: Section 2 presents the background of the work, Section 3 introduces the framework with its rationales, Section 4 explains the modeling method of the MMC host, and the testing results are presented in a subsequent section.

In conclusion, we introduced a lightweight specification-based testing method for memory card systems, rooted in a formal behavior model of a general MMC host from the official MMC specification and its utilization in a co-simulation environment. Despite encountering challenges such as extended emulating time and the lack of a standard language for describing test cases of embedded systems, we believe that our approach will be beneficial to engineers facing similar problems. We also discuss the comparison of our method with existing specification-based testing methods and future work in formal verification and modeling.