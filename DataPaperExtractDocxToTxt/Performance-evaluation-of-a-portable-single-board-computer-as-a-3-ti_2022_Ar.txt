Array 15 (2022) 100196










Performance evaluation of a portable single-board computer as a 3-tiered LAMP stack under 32-bit and 64-bit Operating Systems
Riyad Dhuny a,*, Arshad Ahmud Iqbal Peer a, Nawaz Ali Mohamudally a, Nimal Nissanke b
a School of Innovative Technologies and Engineering, University of Technology Mauritius, La Tour Koenig, Pointe-aux-Sables, 11134, Mauritius
b London South Bank University, London, UK



A R T I C L E I N F O 

Keywords: Web server Raspberry Pi Portable
3-tier Performance 64-bit
LAMP RPI64Box
A B S T R A C T 

In this work, we propose a 3-tiered architecture running the Linux, Apache/Nginx, MariaDB and PHP (LAMP) stack on a 64-bit Operating System (OS) and a Solid-State Disk inside a Raspberry Pi (RPI) for performance evaluation. The relative response time and Application Performance Index (Apdex) for a 32-bit OS were measured and compared against an increasing load with Moodle as the application. Our choice of Moodle as a testbed is influenced by, amongst others, the 3-tiered LAMP architecture of MoodleBox as an image for the RPI, the relatively large database underlying Moodle (with more than 200 relational tables), the convenience offered by its sample tests courses and test plans in developing performance tests. Moodle can be easily substituted from the environment to create portable LAMP-based applications. The relative response time improved by 11.9 s for a medium-sized course with 100 users with the upgrades. The Apdex showed that the CPU of the RPI was the limiting factor that prevented the web application from scaling to beyond 40 users for medium-sized courses.
This work’s methodology, tests, and findings are important to administrators, educators, and users in general
involved in capacity planning for the use of portable applications running under the LAMP stack. A ready for use image of the portable 64-bit LAMP stack is available for download. For a video summary of this paper, please visit https://rpi64box.com.





Introduction

In this paper, we aim to improve the performance of a portable Raspberry Pi (RPI) [1,2] 3-tiered architecture running the LAMP stack by taking advantage of the availability of (1) a 64-bit Operating System and (2) a Solid-State Disk (SSD). The LAMP stack [3], which initially stood for Linux, Apache, MySQL and PHP (LAMP), represented software for the 3-tiered architecture and the Operating System (OS). The 3-tiers is a type of architecture consisting of three tiers, or layers, designed to modularise different aspects of logical computing to facilitate updating any specific part of an application independently of the rest. The LAMP
stack is one of the most widely used server architectures [4–6], and its usage with RPI opened new possibilities that previously did not exist. An
excellent application use case is MoodleBox, used in the Penitentiary Centre of Caen [7]; it enabled incarcerated students to benefit from a digital environment to follow courses at the University of Caen in Nor- mandy. The MoodleBox project inspires the creation of other portable web applications by replacing the Moodle [8] present in the 3-tiered
architecture with other available LAMP stack applications. The LAMP stack of RPI gives rise to the portability of existing web applications. For capacity planning purposes, it is essential to know how many users such a portable system can support and the user experience in terms of the Application performance index (Apdex) [9,10]. This work also aims to present a simple method that can be applied to test the performance of 3-tiered LAMP architecture through Moodle as an application testbed.
The MoodleBox project [11] primary offering is a disk image trans- ferred to an SD Card to boot an RPI. MoodleBox converts the Wi-Fi of the RPI into a portable hotspot and makes available via wireless Local Area Network (WLAN) a Moodle through a LAMP stack. Within Moodle administration area from MoodleBox, Moodle requests administrators to upgrade the OS and PHP versions to 64-bit for future compatibility, as displayed in Table 1. In other words, the system is itself requesting ad- ministrators to upgrade the OS.
MoodleBox uses the official OS from the company designing the RPI, which is Pi OS, a 32-bit Debian-based kernel [12]. Pi OS has a 64-bit version, which is still experimental and is a work in progress. Ubuntu



* Corresponding author. University of Technology Mauritius, La Tour Koenig, Pointe-aux-Sables, 11134, Mauritius.
E-mail addresses: dhuny@umail.utm.ac.mu (R. Dhuny), apeer@umail.utm.ac.mu (A.A.I. Peer), alimohamudally@umail.utm.ac.mu (N.A. Mohamudally), nissanke@umail.utm.ac.mu (N. Nissanke).
https://doi.org/10.1016/j.array.2022.100196
Received 31 October 2021; Received in revised form 25 May 2022; Accepted 29 May 2022
Available online 14 June 2022
2590-0056/© 2022 The Author(s). Published by Elsevier Inc. This is an open access article under the CC BY license (http://creativecommons.org/licenses/by/4.0/).



Table 1
Moodle information message for 32-bit OS version of PHP.
Information	Report
3.1 presents the Disk I/O performance; section 3.2 presents the System Benchmark for the 3-tiered architecture; section 3.3 presents the Apdex rating for performance tests and section 3.4 the server’s Resource Usage
under load. The results for the previous tests are presented in section 4.

php not 64 bits
It has been detected that your site is not using 64-bit PHP version. It is recommended that you upgrade your site for future compatibility.
The conclusion is proposed in section 5.

Materials and methods



Server for ARM [13] is another OS distribution available for RPI in 64-bit. Some previous benchmarking done on RPI version 4 (RPI4) [14]
showed that 64-bit OS could improve the system’s performance in spe- cific areas [15–17]. The RPI was designed to boot and run its OS from a Secure Digital (SD) Card. SD Cards are slower than Solid-State Disks
(SSD), impacting performance. As of October 2020, RPI4 did not natively support booting from USB 3.0 or a faster disk like an SSD. Some known hacks could force the RPI to operate the OS from an SSD [18]. The official MoodleBox website estimates a maximum number of users to be between 20 and 30 [19] when it runs on a 32-bit OS, Wi-Fi and from an SD Card.
Given the relatively sizeable relational database underlying Moo- dle, the convenience offered by its sample test courses and test plans in developing performance tests, Moodle influenced our choice for a testbed application for performance evaluation of a 3-tiered LAMP stack. There are some previous performance tests done with Moodle on RPI. Henriette [20] measured a maximum of 20 possible connections with MoodleBox when tested with Apache JMeter [21]. Unfortunately, the detailed results for the tests were not published. Using a similar performance evaluation, Basuki et al. [22] observed that 30 users could be handled by a Pi-Box running Moodle with a score of 0.414 on Apdex. However, when rated, this score is considered an unacceptable user experience. MoodleBox was also reviewed as a platform for mobile learning by Mustapha & Said [23] to solve Learning Management System (LMS) problems related to internet coverage in parts of Morocco. The mobile learning platform included a maximum of 30 trainees to participate simultaneously. The three previously cited works were carried out on an older version of Raspberry Pi, the version 3 (RPI3).
In a load testing experiment conducted by Manchanda [24], seven optimisation techniques were used to improve the user response time for web applications through Moodle on a Quad 2.9 GHz processor computer. In one test, 50 concurrent users were accessing Moodle from a hard disk for which a throughput of 7.8 requests per minute was observed while the average response time was 364.48 s. When an SSD was employed for the LAMP stack, the average response time drastically reduced to 5.27 s, but there was no indication of the throughput.
The University of Merce Buana [25] implemented a load balancing clustering (LBC) to overcome performance issues to serve more than 30,000 users in total and up to 1371 users/minute. The Apache ab benchmarking tool [26] was used to perform load testing. As part of the Apache ab benchmarking results for the LBC Design & Imple-
mentation, around 6–7 requests/second were to be served by one single server or a throughput of 420 users/minute. The two previous
works indicated the throughput expected from a dedicated server under load tests.
In this work, we built a 3-tiered LAMP stack on a 64-bit version of Ubuntu while maintaining the same environment as MoodleBox and labelled it as RPI64Box for comparative purposes. MoodleBox and RPI64Box were run from SD card and SSD to measure performance differences. To our knowledge, this work is the first port of MoodleBox to a 64-bit Ubuntu version of Linux.
The paper is structured as follows: Section 2 details the setup, test environment, the dataset used for the 3-tiered architecture, and the application used as a testbed. We present the test in section 3. Section
The setup

Two RPI4 with 4 GB of memory were used in the experiments. The RPIs were operated at a clock speed of 1.5 GHz when not overclocked. Both RPIs were powered with USB adapters capable of providing above 3.1A, and CPU fans were installed to keep the temperature below 60◦ Celsius. The first RPI4 was set as the Web, Application and Database server, and the other acted as the client sending page requests to the server. The server was configured to provide a Wi-Fi access point, and
the client connected through the Wi-Fi access point, creating a WLAN, as shown in Fig. 1.
The software and hardware environment of the RPI4 with the access point in Fig. 1 were varied with a combination of 32-bit and 64-bit OS. The other variation was faster disk access through the use of SSD instead of SD card. A 32-GB SanDisk SD and a 128 GB SanDisk SSD Plus were used for all tests. The OS and disk storage variation produced four combinations labelled as 32SD, 32SSD, 64SD and 64SSD to represent the
differences. The SSD versions were later overclocked to 2 GHz, and ’-OV’
was added to the label.
For the 32-bit OS, a version of MoodleBox 3.9 containing Moodle version 3.10 running on Raspberry Pi OS (32-bit) was used. For the 64- bit OS, a Ubuntu 20.04.1 running Moodle with the same configuration was created by porting the MoodleBox ansible script to Ubuntu-64 [27]. The four environments were named: p32SD, p32SSD, u64SD and u64SSD. The first two used MoodleBox. The u64SD and u64SSD used RPI64Box, which represents a significant contribution to this work. A short video depicting the setup, environment and tests is available at https://rpi64box.com [28].

Test environment

All four environments contained identical versions of Nginx, MariaDB and PHP on the servers. On Ubuntu, PHP version 7.3 was not available, and the closest and most recent update representing version
7.4 was used. All other parameters were kept the same.
Given that many variables can affect the overall software perfor- mance of the servers, the same were maintained constant across the tests. The values are listed under Code snippet 1 and Code snippet 2.
For PHP, the php-fpm library was used and the variables were maintained to their MoodleBox original values as shown in Code snippet
1. The values represent a maximum of 5 server requests per unit time for PHP. This value is closely linked to the throughput of the server.
For MariaDB, enabling the query cache of the database is recom- mended by Moodle. The database variables were adjusted in/etc/mysql/

Fig. 1. Diagram representing the network topology of the RPI4 server with the access point and the client computer.


Table 3
Moodle test plans for the different course sizes and cohort sizes.

Small uses a maximum of 30 concurrent users with a ramp-up of a period of 6;
Medium uses a maximum of 100 concurrent users with a ramp-up of a period of 40.

The test plans were created for the courses in Table 2 with a maximum number of concurrent users as displayed in Table 3. Each test was provided with a unique test plan label.
The m3 – m9 test plan labels of Table 3 represent test plans for m3, m4, m5, m6, m7, m8 and m9, where the users were incremented by 10
for each test.




my.cnf as per Code snippet 2.
The innodb_log_file_size (Code snippet 2) was maintained to 64 M across to compare the results of a standard MoodleBox with the RPI64Box. This value can be further increased to take advantage of available RAM.
The filesystem table of Linux was also modified to create 64 MB temporary filesystem caches for/var/cache/moodle and/var/www/ moodledata/temp folders. A 16 MB cache for sessions was also created in/var/www/moodledata/sessions. The modifications were added to/ etc/fstab as tmpfs, which made use of available RAM to create the caches.

Dataset

Test courses were built in Moodle, and test plans that added different users to the test courses were built. This section describes the test courses and test plans used.
Moodle standard test courses were built using Moodle’s test script, and three sizes were created as per Table 2.
Moodle JMeter test plans were created using the JMeter test plan generator in Moodle. Test plans were created for extra small (xs), small
(s) and medium (m) class sizes:

Extra small uses a maximum of 10 concurrent users with a ramp-up of a period of 1;




Table 2
Moodle course sizes used for testing MoodleBox and RPI64Box.

Tests

In order to evaluate the performance of the RPI4, four distinct tests were carried out, namely a device storage performance test, a compre- hensive performance test of the LAMP stack, an evaluation of the overall response time of generated pages and a monitoring of the server resource usages. All the tests are based on existing available scripts, as detailed in sections 3.1 to 3.4.

Disk I/O performance test

The disk I/O performance in terms of writing and reading speed can be measured from the Unix/Linux shell using HDParm, DD, FIO and IOZone commands. Furthermore, James Chambers came up with a benchmark script [18] which provides a unique score after executing the previous commands to indicate the performance of the storage media under test. The advantage of the benchmark is that it already has the vast majority of disk makes that were rated against the script, and their scores are listed online. This list makes the selection of storage media for an RPI4 easier, especially when planning ahead for performance improvements.

System benchmark test

The overall time it takes for a web server to respond to a query de- pends on several factors, namely, the disk’s read and write performance, processor performance, processing speed for database queries, and
network latency. One simple benchmarking approach would be to measure the execution time of these specific server areas. For example, the processor speed could be measured by counting the time it takes for a 10 million loop to complete. The database performance could be eval- uated by measuring the time to execute a specific Structured Query Language (SQL) operation. Moodle has a plugin called the System benchmark tool [29] which carries a similar performance check on various components of the 3-tier architecture. Although this method uses a simplistic approach to measure server performance, the System benchmark is ideal because of the different elements tested. The values are not definite measures representing the performance of a server but rather an indicative overview of performance in various areas. The



System benchmark’s output result is a score based on the average
amount of time several scripts were executed; hence, a lower score is better.

Apdex measurement

Apdex measures the user’s satisfaction with the response time of the application. For instance, suppose a server is expected to respond within 500 ms (ms) for a user to be satisfied, and the user’s frustration threshold is up to 1500 ms. In that case, this value can be expressed as a ratio of
1:3. This ratio represents a user capable of waiting only three times longer than expected.
To generate an application index, the response time for a satisfied user is required, from which a frustration time can be calculated. A ratio of 1:3, 1:4 and 1:5 between the two thresholds of satisfied and frustrated user response time is often used [9]. This work uses a threshold ratio of 1:3 to maintain high exigencies from the RPI4.
Apdex is defined as the number of satisfied samples plus half of the tolerating samples divided by all the samples. Apdex is calculated as below, where Time represents the Target Time for a satisfied user.
Apdex   Satisfied samples + Tolerating samples/2
Total samples
The Apdex results range from 0 to 1, where 1 is considered the best and 0 the worst-performing [9,10,30].
The Apdex values are also rated to represent the application responsiveness. Table 4 [30] shows how the Apdex range is mapped into a user experience rating labelled as Apdex Rating.
The generated JMeter test scripts by Moodle, as mentioned in 2.3, already include Apdex values in their reports. Apart from Apdex, it is also possible to compare the average response time of the pages.

Resource usage monitoring

In order to plan ahead for any optimisation of the 3-tiered archi- tecture, it is important to know which hardware resource is in scarcity. While it is feasible to directly collect these values when the tests are executed inside JMeter through the PerfMon plugin [31], the output for some hardware resources is simply a numeric value. Converting the values into a percentage usage produces more meaningful real-time information. Consequently, in order to convert the values into per- centages, the maximum limit that each measurement can reach is required and was obtained as follows:

The total RAM values were acquired from the Linux shell ‘Free’ command.
The disk activity values were collected from ‘iostat %util’ command [32]. This represents the CPU time during which I/O requests were
issued values close to 100%, indicating device saturation. It is worth noting that the percentage of disk utilisation from iostats tries to calculate the average close to the nearest second. At times minor delays in computing provide results of more or less than 1 s, leading to a percentage higher than 100%, which can be safely rounded to 100% [33,34].
Iperf3 [35] measurements provided 57.0 Mbps as the maximum transmission rate for the wireless network. Periodically, the

Table 4
Application performance index rating.


Apdex Range	Apdex Rating


0.94 to 1.00	Excellent
0.85 to 0.93	Good
0.70 to 0.84	Fair
0.50 to 0.69	Poor
0.00 to 0.49	Unacceptable
transmission rate would exceed the 57.0 Mbps threshold and be represented on graphs to exceed 100%.

After converting the CPU, RAM, Network transmission and disk read values into percentages; these values were monitored and plotted.

Results

The results of the previously mentioned tests are displayed in sec- tions 4.1 to 4.4; where appropriate, graphs or bar charts are also available.

Disk I/O performance results

The results as provided by the James Chambers script [18] repre- senting the different disk transfer speeds in MB/s under the different OS environments and a James Chambers score were noted in Table 5.
The SSD environments were found to be at least 3.4 times better in terms of the score when compared to their SD card equivalent, as dis- played in the last row of Table 5.

System benchmark results

The results obtained from the Moodle System benchmark tool running for the different OS environments are displayed in Table 6.
The results represent the time in seconds to execute each of the described tests and the acceptable limit and critical limit by which a script should be executed. The last two rows contain an average time in seconds it takes for all the scripts to run and a score for comparative purposes as provided by the benchmark tool.
From Table 6, when comparing the impact of the storage media, SSD constantly improved the system’s performance. For the 32-bit OS (p32SD vs p32SSD), the score improved by 7 points or by 0.077s and for
the 64-bit OS (u64SD vs u64SSD), the improvement was by 11 points or 0.11s.
The main areas where the SSD improved the overall system are ‘Writing course performance – Speed of Database’ and ‘Login time per- formance for guest/fake account’. The values were graphed in Fig. 2,
and it can be observed that the response time for the Speed of Database
improved by at least 1.6 times with SSD.
The most impacted areas by the OS bit depth were graphed in Fig. 3.
The ‘processor processing speed’ significantly improved from 0.361 to 0.187, representing a gain of 1.9 times when moving to 64-bit. In contrast, it was observed that the ‘reading and writing file performance – Temporary Folders’ took longer.
Finally, only moving to 64-bit did not improve the overall Bench-
mark score. The p32SD score is better than the u64SD (Table 6).

Apdex

For the performance tests, the JMeter scripts were executed with

Table 5
James Chambers disk test speeds and score for p32SD, p32SSD, u64SD and u64SSD.




Moodle Benchmark score for p32SD, p32SSD, u64SD and u64SSD.


Fig. 2. Bar chart comparing writing course performance and login times for p32SD, p32SSD, u64SD and u64SSD.


Fig. 3. Bar chart comparing processor processing speed, read and write performance to temporary folders and login times for p32SD, p32SSD, u64SD and u64SSD.


Table 7
Apdex values for xx, ss, sm, m3, m4, m5, m6, m7, m8, m9 and mm test plans running on p32SD, p32SSD, p32SSD-OV, u64SD, u64SSD and u64SSD-OV server environments.


Table 8
The average response time in seconds for the pages to load under different test plans ranging from xx to mm on different server environments.


their throughput settings capped to 180 requests/minute. The Apdex and response time available from the tests are published in Table 7 and Table 8. Apdex values below 0.500 are considered unacceptable as per the Apdex rating.
Initially, the four server environments were evaluated: p32SD, p32SSD, u64SD and u64SSD. The Apdex rating was unacceptable for p32SD, u64SD and p32SSD when 40 or more concurrent users were online, as shown by m4 in Table 7. However, the u64SD Apdex rating was 0.494, representing a score close to moving out of the unacceptable range. On the other hand, the 64-bit OS and the SSD allowed the u64SSD to move out of unacceptable range for m4.
The outcome of the resource usage monitoring exercise of section 3.4 provided insightful graphs [28] showing that the CPU usage was grad- ually reaching close to 100% for more extended periods for tests m4 and onwards. To further evaluate if the RPI4 with an SSD upgrade could perform better with a more powerful processor, the CPU was over- clocked to 2.0 GHz. The two resulting environments for the overclocking were labelled as p32SSD-OV and u64SSD-OV, as shown in Table 7. The overclocked versions of the environment, when operated with SSD, made it possible for the test environment to score more than 0.5 on the Apdex rating and confirmed that CPU access was scarce.
In order to filter out all the test results for the environments below the acceptable mention per Apdex rating, Table 7 was graphed for Apdex values above 0.5 and displayed in Fig. 4. The resulting graph (Fig. 4)
represents only test environments, the size of courses, and the number of concurrent users that an RPI4 can withstand as per the Apdex rating. The RPI4 can support between 50 and 100 users for medium-sized courses with CPU overclocking. However, the quality of the Apdex rating will be poor.
The size of a course in Moodle impacts the server’s ability to support many concurrent users. MoodleBox, which runs a 32-bit Pi OS, is
appropriately optimised to use the RPI hardware to its full potential. The stated number of users supported by MoodleBox being 20–30 is appro- priately justified. RPI64Box on SD card (u64SD) helps improve course
Apdex value for course sizes below 30 users or if the CPU usage is not saturated.
Another way to compare the results of the JMeter tests apart from Apdex is to go through the average response times of the tests carried out. The response time in seconds for the different tests and environ- ments is displayed in Table 8.
When comparing the original MoodleBox, which runs on an SD card (p32SD), to an RPI64Box on an SSD with CPU overclocking (u64SSD-
OV), the response time did improve by a range of 0.1s–11.9s (Table 8). The average response times of the pages were placed on a bar chart, as
shown in Fig. 5, to make visible the time difference.
Overall, RPI64Box improves the average response time for medium course sizes but does not significantly support more users as the scarce resource is the CPU itself. Overclocking is an excellent option to get the




Fig. 4. Bar chart of Apdex values above 0.500 for xx, ss, sm, m3, m4, m5, m6, m7, m8, m9 and mm test plans running on p32SD, p32SSD, p32SSD-OV, u64SD, u64SSD and u64SSD-OV server environment.






Fig. 5. Average response time of pages in seconds for various tests on p32SD vs u64SSD.

maximum out of an RPI for medium-sized courses with more than 30 users.


Resource usage

The results from the resource usage monitoring process for the CPU, RAM, network transmission and disk read were plotted as a percentage against time for each test resulting in 66 charts. Omitted here, these charts can be consulted as supplementary online materials, together with the detailed JMeter HTML reports [28]. These charts are accessible on rpi64box.com [28], where a table similar to Table 7 is published with individual report links on each cell as additional information. Each link leads to a JMeter HTML report for the specific test. From each JMeter
HTML report, the resource usage for each test can be accessed under the following navigation menu, Custom graphs → Over Time → Resource Usage & Temperature of System. From these graphs, it was observed that
the reduction in CPU and RAM Usage percentage coincided with an increase in Apdex value.
The resource usage values of the previously mentioned charts were averaged to obtain a single value for each test and plotted to identify resource consumption trends. The average CPU usage for the different test plans from ss to mm is shown in Fig. 6.
When the bit depth of OS was compared, 64-bit OS provided a gain of CPU usage between 1.3 and 4.8%. For disk storage, the use of SSD frees the CPU by a range of 0.2–6.6%. The 64-bit OS, SSD, and CPU over-
clocking reduce CPU usage by 9.6–18.1% for the 3-tier architecture.
The Average RAM usage for the test plans from ss to mm is shown in Fig. 7.
In terms of volatile memory usage, it can be observed from Fig. 7 that the u64SD consumes 15.1–17.4% more RAM than p32SD, and the u64SSD consumes 13.1–15.9% more RAM than the p32SSD. It is
observed that the overclocked version of Ubuntu 64 on an SSD (u64SSD-
OV) consumes 10.8–15% of RAM less than a Pi OS 32-bit on an SD card (p32SD).
The average resource usage graphs present in Figs. 6 and 7 provide an insight into how the resources are being used. However, they do not portray the actual situation at specific points in time for resource usage. When executed, the tests contain a ramp-up period during which the number of concurrent users is gradually increased or decreased. These variations affect the average resource usage. For this reason, the maximum CPU usage of Fig. 6 never reaches 100%.
Though it required some extra steps to be converted into a percent- age and plotted as a graph, the real-time resource usage graphs of the tests provided additional insight into the resource usage that would not have been visible only with the average of the resource usage values. For instance, the graphs which are available as supplementary materials showed that the CPU usage peaked close to 100% for a subsequent amount of time for some test plans.

Conclusion

Even though the Apdex improved marginally when comparing a 32- bit OS environment against a 64-bit one, it remains the way forward due to the limitation of the 32-bit OS to use a maximum of 3 GB of RAM for a process and that RPIs are available now with more than 4 GB of RAM. The usage of SSDs did further improve the Apdex rating marginally. Given that different disk storage speeds are available on the market, the results depend on the SSD speed used. The SSDs used for the tests were at least 3.4 times better than the SD card per the James Chambers benchmark. This benchmark is helpful as it compares and publishes the score for different disks available on the market. Faster SSDs than those used in previous tests may yield a better performance gain and require further tests. The system benchmark tool, a simplistic benchmark to





Fig. 6. CPU Usage for test plans under different environments.





Fig. 7. RAM Usage for test plans under different environments.


compare the 3-tiered LAMP environments, showed that 32-bit and 64-bit OS on SSDs had the same performance score and outperformed the SD by less than 10% as score.
The resource usage graphs of Figs. 6 and 7 showed that the average CPU consumption was 1.3–4.8% lower in 64-bit OS but used between
13.1 and 17.4% more RAM on average. During the JMeter tests, for
medium-sized courses, which contain quite some content, as displayed in Table 2, the real-time CPU usage peaked for extended periods when more than 40 users were connected, which affected the Apdex rating. The Apdex for m4 on u64SSD is 0.537, which is considered poor but acceptable. The Apdex rating indicates that a portable 3-tiered LAMP stack on a Pi can support 40 simultaneous users expecting a response from the server within 1.5 s. With CPU overclocking to 2Ghz, up to 100 users could be supported by the portable RPI with an acceptable but poor Apdex rating as per Table 7. CPU overclocking also reduced the average percentage of RAM usage, which was initially above 60% for u64SD and less than 41% for the overclocked u64SSD-OV, as shown in Fig. 7.
In terms of capacity planning, if less than 30 users were to be sup- ported by a portable RPI or the RPI has a maximum of 2 GB of memory, there is no real need to move to the u64SSD as the Average CPU usage is less than 60% and average RAM usage is less than 50% on p32SD. This is reassuring for MoodleBox users. Overclocking should be considered first to support more users, followed by SSD and 64-bit OS. In the best sce- nario, the CPU performance improved by 18.1% from 32-bit OS on SD card (p32SD) to 64-bit overclocked OS on SSD (u64SSD-OV). The rela- tive response time improved by 11.9 s for a medium-sized course with 100 users.
The automated script for installing necessary software for creating
the RPI64Box environment is based on MoodleBox and is available as an ansible script on GitHub [27]. The ready for use Disk image is also available for download online [28]. This is useful for users who want to be exempted from the manual process of setting up and configuring the LAMP stack on a Ubuntu 64-bit ARM OS to make it portable.
Finally, the significance of the experiments is of multiple folds. (1) It provides real-world performance information of the RPI4 as a portable 3-tiered web server, including the responses’ quality. (2) It shows that
the choice of the OS can impact the overall throughput. (3) It provides
insight into the use of faster disks through USB 3.0 Bus in the overall performance of the web server and a simple way to evaluate and compare storage devices. (4) The experiments pushing the RPI4 hard- ware to its limits and CPU overclocking confirmed that the scarce resource is the CPU itself. This information provides a significant hint for future works related to performance improvement of 3-tiers for IoT Devices like RPI4; for example, optimising CPU intensive operations can further improve throughput and response times. (5) The whole web server environment is available as a disk image that can be transferred to a disk and booted from an RPI or similar IoT devices. The Disk image can be used as a benchmark to evaluate how other RPI alternatives like the RockPi 4 [36], Orange Pi 4 [37] and upcoming versions of RPI devices perform as a 3-tiered web server compared to the RPI4.


Declaration of competing interest

The authors declare that they have no known competing financial interests or personal relationships that could have appeared to influence the work reported in this paper.



Appendix A. Supplementary data

Supplementary data to this article, including a video summary, can be found online at https://doi.org/10.1016/j.array.2022.100196 or by scanning the following QR code

.



References

The MagPi. Sales soar above commodore 64. The MagPi 2017;56:8.
Barnes R. Eben upton talks Raspberry Pi 3. MagPi Mag.; 2016. Accessed: Jun. 20, 2021. [Online]. Available: https://magpi.raspberrypi.org/articles/pi-3-interview.
Lawton G. LAMP lights enterprise development efforts. Computer (Long. Beach. Calif). 2005;38(9):18–20. https://doi.org/10.1109/MC.2005.304.
Louridas P. Component stacks for enterprise applications. IEEE Softw. 2016;33(2):
93–8. https://doi.org/10.1109/MS.2016.57. Mar.
Wappalyzer. Web servers market share. 2020. https://www.wappalyzer.com/tech nologies/web-servers/. accessed Jun. 21, 2021.
Framework technologies web usage distribution. 2021. Aug. 26, https://trends. builtwith.com/framework. accessed Aug. 30, 2021.
MoodleBox. Moodlebox supports the education of detainees. 2018. https://moodle box.net/en/news/caen-detention-centre/. accessed Apr. 06, 2021.
Moodle statistics. 2021. https://stats.moodle.org/. accessed Apr. 06, 2021.
Sevcik PJ. Defining the application performance index. Bus Commun Rev 2005;20: 8–10 [Online]. Available: http://apdex.org/docs/Defining_The_Application_Perfo rmance_Index.pdf.
New Relic, Apdex. Measure user satisfaction | new relic documentation. 2013. https://docs.newrelic.com/docs/apm/new-relic-apm/apdex/apdex-measure-use r-satisfaction/. accessed Apr. 06, 2021.
N. Martignoni, “MoodleBox disk image.” https://moodlebox.net/en/help/ download-the-disk-image/(accessed Oct. 21, 2021).
Raspberry Pi OS – Raspberry Pi.” https://www.raspberrypi.com/software/ (accessed Oct. 21, 2021).
Ubuntu for ARM | download | Ubuntu.” https://ubuntu.com/download/server/ arm (accessed Oct. 21, 2021).
Upton E. 8GB Raspberry Pi 4 on sale now at $75 - Raspberry Pi. May 28. 2020. accessed Sep. 07, 2021), https://www.raspberrypi.org/blog/8gb-raspberry-pi-4-on
-sale-now-at-75/.
Longbottom R. Raspberry Pi 64 bit OS and 8 GB Pi 4B benchmarks Raspberry Pi 64 bit OS and 8 GB Pi 4B benchmarks. 2020. https://www.researchgate.net/publicat ion/342232830_Raspberry_Pi_64_Bit_OS_and_8_GB_Pi_4B_Benchmarks.
Croce M. Why you should run a 64 bit OS on your Raspberry Pi4 | by matteo croce | medium. 2018. https://matteocroce.medium.com/why-you-should-run-a-64-bit-o
s-on-your-raspberry-pi4-bd5290d48947. accessed Apr. 06, 2021.
Williams A. How to make your Raspberry Pi 4 faster with a 64 bit kernel. 2020. accessed Apr. 06, 2021), https://medium.com/for-linux-users/how-to-make-your- raspberry-pi-4-faster-with-a-64-bit-kernel-77028c47d653.
Chambers J. Latest Benchmarks - page #1 - storage.jamesachambers.com. 2018. https://storage.jamesachambers.com/. accessed Apr. 06, 2021.
MoodleBox | MoodleBox frequently asked questions.” https://moodlebox.net/en/ faq/(accessed Oct. 21, 2021).
Henriette L. Analyse des donn´ees d’apprentissage des plateformes p´edagogiques de l’Universit´e de La R´eunion pour l’aide au tutorat dans les formations hybrides.
2018. Accessed: Apr. 06, 2021. [Online]. Available: http://lim.univ-reunion.fr/ staff/fred/M2info/17-18/Stages/Rapports/HENRIETTE.pdf.
Apache JMeter. Apache JMeter. 1998. https://jmeter.apache.org/. [Accessed 30
May 2021]. accessed.
Basuki A, Akbar SR, Setyawan RA. Analisis performansi raspberry-pi box sebagai. Eeccis 2018;12(2):61–4.
Mustapha EJ, Said E. Moodlebox : a newly conceived mobile pocket platform for
mobile learning. 2011 Am. J. Innov. Res. Appl. Sci. 2017:264–71 [Online]. Available:  https://american-jiras.com/ElJakani-ManuscriptRef.1-ajira120517.pdf.
Manchanda P. Analysis of optimization techniques to improve user response time of web applications and their implementation for MOODLE. Commun. Comput. Inf. Sci. 2013;409:150–61. https://doi.org/10.1007/978-3-319-03783-7_14.
Sadikin M, Yusuf R, Arif Rifai D. Load balancing clustering on moodle LMS to overcome performance issue of e-learning system. TELKOMNIKA (Telecommunication Comput. Electron. Control 2019;17(1):131. https://doi.org/ 10.12928/telkomnika.v17i1.10284. Feb.
The Apache Software Group. Ab - Apache. 1998. HTTP server benchmarking tool,”
ab - Apache HTTP server benchmarking tool, http://httpd.apache.org/docs/2.4/ programs/ab.html, accessed May 21, 2021.
Dhuny R. dhuny/RPI64Box: A portable web server with ARM 64-bit Ubuntu LTS for microservers. GitHub; 2022. https://github.com/dhuny/RPI64Box. accessed June 14, 2022.
Dhuny R. RPI64Box. 2021. Jan, https://rpi64box.com. accessed May 07, 2022.
Pannequin M, Martignoni N. Moodle plugins directory: moodle benchmark. 2020. https://moodle.org/plugins/report_benchmark. accessed Apr. 06, 2021.
Brady J. The Apdex index vs traditional management information decision tools. C. Meas. Febr.; 2009. Accessed: Apr. 06, 2021. [Online]. Available: https://www. academia.edu/37072208/The_Apdex_Index_Vs_Traditional_Management_Informat ion_Decision_Tools.
Pokhilko A. Documentation : JMeter-Plugins.org. 2019. https://jmeter-plugins. org/wiki/PerfMon/. accessed Apr. 06, 2021.
Godard S. iostat(1) - Linux manual page. 2020. https://man7.org/linux/man-pages
/man1/iostat.1.html. accessed Apr. 06, 2021.
Zaitsev P. Looking at disk utilization and saturation - percona database performance blog. 2017. https://www.percona.com/blog/2017/08/28/l ooking-disk-utilization-and-saturation/. accessed Apr. 06, 2021.
Varekova I. 445676 – iostat reports %util greater than 100%. 2008. https://
bugzilla.redhat.com/show_bug.cgi?id=445676. accessed Apr. 06, 2021.
Dugan J, Elliott S, Mah BA, Poskanzer J, Prabhu K. iPerf - the TCP, UDP and SCTP network bandwidth measurement tool. 2014. https://iperf.fr/. accessed Apr. 06, 2021.
Radxa Team. Rockpi4. 2020. https://wiki.radxa.com/Rockpi4. accessed May 06,
2022.
Orange Pi 4 - orangepi.” http://www.orangepi.org/Orange Pi 4/(accessed May 06, 2022).
