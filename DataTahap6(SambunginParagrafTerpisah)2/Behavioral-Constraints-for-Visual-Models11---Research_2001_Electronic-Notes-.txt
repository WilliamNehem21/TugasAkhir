In this paper, we discuss the issue of consistency of behavioral models in the UML and present techniques for specifying and analyzing consistency. Using meta-model rules we transform elements of UML models into a semantic domain. Then, consis- tency constraints can by speci ed and validated using the language and the tools of the semantic domain. This general methodology is exempli ed by the problem of protocol statechart inheritance.

It is the aim of the paper to outline an approach to the speci cation and veri cation of behavioral constraints for visual models. We proceed in four steps. After identifying (informally) the consistency problem at hand (Sect. 2), we choose a semantic domain which supports the kind of consistency prob- lem we are interested in and de ne a mapping of models into the semantic domain (Sect. 3). Then, we use the language and tools provided by the se- mantic domain to formulate the behavioral constraints and to verify them (introduced in rule (2)) by corresponding process de nitions. In general, all names set in italics represent \non-terminals" that have to be replaced. Notice that we have used the machine-readable version of the CSP notation where [] and |~| denote 2 and u, respectively.

Below, the application of these rules to the statechart of class Tradition- alPerson is shown. (The name of the class is abbreviated to TP.) Notice that (*) beh(single) = directBeh(single)[]beh(top) = beh(top) = STOP by rule (5,4,6) and the CSP axiom p 2 STOP = p. That means, the external behavior of the implicit top state (which is not visible in the concrete syntax and does not have outgoing transitions or super-states) is empty, and the same holds for state simple which does not have outgoing transitions either. Therefore, the semantics of state single is de ned by rule (3) to be that of the default state notengaged. As notengaged is a SimpleState, rules (2) and (5) are applied. Af- ter dropping the super-state component using (*), we just collect the outgoing transitions using rules (6) and (7). The semantics of engaged and married is computed in a similar way.

Rule-based mappings, like the one in Section 3, are also used in [12,1] where timed Petri nets are proposed as a semantic framework for the UML. Notice, however, that it is not our aim to provide a denotational semantics for the UML (or even a reasonable sublanguage of it). On the contrary, the mapping is de ned locally for the language features of interest, even if the semantics of other model elements is not yet clari ed.

In order to be able to modify the notion of consistency (when the de- velopment process evolves or a new pro le is created), it is important that this mapping is exible and extensible. We think that the rule-based nota- tion, which was already used in [4] for describing Java code generation and is originally motivated by pair grammars [13], provides a good starting point. However, it has to be supported by a tool which is able to generate a translator from such a rule-based description. Currently, we are investigating the use of XSL transformations for this purpose.

