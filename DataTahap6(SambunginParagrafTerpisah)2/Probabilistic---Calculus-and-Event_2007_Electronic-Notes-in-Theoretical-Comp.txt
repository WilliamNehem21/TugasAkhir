Q3 is typable since, while output at a appears twice, a replicated input at a appears only once. Note that x under the replication preserves the linearity after each invocation at a. On the other hand, ! b.a | ! b.c is untypable because b is associated with two replicators.

We consider the model of traffic lights from [24]. Let a be a driver, and let inred, inyell, ingreen represent colours of the traffic light. The process ainred(y) represents the traffic light signalling to the driver it is red, at the same time com- municating the name y of the crossing. The behaviour of the driver at the crossing is either braking, staying still, or driving ( inbrake, instill, indrive).

structures ai.Ei, where the order relation is the disjoint union of the orders, the labelling function is the disjoint union of the labelling functions, and the conflict is the disjoint union of the conflicts extended by putting in conflict every two events in two different copies. It is a generalisation of prefixing, where we add an initial reactive cell, instead of an initial event.

fully probabilistic event structures, that is event structures which do not contain reactive cells. In particular, in light of Corollary 5.3, it applies to closed processes. More generally it applies to processes whose free names do not include linear inputs. To exemplify the confluence theorem, consider a process P such that P d a :

A simpler calculus, without renormalisation, is presented in [7]. This version is very similar to ours, in that all choices are local; in fact, the protocol example presented in [7] (via an encoding into our calculus) is linearly typable. We believe we could apply a typing system similar to ours to the calculus in [7], prove the same results in this paper and identify a good class of probabilistic name-passing behaviours.

