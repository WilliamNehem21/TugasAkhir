Probabilistic programming is an extension of imperative programming that enables the specification and implementation of randomized network and security protocols, machine learning and quantum algorithms. The variety of applications has recently led to a rapidly growing interest in the probabilistic perspective. Reasoning about the correctness of such programs, and more generally verifying properties such as convergence and termination, is quite intricate. It is thus important to establish formal techniques that enable these forms of reasoning.

Remark 2.1 In the paper originally introducing PPDL [14], arbitrary linear combi- nations of functions are allowed. In our presentation, we admit only positive linear combinations for the sake of simplicity. Note that eliminating such restriction would not affect the results that we prove.

It is worth noting that state and event bisimulation coincide in discrete settings and for analytic state spaces. However, in general, the two notions are orthogonal [2,20]. From a categorical point of view, LMP state bisimulation are spans in the category of LMPs with analytic state spaces (seen as coalgebras). Note that the spans are properly definable (as a weak pullback) only when the LMPs are analytic [3,18]. On the other hand, LMP event bisimulations are cospans of surjections in the category of LMPs, which are definable without any need of the analyticity restriction [2].

We start with introducing the logic PPDL+ as an extension of PPDL. The idea is that, since L0 characterises LMP state bisimilarity (Proposition 2.3), we extend PPDL so that it can interpret L0 formulas as functions. In the grammar below, we point out which clauses are the same as in PPDL to emphasise the difference between the two logics. PPDL+ is defined as

We now develop the characterisation result for state bisimilarity. For the reminder of this subsection, we restrict ourselves to those LMPs (and PPDL models) whose state spaces are analytic. The notion of state bisimulation for PPDL models is defined as the extension of the same notion on the underlying LMPs, by taking the extra weight structure into account.

