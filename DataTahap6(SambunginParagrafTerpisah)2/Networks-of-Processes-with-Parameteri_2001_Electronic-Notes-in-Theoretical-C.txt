Networks with an a priori unknown number of nodes occur everywhere in prac- tice, e.g., processes running on a computer, machines in a token ring, a LAN or even the world wide web itself. Therefore, a lot of algorithms like mutual exclusion, leader election, group membership, or distributed memory algo- rithms are developed for such parameterized networks and they are expected to work properly for every concrete number of participants. Hence, although the problem is known to be undecidable (Apt and Kozen, [2]), there has been much interest in the veri cation of such protocols. Also, automated and semi- automated methods for the veri cation of restricted classes of parameterized networks have been developed.

nite subsets of the natural numbers and the transitions of the processes in the network are described in WS1S. Given a boolean abstraction relation in WS1S this allows to construct the abstract system automatically. The method was used to verify several parameterized protocols. With an additional marking algorithm and the lifting of fairness conditions ([4]) we were able to establish liveness properties for these protocols as well.

We illustrate our method using a typical example: a distributed shared memory protocol. The protocol has two parameters, the number of processes and the number of memory pages. In order to guarantee exclusive write and multiple read the processes have to know the actual access privileges of the other processes. We give a generic abstraction for this type of protocols in the framework of PVS and show how to analyze the abstract WS1S system using pax and SMV to prove safety and liveness properties of the protocol.

In case  A is nite, we call  nite abstraction relation. Let '; 'A be LTL formulae and let [[']] (resp. [['A]]) denote the set of models of ' (resp. ' ). Then, from S v S ,   1([[' ]])  [[']], and S j= ' we can conclude S j= '. This statement, which is called preservation result, shows the interest of veri cation by abstraction: since if SA is nite, it can automatically be checked whether SA j= 'A. In fact, a similar preservation result holds for any temporal logic without existential quanti cation over paths, e.g., 8CTL?, LTL, or 2 [7,8,21].

As already mentioned network protocols often handle data structures rang- ing over sets of processors in the network. As examples we listed shared mem- ory protocols such as the one described in Section 2 or group membership protocols. To illustrate how the idea to reduce the state space of each pro- cessor by introducing a global structure used by all processors can be applied to other protocols, let us consider a group membership protocol. Brie y, each processors keeps track which processors are still alive and vital part of the net- work. Due to continuous communication errors are detected and processors are removed from the membership-list of the well functioning processors. Two properties are of interest for those protocols; agreement, meaning that the well functioning processors agree on their membership-lists, and validity, meaning that an error will be detected eventually and then the membership-lists corre- sponds to the set of well functioning processors. We analyzed a synchronous group membership protocol by proving rst agreement deductively. Then, we could reduce the system by using a global membership-list maintained by the processors working properly.

De nition 3.1 Let S(N; P ) be a parameterized system with N processors and a second parameter P . Let the processors communicate over some message queues q1 ;::: ; qk where each message is of the form (i; msg; p) with i < N, p < P , and msg of some nite type M. The state space of each processor j is an array a[j][0::P  1] of size P and of nite type T .

To deal with liveness properties we need some assumptions about fairness. We call S(N; P ) weak fair if all transitions continuously enabled from a certain point in a computation are eventually taken. If moreover S(N; 1) never blocks a queue, i.e., messages in the queues are eventually consumed, we can deduce from Lemma 3.2:

Now, we observe that our reduced system is indeed strictly parameterized in P . Hence, we can get rid of the second parameter and are prepared to represent the resulting network in the framework of WS1S. Then, we use abstraction techniques explained in the next section to analyze it.

Terms of WS1S are built up from the constant 0 and 1st-order variables by applying the successor function suc(t) (\t + 1"). Atomic formulae are of the form b, t = t0, t < t0, t 2 X, where b is a boolean variable, t and t0 are terms, and X is a set variable (2nd-order variable). WS1S formulae are built up from atomic formulae by applying the boolean connectives as well as quanti cation over both 1st-order and 2nd-order variables.

