needs to be upgraded into a smart grid system, which is able to effectively and efficiently regulate the bi-directional energy flow and the interaction between the various devices on the grid. The electrical energy can flow to, or from the main grid, depending on the time of the day, weather condition and electricity prices. The algorithms which control different functions in a smart grid are complex and need to be studied through simulation before actual implementation to ensure proper operation in all scenarios.

In this paper we present a simulation model which describes the various elements within a smart grid such as user-demand, centralized and decentralized energy pro- duction, storage elements, etc. The final overall model simulates a smart grid at neighbourhood level involving several houses with a set of typical smart grid sce- narios. Each house can be fitted with solar panels, a battery and its individual demand profile. The model gives insight in how the energy flows within a house, and between the houses in the neighbourhood, and thus can help in smart grid design. Furthermore, due to the modular set-up of the model, the simulation model can be easily extended to incorporate other devices and scenarios.

The Anylogic software [8] is used for the design of the simulation model. The simulation methods supported are system dynamics, agent-based and discrete event. The programming and setup is done using graphical components along with code based on the JAVA language. The software used is flexible and allows for the implementation of the multiple simulation methods within the model. For the inner operation of the model system dynamics is used as it effectively describe the flow of energy through the various components. Each component is then represented as an agent which then allows them to interact and exchange data with each other, this is done using the agent-based approach within the program.

The rest of this paper is structured as follows. Section 2 describes the function- ality of the different model components. In Section 3 some simulation results of a number of example scenarios are given. In Section 4 a short overview of related work is given. Finally, we conclude in Section 5.

In the Demand module, the electricity demand profile of the house is defined. The profile gives the average power drawn over a given period of time, which may be dependent on the time of day and the day of year. Standardized demand profiles can be found on the internet, for example, EDSN [9] provides standard profiles for the Netherlands. With smart meters one could measure personalized demand profiles, in order to create fully customized simulations.

The Weather module provides the necessary weather data for computing the gen- erated renewable energy. Since the model, for now, is limited to solar panels only irradiation data is used. However, this can easily be extended to include wind speed data for wind generation. For locations in the Netherlands, the weather data is readily available via the Royal Netherlands Meteorological Institute (KNMI) [12]. It provides Global Horizontal Irradiance (GHI) data, which can be used for the computation of the generated solar energy. The GHI consists of the Direct Normal Irradiance and Diffuse Normal Irradiance [10], and is measured over a horizontal plane, 0 degree tilting.

Within the same simulation run the effects for the individual houses can be studied as well. The shown results are from a household of a family with 3 children, with house type A. All the shown results can easily be obtained for the other household types as well.

In [6], an overview is given of the features and the capability of a smart energy city, one of which is lower energy consumption. The advantages of a smart city are demonstrated using Anylogic. The model is based on Demand Response (DR). The author argues that the DR based system will reduce the overall energy consumption of a city because the peak demand level can be lowered. In addition to DR the model also employs load control to decrease the energy consumption even further. There

A smart grid simulation tool has been developed which can model residential units which have solar panels and batteries which are able to store excess energy. Differ- ent living situations are available for the residential unit to allow for a more diverse data set when scaling the model to neighbourhood level. The model is able to use statistical data from local meteorological sources to represent the weather patterns and influence the solar panel output power. With the combination of the various elements a vast amount of data can be gathered which shows the interactions be- tween the elements. Data can be gathered on both the financial level and the energy level which can be useful for both consumers and researchers.

The program was developed using the Anylogic simulation software which al- lowed for a flexible environment to implement the desired models. System dynamics and agent-based modelling were the methods primarily used in making the models. The agent-based approach allowed the residential units to be scalable and allow for multiple instances which adds diversity to the neighbourhood simulation.

The current model can be further expanded upon by incorporating other el- ements such as stationary electric vehicles as additional storage units, as well as other renewable sources. Algorithms can be implemented to study the behaviour in different scenarios, such as purchase/sell of power according to market price. Other algorithms could control the usage of the connected battery.

