 AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
2212-6716 ¬© 2012 Published by Elsevier Ltd. doi: 10.1016/j.aasri.2012.06.037 
 
2012 AASRI Conference on Computational Intelligence and Bioinformatics 
A Differential Evolutionary Algorithm for Flatness Error Evaluation 
Dong-Xia Wanga,*, Xiu-Lan Wena, Feng-Lin Wanga 
aAutomation Department, Nanjing Institute of Technology, Nanjing 211167, China 
* 
Abstract 
A differential evolutionary algorithm (DE) is proposed to implement the minimum zone evaluation of flatness errors. It is a heuristic evolutionary algorithm based on population optimiza tion. Compared with other methods, it is efficient and robust. Then, the objective function calculation approaches of planar error are developed, which directly originate from the definition of minimum zone solution and conform to the ISO standard. Finally, the experimental results evaluated by different methods confirm the effectiveness of the proposed DE . Compared to conventional evaluation methods, it has the advantages of algorithm simplicity and good flexibility.  
¬© 2012 Published by Elsevier B.V. Selection and/or peer review under responsibility of American Applied Science Research Institute  
Keywords: Intelligent Computation; Differential Evolutionary; Flatness Error; Minimum Zone Solution 
1. Introduction The plane feature is one of the most basic geometric primitives which contributes significantly to fundamental machinery parts to achieve intended functio nalities. Flatness error is of prime importance to 
‚Ä†quality and lifetime of mechanical products. In the curre nt industrial practice, standards are followed for representation and interpretation of geometric tolerances.  The ANSI Dimensioning and Tolerance Standard 
 
 
* Corresponding author. Tel.: +86 025 86118327. E-mail address: zdhxwdx@njit.edu.cn (D.-X. Wang).. 
 
AASRI
Procedia
www.elsevier.com/locate/procediaAvailable online at www.sciencedirect.com
Open access under CC BY-NC-ND license.
Open access under CC BY-NC-ND license.239  Dong-Xia Wang et al.  /  AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
gg gg ()
 Y14.5 [1] specifies that the form tolerances on a component must be evaluated with reference to an ideal geometric feature, ISO Standards [2] recommends the form  tolerance being evaluated based on the concept of minimum zone. As for the flatness tolerance, it can be defined as the least possible value of the normal distance between two parallel planes that enclose all measurement points. One of the most widely used techniques for geomet ric error evaluation is the least squares method (LSM) and. It is easy for implementation, efficient in comp utation, and commonly used in coordinate measuring machines (CMMs). However, the LSM does not guarantee  the minimum zone solution specified in the ISO standard and can result in overestimation of form tolerances and the rejection of good parts.  In order to obtain the minimum zone solution, Murthy and Abdin [3] proposed a simplex search technique. Fukuda and Shimokohbe [4] suggested a minimax approximation method, by which a subset of the measured points that defines a zone of the feature is sequentially replaced until the minimum zone is achieved. The nonlinear optimization is used by Wang [5], Kanada and Suzuki [6]. Weber et al. [7] proposed a unified linear approximation technique for use in evaluating the forms of straightness, flatness,circularity and cylindricity. Non-linear equation for each form was linearized using Taylor expansion, and then it was solved as a linear program. Zhu and Ding [8] established the equivalence between the width of a point set and the inner radius of the convex hull of the Minkowski difference between the point set and itself. The minimum zone tolerance was formulated as a linear programming problem. Hermann [9] proposed the algorithms based on techniques borrowed from computational geometry. The minimum zone association of flatness error evaluation is a non-convex problem, and it can be formulated as nonlinear optimal problem with complex constraint. Therefore, this evaluation method is virtually the optimization problem. Intelligent computations, such as the genetic algorithm (GA), improved genetic algorithm (IGA), hybrid optimization algorithm and particle swarm optimization technique, were used to solve the nonlinear problem of flatness evaluation[ 10-13]. Examples had proved that above methods were effective to compute the minimum zone flatness error, bu t to most methods above, some parameters need to be decided by experience in advance. This paper suggests the evaluation algorithm of roundness of a novel differential evolution (DE) algorithm to find the valu e of flatness error according to the minimum zone criterion. DE is another very effective intelligent co mputation method for solving optimization problems with non-convex and nonlinear characteristics as it does not require derivative information. DE for flatness error is a simple yet powerful optimizer with fewer parameters. The rest of this paper is organized as follows: The mathematical model of flatness error is presented in Section 2.The DE is developed in section 3. Examples are presented in section 4. Finally, conclusions are given in Section 5. 2. Mathematical model of flatness error evaluation Assuming P
i (xi, yi, zi) (i = 1, 2, . . ., n) is the measured pointextracted by measuring a plane part. A flatness tolerance specifiesa tolerance zone defined by two parallel planes within whichthe surface must lie [14]. If all extracted datapointsP
i (xi, yi, zi)are between two parallel planes, the minimum separation betweenthese two parallel planes is called the minimum zone solution(MZS) of flatness error. Assuming one of the two parallel planeequations of MZS is 
 (1) 
The distance d i from datapointsP i (xi, yi, zi) to the parallel plane is 
 (2) 240   Dong-Xia Wang et al.  /  AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
 The minimum separation f between these two parallel planes is 
 (3) 
Obviously, the minimum separation f is a function of (a, b). Consequently,evaluating the minimum zone flatness error is translatedinto searching the values of ( a, b), so that the separation f(a, b) isthe minimum and this minimum value is just the flatness error. Itis a non-linear optimization problem. 3. DE 3.1. DE ALGORITHM.  DE algorithm aims at evolving a population of NP D-dimensional parameter vectors, so-called individuals, which encode the candidate solutions, i.e. 
^`DG i G iiGx x X,1,, ," , i=1,‚Ä¶,NP, as a population for each generation G ,towards the global optimum. NP does not change during them initialization process. The initial vector populationis chosen randomly and should cover the entir e parameter space. As a rule, we will assume the initial population should better cover the entire search sp ace as much as possible by uniformly randomizing individuals within the search space constrained by the prescribed minimum and maximum parameter bounds 
^`Dx x Xmin1minmin, ,"  and^`Dx x Xmax1maxmax, ," .  3.2. Mutation Operation.  After initialization,DE employs the mutation operation to produce a mutant vector 
G iV, with respect to each individual 
G iX,, so-called target vector ,in the current population. For each target vector G iX, at the generation G, its associated mutant vector 
^` ,,...,,,2,1, ,DG i G i G i G iv v v V can be generated via certain mutation strategy. For example, the five most frequently used mutation st rategies implemented in the DE codes are following: ‚ÄúDE/rand/1‚Äù, ‚ÄúDE/best/1‚Äù, ‚ÄúDE/rand-to-best/1‚Äù, ‚ÄúDE/best/2‚Äù, ‚ÄúDE/rand/2‚Äù [15] . 3.3. Crossover Operation.  After the mutation phase, crossover operation is applied to each pair of the target vector 
G iX, and its corresponding mutant vector 
G iV, to generate a trial vector: '* L* L * L * LX X X 8 . In the basic version, DE employs the binomial (uniform) crossover defined as follows:
 
¬Ø¬Æ¬≠ d otherwisexj jorCRrandifvujG irand jjG ijG i,) ( ) ] 1 , 0 [ ( ,,,,,j=1,2,‚Ä¶,D  (4) 
In (4),the crossover rate CR is a user-specified constant within the range[0,1], which controls the fraction of parameter value copied from the mutant vector. 
randj is a randomly chosen integer in the range[1,D]. The binomial crossover operator copies the jth parameter of the mutant vector 
G iV, to the corresponding element in the trial vector
,iGU, if rand j[0,1]‚â§CR, orrandjj . Otherwise, it is copied from the corresponding target vector 
G iX,. There exists another exponential crossover operator, in which the parameters of trial vector ,iGU are inherited from the corresponding mutant vector 
G iV,starting from a randomly chosen parameterindex till the first time rand
j[0,1]ÀöCR. The remaining parameters of trial vector ,iGU are copied from the corresponding target vector 
G iX,. The condition randjj  is introduced to ensure that the trial vector ,iGU will differ from its corresponding target vector 
G iX, by at least one parameter.  241  Dong-Xia Wang et al.  /  AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
gg gg ()
 3.4. Selection Operation If the values of some parameters of a newly genera ted trial vector exceed the corresponding upper and lower bounds, we randomly and uniformly reinitialize them  within the prespecified range. Then the objective function values of all trial vectors are evaluated. After th at, a selection operation is performed. The objective function value of each trial vector
,iGfU  is compared to that of its corresponding target vector ,iGfX  in the current population. If the trial vector has less or equ al objective function value than the corresponding target vector, the trial vector will replace the target vector an d enter the population of the next generation. Otherwise, the target vector will remain in the population for th e next generation. The selection operation can be expressed as follows: 
¬Ø¬Æ¬≠d otherwiseXX f UiffUX G iG iG iG ijG i,) ( ) ( ,,,,,, (5) 
The above 3 steps are repeated generation after ge neration until some specific termination criteria are satisfied.  3.5. DE for flatness error evaluation.  Input: Parameters of the algorithm for flatness error evaluation. Step1. Creating initial population Set the generation number G=0, 
^`GNPGGX X P,, 1, ,"  , and^`DG i G i G ix x X,1, ,, ," , i =1,2,‚Ä¶,NP Step 2. Evaluate P
G=0 and let the generation counter t =0 . Step 3. While (the stopping criterion is not satisfied) do {For each individual 
,,...,2 , 1 ,, NPi Xt G i   its offspring1 ,  t G i X  is generated by mutation, crossover and selection operations. Evaluate
1  t GP  and let 1  t t. } End While Output: The best solution
t Gbest X ,, the objective function ffrom t GP . 4. Practical examples In this study, the strategy ‚ÄúDE/best/1 is selected as the be st performance from candidate mutation strategies and we use the following parameter values: D=2; the population size NP=10*D, the scale factor F =0.85 and the crossover probability CR=0.9.Using the DE to evaluate flatness error, the termination condition is set the maximum iteration 100.For comparative purpose, twotypical examples available are selected. Example 1.The sampling data is available in literature [11]. The results are tabulated in Table 1.From Table 1 it is observed that the flatness error of LSC and IGA are 0.0219 and 0.01839, respectively in literature[11], and the flatness error obtained by canonical GA with elitist selection (EGA) are 0.02161,While the flatness error obtained by the DE is 0.01838. It is well in agreement with the literature [11].   Example 2. The measurement data from the plane surface are given in literature [8]. The results are tabulated in Table 2. It is observed that the flatness error of LSC is 0.00303, and the results obtained by the optimization procedure in literature [8] is 0.002627, an d the results obtained by the EGA are 0.002739, while the flatness error obtained by the DE is 0.002627. It is well in agreement with the literature [8]. 
Table1 Evaluation results of data Example 1 242   Dong-Xia Wang et al.  /  AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
 Calculation method LSM EGA Literature [11] DE 
Flatness error(mm) 0.0219 0.02161 0.01839 0.01838 
Table2 Evaluation results of data Example 2 
Calculation method LSM EGA Literature [8] DE 
Flatness error(mm) 0.00303 0.002739 0.002627 0.002627 
 In the EGA, the population was set 40, the possibilities of crossover and mutation was set 0.90 and 0.20, respectively, and the maximum iteration was 200. The presented method for two examples not only provided a more accurate and stable solution, but also it took les s time than EGA. Figs.1-2 showed the searching processes of the minimum zone flatness error of two examples. 
0 20 40 60 80 100 120 140 160 180 20000.020.040.060.080.10.120.140.160.18
GenerationsFlatness error
  DE
EGA
 
Fig. 1. Optimizing process of Example 1. byEGA and DE 
0 20 40 60 80 100 120 140 160 180 2002345678910x 10-3
GenerationsFlatness error
  DE
EGA
 
Fig. 2. Optimizing process of Example2. byEGA and DE 243  Dong-Xia Wang et al.  /  AASRI Procedia   1  ( 2012 )  238 ‚Äì 243 
gg gg ()
 5. Conclusions In this paper, an effective DE is presented to implement the flatness error evaluation of minimum zone method. The objective function mathematical model of minimum zone method is formulated and the initial population generated methods is given. Compared with conventional evaluation methods, the proposed algorithm has the advantages of algorithm simplicity and good Ô¨Çexibility. The typical practical examples are representative in industrial application and their results veri Ô¨Åed that the proposed method could search the optimal solution efÔ¨Åciently. And it is well suited for form error evaluation in CMMs. Acknowledgements The research was supported by National Natural S cience Foundation of China under Grant No. 51075198 and Innovation  Foundation of Nanjing Institute of Technologyunder Grant No.CKJ2011004. References 
[1]ANSI Standard Y14.5. Dimensioning and tolerancing. New York: The American Society of Engineers, 1982.  
[2]Technical Drawings‚ÄîGeometrical Tolerancing. ISO/R1101, 1983. [3] Murthy TSR,AbdinSZ.Minimum zone evaluation of surfaces.International Journal of Machine Tools Design and Research 1980;20:123‚Äì36. [4]Fukuda M, Shimokohbe A. Algorithms for form error evaluation ‚Äîmethods of minimum zone and the least squares. In: Proceedings of the International Symposium on Metrology and Quality Control in Production, Tokyo, 1984. p. 197‚Äì202.  [5]Y . Wang Minimum zone evaluation of form tolerancesManufacturing Review, 5 (3) (1992), pp. 213 ‚Äì220 [6]T. Kanada, S. Suzuki Evaluation of minimum zone flatness by means of non-linear optimization technique and its verification .Precision Engineering, 15 (2) (1993), pp. 93 ‚Äì99  [7] Weber T, Motavalli S, FallahiB, Cheraghi H. A unified approach to form error evaluation. Precision Engineering 2002;26:269‚Äì78. [8] XiangyangZhu,HanDing.Flatness tolerance evaluation:an approximate minimum zone solution. Computer-Aided DesignV olume 34, Issue 9, August 2002, Pages 655 ‚Äì664 [9] Hermann G. Robust convex hull-based algorithm for straightness and flatness determination in coordinate measuring.ActaPolytechnicaHungarica 2007,4:111 ‚Äì20. 
[10]Hsien-Yu Tseng.A genetic algorithm for assessing flatness in automated manufacturing systems.Journal of 
Intelligent Manufacturing, 2006, V olume 17, Number 3, Pages 301-306 [11]Xiu-Lan Wen, Xiao-Chun Zhu, Yi-Bing Zhao, et al. Flatness error evaluation and verification based on new generation geometrical product specification (GPS) [12]KeZhang.Study on Minimum Zone Evaluation of Flatness Errors Based on a Hybrid Chaos Optimization Algorithm.Lecture Notes in Computer Scienc e,2009,V olume 5754,Emerging Intelligent Computing Technology and Applications, Pages 193-200 [13]YU Xiao,HUANG Mei fa,Flatness Error Evaluation of the New Generation of GPS Basedon an Improved Particle Swarm Optimization, MICROELECTRONICS & COMPUTER, April 2010, V ol. 27 No. 4 [14] ISO/TS 12781-2:2003,Geometrical product specificatio ns (GPS)-Flatness-Part 2:Specification operators. [15] R. G√§mperle,S.D.M√ºller,andP.Koumoutsakos,A parameter study for differential evolution,in Advances in Intelligent Systems,FuzzySystems,Evolutionary Computation,Interlaken,Switzerland:WSEAS Press, 2002, pp. 293~298. 