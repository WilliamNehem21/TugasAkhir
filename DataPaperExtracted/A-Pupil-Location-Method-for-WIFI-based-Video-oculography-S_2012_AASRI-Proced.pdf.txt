 AASRI Procedia   1  ( 2012 )  389 â€“ 393 
2212-6716 Â© 2012 Published by Elsevier Ltd. doi: 10.1016/j.aasri.2012.06.060 
2012 AASRI Conference on Computational Intelligence and Bioinformatics   
A Pupil Location Method for WIFI-based Video-oculography System
Xuejun Chena,*, Wenfang Li a,a*
aDepartment of Electronic Engineering, Putian University, Putian 351100, China 
Abstract 
Video-oculography (VOG) is one of eye movement measurement methods. A key problem of VOG is to accurately estimate the pupil center. Then a pupil location method based on morphology and Canny algorithm was proposed for a WIFI-based VOG system which was developed our latest work. Moreover, a healthy volunteer was introduced to do sinusoidal tracking test to evaluate the pupil location method. Experimental results showed that the method could well trace eye movement and meet the anticipated results with stimulation. 
2012 Published by Elsevier B.V. Selection and/or  peer review under responsibility of American Applied Science Research Institute 
Keywords: Video-oculography (VOG), Canny, morphology, Pupil, Location; 
1. Introduction There is a common saying that eyes are â€˜windows to our soulâ€™. In fact, eyes are the main â€˜interfaceâ€™ between environment and human brain. Therefore, research on the eye, not only helps to understand the many laws of mental activity, but also to the clinical diagnosis of the eye. With the development of eye movement research, until now a lot of different methods for measuring eye movements have been developed. They include Electro-oculography (EOG) [1], magnetic search coil [2], Infrared corneal reflection oculography (IROG) [3], Video-oculography (VOG) [4-5] and other methods. 
* Corresponding author. Tel.& fax: +086-0594-2696450. E-mail address: cxjnet@126.com. 
AASRI
Procedia
www.elsevier.com/locate/procediaAvailable online at www.sciencedirect.com
Open access under CC BY-NC-ND license.
Open access under CC BY-NC-ND license.390   Xuejun Chen and Wenfang Li  /  AASRI Procedia   1  ( 2012 )  389 â€“ 393 
VOG is one of the most popular methods and becoming more and more attractive, due to high accuracy, insignificant artifacts, non-invasiveness, and freedom of head movement [6]. VOG analysis is based on eye movement tracing. A key problem of VOG is to accurately estimate the pupil center. Therefore, the purpose of this study is (i) to present an analysis system based on WIFI for nystagmus which we have developed, and (ii) a pupil location method based on morphology and Canny algorithm was proposed, and then (iii) experiment was done to evaluate the method. 2. System 
Fig. 1. (a) first picture; (b) second picture 
The WIFI-based VOG system is shown in Fig. 1. The system consists of a helmet, Wireless router and a nystagmus measuring system. The helmet is used as video transmission server, which acquire videos of pupil movement and transmitted them to the wireless network through the WIFI communication module. Wireless router was used as an access point (AP). It connects with nystagmus measuring system. If there are not any routers in the LAN or WLAN, the USB-router would be directly put into nystagmus measuring system as an AP. The video signals through wireless network would be received and decompressed by nystagmus measuring system. Users can analyze the pupil videos and send the controller signals to the helmet with nystagmus analysis software. 3. Pupil location method  Pupil center localization is crucial for the performan ce of VOG analysis system. It aims to find the coordinates of pupil center. Then eye movements can be obtained by fitting the coordinates of pupil center. The proposed pupil localization algorithm includes three steps, morphology processing, Canny edge detecting and calculating coordinates of pupil ce nter. The algorithm flow chart of pupil center localization and tracing is shown in Fig. 2. 
Fig. 2. Algorithm flow chart of Pupil center tracing 391  Xuejun Chen and Wenfang Li  /  AASRI Procedia   1  ( 2012 )  389 â€“ 393 
3.1. Morphology processing After the original image of pupil has been processed to binarization image, mathematical morphology was used to adaptively process the structuring elements for pu pil extraction in binarization image. Among the operation of mathematical morphology, erosion and dilation is the base of other complicated operationsâ€™ implementation. Erosion is a transforma tion of shrinking, which decreases the grey-scale value of the image, while dilation is a transformati on of expanding, which increases the grey-scale value of the image. In order to obtain more obvious pupil area from binarization image, we use closing and opening operation to denoise the binarization image and detect edge of pupil area. Let F(x,y) denote a binarization image, and B denote structuring element. Opening and closing of F(x,y) by B are denoted respectively by equation (1) and (2)[7-8]. F
Ç„B= (FÂ‘B)Í°B                                                                                                                         (1) F
gB= (FÍ°B)Â‘%                                                                                                                         (2) Opening is erosion followed by dilation and closi ng is dilation followed by erosion. Opening can smooth the contour of the binarization image and br eak narrow gaps. As opposed to opening, closing tends to fuse narrow breaks, eliminates small holes, and fills gaps in the contours.  A frame image of pupil videos is shown in Fig.3 (a), and Fig.3 (b) was its binarization image. When the binarization image was processed by closing and opening, the results were shown in Fig.3 (c) and (d) respectively. Fig.3 (d) shows that there are three connected regions, but their sizes are different. In order to gain pupil region, median filter and connected region processing were used for Fig.3 (d), and Fig.3 (e) show the processing result. Only was one biggest co nnected region obtained, which is pupil. Then next step is to get coordinates of pupil center. 
(a)                            (b)                                  (c)                          (d)                           (e) 
Fig.3  Image of pupil video preprocessing.(a )Original image;(b) binarization image;( c) binarization image after closing; (d) binarization image after opening; (e) binarization image after median filter and connected region processing; 
3.2. Canny edge detecting  First of all to get boundaries of pupil from Fig.3 (e), an algorithm based on Canny was used to detect edge of pupil. Canny brought out the rule that  excellent edge-detection method in [1986]. Canny generalized three criteria to evaluate an edge detector: good detectionÇƒgood localization and only one response to a single edge. Good detection is that the signal-to-noise ratio (SNR) should be as high as possible. Good localization is that the detected edge-point sho uld be at the center of real edge to its best possibility. And only one response to a single edge means that the detector should not produce multiple maxima [8].  Following the three criteria, we present an edge detecting algorithm based on Canny. The course of the algorithm by canny operator includes lowpass filtering with Gauss function, calculating the value and 392   Xuejun Chen and Wenfang Li  /  AASRI Procedia   1  ( 2012 )  389 â€“ 393 
direction of grads, non-maxima suppression to grad value and checking and connecting edges. Let f(x,y) denote the binarization image of  Fig.3 (e). The steps are as follows [8-10]: Ä·The row and column of f(x,y) were convolved with 1D Gaussian 
22
221()2x
gx eV
SV
 Â˜  and 
22
221()2y
gy eV
SV
 Â˜ respectively to smooth the image and eliminate image noise.Â³is the parameter of Gauss filter and control the extend of smoothing image. Ä¸To obtain grads vector, the results of Ä· were processed by 
222
2 22 (, )xydxxgx y eV
SV Â˜ and 
222
2 22 (, )xydyygx y eV
SV Â˜ respectively, and the value and direction of grads were calculated.Ä¹Non-maxima suppression (NMS) was used to process the value of grads. Traversing the processed image domain, 8-neighborhood of each pixel was divide d into four quadrants according to the gradient direction. Then 8-neighborhood was divided into two cases along the 45 degrees of gradient direction. That is, Gray value of each pixel was compared to the two pixels of its neighbor along the gradient direction. If the former is smaller, then set the pixel value is 0, that is, not the edges. ÄºDouble-threshold method was adapted to get edges. After the binarization image of Fig.3 (e) was processed by the proposed algorithm, the edge contour of pupil would be obtained and shown in Fig.4 (a). Then  Hough transform is applied to the edge contour for obtaining the parameters of the pupil circle. Fig. 4(b) gives edge contour of pupil and fine localization of the pupil center. Finally, the coordinates of the pupil of each frame images were fitted and the pupil movement tracking were obtained. 
(a)                             (b) 
Fig.4 Canny algorithm preprocessing of Fig. 3 (e). (a)the results of Canny algorithm preprocessing;(b) pupil center location. 
Fig.5 The pupil tracing of a healthy vol unteer for sinusoidal tracking test  393  Xuejun Chen and Wenfang Li  /  AASRI Procedia   1  ( 2012 )  389 â€“ 393 
4. ExperimentA healthy volunteer without any history of vertigo, disequilibrium and nerve participated in the study. The volunteer was introduced to do sinusoidal tracking test. A sampling rate of 25 frames/s was employed for the WIFI-based VOG system. The system genera ted sinusoidal tracking eye movements with the proposed pupil location method, when the light dot wa s moved horizontally like a pendulum from left to right and vice versa. The velocity of the light dot varied along with two mixed sine waves in order to create unpredictable tracking movements for subjects. The pup il location tracing was shown in Fig.5. Fig.5 shows that horizontal eye movement was sawtooth waves and vertical eye movement was sine waves for the healthy volunteer. Thy met the anticipated results. 5. Conclusions  Authors presented a WIFI-based Video-oculography system. Then a pupil location method based on morphology and Canny algorithm was proposed and used for the system. A healthy volunteer was introduced to do sinusoidal tracking test to verify the pupil location method for WIFI-based VOG system. The results show that this method can well meet the anticipated results.  The future work, we will use the system and method to gather every kind of eye movement signals of patients and analyze the characteristic of eye movements. Acknowledgements This work is supported by the Fundamental Research Funds for Universities in FujianË„JK2011049Ë….References [1] E Marg. Development of electro-oculography. A. M. A. Arch. Ophthalmol 1951; 45:169-185. [2] DA Robinson. A method  of measuring  eye  movem ent using  a scleral search  coil  in  a  magnetic  field. IEEE Biomed Eng. 1963;10:137-145. [3] F. Traisk,R. Bolzani,J. Ygge. A comparison between the magnetic scleral search coil and infrared reflection methods for saccadic eye movement analys is. Graefeâ€™s Arch Clin Exp Ophthalmol 2005;243:791-797. [4] H.D. Schworm, J. Ygge, T. Pansell, and G. Le nnerstrand. Assessment of Ocular Counterroll during Head Tilt Using Binocular Video Oculography. Investigative Ophthalmology & Visual Science 2002;43:662-667. [5] J.N. van der Geest, M.A. Frens. Recording eye m ovements with video-oculography and scleral search coils: a direct comparison of two methods. Journal of Neuroscience Methods 2002;114:185-195. [6] C.S. Lin, L.W. Lue, M.S. Yeh, T.S. Hwang, S.H. Lee. A new image processing method for evaluating the pupillary responses in a HMD-type eye-tracking device. Optics & Laser Technology 2003; 35:505-515. [7] J.S.J. Lee, R.M. Haralick, and L.G. Shapiro. Morphological Edge Detection. IEEE J. Robot. Automat 1987;3:142-157. [8] J. Canny. A Computational Approach to Edge Detection. IEEE Trans. Pattern Analysis and Machine Intelligence 1986;8:679-698. [9] W. McIlhagga. The Canny Edge Detector Revisited. Int J Comput Vis 2011; 91:251-261. [10] P. Bao, L. Zhang, and X. Wu. Canny Edge Det ection Enhancement by Scale Multiplication. IEEE Trans.Pattern Analysis and Machine Intelligence 2005;27:1485-1490. 