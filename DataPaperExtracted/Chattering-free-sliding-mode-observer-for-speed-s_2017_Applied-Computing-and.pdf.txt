ORIGINAL ARTICLE
Chattering-free sliding mode observer for speedsensorless control of PMSM
Mahmoud M. Gaballah*, Mohammad El Bardini, Mohammad Sharaf
Dept. of Industrial Electronics & Control Engineering, Faculty of Electronic Engineering, Minuﬁya University, 32852, EgyptReceived 23 June 2016; revised 18 November 2016; accepted 21 December 2016Available online 31 December 2016
KEYWORDSPMSM;Sensorless control;Fuzzy logic AbstractThis article presents a new speed observer based on fuzzy logic for speed sensorlesscontrol applications of permanent magnet synchronous motor ‘‘PMSM ”. The switch function in traditional Sliding Mode Observer ‘‘SMO ”is replaced by a rule based fuzzy logic system. The pro- posed observer not only improves the system dynamic performance during disturbances or param-eter variations, but also has a high accuracy tracking performance with sufﬁcient chatteringreduction. The validity of the new observer corroborated through experimental results usingTMS320F28069M Digital Signal Processor ‘‘DSP ”.
/C2112016 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University. This isan open access article under the CC BY-NC-ND license ( http://creativecommons.org/licenses/by-nc-nd/4.0/ ).
1. IntroductionPermanent Magnet Synchronous Machine ‘‘PMSM ”become a good choice in servo drives, and is on the way to step besideinduction machines in traction applications. TraditionalPMSM drives employ position sensors to measure the speed,and rotor angular position. These sensors present severaldisadvantages, such as reduced reliability, susceptibility tonoise, additional cost and weight and increased complexityof the drive system. Recently, there has been much interestin developing a sensorless algorithms in which the motor wascontrolled using the estimated values of the angular speed ofthe rotor[1,2].Several methods have been developed to estimate the rotorspeed or position, and among them are Flux Linkage Observer‘‘FLO”, Extended Kalman Filter ‘‘EKF”based observer, andSliding Mode Observer ‘‘SMO”. The latter has a fast response,good robustness for external disturbances, and machineparameter variations[3,4]. The SMO uses a sliding mode vari-able structure in the control loop to compensate the parametricuncertainties keeping the observer independent of theunknown signals during the sliding motion with a stabledynamic error[5,6]. The estimated values in an ordinarySMO contain high frequency oscillation components becauseof the discrete switch control. The switch function is criticalto the observer performance and it allows appearing the chat-tering phenomenon that can excite high frequencies which isn’tdesirable in high performance speed drives [7,8]. Several solutions are proposed to make a trade-off between chatteringphenomenon reduction, and observer robustness. In [9–11]a ﬁrst order and second order SMO proposed, the chatteringphenomenon reduced but low pass ﬁlter causes unavoidable
*Corresponding author at: Sigma Electronic Industries, Cairo, Egypt.E-mail addresses:Mahmoud.Gaballah1@gmail.com(M.M. Gabal- lah),dralbardini@ieee.org(M. El Bardini),mohamed.sharaf@el-eng. menoﬁa.edu.eg(M. Sharaf).Peer review under responsibility of King Saud University.
Production and hosting by ElsevierApplied Computing and Informatics (2017) 13, 169–174
Saudi Computer Society, King Saud University
Applied Computing and Informatics
(http://computer.org.sa)www.ksu.edu.sawww.sciencedirect.com
http://dx.doi.org/10.1016/j.aci.2016.12.0022210-8327/C2112016 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University.This is an open access article under the CC BY-NC-ND license ( http://creativecommons.org/licenses/by-nc-nd/4.0/ ).and unpredictable time delays in the estimated values whichneed a compensation technique. In[12], the ordinary switchfunction replaced with the sigmoid function, low-pass ﬁlteravoided but there is a tracking error. In[13]a higher-order sliding mode ‘‘HOSM”observer presented, the estimationaccuracy improved, but selecting sliding mode gains andboundary layer are difﬁcult as they are dependent on the rotorspeed. Other algorithms such as artiﬁcial neural network [14] and artiﬁcial intelligence (AI) methods[15], can achieve highperformance, but they are relatively complicated and requirelarge computational time.This paper introduces a new Fuzzy Sliding Mode Observer(FSMO) in which the switch function in traditional SlidingMode Observer ‘‘SMO”was replaced by a rule based FuzzyLogic System ‘‘FLS”. The proposed observer not only ensuresthe robustness for various disturbances, but also improves thedynamic performance. The observer was experimentally testedout on a TMS320F28069M DSP Controller, and experimentalresults were introduced to validate the proposed observercovering digital implementation cost, position estimation accu-racy, and speed response.2. Motor model and sliding mode observerBased on these assumptions the motor appears to be orbecomes unsaturated; all the stator resistance, self- and mutualinductances for each phase are the same, neglecting the ironlosses. The PMSM model in the stationary reference frame isdescribed by the following equations[16]:L
sðpiaÞ¼/C0R sia/C0eaþV a
LsðpibÞ¼/C0R sib/C0ebþV b( ð1Þwheree
a¼/C0wfxrsinhe
b¼/C0wfxrcosh( ð2ÞTo observe the EMF components, the sliding mode observer isdesigned as follows[17,18]:L
sðp^iaÞ¼/C0R s^iaþV a/C0ksgnð^i a/C0iaÞL
sðp^ibÞ¼/C0R s^ibþV b/C0ksgnð^i b/C0ibÞ/C26 ð3ÞwheresgnðxÞ¼1i fx>0/C01i fx<0/C26 ð4Þ Subtracting Eq.(1)from Eq.(3),V
acancel V b, and the error equations will be the following:L
sðp~iaÞ¼/C0R s~iaþea/C0ksgnð/C22i aÞL
sðp~ibÞ¼/C0R s~ibþeb/C0ksgnð/C22i bÞ/C26 ð5ÞTo guarantee the observer convergence based on lyapunov’direct theory, the observer gain ‘‘k”should be[11]: k>maxðjeajjebjÞ ð 6Þ Once the system reaches the sliding surface, then:/C22i¼~i
a~ib ½/C138T¼0p/C22i¼p~i
ap~ib ½/C138T¼0( ð7ÞSubstituting Eq.(7)in Eq.(5), the back EMF can be obtainedas follows:0¼0þe
a/C0ksgnð/C22i aÞ0¼0þe
b/C0ksgnð/C22i bÞ/C26;ea¼ksgnð/C22i aÞe
b¼ksgnð/C22i bÞ/C26ð8Þ The back EMF in Eq.(8)usually contain high frequency com-ponents[19]. To relieve this noise a low pass ﬁlter applied:pð^e
aÞ¼/C0x 0^eaþx 0ea
pð^ebÞ¼/C0x 0^ebþx 0eb/C26 ð9Þ wherex
0¼2pf0, andf0is the cut-off frequency of the ﬁlter.Finally the rotor position, and rotor speed can be calcu-lated as follows:^h¼arctan/C0
^ea
^eb/C16/C17^x
r¼p^h8<: ð10Þ3. Design of fuzzy sliding mode observer (FSMO)The idea behind SMO is to select the switching gain so the slid-ing function ’’ksgnð/C22iÞ’’ compensate the parametric uncertain-ties keeping the observer independent of the unknownsignals during the sliding motion insuring a stable dynamicerror[5,6]. The discontinuous sign function in Eq.(4)is critical to the observer performance and needs fast switching ofmotion states, which will cause chattering[20,21]. To eliminate the chattering phenomenon in classical SMO, the ﬁxed numer-ical values of the switching function are replaced by linguisticvariables, and the switching function is calculated throughfuzzy logic system. The new Fuzzy SMO ‘‘FSMO ”will have the robustness property of SMO with sufﬁcient chatteringreduction via Fuzzy Logic System ‘‘FLS ”. The FSMO blockdiagram is depicted inFig. 1, and built as follows:L
sðp^iaÞ¼/C0R s^iaþV a/C0kF s
Lsðp^ibÞ¼/C0R s^ibþV b/C0kF s/C26 ð11Þwhere F
s¼FSMOð/C22i;p/C22iÞð12Þ The proposed FSMO will have 49 if-then rule base, two inputvariables½/C22i;andp/C22i/C138which deﬁne the current error and its rateNomenclaturep;PIderivative operator, proportional integralV
a;Vbvoltages in stationary reference framei
a;ib measured currents in stationary reference frame^i
a;^ib estimated currents in stationary reference frame/C22iestimation error in current signale
a;eb EMFs in stationary reference frameRs;Lsphase resistance and Phase inductancew
f ﬂux linkagex
r angle speed of the rotorhposition of the rotorkobserver gain170 M.M. Gaballah et al.of change, respectively, and one crisp output ðF sÞ. All fuzzy variables have the same universe of discourse [ /C01 to 1], and been divided into seven fuzzy sets (A0, A1, A2, A3, A4, A5,and A6) and (B0, B1, B2, B3, B4, B5, and B6) for the inputvariables, and (NB = negative big, NM = negative medium,NS = negative small, ZE = zero, PS = positive small,PM = positive medium, and PB = positive big) for the outputvariable. Membership functions are chosen in the form of sym-metrical triangular as inFig. 2.The output fuzzy ‘Fs’ set is normalized in the interval[/C01,1] therefore, F
s¼jFSMOð/C22i;p/C22iÞj61. A simple fuzzy ruletable is constructed considering the following reaching andstability requirements;1. Whenð/C22i/C3p/C22iÞbecomes a positive value, the membershipfunction of F
sis set in such a way that its sign becomes sim-ilar to that ofð/C22iÞand therefore,/C22i/C3F
s60.2. Whenð/C22i/C3p/C22iÞis a negative value, the reaching conditionwould be satisﬁed automatically. In this case, the member-ship function of F
scould be changed with negative or evenpositive sign to enhance the tracking performance.Regarding seven membership functions for each input vari-able of the fuzzy rule base, 49 if-then rules of Fig. 2areobtained using expert engineering knowledge in the navigationﬁeld and satisfying the above-mentioned stability and reachingconditions. The FLS output is calculated based on singletonfuzziﬁcation strategy, center-average defuzziﬁcation and pro-duct inference. At each input values the FLC gives an outputsignal corresponds to the increase or decrease in sliding func-tion (Fs) to satisfy the dynamic stability of the observer.4. Experimental setupTo assess the performance and the robustness of the proposedobserver, ﬁeld oriented control strategy was applied to anexperimental DSP-based PMSM drive apparatus. The blockdiagram of the experimental setup is shown in Fig. 3. It consists of power inverter, PMSM with parameters shown in Table 1 and loading arrangement, voltage and current sensing circuits,and ﬂoating point TMS320F28069M digital controller.The controller running clock and Pulse Width Modulation‘‘PWM”switching frequency are 50 MHz and 10 kHz, respec-tively. To avoid the switching harmonics in the samples phasecurrents, the sampling frequency is selected as 10 kHz for thecurrent control loops and 1 kHz for the speed control loop.Two PI controllers are used for current, and speed control
Fig. 2Input MFs, and Rule base of FSMO Algorithm.
Fig. 1Block diagram of FSMO.Speed sensorless control of PMSM 171loop, and the tuning process of controller constants is designedto get a bandwidth of 400 HZ, and 40 HZ respectively. Theresultant PI controller constants are K
P=1 0/C04,K i= 0.97 for current controllers, and K
P= 167.32, K i= 28.58 for the speed controller.5. Experimental resultsSeveral tests have been carried out to verify the correctness androbustness of the proposed observer.Test 1: Speed step increase
sreference from 10% to 100% of
rated speed with constant load; this test examine the steady-state performance of the proposed observer at low and high-speed, comparing its performance with the traditional SMO.Figs. 4, and5shows the experimental results for traditionalSMO, and the proposed observer respectively.The actual and estimated rotor speed for traditional SMOis shown inFig. 4a, whileFig. 4b, and c shows the waveformsof the actual and estimated rotor positions obtained for tradi-tional SMO respectively. The rotor position error is shown inFig. 4d. The average steady-state speed error is (300/4000 =7.5%) at 4000 rpm, and (55/400 = 13.7%) at 400 rpm.The actual and estimated rotor speed for FSMO is shown inFig. 5a, whileFig. 5b and c shows the waveforms of the actualand estimated rotor positions obtained for FSMO respectively.The rotor position error is shown inFig. 5d. The average steady-state speed error is (50/4000 = /C01.25%) at 4000 rpm,and (10/400 = 2.5%) at 400 rpm. It can be observed that theFSMO is accurate with sufﬁcient chattering reduction com-pared with traditional SMO.Test 2: The speed response to bipolar command from 400 rpm
to/C0400 rpm with constant load ; this test examines theperformance of the proposed observer at low speed bipolarcommand. The bipolar speed command is a square waveformwith a half cycle of 2.5 s and bipolar references ±400 rpm.Fig. 5shows the waveforms of the actual and estimated rotor
Fig. 3Sensorless PMSM ﬁeld-oriented control algorithm block diagram.
Table 1Parameters of the appliedPMSM motor.
Rated speed 4000 rpmRated torque 0.125 N mMaximum voltage 24 V DCMaximum current 5 AStator resistance 0.39XStator inductance 0.69 mHInertia 48 g cm
2
Torque constant 0.0355 N m/APole pairs 4
Actual speedEs/g415mated speed(a) Actual and es/g415mated rotor speed (KRPM)
(b) Actual rotor posi/g415on (degree)
(c) Es/g415mated rotor posi/g415on (degree)
(d) Rotor posi/g415on error (degree)
Time (sec)
Time (sec)
Time (sec)
Time (sec) 0.2 0.4 0.60.8 1.01.2 1.4 1.60246[200 ms / div]
-180-9090180
-180-9090180
-20020Actual speedEs/g415mated speed(a) Actual and es/g415mated rotor speed (KRPM)
(b) Actual rotor posi/g415on (degree)
(c) Es/g415mated rotor posi/g415on (degree)
(d) Rotor posi/g415on error (degree)
Time (sec)
Time (sec)
Time (sec)
Time (sec) 0.2 0.4 0.60.8 1.01.2 1.4 1.60246[200 ms / div]
-180-9090180
-180-9090180
-20020
Fig. 4Traditional SMO speed response and rotor positionwaveforms at speed step reference from 400 to 4000 rpm.172 M.M. Gaballah et al.speed, actual and estimated rotor positions, and the rotor posi-tion error respectively. It can be observed that the estimatedspeed approaches the real value and responds correctly to thebipolar command. The dynamic response seems satisfactory.Test 3: Observer robustness to motor parameter
variation; the body temperature of a running motor increases because ofthe core loss, copper loss and mechanical frictions. As a result,the stator winding resistances increase. The main purpose ofthis test was to examine the robustness of the proposed obser-ver in case of doubling the motor resistance. This test was doneby connecting 1Xresistor in series with the stator winding,and a speed step reference from 400 rpm to 4000 rpm.Fig. 6shows the waveforms of the actual and estimatedrotor speed, actual and estimated rotor positions, and therotor position error respectively. Although position estimationerror exists, it is very small because of high rotating speed. Inthis case, about 55 rpm speed estimation errors appear at tran-sient time. But they converge to zero very quickly. Test resultsprove the good performance of the proposed observer, despiteof the variations of stator resistance, in the speed range from10% of rated speed to full one (seeFig. 7).6. ConclusionA new efﬁcient fuzzy based SMO algorithm for sensorless vec-tor control of PMSM was introduced. The chattering reduc-tion is achieved by using linguistic variables, and theswitching function is calculated through fuzzy logic system.The proposed algorithm is successfully implemented on aDSP controller, and the performance is compared to the tradi-tional SMO. Experimental results prove that the proposedFSMO has sufﬁcient chattering reduction along with a goodestimation accuracy, and high immunity to the motorparameter’s variations. In future work, a research is suggestedto develop a Genetic based sliding mode controller‘‘GAs-SMC”, which will be used to choose the appropriateSMC discontinuous part’s gain to reduce the problem of chat-tering in SMC.
Actual speedEs/g415mated speed
(d) Rotor posi/g415on error (degree)(c) Es/g415mated rotor posi/g415on (degree)(b) Actual rotor posi/g415on (degree)(a) Actual and es/g415mated rotor speed (KRPM)
Time (sec) 0.20.40.60.8 1.0 1.2 1.4 1.6[200 ms / div]
0246
-180-9090180
-180-9090180
-20020
Fig. 7FSMO speed response and rotor position waveformswhen doubling the stator resistance.
Actual speedEs/g415mated speed(a) Actual and es/g415mated rotor speed (RPM)
(b) Actual rotor posi/g415on (degree)
(c) Es/g415mated rotor posi/g415on (degree)
(d) Rotor posi/g415on error (degree)
Time (sec) 0.5 1.0 1.5 2.0 2.5 3.03.54.0[500 ms / div]
-6000200400-200-400
-180-9090180
-180-9090180
-50050Actual speedEs/g415mated speed(a) Actual and es/g415mated rotor speed (RPM)
(b) Actual rotor posi/g415on (degree)
(c) Es/g415mated rotor posi/g415on (degree)
(d) Rotor posi/g415on error (degree)
Time (sec) 0.5 1.0 1.5 2.0 2.5 3.03.54.0[500 ms / div]
-6000200400-200-400
-180-9090180
-180-9090180
-50050
Fig. 6FSMO speed response and rotor position waveforms atbipolar command from 400 rpm to/C0400 rpm.
Actual speedEs/g415mated speed
(d) Rotor posi/g415on error (degree)(c) Es/g415mated rotor posi/g415on (degree)(b) Actual rotor posi/g415on (degree)(a) Actual and es/g415mated rotor speed (KRPM)
Time (sec) 0.2 0.40.6 0.8 1.0 1.2 1.41.60246[200 ms / div]
-180-9090180
-180-9090180
-20020
Fig. 5FSMO speed response and rotor position waveforms atspeed step reference from 400 to 4000 rpm.Speed sensorless control of PMSM 173References
[1]K.T. Ajmal, M.T. Rajappan Pillai, Back EMF based sensorlessBLDC drive using ﬁltered line voltage difference, in:International Conference on Magnetics, Machines & Drives,AICERA- iCMMD, 2014
.[2]
A.E. Fitzgerald, C. Kingsley, S.D. Umans, Electric Machinery,McGraw-Hill, 2003
.[3] Tingting Gao, A sliding-mode observer design for the unknowndisturbance estimation of a PMSM, in: The 27th ChineseControl and Decision Conference, 2015.[4]
J.M. Liu, Z.Q. Zhu, Improved sensorless control of permanentmagnet synchronous machine based on third-harmonic back-EMF, in: Proc. IEEE International Electric Machines & DrivesConference, 2013, pp. 1180–1187
.[5]
F.J. Lin, P.H. Shen, Robust fuzzy neural network sliding-modecontrol for two-axis motion control system, IEEE Trans. Ind.Electr. 53 (4) (2006) 1209–1225
.[6]
F. Lin, C. Lin, P. Huang, Recurrent fuzzy neural networkcontroller design using sliding-mode control for linearsynchronous motor drive, IEE Proc. – Control Theory Appl.151 (4) (July 2004) 407–416
.[7]
G. Tarchala, Inﬂuence of the sign function approximation formon performance of the sliding-mode speed observer forinduction motor drive, in: Proc. IEEE Int. Symp. Ind.Electronics, 2011, pp. 1397–1402
.[8]
M.L. Corradini, G. Ippoliti, S. Longhi, G. Orlando, A quasi-sliding mode approach for robust control and speed estimationof PM synchronous motors, IEEE Trans. Ind. Electron. 59 (2)(Feb. 2012) 1096–1104
.[9]
M. Comanescu, Cascaded emf and speed sliding mode observerfor the non-salient PMSM, in: IECON 201O-36th AnnualConference on IEEE Industrial Electronics Society, Sep 2010,pp. 792–797
.[10]
M. Comanescu, L. Xu, T.D. Batzel, Decoupled current controlof sensorless induction motor drives by integral sliding mode,IEEE Trans. Industr. Electron. 55 (11) (2008) 3836–3845
. [11] Vasilios C. Ilioudis, PMSM Sensorless Control based on SlidingMode Observers Methodology for Nonlinear Systems withModel Imprecision, International Workshop on RecentAdvances in Sliding Modes (RASM), 2015.[12]K. Hongryel, S. Jubum, L. Jangmyung, Highspeed sliding-modeobserver for the sensorless speed control of a PMSM, IEEETrans. Ind. Electr. 58 (9) (2011) 4069–4077
. [13] S.K. Kommuri; Sch. of Electron. Eng., Kyungpook Nat. Univ.,Performance comparison of sliding mode observers for backEMFs based speed estimation in PMSM, in: 15th InternationalConference on Control, Automation and Systems (ICCAS),2015.[14] J. Resendiz, W. Yu, L. Fridman, Discrete-time sliding modeneural observer for continuous time mechanical systems, in: 47thIEEE Conference on Decision and Control, 2008, pp. 2838–2843.[15]
L. Da, X. Wang, Observer-based decentralized fuzzy neuralsliding mode control for interconnected unknown chaoticsystems via network structure adaptation, Fuzzy Sets Syst. 16(2010) 2066–2080
.[16]
H. Kim, J. Son, J. Lee, A high-speed sliding-mode observer forthe sensorless speed control of a PMSM, IEEE Trans. Ind.Electr. 58 (9) (Sept 2011) 4069–4077
. [17]
Z. Qiao, T. Shi, Y. Wang, Y. Yan, C. Xia, X. He, New sliding-mode observer for position sensorless control of permanent-magnet synchronous motor, IEEE Trans. Ind. Electr. 60 (2)(Feb 2013) 710–719
.[18] N.K. Quang, D.Q. Vinh, N. That, Q.P. Ha, Observer-basedintegral sliding mode control for sensorless PMSM drives usingFPGA, in: International Conference on Control, Automationand information Sciences (ICCAIS), 2013, pp. 218–223.[19] P. Tao, J. Lin, Z. Chen, Ultra-low and zero speed sensorlesscontrol of permanent magnet synchronous motor based onsliding mode observer, in: IEEE Advanced InformationTechnology, Electronic and Automation Control Conference(IAEAC), 2015.[20]
H.T. Yau, C.L. Chen, Chattering-free fuzzy sliding-modecontrol strategy for uncertain chaotic systems, Chaos SolitonsFract. 30 (3) (2006) 709–718
.[21]
Jafar Keighobadi, Parisa Doostdar, Fuzzy sliding modeobserver for vehicular attitude heading reference system,Positioning 4 (3) (2013) 215–226
.174 M.M. Gaballah et al.