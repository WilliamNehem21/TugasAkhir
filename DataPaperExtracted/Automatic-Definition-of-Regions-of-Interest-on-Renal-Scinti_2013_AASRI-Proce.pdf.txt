 AASRI Procedia   4  ( 2013 )  37 – 42 
2212-6716 © 2013 The Authors. Published by Elsevier B.V.
Selection and/or peer review under responsibility of American Applied Science Research Institute
doi: 10.1016/j.aasri.2013.10.007 ScienceDirect
2013 AASRI Conference on Intelligent Systems and Control 
Automatic Definition of Regions of Interest on Renal 
Scintigraphic Images 
Yassine Aribi, Ali Wali, Mohamed Chakroun, Adel M.Alimi * 
REGIM: REsearch Group on Intelligent Machines, University of Sfax, National Engineering School of Sfax (ENIS),BP 1173, Sfax, 30 38, 
Tunisia.http://www.regim.org/ 
Abstract   
Renography is a radionuclide technique introduced in medicine since the early sixties in the daily practice. It allows 
measuring the function of each kidney separately in case of unilateral or bilateral uro-nephrological disease.  A new system 
for analysis of Renography is presented in this paper. Our system aims to show a fully automated method for drawing the 
renal regions of interest based on a multi-agent system that incorporates spatio-temporal interest points detection on 
scintigraphic images by using the HOG3D descriptor to initialize agents. We used both types of agents, namely supervisor 
agents and explorator agents, they communicate among themselves and they inspire in their behavior from the Fast 
Marching method. Our system was tested on many real patients’ cases and we have obtained encouraging results. Clinical 
validation showed a constant agreement between the approach presented and manual segmentation by professionals in the 
nuclear medicine. 
 
© 2013. Published by Elsevier B.V. 
Selection and/or peer review under responsibility of American Applied S cience Research Institute 
 
Keyswords :  Renography ; Segmentation; Automated Method;  Regions of  interest; Multi-agent system; HOG3D; Fast Marching Method. 
1. Introduction 
The use of renal dynamic scintigra phy (renography) has become essen tial to assess the renal function. 
Nowadays, nuclear medicine professionals want to have  a complete software image processing for analyzing 
the renography by taking into consid eration the standards of the international guidelines.  Renal ROIs should 
 
 
* E-mail address:  {yassine.aribi, ali.wali, chakroun-mohamed, adel.alimi}@ieee.org 
Available online at www.sciencedirect.com
© 2013 The Authors. Published by Elsevier B.V.
Selection and/or peer review under responsibility of American Applied Science Research InstituteOpen access under CC BY -NC-ND  license.
Open access under CC BY -NC-ND  license.38   Yassine Aribi et al.  /  AASRI Procedia   4  ( 2013 )  37 – 42 
be traced on an image sum based on renal function. Th e ROI must be larger than the renal contour of one pixel to obtain all the informations existing in the renal region. In our study, we propose to use the points of interest spatial and temporal detection of the initialization of the contour and we also propose to use a multi- agent system to accelerate this approach. Multi-agent approaches have been used in several areas and have proved their efficiencies to solve distributed problems. The segmentation requires the elaboration of a certain number of particular functions and modular parts which have been designed for solving such problems. Many approaches based on spatio-temporal descriptors and interest point detectors for segmentation have gained much attention [1,2]. In the present article, an automated system for the defin ition of renal regions of interest is presented based on Spatio-temporal Descriptor HOG3D by taking into account the advantage of the Fast Marching Method [7], which can promptly calculate the shorter path distances over two dimensional Euclidean spaces. We will see the related works in section 2, our system will be presented in details in section 3, segmentation results will be discussed in section 4. S ection 5 will be dedicated to conclusions and future research. 2. Related works The definition of Renal ROI represents an important to pic in the prevalent literature. Several algorithms have been suggested to define the Renal ROI which can be classified into two distinct categories:  
 Semi-automatic approach: The methods using this appr oach permit drawing the renal ROI starting from an initialisation point.  In [4] Y.Aribi et al explained the different modules used in their application with an explanation of the algorithm REGION_ GROW that th ey have used for semi-automatic tracing of ROI. Another method has also been developed to generate renal ROI and evaluate the renal function in a small population [6]. Y.Aribi et al in [10] developed a semi-automatic sy stem for segmentation of regions of interest kidney based on the Fast Marching method.  
 Automatic approach: In this approach, these methods used are based on an automatic system without any intervention of the user. In [3] Daniel Ståhl et al pr esent a fully automatic system for segmentation of kidneys and also distinguish non-functional regions of  the kidney using the concept of compartments. In [5] the author presented a system based on an auto mated method for detecting the renal ROI and tracing the adequate renograms. In the state of the art; ma ny approaches using intelligent techniques were proposed to define the concept of renal ROI. Our obj ective through this work is to describe an automated system for the definition of renal ROI using HOG3D descriptor and Fast Marching Method (FMM). 3. Techniques of our system Our lab team working on video processing has de veloped a video objects segmentation and Tracking Based on Spatio-temporal Descriptor [12]. 3.1. Multi-Agent System For Weiss [8], an agent is a computational entity, it can be considered as perceiving and acting independently of its environment. In the multi-agent system there is a series of IT processes taking place at the same time, as a result multiple agents live simultaneously and share common property resources and 39  Yassine Aribi et al.  /  AASRI Procedia   4  ( 2013 )  37 – 42 
communicate together. In our work, we define a multi-ag ent system to segment the dynamic scintigraphic images sequences.  3.2. HOG3D Descriptor The HOG3D is a descriptor based on the spatio-tempora l aspects; it is based on 3D gradient orientations histograms. The integral image representation is essential for the calculation of gradients. For a standard quantification of the orientation of the spatiotemporal gradients, we can use the regular polyhedra. The shape and movement descriptors are combined together simultaneously. In our work, we apply the HOG3D descriptor on the video. For this purpose, the video is divided into nx*ny*nt cells [9]. 3.3. Fast Marching Method For J. A. Sethian [11], Fast Marching method (FMM) allows to solve the boundary value problems of the eikonal equation: 
u f(x,y) Subject to u | s = g(x,y).                                                                    (1)  This method is only valid when the front is moving in  the same direction. Thus, it can’t be applied to the classical case where the contour evolves according to its curvature. This method computes in each point (x, y) the transit time T (x, y) of the front (each point is examined only once). One can show that T evolves according to | 
 T |. F = 1 (2), this means that the transit time is inversely related to speed of the front. As information is propagated in  one direction, it can be the smallest T, and thus find the propagation of the front. The idea is to m ove the head in a narrow band, which is advanced by freezing the pixels existing in inserting new pixels in the band. 4. Proposed system Our Multi-agent system, using an adaptive type of agents, is initialized with the HOG3D descriptor and it is inspired from their evolving from the fast marching method. 4.1. DESCRIPTION The approach of our system is as follows, a pixel can be  owned by one or many agents. We consider that an agent is just a pixel. Each agent is operating in the image by altering the original pixel. We can treat each pixel of the image on several occasions, but we do not need to cope with all of the pixels in the image. Our evolving model was based on the cooperation involving all the agents’ explorer images that has a limited ability and a partly known environmentally and ensures better communication with their supervisor agents. Any explorer agent is required to consider its nearest neighbors. It changes to achieve the frontiers of the object to be extracted. In fact, any agent controls the destination of its development from the reports reaching from neighboring agents and the next evolution of the algorithm proposed thereafter. 4.2. The Proposed algorithm  Once we’ve got points based on interests’ descriptor HOG3D, each agent will position itself on one point of interest, at that time each agent will receive the eight pixels around it. In Figure 1 we can observe the positioning of the neighboring pixels 40   Yassine Aribi et al.  /  AASRI Procedia   4  ( 2013 )  37 – 42 
 
Fig. 1. Positions of pixels 
After that, we need to calculate the pixel value which is the nearest neighbor’s agents from the agent in progress. The evolution direction always follows the neighboring agents having the nearest pixel value. 
 
Fig. 2. Evolution direction of the pixels 
If the pixel that we need to evolve is not owned by a different agent, the position of the original pixel must be modified to the pixel having the nearest value to  the initial pixel. Then, the position of the original pixel will be modified with the nearest pixel value to the ancient pixel.  In the opposite case, the supervisor agent reaction at this stage will handle the conflict and decide if such pixel is belonging to an agent. The seed 41  Yassine Aribi et al.  /  AASRI Procedia   4  ( 2013 )  37 – 42 
contour will be subdivided. The end of the algorithm is conditioned by the stabilization of all the agents. 
 
Fig. 3. Segmentation method 
5. Discussion For the evaluation of our system, we have studied real cases of patient images. Figure 4 shows the segmentation results using three different approaches. According to the experimental results, it is very clear that our system is better than other approaches in th e accuracy of segmentation and also with regard to the time available for the execution.  
METHODS Segmentation result  Execution time 
Semi-automatic method based on Region_Grow [4]
 
 
  17 s 
Semi-automatic method based on FMM [10] 
 11 s 
Automatic method based on the combinaison of : Multi-agent system, FMM and HOG3D descriptor 
  6 s 
Fig. 4.Our approach vs two other segmentation method 42   Yassine Aribi et al.  /  AASRI Procedia   4  ( 2013 )  37 – 42 
6. Conclusion Throughout this work, it became possible to make an  automated system for detecting the renal ROI to facilitate the analysis of renography. Our system defined visually acceptable ROIs with no operator intervention. Automated ROI definition should enhance the efficiency of a good evaluation of renal function using a method based on the smart combination of three techniques: Multi-agent system, HOG3D descriptor and Fast Marching Method. To sum-up, the result of our system could be considered precise because we have used spatiotemporal descriptor. Finally, our system is a step forward in the field of medical image processing, waiting to receive expert advice. References [1] C. Schmid, 2000. Evaluation of Interest Point Det ectors, International Journal of Computer Vision, pp.151–172. [2] David G. Lowe, 2004. Distinctive image features from  scaleinvariant key points, International Journal of Computer Vision, pp. 91-110. [3] Daniel Ståhl et al .Automatic Compartment Modelling and Segmentation for Dynamical Renal Scintigraphies.SCIA’11 Proceedings of the 17
th Scandinavian conference on Image analysis. pp 557-568, Springer-Verlag Berlin, Heidelberg 2011. [4] Y.Aribi et al. Analysis of Scintigraphic Renal Dyna mic Studies: An Image Processing Tool for the Clinician and Researcher. AMLTA’2012-Cairo-Egypt.Springer 2012. [5] Ernest V. Garcia, Russell Folks, Samuel Pak an d Andrew Taylor.:(2010)  Totally Automatic Definition of Renal Regions-of-Interest from Tc-99m MAG3 Reno grams: Validation in Patients with Normal Kidneys and in Patients with Suspected Renal Obstruction. Nucl Med Commun.   Vol. 31(5), pp.366-374. [6] Inoue Y, Yoshikawa K, Yoshioka N, Watanabe T, Saigua S, Kaneko Y, Yokoyama I, Ohtomo K. :(2000) Evaluation of renal function with 99m-Tc-MAG3 using se miautomated regions of interest. J Nucl Med. vol. 41, pp.1947–1954. [7] J. A. Sethian. A fast marching level set method for monotonically advancing fronts. In Proc. Nat. Acad. Sci, pages 1591{1595, 1995. [8] G. Weiss 1999, Multi agent Systems. A Modern Appro ach to Distributed Artificial Intelligence, The MIT Press, Cambridge, Massachusetts. [9] Bernard M. et al 2011.An evaluation of bags-of-word s and spatio-temporal shapes for action recognition, Applications of Computer Vision (WACV), pp 344-351. [10] Y.Aribi et al. A System based on the Fast Marc hing method for analysis and processing of DICOM images: The Case of Renal Scintigraphy Dynamic.ICCMA’2013-Sousse-Tunisia.IEEE 2013. [11] J. A. Sethian, 1999. Fast Marching Methods, SIAM Review, Volume 41 Issue 2, pp 199-235. [12] M.Chakroun et al. A New Multi-agent System for Vi deo Objects Segmentation and Tracking Based on Spatio-temporal Descriptor. AVSS 2011, pp 424-429.  