 AASRI Procedia   8  ( 2014 )  100 – 104 Available online at www.sciencedirect.com
2212-6716 © 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/3.0/).Peer-review under responsibility of Scientific Committee of American Applied Science Research Institutedoi: 10.1016/j.aasri.2014.08.017 
ScienceDirect
2
Abst
This[1] 
f
[3]an
User
is ad
imag
© 20
Sele
Keyw
1.In
N
RTS
proto
*
E2014 AAS R
Retra n
tract
study provide s
for video strea m
nd flow contro l
rs do not see th e
djusted depen de
ge can still be v i
014. Publishe d
ection and/or p
words: congestio n
ntroduction 
Numerous mu l
SP, H.323, a n
ocol (RTP) a n
Corresponding a
E-mail address:ee pRI Confere n
nsmissi o
Tzu-Hu n
aNTUT, Elec t
bNCUT, Ele c
cNTUT, Elect r
s a method to m
ming. The seq u
l [4] [5]  could b
e broken imag e
ent on the ava i
iewed appropri
d by Elsevier 
peer review u n
n, flow control, p a
ltimedia net w
nd HTTP, an
nd HTTP. SI P
author. Tel.: +88 6
poo711@hotmai lnce on Spo r
on and F l
Tra
ng Lina, Ch
trical Engineerin g
ctrical Engineeri n
rical Engineerin g
mitigate the eff e
uence number o
be addressed. R
e, and do not w
ilable network ately, without 
a
B.V.
nder responsi b
acket loss, real-ti m
work protocol s
d in the mu l
P, RTSP, and 
6972015239; 
l.com.rts Enginee r
low Co n
ansport P
heng-Yu Y
g, #1, Sec. 3, Ch u
ng, #57, Sec. 2, Z
g, #1, Sec. 3, Ch u
ect of packet lo
of the RTP [2 ]
Retransmissionaste bandwidt
h
bandwidth. F r
a black screen o
bility of Ame r
me transport pro t
s have been d
ltimedia data H.323 all usering and Co m
ntrolfor a
Protocol
ehb, Shaw -
ung-hsiao East R d
Zhongshan Rd., T a
ung-hsiao East R d
ss and congest i
] was used to d
ensures that a n
h. Flow control 
rames per seco n
or freeze-frame 
rican Applied 
tocol (RTP), retr a
developed. Intransmissio
n
 RTP to tran smputer Sci e
a Video 
-Hwa Hwa n
d.,Taipei, Taiwa n
aichung, Taiwan,
d., Taipei, Taiwa n
ion for a real-ti m
detect packet l o
n entire frame c a
addresses the r
nd are reduce d
occurring.
Science Res e
ansmission, vide o
the commu n
n part, such a
smit multime dence (SEC S
Real-Ti m
ngc*
n, ROC
 ROC
n, ROC 
me transport p r
oss such that r e
an be appropri a
rate of data tra n
d by low band w
earch Institute 
o streaming. 
nication part, s
as the real-ti m
dia data, and pS 2014) 
me
rotocol (RTP) 
etransmission 
ately decoded. 
nsmission that 
width, but an 
such as SIP, 
me transport 
primarily use 
© 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/3.0/).Peer-review under responsibility of Scientific Committee of American Applied Science Research Institute101  Tzu-Hung Lin et al.  /  AASRI Procedia   8  ( 2014 )  100 – 104 
a user datagram protocol (UDP). UDPs exhibit packet loss and congestion problems, but the RTP does not include standards of retransmission and flow control. Moreover, most RTP applications do not implement a retransmission mechanism; therefore the effect on voice streaming is slight, but that on video streaming is severe. Because bandwidth is insufficient, only voice data have been transferred; however, the effect of packet loss on voice is small and communication is possible wh en packet loss is not excessive. Furthermore, because voice data are small, a flow control mechanism is unnecessary. Increasing bandwidth has allowed video streaming to become mainstream. Video data are large and, therefore, require division into multiple packets; however, frames cannot be decoded appropriately when one packet has been lost. This prevents users from seeing an image appropriately and also wastes bandwidth. Flow cont
rol mechanisms are therefore critical. 2. Flow control Once a sender starts sending video streaming data, a receiver sends a PKL (Packet Loss) packet to the sender to confirm the current network state every 100 millisecond. This allows the sender to control the rate of data transmission. Before the sender sends a frame, the sender calculates how long a frame takes to send at the available bandwidth. ሺሻ ൌሺሻሺ Τሻ
2.1. Bit Rate Reduction The bit rate changes in accordance with the current network state. The sender reduces the bit rate by half when packet loss exceeds 5% per second.  ൌ ൈ൬ͳെൈʹ
൰ ൌͺ
 The size of one packet is 1 kb (1 PKL = 1 kb). When t
ransmitting at a new bit rate, the bit rate is reduced by half if the PKL exceeds 240. 2.2. Bit Rate Increase The sender increases the bit rate when packet loss is 0% per second.  ൌ ൅Ɂ
஑Ɂൌ
ͳͲͲ ͳ ൑ Ƚ ൏ ݈݀݋݄ݏ݁ݎ݄ܶ102   Tzu-Hung Lin et al.  /  AASRI Procedia   8  ( 2014 )  100 – 104 
Sender
TimingReceiverLossReͲSendRequestOfPacketͲ4
12bytes987654321 18 17 16 15 14 13 12 11 104
98765 321 16 15 14 13 12 11 104 ൌ൅ʹ  3. Retransmission Once
 a sender initiates the sending of video streaming data, the receiver determines the packet loss based on the sequence number in the RTP header. When packet loss occurs, the receiver sends the RTP packet to the sender. The RTP packet contains the same sequence number as the lost packet, but does not contain payload data. The sender can determine which RTP packet is lost and retransmit the RTP packet in the next time slice, when receiving the empty RTP packet. The detailed retransmission mechanism is presented in Fig. 1. 
Fig.1. Schematic diagram of retransmission. 
Using the above method still incurs a problem; after packet loss occurs, successful retransmission must be confirmed before subsequent frames are sent. However, waiting for a packet halts the function of the system. Thus, the receiver sets a timer for each retransmission request and discards the frame when the timer runs out. The system can continue normally without decoding th e unnecessary frame, preventing a broken image from appearing and a performance overhead from being incurred. 3.1. Comparisons with RFC4588 (RTP Retransmission Payload Format) RFC4588 provides an RTP payload format for perfo rming retransmission. Compared with the proposed method, RFC4588 exhibits several weaknesses. First, it requires an RTCP (Real Time Control Protocol), which increases the complexity of the system and consumes performance. Furthermore, it requires another channel to perform RTP retransmission, such that a RTP streaming requires three channels. Finally, it uses SDP to perform retransmission requests, the format of which is complex and exhibits a large packet size, increasing the parsing time and bandwidth requirements. The differences between RFC4588 and the proposed method are listed in Table 1. 103  Tzu-Hung Lin et al.  /  AASRI Procedia   8  ( 2014 )  100 – 104 
Table 1. The different with RFC4588 and we proposed method  RFC-4588 RTP Retransmission Payload Format We proposed method 
Related protocol Need to use with RTCP Do not need other protocol 
Channel number for each RTP streaming Three channel (RTP, Retransmission RTP, RTCP) One channel Retransmission requests Use SDP (Tens to hundreds bytes) Use RTP (12 bytes) 
4. Experimental results This section presents the effect of the retransmission and flow control mechanism. IP camera was used to transmit video data over the Internet and we count frame numbers that can be decoded appropriately. xCodec type: MPEG4 xVideo Size = 640*480 (VGA) xFrame Rate = 30 fps xBandwidth = 2 Mbps First, the e
ffect of retransmission was tested. The retransmission mechanism increased the received complete FPS by 2.66 times (from 10.8 to 28.8) compared with no retransmission. The detailed experimental results are listed in Table 2. 
Table 2. Test results of Retransmission Retransmission Received complete Frame/Second 
X 10.827 
V 28.8 
Next, the flow control mechanism was implemented and NAT (Network Address Translation) was used to limit the bandwidth and test the effect of flow control at various bandwidths. The received complete FPS exerted a positive effect at each bandwidth, as shown in Tables 3 and 4. 
Table 3. Test results of Flow-Control Flow-Control Retransmission Bandwidth 
128K 256K 512K 
X V 0.463 1.465 3.674 
V V 1.595 2.936 5.753 
Table 4. Test results of Flow-Control continue Flow-Control Retransmission Bandwidth 
1M 2M 
X V 8.017 25.893 
V V 10.305 27.708 104   Tzu-Hung Lin et al.  /  AASRI Procedia   8  ( 2014 )  100 – 104 
5. Conclusion This paper presents a retransmission and flow control  method. Retransmission can reduce the effect of packet loss on video streaming by using a small number of  retransmission packets. Flow control controls the sending rate based on the number of packets lost, so that  the sending rate adheres to the available  bandwidth. Retransmission and flow-control improves the perf ormance of video streaming, and users can clearly appreciate the difference when viewing images. References [1] R Frederick, and V Jacobson 2003. Rtp: A transport protocol for real-time applications. [2] C. Bormann, C. Burmeister, M. Degermark, H. Fuku shima, H. Hannu, L-E. Jonsson, R. Hakenberg, T. Koren, K. Le, Z. Liu, A. Martensson, A. Miyazaki, K. Svanbro, T. Wiebke, T. Yoshimura, and H. Zheng 2001. RObust Header Compression (ROHC): Framework and four profiles: RTP, UDP, ESP, and uncompressed. [3] Nick Feamster and Hari Balakrishnan. 2002. Packet Loss Recovery for Streaming Video. [4] Bolot, J.-C., INRIA, Sophia-Antipolis, France, and Turletti, T. 1994. A rate control mechanism for packet video in the Internet. [5] Shanwei Cen, Jonathan Walpole, Calton Pu. 1998. Flow and congestion control for Internet media streaming applications. 