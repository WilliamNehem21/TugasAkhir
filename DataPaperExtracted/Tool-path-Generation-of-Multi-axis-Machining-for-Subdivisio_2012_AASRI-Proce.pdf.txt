 AASRI Procedia   3  ( 2012 )  60 – 65 
2212-6716 © 2012 The Authors. Published by Elsevier B.V. Selection and/or peer review under responsibility of American Applied Science Research Institutedoi: 10.1016/j.aasri.2012.11.011 
 
 2012 International Conference on Modeling, Identification and Control 
Tool-path Generation of Multi-axis Machining for Subdivision Surface 
En-tao Yuan*, Bing Shao 
College of Mechanical Engineering, Shanghai Dianji University, Jiangchuan Road 1201 of minhang district, Shanghai 200240, China   
Abstract 
An algorithm of multi-axis NC tool-path generation for subdivision surfaces is proposed. The algorithm includes two steps: model building and tool path generation. In the section of model building, in order to obtain the deformed surface, the deformation vector is computed which is associated with the curvature and the slope of cutter location surface. In the  procedure of tool path generation, the slicing procedure is adopted to get the CL points. In addition, the inversely converted method is used. The method is tested by some examples with actual machining. The results show that the method can effectively reduce the error of the scallop height for subdivision surface and obtain the better shape and quality. In addition, the computational complexity and is scalable and robust. 
 © 2012 Published by Elsevier B.V.  Selection and/or peer review under responsibility of American Applied Science Research Institute  
Keywords: tool path generation, CL surface deformation, subdivision surfaces, NC machining 
1. Introduction Free-form surface design and manufacturing are important steps in product developments for free-form surface. Current CAD/CAM systems often defined objects by parametric surfaces, such as B-spline, Bezier, and NURBS representations. When the gouge free tool-path is calculated, these models are not ideal because the surface is not smooth. For example, when a surface is composed with multi-patches it can cause gaps especially when the model is complex. In order to solve this problem it needs splicing and trimming which are                                                           
 
* Corresponding author. Tel.: +86-18964586809. E-mail address: yuanentao@tom.com. 
Available online at www.sciencedirect.com
© 2012 The Authors. Published by Elsevier B.V. Selection and/or peer review under responsibility of American Applied Science Research Institute Open access under CC BY-NC-ND license.
Open access under CC BY-NC-ND license.61  En-tao Yuan and Bing Shao  /  AASRI Procedia   3  ( 2012 )  60 – 65 
 not only time-consuming but also expensive[1]. The model is so bad so we can not generate NC data, because the machining quality may be affected. Recently, subdivision schemes are becoming common in the field of geometric modelling because it can use simple patch to represent multi-surface. At the same time, it also combines the parametric surfaces and polygon mesh. These properties make subdivision surfaces become the best choice when the model for design and manufacturing needs to be unified. So far ther e are some studies are focused on 3-axis machining subdivision surfaces. Joe Kurgano etc. first prove that subdivision surfaces can be applied to CAM [2]. Later, the algorithm of tool-path generation based on Loop subdi vision is discussed [3]. In this research we choose Catmull-Clark subdivision surface [4] as our target subdivision surface because of Catmull-Clark surface quadrilateral-based advantages symmetry objects than  the triangular mesh in the expression.   The method of model building is discussed in sectio n 2. The algorithm of the multi-axis tool path generation is investigated in section 3. The implementation and machining results are demonstrated in section4. Finally we discussed the conclusions. 2. Model Building  2.1. Interval of slicing plane From Fig.1.(a),we can see the parameter
wdwhich describes the distance between the two adjacent paths. In addition, the parameter is depends on the tool radius
rand cusp height error h. By using the radius of  curvature of the are
to approximate the surface in the middle of two adjacent tool-paths, the surface step-over
wdcan be defined as follows [5]:  
2 22 2 2
42
wrh r hdrh
                                                                           (1) Because of the complexity of calculating of
, the equation may be simplified by using a plane to approximate the surface between two adjacent tool-paths: 
222wdr h h                                                                                                                                       (2)  
 
(a)                                               (b)  
Fig. 1. (a) the relation betweenwdandh; (b) the relation between andh  62   En-tao Yuan and Bing Shao  /  AASRI Procedia   3  ( 2012 )  60 – 65 
 Fig.1. (b) shows the interval  between two planes which slice the surface is associated with t he surface step-over
wdand the angle . Assuming the iso-planar tool-path pattern is used, is given by 
cos ( )wdi s s m a l l    or   2sin 2 cos ( large)rr h r h h i s                                 (3) A constant interval of slicing plane will result in a high degree of value of cusp height error and surface step-over. In this section, the deformed method of triangle mesh is discussed in Ref [6] is extended to subdivision surface. 2.2.
 Approximate of surface deformation Set the two mutually perpendicular axes, one of them as 
x-axis and perpendicular to the slicing plane, and the other as
y-axis. The interval dxanddyare set on a horizontal grid xy-plane. The Zvalue for each offset vertex
[,]vpq is defined [,]zpq , therefore, the slope angle [,]pq for each offset vertex can be shown as follows:
 
1[ 1 ,] [ 1 ,][,] t a n2zp q zp qpqdx                                                                                                  (4) For the vertex
11ii ip o v p q o v qov x x x and y y y of number iin offset mesh, the slope angle can be given in Eq. (5): 
[,] [ 1 ,] [ , ] [, 1 ]4
iovpq p q p q pq                                                                                (5) Based on Eq.(5), the parameter
is related to some parameters, such as the tool radius, the slope angle and the normal curvature. Therefore, the deformation ratio for
iovcan be defined by Eq.(6). Fig.2. shows the relationship between them. 
 
 11cos
iiiovov bovrk                                                                                                                  (6) Where
ibovkis the normal curvature which is discussed in detail in Ref. [7]. Let
:0 , 1 , , 2miVo v i n be the 1-neighborhood vertexes ofiov, where nis the valance ofiov. The deformation coefficient for the vertex
iovmay be combined by the deformation ratio ofmV.  
1
imovV dx                                                                                                                                  (7) Assuming the tool-path direction is parallel to the
y-axis, we may calculated the deformed coefficient based on  Eq.(7). In multi-axis NC machining the share deformation should be considered. The share angle can be computed in Eq.(8). 63  En-tao Yuan and Bing Shao  /  AASRI Procedia   3  ( 2012 )  60 – 65 
 1[, 1 ] [, 1 ][,] t a n2
yzpq zpqpqd                                                                                                   (8) So the deformation ratio can be rewritten as follows: 
,,cos sin
ii i i iov ov x ov ov y ov                                                                                                     (9) The calculation method of 
iovas the same as
iov Substitute Eq. (9) into Eq. (7), we obtain the correct deformation coefficient. So the new vertex 
'iovon the deformed space, as follows:  
'''() ( )
mi m i mii
ii
iipo v p o v pov ovov ovov ovx xy yxxdx dyyyzz
                                                                                     (10) 
 
Fig.2. variation pattern of deformation ratio  
3. Calculation Tool Path  
3.1. Calculation for position vector 
Set the slicing plane which is parallel to yz-plane intersects with deformed offset surface. At the same time, the tool-path is generated on the equidistant surface deformation space and the tool-path in parallel to
yz- plane. After an inverse deformation, the tool-path can be changed to the original space. Set
'
xTdescribes the deformed CL point and
xTdescribes the original CL point which located within the triangle of
123,,ii iov ov ov , then  
3'''1() ()
ih ih ih ov ov x ov yhxxx Ty TTTdx dy
                                                                                                    (11)  curvature slope angle(deg) Deformation ratio 64   En-tao Yuan and Bing Shao  /  AASRI Procedia   3  ( 2012 )  60 – 65 
 3.2. Calculation for tool axis normal vector 
The mean area method is adopted to calculate the norm al vector of CL points. The method is based on the coordinates of CL points looking for special triangle which the distance to CL point is less than
, where is the threshold. Each triangle facet area times their unit normal and cumulative summation, the results are divided by the area of triangular facets and thus the normal vector of CL points. Base on Fig.3., assuming there are
mtriangle facet which the distance to the pointCLPis less than , than we calculate the normal vector
ln and area 1lSl m for each triangle , then the normal vector nof the CL point can be obtained as follows: 
lllllSSnn
                                                                                                                                            (12)  
 
Fig.3. calculation normal vector for CL point 
Based on the above analysis and calculation, we can get the tool-path of the original space.  
4. Examples 
All proposed algorithm has been validated in the deve lopment of the prototype system which based on the OpenGL library and C++ language. In addition, some actual machining parts are accomplished to verified the algorithm. A model for a bicycle seat which the size is
317.67 11.02 4.23mm is designed with a 0.005mm allowance between the subdivision mesh and the limit surface. We subdivide the initial mesh one time to get the subdivision mesh. Fig.4.a shows the initial mesh. Move vertices along the corresponding vertex normal vector direction resulting offset surface, where the moving di stance is the tool radius. The iso-plane tool path is accomplished based on the offset surface and the slicing plane parallel to each other. Fig.4.b shows the deformed CL surface. Fig.4.c described the deuced tool-path which located in deformed space. Fig.4.e shows the actual machining parts on our machining center. 
5. Conclusions 
In multi-axis machining a new approach constant scallop method is proposed and implemented. The experiments prove that the algorithm in a steep area pass spacing becomes smaller, the tool-path variable density. The method can effectively control the m achining accuracy. The method of Catmull-Clark subdivision surface may be extended to other surfaces clearly. This paper described the subdivision surface 65  En-tao Yuan and Bing Shao  /  AASRI Procedia   3  ( 2012 )  60 – 65 
 method of multi-axis machining. In fact, some technical problems, such as interference, collision, changing of tool-axis vector and cutter tracks discontinuous are still exist. So the multi-axis machining tool-path generation algorithm remains to be further explored for subdivision surface.  
 
  
(a)                                        (b)                                        (c)                                     (d)                                          (e)                 
Fig.4. example of CL surface deformation (a) initial mesh (b) deformed CL surface (c) tool path in deformed space (d) tool path  of inverse deformation (e) machined part 
Acknowledgements 
    This research is partially supported by Lead ing Academic Discipline Project of Shanghai Municipal Education Commission (project number: J51902) and Young Teacher Training Project Funded Plan of   colleges of Shanghai (project number: shdj011). 
References 
[1] T. DeRose, M. Kass and T. Truong. Subdivision surfaces in character animation. In: Proc. of SIGGRAPH 98 Conference
, Annual Conference Series. 1998, pp. 85-94. [2]
 J. Kurgano, H. Suzuki and F. Kimura. Gneration of NC tool path for subdivision surface. In: Proc. of CAD/ Graphics’ 2001
, August 22-24, Kunming, China. 2001, pp:676-682. [3]
 P. Wu, H. Suzuki, J. Kuragano, et al. Three-axis NC Cutter Path Generation for Subdivision Surface. In:  Prof. of GMP
. 2004, pp:1-6. [4]
 E. Catmull and J. Clark. Recursively generated B-spline surfaces on arbitrary topological meshes. 
Computer-Aided Design,  1978, 10(6):350-355. [5]
 G.C. Loney and T.M. Ozsoy. NC machining of free-form surfaces. Computer-Aided Design,  1987, 19(2):85-90. [6]
 S.J. Kim and M.Y. Yang. A CL surface deformation approach for constant scallop height tool path generation from triangular mesh. International Journa l of Advanced Manufacturing Technology, 2005, 28, 314-320. [7]
 H. Moreton Minimum curvature variation curves networks  and surfaces for fair free-form shape design
[Doctor of Philosophy Thesis] BERKELEY:UNIVERSTTY OF CALIFORNIA 1992. 