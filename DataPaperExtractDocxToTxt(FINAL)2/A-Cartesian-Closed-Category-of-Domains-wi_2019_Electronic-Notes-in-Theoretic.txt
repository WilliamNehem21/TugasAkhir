Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 345 (2019) 143–168
www.elsevier.com/locate/entcs

A Cartesian Closed Category of Domains with Almost Algebraic Bases
Zhenchao Lyu
LSV, ENS Paris-Saclay, CNRS Universit´e Paris-Saclay 94230 Cachan, France
Hui Kou1,2
College of Mathematics Sichuan University Chengdu, P. R. China

Abstract
In this paper, we investigate the properties of almost algebraic domains introduced by G. Hamrin and V. Stoltenberg-Hansen in 2006. We introduce a notion of M-closed basis and define a new class of domains, called ωAML-domains, which are continuous L-domains endowed with countable, almost algebraic, and M-closed bases. The main result of this paper is: the class of ωAML-domains is closed under function spaces and finite cartesian products. Hence, the category of ωAML-domains together with Scott continuous functions is cartesian closed. The results of this paper give an answer to an open problem posed by G. Hamrin and V. Stoltenberg-Hansen in “Two categories of effective continuous cpos, Theoretical Computer Science, 365(2006), 216-236”.
Keywords:  almost algebraic, L-domain, M-closed basis, cartesian closed category


Introduction
Domain theory was introduced by Dana Scott [14, 15] in the late sixties as a mathematical tool to model the denotational semantics of programming languages. For the sake of defining the semantics of higher-order functions in programming, one must consider its counterpart in the formation of function spaces of domains that correspond to the language features of interest. So it is a natural requirement that the considered category of domains should be cartesian closed, and hence seeking various cartesian closed categories of domains is one of the most important problems

1 Supported by the NSF of China (No. 11871353).
2 Email: kouhui@scu.edu.cn

https://doi.org/10.1016/j.entcs.2019.07.022
1571-0661/© 2019 The Author(s). Published by Elsevier B.V.
This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).

in domain theory. Many well-known kinds of domains had been found forming cartesian closed categories together with Scott continuous functions as morphisms, such as continuous (algebraic) lattices, bounded complete domains, Scott domains
[15] and SFP domains [16], and so on. In 1990, the maximal cartesian closed full subcategories of the category of continuous (algebraic) domains were fully classified by Achim Jung in [8, 9].
In 2006, G. Hamrin and V. Stoltenberg-Hansen [6] investigated a class of special continuous domains, within which each domain has an almost algebraic basis. An inspiration for the notion of an almost algebraic basis is due to [17]. In that paper a
basis with the inverse approximation property is considered, resulting in a cartesian closed subcategory of the bounded complete domains. The notion of an almost algebraic basis is also related to Tang [18], who considered conditions on a basis in order to obtain a cartesian closed category of continuous lattices. These extra conditions on a basis are under suitable assumptions equivalent to a basis being almost algebraic.
In [6], Hamrin and Stoltenberg showed that the class of continuous domains with countable, closed and almost algebraic bases is closed under function spaces and finite cartesian products. Hence, the category consisting of such objects is cartesian closed. In particular, they showed that the notion of almost algebraic is beneficial to study effective domains. Here, a basis B of a domain is called closed provided that it is closed under the least upper bounds of all bounded finite subsets of B, thus a domain with a closed basis is exactly bounded complete. As mentioned above, Jung [8,9] showed that the maximal cartesian closed subcategories of the category of continuous domains consist of continuous L-domains or FS-domains. It is possible that there are some new cartesian closed subcategories of continuous domains with the property almost algebraic. To obtain a new cartesian closed category of domains, the preservation of the required properties by function spaces is the critical factor and also the essential difficulty. For example, see [4, 7, 9, 13, 16, 19]. So Hamrin and Stoltenberg [6] posed the following open problem:
Find a further condition on the basis weaker than being closed but which is preserved and preserves almost algebraicity under the function space construction.
In this paper, we will answer this question. We introduce a new notion for a base of a continuous L-domain, called M-closed, which is strictly weaker than being closed. We show that the class of all continuous L-domains endowed with
countable, almost algebraic and M-closed bases is closed under function spaces and finite cartesian products. Hence, the category consisting of such L-domains is cartesian closed.
The paper is organized as follows. Section 2 introduces some notions and def- initions we need. Section 3 discusses the properties of almost algebraic domains. Section 4 investigates the properties of continuous L-domains endowed with count- able, almost algebraic and M-closed bases and the function spaces among them. Section 5 gives a cartesian closed category of continuous L-domains with almost algebraic bases.

Preliminaries
We first review some basic knowledge of domain theory. The reader can find more details and proofs in [1] and the textbooks [2, 5]. Let A and B be sets. As usual, we let A ⊆ B denote that A is a subset of B. We also let A ⊆f B denote that A isa finite subset of B. A partially ordered set (poset) (D; ≤) is a set D with a reflexive, transitive and antisymmetric relation ≤. For A ⊆ D, we set
↓A = {x ∈ D : ∃a ∈ A, x ≤ a}, ↑A = {x ∈ D : ∃a ∈ D, a ≤ x},
and A is called a lower or upper set, if A = ↓A or A = ↑A respectively. For an element a ∈ D, we use ↓a or ↑a instead of ↓{a} or ↑{a}. A subset A of D is called directed if it is nonempty and every nonempty finite subset of A has an upper bound in A. Particularly, we say that D is a dcpo if every directed subset A of D has a least upper bound (denoted by A) in D. In this case, when D has a least element (denoted by ⊥), we call it a cpo.
Let D be a dcpo. For x, y ∈ D, we say that x is way-below y, denoted by x  y, if for any directed subset A of D, y ≤  A implies x ≤ a for some a ∈ A. For x ∈ D, we set
↓x = {y ∈ D : y  x}, ↑x = {y ∈ D : x  y}.
Definition 2.1 Let D be a dcpo. A subset B ⊆ D is a basis (or a base) for D if for each x ∈ D, B ∩ ↓x is directed and x = (B ∩ ↓x). Particularly, when B is countable we say that B is an ω-base of D.
A basis B is reduced if for all b ∈ B we have ↑b /= ∅. If B is a basis for a dcpo D then {b ∈ B : ↑b /= ∅} is also a basis for D. A basis B is closed if for all b, c ∈ B such that ↑b ∩ ↑c /= ∅ we have that b ∨ c exists and b ∨ c ∈ B.
A dcpo D is continuous if it has a basis, it is also said to be a continuous domain when it is a cpo. An element d ∈ D is called compact if d  d. Let K(D) be the set of all compact elements of D. A dcpo D is called algebraic if K(D) is a basis.
Lemma 2.2 Let D be a continuous dcpo with a base B.
For a ﬁnite M ⊆ D and x ∈ D,
M  x ⇒ ∃b ∈ B, M  b  x,
where M  x means m  x for all m ∈ M.
If B is a ω-base, then for each x ∈ D there exists a sequence (xn)n∈ω ⊆ B such that

and x = Wn∈ω xn.
x1  x2  · · ·  xn  xn+1	 x

Next, we describe the continuous functions between dcpos or cpos.
Definition 2.3 Let D and E be two dcpos.

A function f : D → E is called (Scott) continuous if it is monotone and for all directed sets A ⊆ D we have f (W A)= W f (A).
The function space, denoted by [D → E], is the set of all Scott continuous functions from D into E ordered by the pointwise order, i.e., f ≤ g iff f (x) ≤ g(x) in E for all x ∈ D.
Let DCPO be the category of all dcpos with Scott continuous functions. Then DCPO is cartesian closed. Moreover, a full subcategory of DCPO is cartesian closed iff it is closed under continuous function spaces and finite products [1, 16].
The simplest continuous functions are the step functions (a  b).
Definition 2.4 The step function (a  b) : D → E, for a ∈ D and b ∈ E, is defined by
(a  b)(x)= ⎧⎨ b, if a  x,
⎩ ⊥, otherwise.
It is straightforward to see that (a  b) is continuous. We have the following relationship between step functions and continuous functions.
Lemma 2.5 [5, Exercise II-2.31] Let D and E be cpos and let a ∈ D and b ∈ E.
Suppose f ∈ [D → E]. Then
b  f (a) =⇒ (a  b)  f.
If D and E are continuous cpos with bases BD and BE and f ∈ [D → E] then
f =  {(a  b): a ∈ BD,b ∈ BE,b  f (a)}.
Definition 2.6 Let D be a cpo.
We say that D is an L-domain if every nonempty bounded subset of D has a greatest lower bound; equivalently, for any x ∈ D, ↓x is a complete lattice in the induced order. For a ∈ D and A ⊆ ↓a, we use ↓a A to denote the least upper bound of A in ↓a.
We say D is bounded complete if every nonempty bounded subset of D has a least upper bound.
Easily one sees that every bounded complete dcpo is an L-domain and the reverse does not hold. We also have the following useful lemma for L-domains and function spaces.
Lemma 2.7 Let D, E be two L-domains.
For a, b ∈ D and A ⊆ ↓a, a ≤ b implies W↓a A = W↓b A.
[D → E] is an L-domain such that for f, g, h ∈ [D → E], if f, g ≤ h then (f ∨↓h g)(x) = f (x) ∨↓h(x) g(x) for all x ∈ D. Moreover, if f, g  h then f ∨↓h g  h.

[D → E] is continuous (resp. algebraic) whenever D and E are continuous (resp. algebraic).
Since the class of continuous (resp. algebraic) L-domains is also closed under finite cartesian products, the above lemma, whose complete proof appears in [8, 9], shows that the category of continuous (resp. algebraic) L-domains with continuous functions is cartesian closed. Moreover, it is one of the maximal cartesian closed subcategory of continuous domains.
Definition 2.8 Let D be a continuous cpo. We say that a basis B of D has property M if for all a, b, c, d ∈ B with a  c, b  d, there exists a finite subset F ⊆ D such that
↑c ∩ ↑d ⊆ ↑F ⊆ ↑a ∩ ↑b.
We say that a continuous cpo has property M if it has a basis with property M.
A continuous cpo D has property M iff its Lawson topology is compact iff ↑a∩↑b is Scott compact for all a, b ∈ D [5, Theorem III-5.8]. The following lemma is easy to be proved.
Lemma 2.9 Let D be a continuous cpo with property M. Then for all a, b ∈ D,
↑a ∩ ↑b = ∅ implies that there exist x ∈ ↓a and y ∈ ↓b such that ↑x ∩ ↑y = ∅.
Almost algebraic dcpos
In this section, we introduce the notion of an almost algebraic dcpo and the related open problem posed by Hamrin and Stoltenberg-Hansen in [6].
Definition 3.1 Let D be a continuous cpo.
Given a ∈ D, a sequence (an)n∈ω ⊆ D is said to be an almost algebraic sequence of a if
a  · · ·  an+1  an	  a1  a0
and for each b ∈ D, a  b implies an  b for some n ∈ ω.
A basis B of D is called almost algebraic if the following holds:
Each a ∈ B has an almost algebraic sequence (an)n∈ω ⊆ B.
For all a, b ∈ B, if ↑a ⊆ ↑b then b ≤ a.
We say that D is almost algebraic if it has an almost algebraic basis BD.
Obviously, all algebraic cpos are almost algebraic by taking constant sequences of compact elements. The following result is obvious.
Lemma 3.2 Let D be a continuous cpo with an almost algebraic basis B. Let
A = {ai : i ∈ K} ⊆f B. Then there is Aˆ = {aˆi : i ∈ K} ⊆f B such that
ai  aˆi for all i ∈ K.
For any i, j ∈ K, ai ≤ aj =⇒ aˆi ≤ aˆj.
Proposition 3.3 Let BD be an almost algebraic basis of a dcpo D and a ∈ BD. If
(an)n∈ω ⊆ B is an almost algebraic sequence of a, then a =	n∈ω an.

Proof. Let b be an arbitrary lower bound of (an)n∈ω. We need to show b ≤ a. For any x ∈ ↑a, there exists n ∈ ω such that an  x. Since b ≤ an, we get b  x, i.e.,
↑a ⊆ ↑b. From the assumption that BD is almost algebraic we obtain b ≤ a.	2
Intuitively, the motivation of the notion “almost algebraic” is that an element in a basis can be approximated by an increasing way-below sequence and a decreasing way-below sequence like the real numbers. In the following, we will see that a well- known domain, namely the formal closed ball domain of a complete metric space, is almost algebraic but not algebraic.
Let (X, d) be a complete metric space. Set R+ = [0, +∞) to be the set of all non-negative real numbers and set Q+ to be the set of all positive rational numbers. Let
BX = X × R+
ordered as follows: ∀(x, r), (y, s) ∈ BX,
(x, r) ≤ (y, s) ⇔ d(x, y) ≤ r − s.

It was showed in [3, 10, 11] that (BX, ≤) is a continuous dcpo such that for (x, r), (y, s) ∈ BX, (x, r)  (y, s) iff d(x, y) < r − s. Moreover, set BX = X × Q+, then BX is a basis of BX.
Proposition 3.4 For a complete metric space (X, d), BX is an almost algebraic basis of BX. Moreover, if (X, d) has a countable dense subset Y , i.e., (X, d) is a
Polish space, then the set BY = Y × Q+ is an almost algebraic ω-basis of BX.
Proof. Let (X, d) be a complete metric space. Then BX is a basis of (BX, ≤). For
each (x, r) ∈ BX , we set rn = r −  r and an = (x, rn) for all n < ω. Then
(x, r)  · · ·  an+1  an	 a1.
Suppose (x, r)   (y, s) for some (y, s) ∈ BX. Then d(x, y) < r − s. There exists

an enough large n0
< ω such that d(x, y)+ s < r −  r  < r. Thus, an
= (x, rn0 ) 

(y, s). It means that (an)ω is an almost algebraic sequence of (x, r). Suppose (z, k) ∈
BX with ↑(z, k) ⊆ ↑(x, r). Assume (x, r) /≤ (z, k). Then d(x, z)+k > r. Since k > 0, there exists an enough small ε ∈ Q+ such that k − ε > 0 and d(x, z)+ k − ε ≥ r. Set kj = k − ε. Then (z, k)  (z, kj) and (x, r) / (z, kj). It is a contradiction. Hence we have (x, r) ≤ (z, k). Therefore, BX is an almost algebraic basis of BX by
Definition 3.1. Similarly, one can show that BY = Y × Q+ is an almost algebraic
ω-basis of BX when X is a Polish space.	2
Also, there are continuous cpos which are not almost algebraic. The following is such an example.
Example 3.5 Let D = [0, 1] × [0, 1] ordered as follows: ∀(x1, y1), (x2, y2) ∈ D, (x1, y1) ≤ (x2, y2) iff one of the followings conditions holds:
x1 ≤ x2 and y1 = y2,

x1 = 0 and y1 ≤ y2.
We see that (D, ±) is a bounded complete cpo and for all (x1, y1), (x2, y2) ∈ D, (x1, y1)  (x2, y2) ⇔ (x1 < x2 & y1 = y2) or (x1 =0 & y1 < y2).
Hence, D is continuous. Let y ∈ (0, 1) and let ((xn, yn))n∈ω ⊆ D be a sequence such
 ∞
	
n=1
(0, y)  · · ·  (xn+1, yn+1)  (xn, yn)	  (x2, y2)  (x,y1).
Then one of the follow two statements holds:
∀n ∈ ω, yn = y and xn+1 < xn.
∃n0 ∈ ω, xn = 0 and y < yn+1 < yn whenever n > n0.
For (1), take yj > y, then (0, y)  (0, yj) but (xn, yn) /≤ (0, yj) for all n ∈ ω. For (2), take x > 0, then (0, y)  (x, y) but (xn, yn) /≤ (x, y) for all n ∈ ω. Hence, (0, y) has no almost algebraic sequences in D for any y ∈ (0, 1). Note that for any basis B of D and (x, yjj) ∈ B ∩ ↓(0, y), we have x = 0 and yjj ≤ y. Hence, D has no almost algebraic bases.
Therefore, Even the property almost algebraic seems strange, it is also very natural (see Proposition 3.4), and the class of all almost algebraic cpos strictly in- tervenes between algeraic cpos and continuous cpos. It also leads a natural question: which cpos with almost algebraic bases can form a cartesian closed category? Of
course, such a category should contain at least one non-algebraic object. Hamrin and Stoltenberg-Hansen [6] proved the following result.
Theorem 3.6 Let D and E be bounded complete domains with countable closed and almost algebraic bases BD and BE respectively. Then the function space [D → E] has a closed, countable and almost algebraic basis.
This theorem says that the category of bounded complete domains with count- able closed and almost algebraic bases is cartesian closed. The proof of the above theorem in [6] is seriously dependent on the closedness of bases. Recall that, a base is closed if it is closed under the suprema of its bounded finite subsets. Is it easy that a bounded complete domain has a countable closed basis? Let see an example.
Example 3.7 Let I = [0, 1] and I = {[a, b] : 0 ≤ a ≤ b ≤ 1} endowed with the reverse-inclusion relation, that is, [a, b] ≤ [c, d] ⇔ [a, b] ⊇ [c, d]. Then (I, ≤) is a bounded complete domain and is called the unit interval domain. Set
BI = {[a, b]: a, b ∈ Q ∩ I & a < b}.
It is easy to see that B£ is a countable almost algebraic basis of I (the proof is similar to Proposition 3.4). However, BI is not closed. For example, [0, 1 ], [ 1 , 1] ∈ BI but
2	2
[0, 1 ] ∨ [ 1 , 1] = { 1 } /∈ BI .
2	2	2

For seeking a new cartesian closed subcategory of almost algebraic domains, Hamrin and Stoltenberg-Hansen in [6] posed the following open problem:
Find a further condition on the basis weaker than being closed but which is preserved and preserves almost algebraicity under the function space construction.
In this paper, we will answer this question. In the next section, a notion called M-closed basis is defined on a continuous L-domain which is very advantageous to help us to handle the above open problem.

L-domains with countable, almost algebraic and M- closed bases
In this section, we introduce a M-closed base on a continuoous L-domain. A series of properties of continuous L-domains with countable M-closed and almost algebraic bases are obtained.
Proposition 4.1 [6, Proposition 22] Let D,E be continuous cpos and suppose that D has an almost algebraic basis BD and E has a countable basis BE. Let a, c ∈ BD and b, d ∈ BE, where b /= ⊥. Then the following hold:
(a  b) ≤ (c  d) ⇐⇒ c ≤ a & b ≤ d.
(a  b)  (c  d) ⇐⇒ c  a & b  d.
If (cn)n∈ω is an almost algebraic sequence for c and (dn)n∈ω an approximating sequence for d, then  n∈ω (cn  dn)= (c  d).
The following is a crucial lemma which is very useful to investigate the way below relation between continuous functions of almost algebraic L-domains. Note that it is a generalization of [6, Lemma 23].
Lemma 4.2 Let D, E be two continuous L-domains endowed with an almost alge- braic basis BD and a countable basis BE respectively. For all a ∈ BD,b ∈ BE and f ∈ [D → E], we have
(a  b)  f ⇐⇒ b  f (a).
Proof. The implication from right to left follows from Lemma 2.5(1).
We now show the other direction. Set
Step(f )= {(c  d): (c, d) ∈ BD × BE & d  f (c)}.

By Lemma 2.5(2), f =	Step(f )=	{ ↓f A : A ⊆f Step(f )}. Since (a  b)  f , there is a finite subset {(ci  di): i ∈ I0}⊆ Step(f ) such that
(a  b)   {(ci  di): i ∈ I0}	(∗).
↓f
Without losing generality, we assume b /= ⊥ . From the assumption that BD is almost algebraic, we get almost algebraic sequences (an) for a and (cj)j for each

ci, where i ∈ I0. Since BE is a countable basis we choose sequences (dj)j from

BE increasing with respect to   such that W

j∈ω
j = di for each i ∈ I0. From

this it follows that (cj   dj)   (ci   di) for all i ∈ I0 and j ∈ ω. Hence
(ci  di)= W (cj  dj) for all i ∈ I0 and
j  i	i

  {(cj  dj): i ∈ I0}   {(ci  di): i ∈ I0}
i	i
↓f	↓f


for all j ∈ ω. Furthermore, we have
  {(cj  dj): i ∈ I }  {(cj′   j′


∈ I }

i	i
↓f
for j < jj. Therefore
0	i	di : i	0
↓f

  {(ci  di): i ∈ I0} =    {(cj  dj): i ∈ I0}
i	i
↓f	↓f j∈ω
=    {(cj  dj): i ∈ I0} (∗∗).
i	i
j∈ω ↓f
From (∗) and (∗∗), there exists j0 ∈ ω such that (a  b)  W {(cj0  dj0 ): i ∈
↓f	i	i
I0}. For each an in the descending sequence towards a we have
b = (a  b)(an)
≤   {(cj0  dj0 )(an): i ∈ I0}
i	i
↓f (an)
=   {dj0 : cj0  an}.
i	i
↓f (an)


Let In = {i ∈ I0 : cj0
  an}. Note that In ⊇ In+1 and I0 is finite, hence there

exists n0 such that if n ≥ n0 then In = In0 holds. From the assumption b /= ⊥
it follows that In  /= ∅. For each i ∈ In , cj0   an holds for all n ≥ n0. Hence
0	0	i

a = 
an ≥ cj0  ci holds for all i ∈ In . Thus
f (a) ≥   {(ci  di): i ∈ I0}(a)
↓f (a)
=   {di : ci  a, i ∈ I0}
↓f (a)
≥   {di : i ∈ In0 }
↓f (a)

=	 
↓f (an0 )
{di : i ∈ In0 }	(because of f (a) ≤ f (an0 ))

    {dj0 : i ∈ In }
i	0
↓f (a)
≥ b.

2
Next, we introduce an important property of a base, called M-closed, which is a generalization of a closed base.
Let D be a cpo. Given a finite subset F of D, we set
mubF = min{a ∈ D : F ≤ a}
to be the set of all minimal upper bounds of F . If D is an L-domain, then for each upper bound b of F , there exists a ∈ mubF such that a ≤ b (It is called mub-complete in [1]).
Definition 4.3 Let D be a continuous L-domain. A basis BD of D is said to be M-closed, if for any nonempty finite subset {(ai, bi) : i ∈ K} ⊆ BD × BD with bi  ai for all i ∈ K, there exists {ci : i ∈ K} ⊆f BD such that
bi  ci  ai for each i ∈ K.
For any I ⊆ K, if  i∈I ↑ai /= ∅ then mub{ci : i ∈ I} is finite and contained in
BD, i.e., mub{ci : i ∈ I} ⊆f BD.
By the definition of property M, the following result is obvious.
Lemma 4.4 Let BD be a basis of a continuous L-domain D. If BD is M-closed, then it has property M.
Proposition 4.5 Let D be a continuous L-domain. A basis BD of D is M-closed if and only if for any nonempty ﬁnite subset {(ai, bi) : i ∈ K} ⊆ BD × BD with bi  ai for all i ∈ K, there exists {ci : i ∈ K} ⊆f BD such that
bi  ci  ai for each i ∈ K.
For any I ⊆ K, mub{ci : i ∈ I} is ﬁnite and contained in BD, i.e., mub{ci :
i ∈ I} ⊆f BD.
Proof. The ”if” part is obvious. Suppose that BD is M-closed and {(ai, bi) : i ∈
K} ⊆ BD × BD is nonempty finite with bi   ai for all i ∈ K. For any nonempty
I ⊆ K, if	↑ai = ∅, then we can find {bI : i ∈ I}⊆ BD such that bi  bI  ai

i∈I
for all i ∈ I and

i∈I
i	i
↑bI = ∅ by Lemma 2.9. Set

I = {I ⊆ K :  ↑ai = ∅}.
i∈I
For each i ∈ K, we set
Bi = {bi}∪ {bI : i ∈ I ∈ I}.

Bi is nonempty and Bi ⊆ ↓ai. Set bj = W

↓ai
Bi. Then bj  ai. For each i ∈ K,

pick bjj ∈ BD such that bj  bjj  ai. Then the following conditions hold:
i	i	i

(i) ∀I ⊆ K,	↑ai = ∅ ⇐⇒ 
↑bj = 
↑bjj = ∅,

∀I ⊆ K,  i∈I ↑ai /= ∅ ⇐⇒  i∈I
↑bjj /= ∅.

Set B = {(bj, bjj) : i ∈ K}. Since BD is M-closed, we can find ci ∈ BD for
i  i

each i ∈ K such that bj
  ci   bjj
and for any I ⊆ K, 

i∈I
↑bjj
/= ∅ implies

mub{ci : i ∈ I} ⊆f BD. Hence, from the above statements (i) and (ii), all ci’s
satisfy the conditions of this proposition.	2

In the following, we define a new class of domain called ωAML-domains.
Definition 4.6 A continuous cpo is said to be an ωAML-domain if it is an L- domain endowed with a basis BD satisfying the following conditions:
BD is countable,
BD is almost algebraic,
BD is M-closed.
From now on, we always use a pair like (D, BD) to be an ωAML-domain with a required basis BD.
Since a continuous L-domain has property M if and only if it is an FS-domain (a retract of a bifinite domain further, see [12]), every ωAML-domain is an FS-domain.
Let’s see some examples. (1) An algebraic L-domain is an ωAML-domain if and only if it has an ω-base with property M. (2) The unit interval domain I in Example 3.7 is an ωAML-domain, i.e., the base BI is countable, almost algebraic and M-closed. (3) Given an algebraic L-domain L with an ω-base with property M, the function space [I → L] is an ωAML-domain. Particularly, if L is not bounded complete, then [I → L] is neither bounded complete nor algebraic.
Proposition 4.7 Let (D, BD) be an ωAML-domain, {ai : i ∈ K} ⊆f BD. Then we have
There are decreasing sequences (an)n∈ω ⊆ BD, i ∈ K such that
For each i ∈ K, (an)n∈ω is an almost algebraic sequence of ai.
∀I ⊆ K, ∀n ∈ ω,	↑ai = ∅ ⇐⇒	↑an = ∅ ⇐⇒	↑an = ∅.
∀I ⊆ K, ∀n ∈ ω, mub{an : i ∈ I} ⊆f BD.
There are increasing sequences (aˆn)n∈ω ⊆ BD, i ∈ K such that

For each i ∈ K,
aˆ1
  aˆ2
  · · ·   aˆn
  aˆn+1
  · · ·   ai in D and

Wn∈ω
aˆn = ai.

∀I ⊆ K, ∀n ∈ ω,
i∈I
↑ai = ∅ =⇒
i∈I
↑aˆn = ∅;

∀I ⊆ K, ∀n ∈ ω, mub{aˆn : i ∈ I} ⊆f BD.
Proof. (1) Since BD is almost algebraic, we choose almost algebraic sequences (a˜j)j
for each ai, where i ∈ K. Set
F = {I ⊆ K :  ↑ai /= ∅}.
i∈I

For any I ∈ F, we have  i∈I ↑ai /= ∅. Suppose x ∈ i∈I ↑ai, that is, ai  x holds for all i ∈ I. For a fixed i ∈ I, since (a˜ )j is an almost algebraic sequence of ai,

there exists ni ∈ ω such that a˜ni  x holds. Set
nI = max{ni : i ∈ I}.

Then a˜nI  x for all i ∈ I, i.e., 


i∈I
↑a˜ni /= ∅. Set

n0 = max{nI : I ∈ F},


we have

∀I ⊆ K, ∀n ≥ n0,  ↑ai /= ∅ ⇐⇒  ↑a˜n /= ∅.

i∈I	i∈I
We now consider a finite set {(a˜n, a˜n+1) : i ∈ K} for all n ≥ n0. Since BD is
i	i
M-closed, there exist {a¯n : i ∈ K}⊆ BD such that a˜n+1  a¯n  a˜n for each i ∈ K
i	i	i	i
and mub{a¯n : i ∈ I} ⊆f BD for all I ∈F by Proposition 4.5.
Next, we define an = a¯n+n0 for each n ∈ ω and each i ∈ K. It is easy to see that
i	i
sequences (an)n∈ω for all i ∈ K satisfy the required conditions.
(2) Since BD is a countable basis of D, we can choose sequences (aj)j from BD
increasing with respect to  such that Wj a = ai for each i ∈ K. Now we consider
j
a finite set {(aj+1, aj) : i ∈ K} for all j ∈ ω. From the assumption that BD is
i	i
M-closed, there exist {a¯j : i ∈ K}⊆ BD such that
aj  a¯j  aj+1
i	i	i


and

mub{a¯j : i ∈ I} ⊆f BD

for I ⊆ K and j ∈ ω by Proposition 4.5. Clearly, (a¯j)j∈ω is an increasing sequence
with respect to  such that W a¯j = aj for all i ∈ K. Set


E = {I ∈ K :  ↑ai = ∅}.
i∈I

Then E is finite and for each I ∈ E , there is nI ∈ ω such that Lemma 2.9. Next, set





i∈I




↑a¯nI




= ∅ by

n0 = max{nI : I ∈ E}
and let aˆn = a¯n+n0 . It is easy to check that sequences (aˆn)n (i ∈ K) are increasing
i	i	i
and satisfy the required conditions.	2
Definition 4.8 Let (D, BD) be an ωAML-domain, {ai : i ∈ K} ⊆f BD.
The family {(an)n∈ω : i ∈ K} of the decreasing sequences in Proposition 4.7.(1) is called a M-closed almost algebraic family of {ai : i ∈ K}.
The family {(aˆn)n∈ω : i ∈ K} of the increasing sequences in Proposition 4.7.(2) is called a M-closed approximating family of {ai : i ∈ K}.

Let D be a continuous L-domain and {ai : i ∈ I} ⊆ D be a nonempty finite

subset with 

i∈I
↑ai /= ∅. For each i ∈ I, let (an)n∈ω ⊆ D be an increasing sequence

with W	an = ai and an  an+1 for all n ∈ ω. Set
M⟨a,I⟩ = mub{ai : i ∈ I} M⟨an,I⟩ = mub{ai : i ∈ I}
n
for all n ∈ ω. We define a map rI : M⟨a,I⟩ −→ M⟨an,I⟩ as follows: ∀m ∈ M⟨a,I⟩,
rn(m)=  {an : i ∈ I}
I	i
↓m
for each n ∈ ω. Easily one sees that rn is well defined.
Lemma 4.9 Let (D, BD) be an ωAML-domain, {ai : i ∈ I} ⊆f BD. Let {(an)n∈ω :
i ∈ I} be a M-closed approximating family of {ai : i ∈ I}. Then we have
If i∈I ↑ai /= ∅ and M⟨a,I⟩ ⊆f BD, then

For any m ∈ M⟨a,I⟩, W

n∈ω
rn(m)= m and

r1(m)  r2(m)  · · ·  rn(m)  rn+1(m)	 m.
I	I	I	I
For each n ∈ ω, there exists nˆ > n such that M⟨anˆ ,I⟩ ⊆ ↑rn(M⟨a,I⟩).

If 

i∈I
↑ai = ∅, then i∈I
↑an = ∅ for all n ∈ ω.

Proof. (1) For any m ∈ M⟨a,I⟩, it is easy to check that (rn(m))n∈ω is an increasing

sequence with respect to   such that
true, that is, there is n0 ∈ ω such that
n∈ω
rn(m) = m. Suppose that (ii) is not




for all n > n0. Set
M⟨an,I⟩ /⊆ ↑rI (M⟨a,I⟩)

Fn = M⟨an,I⟩ \ ↑rI (M⟨a,I⟩)

for all n > n0. Then Fn /= ∅ for all n > n0. We claim that Fn+1 ⊆ ↑Fn holds for all
n > n0. In fact, for any y ∈ Fn+1, there is
xn =  {an : i ∈ I}∈ M⟨an,I⟩
↓y

such that xn ≤ y. This implies that xn /∈ ↑rn0 (M⟨a,I⟩) as y /∈ ↑rn0 (M⟨a,I⟩). Hence,
I	I
xn ∈ Fn, i.e., Fn+1 ⊆ ↑Fn. Consider the family {Fn : n > n0}. By the Rudin’s
Lemma [5, Lemma III-3.3], there is a directed subset H ⊆	F such that H ∩ F /= ∅ for all n > n . It means that  H ∈  ↑a , hence there is m ∈ mub{ai : i ∈ I} such that m ≤  H. We have rn0 (m)  m ≤  H. Hence, there is x ∈ H such that rn0 (m) ≤ x, and therefore x ∈ ↑rn0 (M⟨a,I⟩). On the other
I	I

↑rn0 (M⟨a,I⟩) - a contradiction.
(2) It follows directly from the definition of M-closed approximating family. 2

Theorem 4.10 Let (D, BD) be an ωAML-domain. Let {ai : i ∈ K} ⊆f BD satisfy the following conditions:
(i) ∀I ⊆ K,  i∈I ↑ai = ∅ =⇒  i∈I ↑ai = ∅;
∀I ⊆ K,  i∈I ↑ai /= ∅ =⇒ M⟨a,I⟩ ⊆f BD.
Then there exists a M-closed approximating family {(an)n∈ω : i ∈ K} of {ai : i ∈
K} such that
For all I ⊆ K, we have
i∈I ↑ai /= ∅ =⇒ ∀n ∈ ω, M⟨an+1,I⟩ ⊆ ↑rn(M⟨a,I⟩);



i∈I
↑ai = ∅ =⇒ ∀n ∈ ω, 

i∈I
↑an = ∅.

For any I ⊆ K, if  i∈I ↑ai /= ∅, then for any m ∈ M⟨a,I⟩,

↑m\ 
j∈K\I
↑aj /= ∅ =⇒ ∀n ∈ ω, ↑rn(m)\ 
j∈K\I
↑an /= ∅.

For all I, J ⊆ K, if I ⊆ J, then for all (m1, m2) ∈ M⟨a,I⟩ × M⟨a,J⟩,
m1 /≤ m2 =⇒ ∀n ∈ ω, rn(m1) /≤ rn(m2).
I	J
Proof. By Proposition 4.7.(2), there are increasing sequences (aˆin)n∈ω ⊆ BD for all i ∈ K which form a weakly M-closed approximating family of {ai : i ∈ K} .
First of all, set
F = {I ⊆ K :  ↑ai /= ∅} = {F1, F2, ··· , Fl}.
i∈I
For F1, by Lemma 4.9 (1) we have an increasing infinite sequence (n1)j∈ω ⊆ ω such

that

M	1	⊆ ↑r

n1
j (M	)

⟨aˆnj+1 ,F ⟩
F1	⟨a,F1⟩
n1

holds for all j ∈ ω. For F2, it is obvious that {(aˆ j )j∈ω : i ∈ F2} is a weakly
M−closed approximating family of {ai : i ∈ F2}. By Lemma 4.9 (1) again, there is an increasing infinite subsequence (n2)j of (n1)j such that
j	j


M	2	⊆ ↑r
n2
j (M	).

n
⟨aˆ j+1 ,F2⟩
F2	⟨a,F2⟩

By induction, we can get an increasing sequence (nj)j∈ω ⊆ ω such that
M⟨aˆnj+1 ,Fi⟩ ⊆ ↑rFi (M⟨a,Fi⟩)
holds for each i with 1 ≤ i ≤ l and j ∈ ω. Easily one sees that, {(aˆnj )j∈ω : i ∈ K}
is a M-closed approximating family of {ai : i ∈ K} such that condition (1) holds.
Secondly, we set

M = {m : ∃I ∈ F,  m ∈ M⟨a,I⟩ & ↑m\ 
j∈K\I
↑aj /= ∅}.

Clearly, M is finite. For any m ∈ M, there is I ∈ F such that m ∈ M⟨a,I⟩
with ↑m\	j∈K\I ↑aj /= ∅. Then aj /≤ m for all j ∈ K\I. Given j ∈ K\I, since
a = W	aˆnp , there is p ∈ ω such that aˆnpj /≤ m. Set

j	p∈ω j
j	j
pm = max{pj : j ∈ K\I}.

Then aˆnpm /≤ m holds for all j ∈ K\I. It means that aˆnp /≤ m holds for all j ∈ K\I

j
and p ≥ pm, which is equivalent to
↑m\ 
j∈K\I
j


↑aˆnp /= ∅

for all p ≥ pm. Because rnp (m) ≤ m, we have that

↑rnp (m)\ 
j∈K\I
↑aˆnp /= ∅

for all p ≥ pm. Next we set



then we get that ↑rnp (m)\ 
p0 = max{pm : m ∈ M},
↑aˆnp /= ∅ for all p ≥ p0 and m ∈ M.

I
Finally, set
j∈K\I	j

O = {(x, y): ∃I, J ⊆ K, I ⊆ J & (x, y) ∈ M⟨a,I⟩ × M⟨a,J⟩ & x /≤ y}.
Clearly, O is finite. For any given (x, y) ∈ O, there are I, J ⊆ K with I ⊆ J and we denote x and y by mI ∈ M⟨a,I⟩ and mJ ∈ M⟨a,J⟩ respectively. Since mI /≤ mJ , there is p(x,y) ∈ ω with p(x,y) ≥ p0 such that
rnp(x,y) (m ) /≤ m .
I	I	J
Therefore, rnp (mI ) /≤ rnp (mJ ) for all p ≥ p	. Now, we set
I	J	(x,y)
p1 = max{p(x,y) : (x, y) ∈ O}.
Then rnp (mI ) /≤ rnp (mJ ) for p ≥ p1 and (mI, mJ ) ∈ O. In the end, we define
I	J
j	nj+p1	j
ai = aˆi	for each i ∈ K and j ∈ ω. It is easy to check that {(ai )j∈ω : i ∈ K}
satisfy the all required conditions of this proposition.	2
Definition 4.11 Let (D, BD), (E, BE) be two ωAML-domains. A nonempty finite subset {(ai  bi): i ∈ K} of step functions of the function space [D → E] is called a good step function family, a g.s.f -family for short, if
(ai, bi) ∈ BD × BE for all i ∈ K and  i∈K ↑(ai  bi) /= ∅.
∀I ⊆ K,  i∈I ↑ai = ∅ =⇒  i∈I ↑ai = ∅.
∀I ⊆ K, i∈I ↑ai /= ∅ =⇒ M⟨a,I⟩ ⊆f BD & M⟨b,I⟩ ⊆f BE.

Let (D, BD), (E, BE) be two ωAML-domains, let {(ai   bi) : i ∈ K} be a
g.s.f -family. For any nonempty I ⊆ K, set

M⟨a,I⟩ = {m ∈ M⟨a,I⟩ : ∀j ∈ K\I, aj /≤ m},
Mub⟨a,K⟩ =  {M⟨a,I⟩ : ∅ /= I ⊆ K},
Mub⟨b,K⟩ =  {M⟨b,I⟩ : ∅ /= I ⊆ K}.

Easily, we have that {M⟨a,I⟩ : ∅ /= I ⊆ K} is a decomposition of Mub⟨a,K⟩.

Lemma 4.12 (1) For any m ∈ M⟨a,I⟩, ↑m \  j∈K\I ↑aj /= ∅.
(2) For any x ∈	↑a , there are a unique subset I ⊆ K and a unique m ∈
M⟨a,I⟩ such that x ∈ ↑m \  j∈K\I ↑aj.

Proof. (1) Assume that there exists some m ∈ M⟨a,I⟩ such that

↑m \ 
j∈K\I
↑aj = ∅.


Then ↑m ⊆ j∈K\I ↑aj. Since BD is almost algebraic, there is an almost algebraic sequence (mn)n∈ω of m. We claim that there exists j0 ∈ K\I such that mn ∈ ↑aj0 for all n ∈ ω. Otherwise, for each j ∈ K\I, there is nj ∈ ω such that mnj /∈ ↑aj; set
n0 = max{nj : j ∈ K\I},

we have mn0 /∈ j∈K\I ↑aj. It is a contradiction. Hence, ↑m ⊆ ↑aj0 for some j0 ∈ K\I. Note that since m, aj0 ∈ BD, it follows that aj0 ≤ m holds, which is contradictory to m ∈ M⟨a,I⟩.
(2) It follows from that for a given x ∈	↑a , we set I = {i ∈ K : a   x}
and m = W↓x{ai : i ∈ I}.	2
Definition 4.13 A map TK : Mub⟨a,K⟩ −→ Mub⟨b,K⟩ is called consistent if
TK is monotone under the induced orders on Mub⟨a,K⟩ and Mub⟨b,K⟩.

For any nonempty I ⊆ K, for any m ∈ M⟨a,I⟩, TK(m) ∈ M⟨b,I⟩.
Suppose TK : Mub⟨a,K⟩ −→ Mub⟨b,K⟩ is a consistent map. We define a function
fTK : D −→ E as follows: ∀x ∈ D,




fTK
(x) = ⎧⎨ TK(m), if ∃∅ /= I ⊆ K, m ∈ M⟨a,I⟩, x ∈ ↑m\  j∈K\I ↑aj,
⎩ ⊥,	otherwise.


It is easy to check by Lemma 4.12 that fTK is well defined.
Proposition 4.14 fTK is a Scott continuous function with fTK ∈ mub{(ai  bi): 
i ∈ K}.

Proof. First of all, we show that fTK is monotone. Let x, y ∈ D with x ≤ y. If x /∈   ↑a , then f  (x) = ⊥ ≤ f  (y). If x ∈   ↑a , then there is I ⊆ K with mx ∈ M⟨a,I⟩ such that x ∈ ↑mx\ j∈K\I ↑aj from Lemma 4.12 (2). By the same reason, there is J ⊆ K with I ⊆ J such that there is my ∈ M⟨a,J⟩ with y ∈ ↑my\ j∈K\J ↑aj. Then
my =  {ai : i ∈ J}≥  {ai : i ∈ I} =  {ai : i ∈ I} = mx.
↓y	↓y	↓x
So we have that fTK (x)= TK(mx) ≥ TK(my)= fTK (y).
Next we show that fTK preserves the supremum of every directed subset. Let H be a directed set of D. We need to consider two cases for	H. (1)	H /∈	↑a . It implies that h /∈	↑a for all h ∈ H. Thus we have that f		(	H) = ⊥ = f	(h). (2)	H ∈		↑a .  It implies that there is I ⊆ K such that
H ∈ ↑m\	↑a for some m ∈ M	from Lemma 4.12(2). It follows that there is h0 ∈ H with m  h0 and h0 /∈ i∈K\I ↑ai. Then
fTK (  H)= TK(m)= fTK (h0)=   fTK (h)
h∈H
as fTK is monotone.
Clearly, (a  b ) ≤ f	holds for each i ∈ K. For any x ∈	↑a , by Lemma
4.12 (2), there is I ⊆ K such that there exists m ∈ M⟨a,I⟩ with x ∈ ↑m\  j∈K\I ↑aj.


  {(ai  bi): i ∈ K}(x)=	 
{bi : ai  x} =	 
{bi : i ∈ I}

↓fTK
↓fTK (x)
↓fTK (x)

=	 
↓TK (m)
{bi : i ∈ I} = TK(m)

= fTK (x).
Therefore, fTK ∈ mub{(ai  bi): i ∈ K}.	2
The following is a characterization of the minimal upper bounds of a good step function family in function spaces.
Theorem 4.15 Let (D, BD), (E, BE) be two ωAML-domains, let {(ai  bi) : i ∈ K} be a g.s.f-family, f ∈ [D −→ E]. The following two conditions are equivalent to each other:
f ∈ mub{(ai  bi): i ∈ K}.
There exists a consistent map TK : Mub⟨a,K⟩ −→ Mub⟨b,K⟩ such that f = fTK .
Proof. (2) =⇒ (1): It follows directly from Proposition 4.14.
(1) =⇒ (2): For any x ∈    ↑a , by Lemma 4.12 (2), there is a subset I ⊆ K
such that there exists m ∈ M⟨a,I⟩ with x ∈ ↑m \  j∈K\I ↑aj. Next, we show that f

is constant on ↑m\	↑a . We choose an almost algebraic sequence (m )	of
m, then there is some mj  x. For any y ∈ ↑m\	i∈K\I ↑ai, there is some ml  y.
Let n be the maximum of jand l. Then m  mn  x, y. Hence, we have
f (x)= (  {(ai  bi): i ∈ K})(x)
↓f
=   {bi : ai  x} =   {bi : i ∈ I}

↓f (x)
= 
↓f (mn)

{bi : i ∈ I}
↓f (x)

= f (y)	(∗).

Then we define a map TK : Mub⟨a,K⟩ → Mub⟨b,K⟩ as follows: ∀m ∈ M⟨a,I⟩, TK(m) = f (x) for any x ∈ ↑m\ i∈K\I ↑ai. From (∗), TK is well defined. It is easy to check that TK is a consistent map with f = fTK .	2
Proposition 4.16 Let (D, BD), (E, BE) be two ωAML-domains, let {(ai   bi) : 
i ∈ K} be a g.s.f-family. For g ∈ [D −→ E] and for a consistent map TK :
Mub⟨a,K⟩ −→ Mub⟨b,K⟩, we have that
fTK   g ⇐⇒ ∀m ∈ Mub⟨a,K⟩, TK(m)  g(m).
Proof. If fTK  g, then (ai  bi)  g for all i ∈ K form Theorem 4.15. By Lemma 4.2, we have that bi  g(ai) for all i ∈ K. For any m ∈ Mub⟨a,K⟩, there is I ⊆ K with m ∈ M⟨a,K⟩. By Lemma 4.12, ↑m\ i∈K\I ↑ai /= ∅. Pick x ∈ ↑m\ i∈I ↑ai. Then
g(x) ≥ fTK (x)= TK(m) ∈ mub{bi : i ∈ I}.
On the other hand, by bi  g(ai) for all i ∈ I we have that
g(m)    {bi : i ∈ I} =   {bi : i ∈ I} = TK(m).
↓g(m)	↓g(x)
Conversely, let (gj)j be a directed collection of Scott continuous functions from (D, BD) to (E, BE) with g ≤ j gj. For any m ∈ Mub⟨a,K⟩, by the assumption TK(m)  g(m), there exists jm with TK(m)  gjm (m). Pick j0 with gj0 ≥ gjm for all m ∈ Mub⟨a,K⟩. It is easy to check that fTK ≤ gj0 . Hence, fTK  g.	2
The category of ωAML-domains
In this section, we are ready for showing that the category of ωAML-domains is cartesian closed. The main difficulty is to show the the function spaces are almost algebraic.
Definition 5.1 The category ωAML is given by:
Objects are all ωAML-domains
Morphisms are Scott continuous functions

Let (D, BD), (E, BE) be two ωAML-domains. We set GSF[D→E] to be the set of all g.s.f families of [D → E]. Let
B[D→E] =  {mub{(ai  bi): i ∈ K} : {(ai  bi): i ∈ K}∈ GSF[D→E]}.

Obviously, {(a  b): a ∈ BD, b ∈ BE}⊆ B[D→E].
The following result is straightforward from Definition 4.8 and 4.11.
Lemma 5.2 Let {(ai  bi) : (ai, bi) ∈ BD × BE & i ∈ K} be a ﬁnite set of step functions.
Let {(an)n∈ω : i ∈ K} (resp. {(bn)n∈ω : i ∈ K}) bea M-closed almost algebraic
i	i
family of {ai : i ∈ K} (resp. a M-closed approximating family of {bi : i ∈ K}).
If	↑(ai  bi) /= ∅, then (an  bn)  (an+1  bn+1)  (ai  bi) for all
n ∈ ω and {(an  bn): i ∈ I} is a g.s.f. family for all nonempty I ⊆ K.
i	i
Let {(aˆn)n∈ω : i ∈ K} (resp. {(ˆbn)n∈ω : i ∈ K}) be a M-closed approximating
i	i
family of {ai : i ∈ K} (resp. a M-closed almost algebraic family of {bi : i ∈
K}). If {(ai   bi) : i ∈ K} is a g.s.f family, then (aˆi   ˆbi)   (aˆn+1
ˆbn+1)  (aˆn  ˆbn) for all n ∈ ω and {(aˆn  ˆbn): i ∈ I} is a g.s.f. family for
i	i	i	i	i
all nonempty I ⊆ K.
Next, we will show the category ωAML is cartesian closed through several propositions.
Proposition 5.3 B[D→E] is a countable basis of [D → E].
Proof. First of all, we show that B[D→E] is a countable set. Because BD and BE
are countable, we have that GSF[D→E] is countable. For any given g.s.f family
{(ai   bi) : i ∈ K} of [D → E], mub{(ai   bi) : i ∈ K} is finite from Theorem
4.15. Hence B[D→E] is countable.
Next we show that B[D→E] is a basis of [D → E]. For any f ∈ [D → E],
f =  {(a  b): a ∈ BD, b ∈ BE, b  f (a)}.
We only need to show that W↓f {(ai  bi): ai ∈ BD, bi ∈ BE, bi  f (ai), i ∈ K} for a nonempty finite set K can be approximated by elements of B[D→E]. In fact, by Proposition 4.7 we get decreasing sequences (an)n∈ω for all i ∈ K which form a M-closed almost algebraic family of {ai : i ∈ K} and increasing sequences (bn)n∈ω for all i ∈ K which form a M-closed approximating family of {bi : i ∈ K}. For any
n ∈ ω,
  {(an  bn): i ∈ K}   {(ai  bi): i ∈ K} f.
i	i
↓f	↓f
By Lemma 5.2 (1), {(an   bn) : i ∈ K} is a g.s.f family for all n ∈ ω. Thus,
W {(an  bn): i ∈ I}∈ B[D→E] with W {(an  bn): i ∈ K} W {(ai  bi): 

i ∈ K}. Note that since
  {(an  bn): i ∈ K}   {(an+1  bn+1): i ∈ K}
i	i	i	i
↓f	↓f


and

   {(an  bn): i ∈ K} =  {(ai  bi): i ∈ K},

i	i
n∈ω ↓f	↓f
we finish the proof.	2
Proposition 5.4 B[D→E] is M-closed.
Proof. Let {(fj, gj) : j ∈ K} be a finite set of B[D→E] × B[D→E] with gj 
fj for all j ∈ K.  It follows that for any given j ∈ K, there is a g.s.f family
{(aji  bji) : i ∈ Ij} with fj ∈ mub{(aji  bji) : i ∈ Ij}. Set Pj = {j}× Ij and P = j∈K Pj. By Proposition 4.7, we obtain a M-closed almost algebraic family {(an)n∈ω : p ∈ P} of {ap : p ∈ P} and a M-closed approximating family
{(bn)n∈ω : p ∈ P} of {bp : p ∈ P}. Clearly,
fj =  {(ap  bp): p ∈ Pj}
↓fj
=  {  (an  bn): p ∈ Pj}
p	p
↓fj n∈ω
=    {(an  bn): p ∈ Pj}
p	p
n∈ω ↓fj
holds for each j ∈ K. From the assumption gj  fj we obtain an nj such that

if n ≥ nj then gj   W

↓fj
{(an
  bn) : p ∈ Pj} for any given j ∈ K. We set

n0 =max{nj : j ∈ K}, then gj  W
{(an  bn): i ∈ Ij} holds for all j ∈ K and

n ≥ n0.
↓fj	p	p

Next, we set cp = an0+1 and dp = bn0+1 for all p ∈ P . Then for any p ∈ P ,
p	p

ap  cp  an0 , bn0  dp  bp.
p	p


For each j ∈ K, set

hj =  {(cp  dp): p ∈ Pj}.
↓fj

By Lemma 5.2 (1), {(cp  dp): p ∈ Pj} is a g.s.f. family. Hence hj ∈ B[D→E] and g  h  f for all j ∈ K. For any nonempty J ⊆ K such that   ↑f /= ∅, applied Lemma 5.2 (1) again, {(cp  dp): p ∈  j∈J Pj} is also a g.s.f. family; thus
mub{hj : j ∈ J}⊆ mub{(cp  dp): p ∈  Pj} ⊆f B[D→E].
j∈J
2
Proposition 5.5 B[D→E] is almost algebraic.

Proof. First of all, we show that each f ∈ B[D→E] has an almost algebraic sequence (fn)n∈ω ⊆ B[D→E].
Given f ∈ B[D→E], there is a g.s.f family {(ai   bi) : i ∈ K} with f ∈
mub{(ai  bi): i ∈ K}. By Theorem 4.15, there exists a consistent map

TK : Mub⟨a,K⟩ −→ Mub⟨b,K⟩

such that f = fTK . Applying Lemma 3.2 to {TK(m) : m ∈ Mub⟨a,K⟩}, we get
{TK(m): m ∈ Mub⟨a,K⟩}⊆ BE such that TK(m)  TK(m) and TK(m1) ≤ TK(m2) whenever TK(m1) ≤ TK(m2) for all m, m1, m2 ∈ Mub⟨a,K⟩.
From Theorem 4.10, there exists a M-closed approximating family {(an)n∈ω : i ∈ K} of {ai : i ∈ K}, which satisfies properties (1), (2) and (3) of Theorem 4.10. By Proposition 4.7 (1), there is a M-closed almost algebraic family ({(bn)n∈ω : i ∈ K}) of {bi : i ∈ K}. From Lemma 5.2 (2), {(an  bn): i ∈ K} is a g.s.f. family for each
i	i
n ∈ ω.
For any m ∈ Mub⟨a,K⟩, there is Im ⊆ K with m ∈ M⟨a,Im⟩. Since



TK(m)   TK(m) ∈ M⟨b,Im⟩,

we have an nm such that if n ≥ nm then TK(m) ∈  i∈Im


↑bn. Set

n0 = max{nm : m ∈ Mub⟨a,K⟩}.

Pick a fixed n > n0. For any x ∈ Mub⟨an,K⟩, there is Ix ⊆ K with x ∈ M⟨an,Ix⟩.

This means that 

i∈Ix
↑an /= ∅. Hence, 

i∈Ix
↑ai /= ∅ and there exists a unique

mx ∈ M⟨a,I ⟩ such that rn−1(mx)  x by Theorem 4.10. Now, for each n > n0, we
x	I
define a map
TK : Mub⟨an,K⟩ −→ Mub⟨bn,K⟩ as follows: ∀x ∈ Mub⟨an,K⟩,

Tn (x)=   
↓TK (mx)
{bn : i ∈ Ix}.



Claim 1: For each n ≥ n0, Tn
is consistent.

By the definition of Tn , it is sufficient to show that Tn is monotone. Let x, y ∈
K	K
	
Mub⟨an,K⟩ with x ≤ y. There are I, J ⊆ K such that x ∈ M⟨an,I⟩ and y ∈ M⟨an,J⟩.
Clearly, I ⊆ J . By Theorem 4.10, there is m1 ∈ M⟨a,I⟩ and m2 ∈ M⟨a,J⟩ such that
rn−1(m1)   x and rn−1(m2)   y hold respectively. Then
I	J

rn−1(m1)=  {an−1 : i ∈ I}
I	i
↓x
=  {an−1 : i ∈ I}
↓y
≤  {an−1 : i ∈ J}
↓y
= rn−1(m2).
It follows that m1 ≤ m2 by Theorem 4.10 (3). Hence

Tn (x)=   
↓TK (m1)
=   
↓TK (m2)
≤   
↓TK (m2)
= Tn (y).
{bn : i ∈ I}

{bn : i ∈ I}

{bn : i ∈ J}

Therefore, fT n is a Scott continuous function with fT n ∈ mub{(an  bn): i ∈
K	K	i	i
K} for all n ≥ n0 by Proposition 4.14. Next we show the following claim.
Claim 2: (f n+n0 )n∈ω is an almost algebraic sequence of f .
K
We show it through three steps.
Step 1: For each n > n0, f  fT n .
By Proposition 4.16, we only need to show that TK(m)   fT n (m) for all
m ∈ Mub⟨a,K⟩. For any m ∈ Mub⟨a,K⟩, there is I ⊆ K such that m ∈ M⟨a,I⟩. It means that	i∈I ↑ai /= ∅ and ↑m\	i∈K\I ↑ai /= ∅ by Lemma 4.12.	So
↑rn(m)\	↑an /= ∅ for all n > n0 by Theorem 4.10 (2).	It follows that
I	i∈K\I	i
n	n−1	n
rI (m) ∈ M⟨an,I⟩. As rI	(m)  rI (m)  m by Lemma 4.9 (1), we have that


   
fT n (m) ≥ T (r (m)) =
{bn : i ∈ I} TK(m).

K	K  I
i
TK (m)


Step 2: For each n > n0, fT n+1  fT n .
K	K
The proof is similar to Step 1. By Proposition 4.16, we only need to show that
Tn+1(x)  fT n (x) holds for all x ∈ Mub⟨an+1,K⟩. Given x ∈ Mub⟨an+1,K⟩, there
K	K

is I ⊆ K such that x ∈ M⟨an+1,I⟩. By Theorem 4.10,  i∈I ↑ai /= ∅ and there is
I
Case 1: ↑rn(m)\	↑an /= ∅.

I
We have that
i∈K\I	i

  
fT n (x) ≥ T (r (m)) =
{bn : i ∈ I}

K	K  I

↓TK (m)
      

↓TK (m)
i

{bn+1 : i ∈ I}

= Tn+1(x).
Case 2: ↑rn(m)\	↑an = ∅.
I	i∈K\I	i
n

Clearly, there is J ⊆ K with I ⊆ J such that rI (m) ∈ M⟨an,J⟩. By Theorem 4.10

and Lemma 4.9,  j∈J ↑an /= ∅ implies that 

j∈J
↑aj /= ∅ and there is m1 ∈ M⟨a,J⟩

such that rn−1(m1)  rn(m)  x. Because
J	I

rn−1(m1)=	  {an−1 : i ∈ J}≥	 
{an−1 : i ∈ I} = rn−1(m),

J	i
↓rn(m)
i	I
↓rn(m)

we have that m1 ≥ m by Theorem 4.10 (3). Therefore,

   
fT n (x) ≥ T (r (m)= 
{bn : i ∈ J}

K	K  I


≥   
i
↓TK (m1)
{bn : i ∈ I}

↓TK (m1)

=   
↓TK (m)
      

↓TK (m)
{bn : i ∈ I}

{bn+1 : i ∈ I}

= Tn+1(x).
Step 3: For any g ∈ [D → E] with f   g, there exists n > n0 such that
f n   g.
K

For any given m ∈ Mub⟨a,K⟩, there exists I ⊆ K such that m ∈ M⟨a,I⟩. By Proposition 4.16 we have that TK(m)  g(m). Set



Since W



n∈ω
Am = {J ⊆ K : m ∈ M⟨a,J⟩}.
rn(m) = m for each J ∈ Am, there is nJ such that if n ≥ nJ then

g(rn(m))   TK(m). Set

Nm = max{nJ : J ∈ Am}.

Then g(rn(m))  TK(m) for all J ∈ Am and for all n ≤ n0. By the assumption that BE is almost algebraic, there exists ym ∈ BE such that TK(m)  ym  TK(m) and ym   g(rNm (m)) for all J ∈ Am. From TK(m)   ym, there is pm > n0 such

J
that if p ≥ pm then ym ∈
↑bp. Set

N0 = max{max{Nm : m ∈ Mub⟨a,K⟩}, max{pm : m ∈ Mub⟨a,K⟩}}.

We claim that f N0+1
  K
  g. In fact, for any x ∈ Mub⟨aN0+1,K⟩, there is Ix ⊆ K

such that x ∈ M⟨aN0+1,Ix⟩. By Theorem 4.10 (1), there exists m ∈ M⟨a,Ix⟩ with
rN0 (m)  x. Then we have
x
TN0+1(x)=    {bN0+1 : i ∈ I }
x
↓TK (m)
=  {bN0+1 : i ∈ Ix}≤ ym
↓ym
  g(rN0 (m))
x
≤ g(x).
Hence, by Proposition 4.16, f N0+1  g. Combining all of above, we have shown
K
that Claim 2.
Next, we show that for any f, g ∈ B[D→E], ↑f ⊆ ↑g ⇒ g ≤ f .
Claim 3: If g = (a  b) with (a, b) ∈ BD × BE, then ↑f ⊆ ↑g ⇒ g ≤ f . Suppose that f ∈ mub{(ai   bi) : i ∈ K}. There exists a consistent map
TK : Mub⟨a,K⟩ −→ Mub⟨b,K⟩ such that f = fTK . From the above proof, we get
the almost algebraic sequence ((fT n )n>n0 ) of f as above. Since ↑f ⊆ ↑g, we have

that (a  b)  f n
K
for all n ≥ n0; thus b  fT n (a) for all n ≥ n0 by Lemma

4.2. Without losing generality, we assume b /= ⊥. By the definition of fT n , there
K
n

are a nonempty I ⊆ K and an xa ∈ M⟨a,I⟩ with a ∈ ↑xa\
fT n (a)= Tn (xa). Hence, we have that

b  fT n (a)=	  {bn : an  a}.
i∈K\I ↑ai such that

K	i	i
↓fTn (a)
K


Set

In = {i ∈ K : an  a}.

Clearly, In /= ∅ and In+1 ⊆ In hold for all n ≥ n0. Hence there exists n1 ≥ n0 such

that if n ≥ n1 then In = In . This implies that a  an for all i ∈ In
and n ≥ n0.

So, we have a ≥ ai for all i ∈ In1 and a /≥ ai for all i ∈ K\In1 . It follows that
a ∈	i∈In1 ↑ai and there is m ∈ M⟨a,I⟩ with m ≤ a and	i∈In1 ↑ai /= ∅. Obviously,



m ∈ M⟨a,In
⟩ and a ∈ ↑rn
1
(m)\ i∈K\In1
↑an. Therefore,

  
fT n (a)= 
{bn : i ∈ In } b.

K	i	1
↓TK (m)
It is easy to see that (fT n (a))n≥n0 is an almost algebraic sequence of TK(m). So we

have
TK(m)= 
n≥n0
f n (a) ≥ b.
K



assumption that BD is almost algebraic we obtain xˆ ∈ ↑m\
xˆ  x. Hence,
i∈K\In1
↑ai such that

f (x) ≥ f (xˆ)= fTK (x)= TK(m) ≥ b.
This implies that (a  b) ≤ f . So we have proved claim 3.
Next, suppose that g, f ∈ B[D→E] with ↑f ⊆ ↑g. Then there is a g.s.f. family
{(ai  bi) : i ∈ K} such that g ∈ mub{(ai  bi) : i ∈ K}. Clearly, ↑f ⊆ ↑g ⊆
↑(ai  bi) for all i ∈ K. By Claim 3, (ai  bi) ≤ f for all i ∈ K. Pick fˆ ∈ ↑f , then
g  fˆ. Hence, we have
g =  {(ai  bi): i ∈ K}
↓g
=  {(ai  bi): i ∈ K}
↓fˆ
=  {(ai  bi): i ∈ K}
↓f
≤ f.
2
From the above three propostions, the class of all ωAML-domains is closed under function spaces. Let L be an algebraic L-domain such that (1) the set of all compact elements is countable and has property M, (2) L is not bounded complete. Then [I → L] is an ωAML-domains, which is neither algebraic nor bounded complete. Hence, the notion of a M-closed is strictly weaker than being closed. Since the finite cartesian products of ωAML-domains are ωAML-domains, we have the following result.
Theorem 5.6 The category ωAML of ωAML-domains is cartesian closed.

Acknowledgement
The authors thank the anonymous referees for pointing out many mistakes and for their helpful suggestions. The author also gratefully acknowledges the support of the NSF of China (No. 11871353).

References
S. Abramsky, A. Jung, Domain theory, in: S. Abramsky, D.M. Gabbay, T.S.E. Maibaum (Eds.), Semantic Structures, in: Handbook of Logic in Computer Science, vol. 3, Clarendon Press, 1994, pp. 1-168.
R. Amadio, P-L. Curien, Domains and Lambda-calculi, Cambridge University Press, 1998.
A. Edalat, R. Heckmann, A computational model for metric spaces, Theoretical Computer Science, 193 (1998), 53-73.

T. Erker, M. Escard´o, K. Keimel, The way-below relation of function spaces over semantic domains, Topology and its Applications, 89 (1998), 61-74.
G. Gierz et al., Continuous Lattices and Domains, Cambridge University Press, 2003.
G. Hamrin, V. Stoltenberg-Hansen, Two categories of effective continuous cpos, Theoretical Computer Science, 365 (2006), 216-236.
X. Jia, A. Jung, H. Kou, Q. Li, H. Zhao, All cartesian closed categories of quasicontinuous domains consist of domains, Theoretical Computer Science, 594 (2015), 143-150.
A. Jung, Cartesian closed categories of domains, in: CWI Tracts, vol. 66, Centrum voor Wiskunde en Informatica, Amsterdam, 1989, 107 pp.
A. Jung, The classification of continuous domains, in: Proceedings, Fifth Annual IEEE Symposium on Logic in Computer Science, IEEE Computer Society Press, 1990, pp. 35-40.
J. Lawson, Spaces of maximal points, Mathematical Structures in Computer Science, 7(1997), 543-555.
J. Lawson, Computation on metric spaces via domain theory, Topology and Its Applications, 85(1998), 247-263.
J. Liang, K. Keimel, Compact Continuous L-domains, Computers and Mathematics with Applications, 38(1999), 81-89.
M. Mislove, Topology, domain theory and theoretical computer science, Topology and Its Applications, 89(1998), 3-59.
D. Scott, Outline of a mathematical theory of computation, In Preceedings of the Fourth Annual Princeton Conference on Information Science and Systems, Princeton University Press, 1970, pp. 169- 176.
D. Scott, Data types as lattices, SIAM Journal on Computing, 5 (1975), 522-587.
M. B. Smyth, The largest cartesian closed category of domains, Theoretical Computer Science, 27 (1983), 109-119.
D. Spreen, H. Schulz, On the equivalence of some approaches to computability on the real line, in: K. Keimel, G.Q. Zhang, Y. Liu, Y. Chen (Eds.), Domains and Processes, Proc. of the First Internat. Symp. on Domain Theory, Shanghai, China, 1999, Kluwer Academic Publishers, Boston, 2001, pp. 67-101.
A. Tang, Recursion theory and descriptive set theory in effectively given T0 spaces, Ph.D. Thesis, University of Princeton, Princeton, 1974.
X. Xi, L. Xu, J. Lawson, Function spaces from coherent continuous domains to RB-domains, Topology and its Applications, 206 (2016), 148-157.
