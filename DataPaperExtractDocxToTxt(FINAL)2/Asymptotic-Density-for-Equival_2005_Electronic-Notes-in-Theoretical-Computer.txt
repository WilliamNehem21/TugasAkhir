Electronic Notes in Theoretical Computer Science 140 (2005) 81–91	
www.elsevier.com/locate/entcs

Asymptotic Density for Equivalence

Grzegorz Matecki1
Computer Science Departament Jagiellonian University Krako´w, Poland


Abstract
In this paper we study the asymptotic behavior of the fraction of true formulas against all formulas over k propositional variables with equivalence as the only connective in the language. We consider two ways of measuring the asymptotic behavior. In the first case we investigate the size of the tautology fraction of length n against the number of all formulas of length n. The second case is very similar and we investigate the size of the tautology fraction of length at most n against the number of all formulas of length at most n. In both cases we are interested in finding the limit (which is often called ”density” and ”cumulative density”, respectively) of each fraction when n → ∞.
It was already proved that the asymptotic density for k = 1 exists for all binary connectives except equivalence. In this paper we prove that for every k there are exactly two accumulation
points for the language based on equivalence: 0, 1/2k−1 for asymptotic density and 1/2k−1(4k + 1), 4k/2k−1(4k + 1) for cumulative asymptotic density.
Keywords: probabilistic density, propositional calculus, asymptotic evaluation


Introduction
This paper is a continuation of searching for asymptotic density of some propo- sitional logic in the following sense. We investigate the size of the fraction of true formulas of given length n against the number of all formulas of length n. Generally, we intend to find the limit of that fraction when n	. If the limit exists, it represents a number, which we may call the density of truth for the logic investigated.

1 Email: matecki@ii.uj.edu.pl




1571-0661 © 2005 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2005.06.022

To be more formal, we examine the language Fk consisting of some for- mulas over k propositional variables. For every subclass T ⊂ Fk we may associate the density μ(T ) as:

(1)
μ(T ) = lim
 #{t ∈ T : |t| = n}

n→∞ #{t ∈ Fk : |t| = n}
where |·| stands for the length of formula.
It is obvious that there might be a subclass for which the number μ(T ) does not exist. However, if it exists, we may also call it an asymptotic probability of finding a formula from the class T among all formulas from Fk. The most interesting case is when T is a class of all tautologies in Fk, because then we may ask about probability of finding a true formula.
There is also another approach to study asymptotic density. In this case we investigate the size of the fraction of true formulas of length at most n against the number of all formulas of length at most n. As before we are interested in finding the limit of that fraction when n	. Similar to the previous definition, if this limit exists we may call it as the cumulative density of truth for the logic investigated. For every subclass T ⊂ Fk we define the cumulative density cμ(T ) as follows:

(2)
cμ(T ) = lim
 #{t ∈ T : |t| ≤ n} .

n→∞ #{t ∈ Fk : |t| ≤ n}
Some interesting results can be found in [4]. The authors investigated the language of all formulas built with an implication operator over one variable. They proved that the limit above f√orthe class of all tautologies over one
variable exists and is equal to 1/2+	5/10 ≈ 72, 36%. In case of k variables
there is still no proof that the limit exists. However it is shown that the fraction of all tautologies is always positive and lays between (4k + 1)/(2k + 1)2 and (3k + 1)/(k + 1)2.
Another interesting result is presented in [9]. The previous language is extended by adding negation. It turns out that the limit still exists, but negation lowers down the density of truth to the level of 42.32%. Additionally in [8] author presents a simple and fast (log(n)) probabilistic algorithm for checking if a given formula is a tautology.
More general results can be found in [1], where authors consider language build with two connectives (AND, OR) and literals. They proved that asymp- totic density exists for any boolean function defined in this language, when number of variables is fixed. Additionally, they improved, already known, the upper bound for asymptotic density of chosen boolean function.
Another results can be found in the Master Thesis [3]. It was the study of asymptotic density of truth in a propositional logic with one fixed binary

boolean operator over one propositional variable. For most of them the asymp- totic density is equal to 0 (FALSE, AND, OR, Π1, Π2 – projections, NOT Π1, NOT Π2, NOT →, NOT ←, NOT ⇔). Where is one obvious connective (TRUE) with the density equals 1 and only one (⇔) for which the density does not exist. For the rest of them results are as follows: 72.36% for both implications, 5.37% for NOR and 33.82% for NAND.
The equivalence is the only connective, for which asymptotic density does not exist. Contrary, for negation of equivalence the asymptotic density is equal to 0. And for that reason, this paper presents detailed results for an equivalence operator. The main result, proved in Theorem 4.1, says that the density of the language based on equivalence does not exist. Instead of that, there are two accumulation points: 0 and 1/2k−1. The only reason for existence of two limits is that there are no tautologies with odd length.
The case of cumulative density was not investigated for any of those con- nectives. In this paper we prove that the number cμ( ) does not exist for the class of all tautologies based on equivalence operator. Like before we show the existence of two accumulation points: 1/2k−1(4k + 1) and 4k/2k−1(4k + 1). The reason for this is again the absence of tautologies with odd length.

Counting formulas and tautologies
The language Fk{⇔} over k propositional variables consists of propositional
variables {v1,... , vk} and it is closed by equivalence symbol ⇔.

vi ∈ Fk{⇔}
∀i ≤ k

φ ⇔ ψ ∈ Fk{⇔} iff φ ∈ Fk{⇔} and ψ ∈ Fk{⇔}
The length of formula φ ∈ Fk{⇔} is denoted by |φ| and is defined as the total number of all variables in the formula, so for all 1 ≤ i ≤ k |vi| = 1 and
|φ ⇔ ψ| = |φ| + |ψ|.
Definition 2.1 By Fk we mean the total number of formulas from F{⇔} of

the length n, so: (3)
n	k

Fk = #{φ ∈ F{⇔} : |φ| = n}

Lemma 2.2 The number Fk = knCn, where Cn is n–th Catalan number and is given by the following recursion schema:

(4)
(5)
C0 = 0,	C1 = 1,
n−1
Cn =	CiCn−i
i=1

Proof. It is easy to see that every formula φ  ψ can be identified with a binary tree t1∧t2 where t1 and t2 represent φ and ψ, respectively. Of course any leaf is labeled by appropriate variable and the length of the formula is equal to the number of all leaves in the tree.
It is known that the number of all binary trees with single–labeled leaves is equal to Cn. Finally every leaf can be labeled by one of k variables, so indeed Fk = knCn.	 
More information about Catalan numbers can be found in [7] but also in [2].
Definition 2.3 By Tk we mean the total number of all tautologies from F{⇔}
n	k
of the length n, so:
(6)	Tk = #{φ ∈ F{⇔} : |φ| = n and φ is a tautology}.
All that we need now is to determinate the number Tk. The following simple observation will provide us with enough information to write closed form (Lemma 2.5) for Tk. But this form is too complicated and Theorem 2.6 give us the useful form for Tk.
Remark 2.4 Any formula from language Fk{⇔} is a tautology iff every vari- able occurs even number of times.
Proof. It is enough to notice that equivalence operator is commutative and distributive. It allows us to write formulas without any brackets and in any order.	 
Lemma 2.5 The following holds:

(7)
Tk = Cn	Σ
n
2i ,... , 2i

2i1+...+2ik=n	1	k
Proof. Let τ ∈ Fk{⇔} be a tautology. By the Remark 2.4 there are no tau- tologies with odd length (at least one variable occurs odd number of times)

k
2n+1
= 0, which is correct because the sum in (7) is empty when n is odd.

Now we can assume that τ  = 2n. We already know (see the proof of
Lemma 2.2), that every formula can be identified as a binary tree, where every leaf is labeled by an appropriate variable. So all we need is to evaluate a number of binary trees with 2n leaves where every label occurs even number of times. And then, by the Remark 2.4, we get the number of all tautologies of even length.
In our case there are C2n binary trees with only one label. Each of those trees must be labeled to preserve the condition on even number of each vari- able. Let 2ij (j = 1,... , k) stands for the number occurrences of the label vj.

Obviously 2i1 + ... + 2ik = 2n. Now it is easy to see that for a fixed tree the number of the proper labelling is equal to the number of all partitions of n–set into k blocks, where each of them has 2ij members, respectively (j = 1,... , k).
Finally, the number of appropriate trees and thus the number of tautologies is equal to

C2n ·	Σ
2n
2i ,... , 2i
  = C2n ·	Σ
(2n)!
(2i )! ... (2i )!

2i1+...+2ik=2n	1	k	2i1+...+2ik=2n	1	k
what ends the proof.	 


Theorem 2.6


Tk =

1
2k Cn

Σi=0

 k 


(k − 2i)n.

Proof. Notice that it is enough to show that

(8)
2i1+.Σ..+2ik=n
n!
=
(2i1)! ... (2ik)!
1
2k
i=0
 k (k − 2i)n.

Then by Lemma 2.5 the thesis will be proved.
Consider the following function (cosh(z))k, where cosh(z) = ez + e−z . We will extract the coefficient n![zn]{(cosh(z))k} by two ways. First, notice that



(ez + e−z)k =
Σi=0
 k 



e(k−2i)z =
Σn=0
n  k

n!
i=0
 k (k − 2i)n



since ez expands into
∞

n=0
zn . So, the coefficient n![zn]{(cosh(z))k} is equal to

righthand sum of (8). Next, notice that cosh(z) expands into ∞
n=0
z2n . To find

coefficient by zn in (cosh(z))k we use the rule of Cauchy product, which gives
us

∞


n=0
k
z2n

(2n)!
=
n=0
z2n


(2n)!
2i1+..Σ.+2ik=2n
(2n)!
.
(2i1)! ... (2ik)!

And, as we can see, this give as the lefthand side of (8) (if n is odd then the sum in (8) is empty of course).
 

The cumulative number of tautologies
In this section we present the asymptotic behavior for all tautologies of length not greater then n. The following theorem gives the tool for finding the asymptotic behavior of the given sequence by analyzing only its generating function. The proof for the following lemma can be found in [6] [Thm. 8.4], see also in [7] [Thm. 5.3.2].
Theorem 3.1 (Szego¨ lemma) Let v(z) be analytic in z < 1 with a ﬁnite number of singularities eiϕ(k) , k = 1,... , s, at the circle z = 1. Suppose that in the neighborhood of each eiϕ(k) , v(z) has the expansion of the form
(9)	v(z)= Σ v(k)(1 − ze−iϕ(k) )a(k)+pb(k) ,
p≥0
where a(k)	and b(k) > 0 is real, and the branch chosen above for the expansion equals v(0) for z = 0. Then

(10)
[zn]{v(z)} = Σ
ξ(q)

(k)
p
 a(k) + pb(k) 
(−eiϕ(k) )n + O(n−q),


with
(11)
k=1 p=0


ξ(q)= max (1/b(k))(q	(a(k))	1) .
k=1...s

To use Szego¨ lemma we need to know the behavior of 1/2 ( 1)n+1. The observation below shows that the component O(nq) in (10) does not determine the behavior of whole sequence (for q = 2).
Remark 3.2 1/2 (−1)n+1 = Θ(n−3/2).
Proof. Because  1/2 (−1)n+1 = 	1	 2n and from the Stirling formula



n n	1
12n+1
e
n n		1 12n .
e

we know that 1/2 (−1)n+1 behaves asymptotically as	1 √	.	 
Definition 3.3 By SFk and STk we mean the total number of formulas and
n	n
tautologies, respectively, from Fk{⇔} of the length at most n, so:
SFk = #{φ ∈ F{⇔} : |φ| ≤ n},
STk = #{φ ∈ F{⇔} : |φ| ≤ n and φ is a tautology}.

Lemma 3.4
n	n
SFk = Σ Fk = Σ kiCi

	


​
STk =
Σi=0
Tk =
1
2k
s=0
k	n
s
i=0
(k − 2s)iCi

Proof. It is obvious that two formulas with the different length are different.
The equation {φ : |φ| ≤ n} = n	{φ : |φ| = k} shows, that SFk = Σn	Fk

k	Σn	k
k=0
n	i=0  i




​
f (z)= 1 − √1 − 4z .
C	2

Proof. Let fC(z)= n∞=0 Cnzn. Using definition (4) and (5) we get fC(z)= fC(z) fC(z)+ z. Solving this equation with the obvious condition fC(0) = 0 gives the thesis.	 
Lemma 3.6 Generating functions fSF (z), fST (z) for numbers SFk, Tk are:

​
fSF
n	n
(z) = fC(kz)
1 − z

​

fST
1
(z) = 
2k
k


s=0 2s/k=
 k fC

((k − 2s)z) 1 − z

Proof. It is a simple consequence of Lemma 3.4 and fact that SFk and STk
n	n
are subtotal sequences.	 
Lemma 3.7
SFk/(4k)n = −  2k	 1/2 (−1)n + O(n−2).
4k − 1	n


Proof.  Let fSF (z)= fSF (z/(4k)). Notice that
[zn] f	(z) [z ]{fSF (z)} =	(4k)n



 SFk
=
(4k)n



and

f˜SF (z)= 2k ·
1 − √1 − z .
4k − z

Function fSF has two singularities: 1 and 4k. Because 4k > 1 so the only singularity on circle |z| = 1 is 1. To find the expansion in the vicinity of z =1 

let us define function f^SF such as f^SF (
 	
1 − z)= f˜SF (z), so

f^ (t)= 2k ·	1 − t	= v + v t + v t2 + ... 


where v1 =
f^S' F (0) = − 2k  . Function f˜SF satisfies assumptions of Szeg¨o

b =1 
[zn]{f˜ (z)} = v  1/2 (−1)n + O(n−2)
what ends the proof.	 
Lemma 3.8
STk/(4k)n = −	k	 1/2 (−1)n − 	k	 1/2 + O(n−2).

2k−1(4k − 1)	n
2k−1(4k + 1)	n

Proof. Let us define the following function f˜ST (z)= fST (z/(4k)), where


[zn]{f˜ST (z)} =
[zn]{fST (z)} (4k)n
STk
=	n 
(4k)n



and


k	Σ k 1 −  1 − k−2sz

f˜ST (z)= 2k−1 ·


s=0 2s/k=
.
4k − z

Function fST has the following singularities: 4k, k/(k − 2s) for s = 0, 1,... ,k and 2s /= k. It is obvious that on circle |z| = 1 the only singularities are 1 and −1 (for s =0 and s = k) and there are no singularities inside |z| < 1. To find the expansion for f˜ST in the√vicinity of z =1 and z = √−1 let us consider



k	1 − t





k	Σ k 1 −  1 − k−2s + k−2st2

	



k	1 − t




k	Σk−1  k 1 −  1+ k−2s − k−2st2

	
	

where f^1' (0) = −	k	 , f^2' (0) = −	k	

Function fST satisfies assumptions of Szeg¨o Lemma, with a = 0 and b = 1/2. Then finally, for q =2 we have

[zn]{f˜
(z)} = f^' (0) 1/2 (−1)n + f^' (0) 1/2 + O(n−2)



Conclusions
Finally we are ready for the main results. The following theorems show that neither asymptotic density nor cumulative asymptotic density exists for tau- tologies.
Theorem 4.1

​
Tk
lim inf	n =0 

n→∞	k
Tk	1
lim sup  n =

n→∞
k	2k−1

Proof. Notice that limn→∞
(k 2i)2n
k2n
is equal to 1 if i =0 or i = k and for any

0 < i < k it equals 0. Using Lemma 2.2, Theorem 2.6 and the observation
above, we get

lim
k	1
2n = lim
 k (k − 2i)2n	1

	

and
n→∞ Fk
n→∞ 2k

Tk
i
i=0
k2n

0
2k−1

lim
  2n+1
= lim
= 0.



Theorem 4.2
n	k
2n+1
n	k
2n+1

​
 STk	1
lim inf	=

n→∞  SFk	2k−1(4k + 1)
STk	4k
lim sup 	n =

n→∞  SFk
2k−1(4k + 1)

Proof. From Lemma 3.7 and Lemma 3.8 we know that:
SFk/(4k)n = a  1/2  (−1)n + O(n−2)
STk/(4k)n = b 1/2 (−1)n + c 1/2  + O(n−2)

where a = − 2k  , b = −	k	 and c = −	k	 .

4k−1
2k—1 (4k−1)
2k—1 (4k+1)

From Remark 3.2 it follows that O(n—2 ) = o(1), so
(1/2)


STk
STk
/(4k)2n+1
b − c	1

	


and
n	k
2n+1
n	k
2n+1
/(4k)2n+1
a	2k−1(4k + 1)

lim
 STk
= lim
 STk /(4k)2n
=
b + c	4k
=

n→∞ SFk
n→∞ SFk /(4k)2n
a	2k−1(4k + 1)


Now it is obvious that asymptotic density for the class of all tautolo- gies built with equivalence operator and k propositional variables does not exist. But we managed to find two accumulation points: 0 and 1/2k−1. More- over, there are no tautologies with odd length. Therefore the only sense is to measure tautologies with even length. By proposed way of measuring the asymptotic density of equivalence–tautologies is equal to 1/2k−1.
The things are little more different in the case of cumulative density. The limit defined by formula (2) also does not exist and it has two accumulation points: 1/2k−1(4k + 1) and 4k/2k−1(4k + 1). In this case unfortunately we cannot measure tautologies only with even length, because in definition of cumulative density formulas of every length (odd and even) must occur.

Acknowledgement
The author would like to thank Philippe Flajolet for valuable hints and sug- gestions which improved the content and presentation of these results.

References
Chauvin B., Flajolet P., Gardy D., Gittenberger B., And/Or Trees Revisited, Combinatorics, Probability and Computing (2004) 13, 457-497.
Comtet L., Advanced Combinatorics: The Art of Finite and Inﬁnite Expansions, rev. enl. ed. Dordrecht, Netherlands: Reidel, 1974.
Matecki G., G¸esto´s´c asymptotyczna formul- zbudowanych ze spo´jnik´ow dwuargumentowych, Master Thesis, Computer Science Institute, Jagiellonian University, 2002.
Moczurad M., Tyszkiewicz J., Zaionc M., Statistical properties of simple types, Mathematical Structures in Computer Science, vol 10 (2000), 575-594.
Robinson H., A remark on Stirling formula, Ammer. Math. Monthly 62 (1955), 26-29.
Szeg¨o G.,Orthogonal polynomials. Fourth edition, AMS, Colloquim Publications (1975), 23, Providence.

Wilf H.S., generatingfunctionology . Second edition. Academic Press, Boston (1994).
Zaionc M., Statistics of implicational logic. WoLLIC’2003 10th Workshop on Logic, Language, Information and Computation., Electronic Notes in Theoretical Computer Science, volume 84 (2003).
Zaionc M., On the asymptotic density of tautologies in logic of implication and negation. Reports on Mathematical Logic, volume 38 (2004).
