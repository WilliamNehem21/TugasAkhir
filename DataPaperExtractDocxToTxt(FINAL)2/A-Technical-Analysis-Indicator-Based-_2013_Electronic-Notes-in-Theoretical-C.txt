Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 292 (2013) 27–37
www.elsevier.com/locate/entcs

A Technical Analysis Indicator Based On Fuzzy Logic
Alejandro Escobar1, Julian Moreno2 and Sebasti´an Mu´nera3
Computer Science Department Universidad Nacional de Colombia Medell´ın, Colombia

Abstract
In this paper an indicator for technical analysis based on fuzzy logic is proposed, which unlike traditional technical indicators, is not a totally objective mathematical model, but incorporates subjective investor features such as the risk tendency. The fuzzy logic approach allows representing in a more “human” way the decision making reasoning that a non-expert investor would have in a real market. Such an indicator takes as input, general market information like profitability and volatility of the stock prices, while the outputs are the buy and sell signals. In addition to present the detailed formulation of the indicator, in this paper a validation for the same is presented, which makes use of a multi-agent based simulation platform within which the behavior and profits obtained by agents that used traditional technical indicators such as MA, RSI and MACD, are compared against those obtained by agents that use the fuzzy indicator for the decision making process.
Keywords: stock market, technical analysis, technical indicator, fuzzy logic, simulation.

Introduction
Stock markets are complex systems within which a high number of participants converge, interacting with each other with the aim of maximizing their profits by means of trading stocks [11,17]. The first world’s stock market was created on 1460 in Antwerp, Belgium, approximately, but it was until the early XVII century when the first important stock market was established in Amsterdam, Netherlands, thanks to the Dutch East India Company, in order to make deals with shares and bonds. Today, among the most important stock markets in the world, we can find: NYSE (New York Stock Exchange), NASDAQ (National Association of Securities Dealers Automated Quotations), TSE (Toronto Stock Exchange), NYSE–Euronext, as well as stock markets from Paris, Amsterdam, London, Madrid, Milan and Frankfurt.

1 Email: aescobag@unal.edu.co
2 Email: jmoreno1@unal.edu.co
3 Email: sfmunera@unal.edu.co

1571-0661 © 2013 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2013.02.003

Despite the fact that the supporting principle for stock markets is really simple: to buy low and sell high; the decision of when and how much to buy or sell is not that simple. To overcome this difficulty, a set of techniques have emerged: speculative analysis, which can be thought of as the study of market information with the aim of predicting rise and fall trends [2]. A particular case of this analysis is technical analysis, which is one of the most widely used mechanisms in decision making support due to its effectiveness and relative simplicity.
Applying investment strategies with technical analysis requires making use of indicators which are mathematical and statistical models, calculated from histori- cal data of stock prices and volumes [2,14]. In this paper, we propose a technical indicator, which, like traditional indicators, uses stock general information, but also, considers the investor personality with a variable that measures his risk tendency level. Another fundamental characteristic of this indicator is that its output is not binary, i.e., it does not answer the question of whether to buy or sell with a “Yes” or “No”, but provides a recommendation level for these decisions, which is then compared with a threshold defined by the investor and determines whether to buy or sell. For this purpose, we do not make use of a traditional mathematical model, but an artificial intelligence technique known as fuzzy logic, which is a mechanism that allows representing linguistic concepts that might be ambiguous, inaccurate and hard to represent, with other models [21,22]. The idea of using artificial intelli- gence in technical analysis is not new, in fact, there are several works that use tools like artificial neural networks [8,13,1,6,15], genetic algorithms and genetic program- ming [16,9,5,12,19,4], among others [20,3,10]; however, models based specifically on fuzzy logic have not been worked and much less under the context of the Colombian stock market, as is the case in this paper.

Formulation
Although there are several variables that can be considered when making a buying or selling decision in a stock market, in this proposal, we made a simplification and only those variables that we know are more relevant and intuitive for non-expert participants were taken into account. The selected variables are the stock profitabil- ity and volatility, along with the investor’s risk tendency. Stock profitability and volatility show how “proper” is the moment for buying or selling, from a merely ob- jective point of view; while the investor’s risk tendency incorporates the investor’s subjective perception according to his risk profile, with the aim of showing how reluctant or prone the investor is, for making a buying or selling decision, given market conditions. In order to quantify this variable we chose a continuous range from 0 to 1, where small values (near to zero) imply a cautious profile while large values (near to one) imply a risky profile.
Given that the reasoning process an investor carries out is generally different for the buying and selling decision, these are analyzed independently, in both cases through fuzzy inference system. For the buying decision case, Fig. 1 shows fuzzy sets for the input variables: profitability (see Fig. 1a), volatility (see Fig. 1b) and

risk tendency (see Fig. 1c); while Fig. 2 shows fuzzy set for the output variable, i.e., the decision recommendation level.

Fuzzy set for profitability

Fuzzy set for volatility

Fuzzy set for risk tendency Fig. 1. Fuzzy sets for buying


Fig. 2. Fuzzy set for buy recommendation level

In these sets, the linguistic values that the variables can take are included, which

measure in words their meaning, and each curve represents the membership level of each variable’s numeric value to each one of these sets.
The modeled buy reasoning process is based on the following: if the investor has a low risk tendency, there is a higher buy probability if profitability is high and volatility is low, thus representing that this investor aims to have a secure profit when price behavior is stable. On the other hand, if the investor has a high risk tendency, it is possible that he buys even though the landscape is uncertain, i.e., even though there is a low profitability and/or a high volatility. This kind of participant may prefer to risk awaiting high profit, even in operations during unstable market behavior. Obviously, this risky attitude might bring benefits sometimes, but also, it might make him lose more often than a cautious participant.
Our goal with the previous explanation was to give a general vision of what fuzzy reasoning modeling means, but in no way was intended to give a thorough description of the rules the system uses, because of the high number of them. We show all possible rules for buy decision in Table 1.
Table 1
Rules for buying fuzzy inference system

Profitability
Low	 Medium	 High Low	Low	Medium	High

Little prone


Moderately prone


Very prone
Medium	Very low	Low	Medium


High	Very low	Very low	Low
Low	Medium	High	Very high
Medium			Low		Medium			High High	Very low			Low		Medium Low		High	Very high	Very high
Medium	Medium	High	Very high
High	Low	Medium	High


In the sell reasoning process, there are several differences against buy reasoning process. Among the considered input variables, net price profitability and volatil- ity are not considered anymore, instead, they are measured as a function of their expected value. In this case, the considered variables are: X1, the relationship be- tween mean profitability averaged over the last periods and expected profitability on the short term, as shown in eq. (1), where t is expected time, E is the maximum waiting time, Ri is current profitability and RE is expected profitability; X2, similar to X1 but relates mean volatility Vi and expected volatility VE on the short term, as shown in eq. (2).

(1)
	Ri	
X  =

1	(R
∗  t )

(2)
 Vi 
X2 =
VE

The fuzzy sets for these variables are shown in Fig. 3: X1 (see Fig. 3a) and X2 (see Fig. 3b). The risk tendency and recommendation level sets are the same as in buy reasoning process case.
Sell reasoning rules are substantially different from buy reasoning rules, given



Fuzzy set for X1

Fuzzy set for X2
Fig. 3. Fuzzy sets for selling
that a sale decision is not that simple. In this case, we can say that an investor might want to sell in two situations: The first and more desired one is that a stock has raised its price reaching an expected value with which the investor feels comfortable. The less desired situation, which might occur, is that a stock has reduced its price to such point that the investor decides to sell in order to not lose more. Thus, for example, in the first situation when volatility is low, the investor may keep waiting longer, but if volatility is high, it is more likely that he sells immediately fearing the price to fall abruptly. On the contrary, the same case in the second situation may instigate him to wait a little bit longer. All the rules for the fuzzy selling inference system are shown in Table 2.





Little prone
Table 2
Rules for selling fuzzy inference system

X1
Very low		Low	Medium		High Low	Very high	Medium		High	Very high High	 Very high	 Medium		 High	 Very high

	
Moderately prone	Low	Very high	Low	Low	High
High	High	Low	Medium	Very high
Very prone	Low	High	Very low	Very low	Medium
High	Medium	Very low	Low	High
The described reasoning processes for both, buying and selling, can be sum- marized by fuzzy surfaces which show how the output variable behaves given the combination of two of the input variables (visualized in 3D) as shown in Fig. 4. On Fig. 4a the fuzzy surface for buying reasoning is shown, while Fig. 4b shows the fuzzy surface for selling reasoning. As it is not possible to show all input variables in the same figure, we only show profitability and volatility versus recommendation

level for the buying reasoning, leaving risk tendency fixed with a mean value of 0.5. For the selling reasoning, we only show X1 and X2 leaving risk tendency fixed with a value of 0.5 as well.

Fuzzy surface for buy reasoning

Fuzzy surface for sell reasoning
Fig. 4. Fuzzy surfaces for buy and sell reasoning


Experiments and results analysis
In order to validate the proposed indicator, we used a multi-agent based simulation platform, developed with the aim of evaluating possible investment strategies in a real stock market (a detailed description of this platform can be found in [7,18]). The configuration data for every simulation consists of number of periods (days) to be simulated, number of investor agents and number of stocks. For every stock,

historical data must be provided which is nothing less than a time series of informa- tion like minimum price, maximum price, starting price, closing price, average price and traded volume during a fixed amount of periods. It is important to make clear, however, that even though two agents might have exactly the same configuration, it does not necessarily mean that they make the same decisions at the same time as each agent has different aspects such as number of periods they take into account for calculating input variables.
In total, five different scenarios were simulated; each one spanning 120 peri- ods (four months), and two stocks fed with real historical data of 60 days from the Colombian stock market were included: Chocolates and PFBCOLOM 4 . For comparing efficiency of the proposed indicator against other well known techni- cal indicators, 410 agents for each scenario were used: 100 with DWMA (Double Weighted Moving Average), 100 with RSI (Relative Strength Index) and 100 with MACD (Moving Average Convergence Divergence); for the proposed indicator, 110 agents were included: 10 with risk tendency of 0.0, 10 with risk tendency of 0.1, and so on, until the last 10 with a risk tendency of 1.0. A threshold for the recommen- dation level for both, buying and selling reasoning, was fixed to 0.7 for all agents. If the resulting recommendation level from the fuzzy inference system exceeds this threshold, the system triggers a signal for buying or selling, depending on each case. The results obtained from the five simulations are summarized in Table 3, where,
in quantitative terms, profits obtained by the involved agents and their relationship with stocks behaviors, are shown. For this analysis, profitability refers only to the difference between the agent’s stock balance at the end of the simulation compared with his initial stock balance, i.e., it does not consider operation costs.
It can be observed in Table 3 that in most scenarios, the agents, who finally obtained more profit on average, were those who used the proposed indicator, al- though they also obtained the highest volatility. The amount of transactions done during the simulations was larger in average, as well as its variability, which in a real market does not make an advantage considering that each transaction has an associated cost.
With the aim of comparing profits of the 110 agents who used the proposed indicator, the profit mean and the standard deviation for all the agents in the five scenarios according to their respective risk tendency are shown in Fig. 5. It can be observed that, as risk tendency grows, profitability tends to grow on average as well (although not exactly linearly). However, profitability behavior with high risk tendencies tends to stabilize. This does not necessarily mean that a high risk tendency implies larger profit, but that on average profitability and risk tendency are proportional, which is an expected fact in most risk markets.
Now, let us assume we have the same five scenarios, but this time we want to compare how mean profitability of the agents who use the proposed indicator varies by changing the threshold μ and fixing risk tendency. For this purpose, the same previous conditions were simulated, but only agents with the proposed indicator

4 Colombian stock market. http://www.bvc.com.co







Agents
Stocks
 



Fig. 5. Indicator results according to risk tendency
optimal threshold for a balance between these two criteria would be located around 0.8, because at this value, the difference regarding the highest profitability obtained by the agents is not high, while the amount of transactions decreases considerably.

Fig. 6. Indicator results according to μ threshold


Conclusions
In this paper a technical indicator is proposed which unlike traditional indicators is not a merely objective mathematical model, but incorporates subjective factors such as the investor’s risk profile. This indicator satisfies the characteristics of a technical indicator as it is based on past and present behavior (basically the price) of stocks, and outputs an advice for determining when to buy or sell a stock. The approach used for the indicator is fuzzy logic with the aim of conveying in an accurate manner, the way that a non-expert investor would analyze the market according to his preferences and profile. The fuzzy logic approach is especially suitable for this purpose as it is possible to represent concepts which are by nature ambiguous and hard to represent mathematically.
In order to prove the effectiveness of the new proposed indicator, we used a multi-agent based simulation platform, in which several simulations were run with historical time series of two of the most important stocks of the Colombian stock market as a supply for the agents’ reasoning. In the simulations, a fixed amount of agents were incorporated whose reasoning for the decision making process was based on the new proposed indicator and their performance was compared against that of other agents using well known indicators like moving averages, RSI and MACD.

36	A. Escobar et al. / Electronic Notes in Theoretical Computer Science 292 (2013) 27–37
After running the simulations it was found that in all scenarios, on average, the
agents who used the new indicator got more profits than those who used traditional indicators. However, those agents were also the ones who got the largest amount of transactions, which is a disadvantage considering that each transaction has an associated cost in a real scenario. It was also found that there was more variability for these two variables with the agents that used the new indicator. This was, however, an expected behavior and depends on the investor’s risk tendency.
A last analysis was made for the threshold, observing how its value affected mean profitability and the amount of transactions. The result was that an optimal threshold that makes a balance for the optimization of these two criteria is around
0.8. In the future, more input variables will be incorporated into the fuzzy system and the way the current variables are modeled will be improved. Besides, we intend to enhance the investor’s profile representation such that it is more similar to reality. Furthermore, we will consider including other type of analysis such as fundamental analysis for enriching the decision making process.

References
Abraham, A., N.S. Philip and P. Saratchandran, Modeling chaotic behavior of stock indices using intelligent paradigms, Neural, Parallel and Scientific Computations 11 (2003), 143–160.
A´lvarez, A., “Analisis burs´atil con fines especulativos: un enfoque t´ecnico moderno,” Ed. Limusa, M´exico, 2007.
Chen, W.H., J.Y. Shih and S. Wu, Comparison of support-vector machines and back propagation neural networks in forecasting the six major asian stock markets, International Journal of Electronic Finance 1 (2006), 49–67.
Cheung, W.M. and U. Kaymak, A fuzzy logic based trading system. In Proceedings of the Third European Symposium on Nature inspired Smart Information Systems (2007), St. Julians, Malta.
Dempster, M. and C. Jones, A real-time adaptive trading system using genetic programming, Quantitative Finance 1 (2001), 397–413.
Egeli, B., M. O¨ zturan, and B. Badur, Stock Market Prediction Using Artificial Neural Networks, In Proceedings of the 3rd International Conference on Business (2003), Honolulu, Hawaii.
Escobar, A., J. Moreno and S.F. Mu´nera, Modelo de simulaci´on de una subasta de doble punta mediante el paradigma multi-agente. In Proceedings of the Fourth Colombian Computing Conference (4CCC 2009), Medell´ın, Colombia.
Fern´andez-Rodr´ıguez, F., C. Gonz´alez-Martel and S. Sosvilla-Rivero, On the Profitability of Technical Trading Rules Based on Artificial Neural Networks: Evidence from the Madrid Stock Market, Economics Letters 69 (2000), 89–94.
Fyfe, C., J. Marney and H. Tarbert, Technical analysis versus market efficiency: A genetic programming approach, Applied Financial Econonomics 9 (1999), 183–191.
Ince, H. and T.B. Trafalis, Short term forecasting with support vector machines and application to stock price prediction, International Journal of General Systems 37-6 (2008), 677–687.
Johnson, N.F., P. Jefferies and P.M. Hui, “Financial Market Complexity,” Oxford U. Press, N.Y., 2003.
Kendall, G. and Y. Su, The Co-evolution of Trading Strategies in a Multi-agent Based Simulated Stock Market Through the Integration of Individual Learning and Social Learning, In Proceedings of IEEE 2003 Congress on Evolutionary Computation (2003), 2298–2305.
Kim, K. and I. Han, Genetic algorithms approach to feature discretization in artificial neural networks for the prediction of stock price index, Expert Systems with Applications 19-2 (2000), 125–132.


Kirkpatrick, C.D. and J.R. Dahlquist, “Technical analysis: The complete resource for financial market technicians,” Financial Times Press, Upper Saddle River, 2007.
Lam M., Neural network techniques for financial performance prediction: integrating fundamental and technical analysis, Decision Support Systems 37-4 (2004), 567–581.
Li, J. and E.P.K. Tsang, Improving technical analysis predictions: an application of genetic programming, In Proceedings of The 12th International Florida AI Research Society Conference (1999), Orlando, Florida, 108–112.
Llacay, B. and G. Peffer, Simulaci´on realista de los mercados financieros con sistemas multi-agentes (Working paper), Diposit Digital de la UB (Spain) (2008), URL: http://hdl.handle.net/2445/4821.
Moreno, J., A. Escobar and S. Mu´nera, Modelaci´on de la Bolsa de Valores de Colombia: Una aproximacion desde los agentes de software, Tendencias en Ingenier´ıa de Software e Inteligencia Artificial 3 (2009), 159–166.
Potvin, J.Y., P. Soriano and M. Vall´ee, Generating trading rules on the stock markets with genetic programming, Computers & Operations Research 31-7 (2004), 1033–1047.
Wang, H. and A.S. Weigend, Data mining for financial decision making, Journal Decision Support Systems 37-4 (2004), 457–460.
Zadeh, L.A., Fuzzy Algorithms, Information and Control 12 (1968), 94–102.
Zadeh, L.A, Fuzzy logic = Computing with words, IEEE Transactions on Fuzzy Systems 4 (1996), 103–111.
