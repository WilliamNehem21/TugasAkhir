Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 345 (2019) 37–61
www.elsevier.com/locate/entcs

Algebras of the Extended Probabilistic Powerdomain Monad
Jean Goubault-Larrecq 1,2 Xiaodong Jia 1,3
LSV, ENS Paris-Saclay, CNRS, Universit´e Paris-Saclay, France

Abstract
We investigate the Eilenberg-Moore algebras of the extended probabilistic powerdomain monad Vw over the category TOP0 of T0 topological spaces and continuous maps. We prove that every Vw-algebra in our setting is a weakly locally convex sober topological cone, and that a map is the structure map of a Vw -algebra if and only if it is continuous and sends every continuous valuation to its unique barycentre. Conversely, for locally linear sober cones—a strong form of local convexity—, the mere existence of barycentres entails that the barycentre map is the structure map of a Vw -algebra; moreover the algebra morphisms are exactly the linear continuous maps in that case.
We also examine the algebras of two related monads, the simple valuation monad Vf and the point-continuous valuation monad Vp. In TOP0 their algebras are fully characterised as weakly locally convex topological cones and weakly locally convex sober topological cones, respectively. In both cases, the algebra morphisms are continuous linear maps between the corresponding algebras.
Keywords: Valuation powerdomain, monads, Eilenberg-Moore algebras, topological cones


Introduction
The probabilistic powerdomain construction on directed complete partially ordered sets (dcpo for short) was introduced by Jones and Plotkin and employed to give semantics to programming languages with probabilistic features [14,13]. The prob- abilistic powerdomain of a dcpo consists of continuous valuations defined on the Scott-opens of the dcpos, where a valuation is a function assigning real numbers to Scott-open subsets of the dcpo. Jones proved that this construction is a monad on the category of dcpos and Scott-continuous functions. Moreover, she proved that this monad can be restricted to the full subcategory of continuous domains,

1 This research was partially supported by Labex DigiCosme (project ANR-11-LABEX-0045-DIGICOSME) operated by ANR as part of the program “Investissement d’Avenir” Idex Paris-Saclay (ANR-11-IDEX-0003- 02).
2 Email: goubault@ens-paris-saclay.fr
3 Email: jia@lsv.fr

https://doi.org/10.1016/j.entcs.2019.07.015
1571-0661/© 2019 The Author(s). Published by Elsevier B.V.
This is an open access article under the CC BY license (http://creativecommons.org/licenses/by/4.0/).

the algebras of this monad in the category of continuous domains are the continu- ous abstract probabilistic domains, and the algebra homomorphisms are continuous linear maps. Kirch [20] generalised Jones and Plotkin’s probabilistic powerdomain by stipulating that a valuation might take values that are not finite. He showed that this construction is again a monad that can be restricted to the category of continuous domains, and the algebras of this monad in the category of continuous domains are the continuous d-cones, a notion well investigated in [25].
A topological counterpart of the probability powerdomain construction was con- sidered by Heckmann in [11] and then by Alvarez-Manilla, Jung and Keimel in [15,2]. They considered the weak topology on the set of continuous valuations instead of the Scott topology. In [11, Proposition 5.1], Heckmann proved that the resulting space is sober for every topological space; and in [15,2], the authors proved that the resulting topological space is stably compact if the underlying space is stably compact. This topological construction is consistent with earlier work [20], where Kirch proved that the weak topology and Scott topology coincide on the set of continuous valuations if one starts with a continuous domain. Cohen, Escard´o and Keimel further developed this construction in [4], where they employed the theory of topological cones to retrieve the definition and called the construction the extended probabilistic powerdomain over T0 spaces. They showed that the extended proba- bilistic powerdomain construction is a monad over the category of T0 topological spaces and considered its algebras in related categories in the same paper, leaving a conjecture that the algebras of this monad on the category of stably compact spaces and continuous functions are the stably compact locally convex topological cones. Restricting this monad to the category of compact ordered spaces (compact pospaces) and continuous monotone maps, Keimel identified the algebras of this monad as the compact convex ordered sets embeddable in locally convex ordered topological vector spaces [16].

Outline.
We are concerned about the algebras of the extended probabilistic powerdomain in the category of T0 topological spaces and continuous functions. We recall some known facts about the extended probabilistic powerdomain monad in Section 2, and on cones in Section 3. We prove in Section 4 that every algebra of this monad in the category of T0 spaces is a weakly locally convex sober topological cone, and algebra morphisms must be continuous linear maps. We then show the tight connection that there is between algebras of the extended probabilistic powerdomain monad and barycentres in a sense inspired from Choquet [3], and already used by Cohen,
Escardo´ and Keimel in [4]: the structure maps of algebras map every continuous
valuation to one of its barycentres, and conversely, if barycentres are unique and the barycentre map is continuous, then it is the structure map of an algebra. More- over, on so-called locally linear cones, the mere existence of barycentres defines an algebra, and on convex-T0 cones, all continuous linear maps are algebra morphisms. Compared to [4], we do not need any stable compactness assumption, and this is due to the Schroder-Simpson theorem (see Section 3.2). We also isolate the new

notion of local linearity, which seems to have been overlooked in ibid.
In Section 5, we consider two related probabilistic powerdomain constructions, the simple valuation monad Vf and the point-continuous valuation monad Vp. Those were initially considered by Heckmann in [11]. We fully characterise the algebras of this two monads as weakly locally convex topological cones and weakly locally convex sober topological cones, respectively. In both cases, the algebra morphisms are shown to be continuous linear maps between the corresponding algebras. Those are simple consequences of Heckmann’s results.

Preliminaries.
We use standard notions and notations in domain theory [7,1] and in non-Hausdorff topology [8]. The category of topological spaces and continuous functions is denoted by TOP. For the convenience of our discussion, we restrict ourselves to its full subcategory TOP0 of T0 topological spaces. The category of dcpos and Scott- continuous functions is denoted by DCPO. We use R+ to denote the set of positive reals, and R+ to denote the positive reals extended with ∞. The extended positive reals R+ will play a vital role in our discussion. Whenever R+ is treated as a topological space, we mean that it is equipped with the Scott topology until stated otherwise.

The extended probabilistic powerdomain monad
The extended probabilistic powerdomain functor
Definition 2.1 A valuation on a topological space (X, OX) is a function μ from
OX to the extended positive reals R+ satisfying for any U, V ∈ OX:
(strictness) μ(∅)= 0;
(monotoncity) μ(U ) ≤ μ(V ) if U ⊆ V ;
(modularity) μ(U )+ μ(V )= μ(U ∪ V )+ μ(U ∩ V ).
A continuous valuation μ on (X, OX) is a valuation that is Scott-continuous from OX to R+, that is, for every directed family of open subsets Ui,i ∈ I, it holds:
(Scott-continuity) μ( i∈I Ui)= supi∈I μ(Ui).
Valuations on the same topological space X are ordered by μ ≤ ν if and only if μ(U ) ≤ ν(U ) for all U ∈ OX. The order is sometimes referred as the stochastic order.
The set of continuous valuations on X with the stochastic order is denoted by VX.
Example 2.2 Let X be a topological space, the Dirac mass δx at x ∈ X is defined by δx(U )=1 if x ∈ U and 0 otherwise. The Dirac mass δx is a continuous valuation on X for every x ∈ X.

Example 2.3 Let X be a topological space, The linear combinations Σn	riδx
i
of Dirac masses are also continuous valuations, where ri ∈ R+, xi ∈ X. These
valuations are called simple valuations. The set of all simple valuations on X is denoted as Vf X.
Example 2.4 Let X be a topological space, μ, ν be continuous valuations on X and r, s ∈ R+. The linear combinations rμ+ sν, defined as (rμ+ sν)(U )= r· μ(U )+ s · ν(U ) for every open subset U , are again continuous valuations.
Proposition 2.5 VX is a dcpo in the stochastic order.
Proof. For a directed family of continuous valuations μi,i ∈ I, and any open subset U ⊆ X, define (supi∈I μi)(U )= supi∈I μi(U ). One verifies that supi∈I μi is another continuous valuation. See [7, Lemma IV-9.8] and [11, Section 3.2.(5)] for details. 2
We can extend V to a functor from the category of topological spaces and con- tinuous functions to the category of dcpos and Scott-continuous functions by using the following proposition.
Proposition 2.6 Let f : X → Y be a continuous function between topological spaces X and Y , and μ be any continuous valuation on X. Then the map Vf : μ '→ (U ∈ OY '→ μ(f−1(U ))) is Scott-continuous from VX to VY .
Proof. Straightforward.	2
Corollary 2.7 V is a functor from the category TOP to the category DCPO. Proof. Straightforward.	2
There is a canonical functor Σ from the category DCPO to TOP, namely, the Scott-space construction. For any dcpo L, ΣL is the topological space (L, σL), where σL is the Scott topology on L; and for any Scott-continuous function f : L → M , Σf = f is continuous from ΣL to ΣM .
Post-composing the functor Σ with V, one obtains an endofunctor Σ ◦V over the category TOP, we denote it by Vs. Pre-composing the functor Σ with V, however, yields an endofunctor V ◦ Σ over the category DCPO, we denote it by Vd.
In her PhD thesis [13], Jones showed that Vd is a monad over the cate- gory DCPO, and moreover, Vd can be restricted to the full subcategory of con- tinuous domains. She then used this monad to model probabilistic side effects of programming languages.
Naturally, one wonders whether Vs is a monad on TOP. Unfortunately, this is not the case in general. The problem is that the topology OX is, in general, too sparse to sufficiently restrict the Scott topology on VX. Alternatively, one considers the weak topology on VX, and we will see this is the right topology on VX that gives rise to a monad structure.
Definition 2.8 [20, Satz 8.5] For a topological space X, the weak topology on VX is generated by a subbasis of sets of the form [U > r],U ∈ OX, r ∈ R+, where [U > r] denotes the set of continuous valuations μ such that μ(U ) > r. We use

VwX to denote the space VX equipped with the weak topology and call VwX the
extended probabilistic powerdomain or the valuation powerdomain over X.
Analogously, we can extend Vw into a functor on TOP by defining its actions
Vwf on continuous maps f : X → Y by Vwf (μ)(V )= μ(f−1(V )).
Proposition 2.9 Vw is an endofunctor on the category TOP.
Proof. The main thing is to check that Vwf is continuous for every continuous map f : X → Y . For every open subset V of Y , for every r ∈ R+ \ {0}, (Vwf )−1([V > r]) = {μ ∈ VX | μ(f−1(V )) > r} = [f−1(V ) > r].	2
Integral with respect to continuous valuations
Continuous valuations are variations on the idea of measure. While measures allow one to integrate measurable functions, continuous valuations allow one to integrate lower semi-continuous functions. A lower semi-continuous function from a topolog- ical space to R+ is the same thing as a continuous function from X to R+, where the latter is equipped with the Scott topology. We write LX for the set of lower semi-continuous functions from X to R+.
For any topological space X, every lower semi-continuous function h : X → R+ has a Choquet type integral with respect to a continuous valuation μ on X defined by:

x∈X
h(x)dμ =
∞
μ(h−1
0
(r, ∞])dr,

where the right side of the equation is a Riemann integral. If no risk of confusion occurs, we usually write x∈X h(x)dμ as  h dμ. For the discussion that follows, we collect some properties of this integral, and readers are referred to [20,24,21] for more details.
Lemma 2.10	(i) For every simple valuation μ	=	Σn	riδx ,  ∫ h  dμ	=

Σn	∫
i=1	i

For all lowe∫r semi-con∫tinuous functions h, k : X → R+ and r, s ∈ R+, ∫ (rh +
For every directed family (in the pointwise order) of lower semi-continuous function∫s ha : X	→	R+,a	∈	A, we have that	(supa∈A ha) dμ	=
For every open set U,	χU dμ = μ(U ), here χU is the characteristic function of U deﬁned as χU (x)=1 when x ∈ U and 0 otherwise.
For all continuous valuations μ, ν ∈ VwX and r, s ∈ R+, for every lower semi- continuous function f : X → R+,	f d(rμ + sν)= r	f dμ + s	f dν.
Let f : X → Y be a continuous map, μ be a continuous valuation on X, and
g : Y → R	be a lower semi-continuous function. Then	g(y)dV f (μ) = 
∫x∈X (g ◦ f )(x)dμ.

Those properties imply a form of the Riesz representation theorem for continuous valuations [20]. It states that integrating with respect to a continuous valuation ν defines a lower semi-continuous linear functional f '→ f dν on LX and that, conversely, for every lower semi-continuous linear functional φ on LX, there is a unique continuous valuation ν representing φ, in the sense that φ(f ) = f dν for every f ∈ LX, and ν is given by ν(U )= φ(χU ) for every open set U .
For all h ∈ LX and r ∈ R+, we define [h > r]= {μ ∈ VwX | h dμ > r}. It is routine to check that [h > r] is open in the weak topology of VwX. They also form a subbase of the weak topology, as [U > r]= [χU > r].

The monad structure
Using integration, we now argue that Vw defines a monad on the category TOP. Recall that a monad on a category C consists of an endofunctor T : C → C to- gether with two natural transformations: η : 1C → T (where 1C denotes the identity functor on C) and m : T 2 → T , satisfying the equalities m ◦ Tm = m ◦ mT and m ◦ Tη = m ◦ ηT = 1T . The natural transformations η and m are called the unit and the multiplication of the monad, respectively. Alternatively, one can use the following equivalent description, due to Manes.
Definition 2.11 [22] A monad on a category C is a triple (T, η, †) consisting of a map T from objects X of C to objects TX of C, a collection η = (ηX )X of morphisms ηX : X → TX, one for each object X of C, and a so-called extension operation † that maps every morphism f : X → TY to f† : TX → TY such that:

η†
= idTX ;

for every morphism f : X → TY , f† ◦ ηX = f ;
for all morphisms f : X → TY and g : Y → TZ, g† ◦ f† = (g† ◦ f )†.
The advantage of this definition is that one does not even need to verify that T is a functor before checking it is a monad. In fact every monad defined in this sense gives rise to an endofunctor, by defining its action on morphisms f : X → Y as Tf = (ηY ◦f )†. The unit of the monad η is given by (ηX )X and the multiplication m
is given by mX = id†	for every object X in C.
The following is folklore, and is implicit in [4], for example.
Proposition 2.12 The functor Vw is a monad on the category TOP. The unit η is given by ηX : x '→ δx for every X, and for continuous function f : X → VwY the extension operation is given by

f†(μ)(U )=	f (x)(U )dμ.
x∈X

For every lower semi-continuous function h : Y → R+, the following disintegration

formula holds:
h(y)df †(μ)=	h(y)df (x)  dμ.	(1)
y∈Y	x∈X	y∈Y
In particular, the function x '→ ∫y∈Y h(y)df (x) is lower semi-continuous.
Proof. The map x ∈ X '→ f (x)(U ) is continuous for every open set U by the definition of the weak topology, hence the formula makes sense. We directly prove the last claim. Let us assume that x ∈ X satisfies y∈Y h(y)df (x) > r, where
r ∈ R+ \ {0}. The function h is the supremum of the countable chain of maps

hN , defined as  1
N 2N
k=1
h−1(k/2N ,∞]
, so ∫

y∈Y
hN (y)df (x) > r for some N ∈ N.

Let us write hN as ϵ Σn	χU  (a so-called step function), where ϵ > 0 and each
k
Uk is open, to avoid irrelevant details. Then ϵ Σn	f (x)(Uk) > r, so there are

numbers rk ∈ R+ \ {0} such that f (x)(Uk) > rk for each k and ϵ Σn
rk ≥ r.

  n	1
∫	k=1	j

∫y∈Y
hN (y)df (xj)= ϵ Σn
f (xj)(Uk) > r for every xj in that neighbourhood.

Let us define Λ(h) as x∈X  y∈Y h(y)df (x) dμ for every h ∈ LX, which now makes sense. It is easy to see that Λ is linear and lower semi-continuous, hence there is a unique continuous valuation ν such that Λ(h)= h dν for every h ∈ LY . We have ν(U )= Λ(χU ), and this gives us back the definition of f†(μ)(U ).
It remains to check the monad equations. That could be done as in [20], but Manes’ formulation makes it easier. Equations (i) and (ii) are immediate. For (iii), we have:

(g† ◦ f†)(μ)(U )= ∫
y∈Y
g(y)(U )df †(μ)

=
x∈X
y∈Y
g(y)(U )df (x) dμ	by (1),

while:
(g† ◦ f )†(μ)(U )= ∫
x∈X
g†(f (x))(U )dμ

=
x∈X
y∈Y
g(y)(U )df (x)  dμ	by definition.
2

Remark 2.13 For a topological space X, the multiplication mX of the monad
at VwX sends every continuous valuation a ∈ Vw(VwX) to id†	(a) = (U '→
∫	UwX
In this paper, we are mainly interested in the Eilenberg-Moore algebras of the valuation powerdomain monad over the category TOP0. Recall that an algebra of a monad T over category C is a pair (A, α), where A is an object in C and

αA : T A → A is a morphism of C, called the structure map, such that αA ◦ηA = idA and αA ◦ mA = αA ◦ T αA. A morphism f : A → B in C is called a T -algebra morphism if f ◦ αA = T f ◦ αB.
From the basic theory of algebras of monads, we know that in particular the pair (T A, mA) is an algebra of T , where m is the multiplication of T . In our case, (VwX, mX ) is a Vw-algebra for every topological space X. In order to locate all the algebras, let us first examine the structure of VwX for an arbitrary topological space X. We will see that VwX is a topological cone as defined below.
Cones
Topological, locally convex, and locally linear cones
The following notions are from [17].
Definition 3.1 A cone is a commutative monoid C together with a scalar mul- tiplication by nonnegative real numbers satisfying the same axioms as for vector spaces; that is, C is endowed with an addition (x, y) '→ x + y : C × C → C which is associative, commutative and admits a neutral element 0, and with a scalar multi- plication (r, x) '→ r · x : R+ × C → C satisfying the following axioms for all x, y ∈ C and all r, s ∈ R+:

We shall often write rx instead of r · x for r ∈ R+ and x ∈ C.
A semitopological cone is a cone with a T0 topology that makes + and · separately continuous.
A topological cone is a cone with a T0 topology that makes + and · jointly continuous.
Remark 3.2 If · is separately continuous, it is automatically jointly continuous [17, Corollary 6.9 (a)]. This is a consequence of a theorem due to Ershov [6, Propo- sition 2], which states that every separately continuous map from X ×Y to Z where X is a c-space (in particular, a continuous poset in its Scott topology) and Y and Z are arbitrary spaces is jointly continuous.
Definition 3.3 A function f : C → D from cone C to D is linear if and only if for all r, s ∈ R+ and x, y ∈ C, f (rx + sy)= rf (x)+ sf (y).

Example 3.4 The extended reals R+ is a topological cone in the Scott topology, with the usual addition and multiplication extended with r + ∞ = ∞ + r = ∞ for all r ∈ R+, 0 ·∞ = ∞· 0 = 0, and r ·∞ = ∞· r = ∞ for r /= 0.
Example 3.5 For any topological space X, LX is a cone with the pointwise addi- tion and multiplication. It is a semitopological cone with the Scott topology induced by the pointwise order. It is a topological cone if X is core-compact (i.e., if OX is a

continuous lattice). Indeed, in that case LX is also a continuous lattice; this can be obtained from [7, Proposition II-4.6] and the fact that R+ is a continuous lattice. Every continuous dcpo is a c-space in its Scott topology, then we use [17, Corol- lary 6.9 (c)], which says that every semitopological cone with a c-space topology is topological.
Example 3.6 For every bounded sup-semi-lattice (L, ≤, T, ∨), we can define x + y as x ∨ y, r · x as x if r > 0, ⊥ otherwise. This is a cone. With the Scott topology, it is a semitopological cone, and a topological cone if L is continuous [11, Section 6.1]. This illustrates that how far from vector spaces cones can be.

Example 3.7 (i) For any cone C, the set of all linear maps from C to R+ is a cone with pointwise addition and scalar multiplication.
(ii) For any semitopological cone C, the set of all lower semi-continuous linear maps from C to R+ is a cone with pointwise addition and multiplication. We denote it as C∗ and call it the dual cone of C. We endow C∗ with the upper weak∗ topology, that is, the coarsest topology making the functions

ηC(x)= (φ '→ φ(x)): C∗ → R+
continuous for all x ∈ C. The cone C∗ with the upper weak∗ topology is a topological cone, as is every subcone of any power R+I with the subspace topology of the product topology, see the discussion after Definition 5.1 in [17], or [4, Section 3] for example.
Proposition 3.8 For any topological space X, VwX is a T0 topological cone.
VwX can be identified with the dual cone (LX)∗, by a form of the Riesz repre- sentation theorem [20]; see also Section 3.2. This is the path taken in [4]. We give an explicit proof. Showing that C∗, for a general semitopological cone C, is a T0 topological cone is done similarly.
Proof. For all continuous valuations μ, ν ∈ VwX and r ∈ R+, we define (r·μ)(U )= 
r(μ(U )) and (μ + ν)(U ) = μ(U )+ ν(U ). It is easy to see that VwX with + and
· form a cone structure. We proceed to check that + and · are jointly continuous. To this end, we assume that μ + ν ∈ [U > r] for some U open in X and r ∈ R+ \ {0}. By definition, that means that μ(U )+ ν(U ) > r. If either μ(U ) or ν(U ) is equal to ∞, say μ(U ) = ∞, then we know that μ ∈ [U > r], and we pick the whole VwX as an open neighbourhood of ν. Obviously, for any μj ∈ [U > r] and νj ∈ VwX, μj + νj ∈ [U > r]. If μ(U ) + ν(U ) is finite, we choose some s ∈ R+ such that μ(U )+ ν(U ) > s > r, we let ε = s—r , rμ = max{μ(U ) − ε, 0} and rν = max{ν(U ) − ε, 0}. Then μ ∈ [U > rμ] and ν ∈ [U > rν], and for all μj ∈ [U > rμ] and νj ∈ [U > rν], (μj + νj)(U ) = μj(U )+ νj(U ) > rμ + rν > r. So we have proved that + is jointly continuous. The joint continuity of scalar multiplication can be verified similarly.
For T0-ness, let μ1 and μ2 be two different continuous valuations. Then there exists an open set U such that μ1(U ) /= μ2(U ). Without loss of generality we assume

that μ1(U ) < μ2(U ). Choose s such that μ1(U ) < s < μ2(U ). Then [U > s] is an open subset of VwX containing μ2 but not μ1.	2
The cone structure on VwX also has additional properties.
Definition 3.9 • A subset A of a cone C is called convex if and only if, for any two points a, b ∈ A, the linear combination ra + (1 − r)b is in A for any r ∈ [0, 1].
A subset A of a cone C is called a half-space if and only if both A and its complement are convex.
A cone C with a T0 topology is called weakly locally convex if and only if for every point x ∈ C, every open neighbourhood U of x contains a convex (not necessarily open) neighbourhood of x.
A cone C with a T0 topology is called locally convex if and only if each point has a neighbourhood basis of open convex neighbourhoods.
A cone C with a T0 topology is called locally linear if and only if C has a subbase of open half-spaces.
Weak local convexity was introduced in [11], where it is simply called local convexity. Our notion of local convexity is that of [17,4]. The notion of local linearity is new. Note that all those notions would be equivalent in the context of topological vector spaces.
Proposition 3.10 Every locally linear topological cone is locally convex, and every locally convex topological cone is weakly locally convex.	2
Example 3.11 The dual cone C∗ of any semitopological cone C (defined in Exam- ple 3.7) is locally linear. One verifies that the sets (ηC(x))—1((r, ∞]) are half-spaces for all x ∈ X and r ∈ R+, and they form a subbase for the upper weak∗ topology on C∗.
Example 3.12 Specializing the previous construction to VwX ∼= (LX)∗, the sub- basic open subsets [U > r] of VwX are all half-spaces, so VwX is locally linear.
The topology on VwX is more than T0, it is actually sober by [11, Proposition 5.1]. Hence:
Proposition 3.13 VwX is a locally linear sober topological cone for any space X.2
Example 3.14 For every core-compact space X, LX is a continuous lattice. It follows that LX (with its Scott topology) is a locally convex topological cone, using an argument that Keimel [17, Lemma 6.12] attributes to Lawson. We argue that LX is in fact locally linear. More generally, LX is a locally linear semitopological cone for every space X whose sobrification Xs is ⊙-consonant [5, Definition 13.1]. (If X is core-compact, then Xs is locally compact sober [8, Theorem 8.3.10], every locally compact sober space is LCS-complete, and every LCS-complete space is ⊙- consonant [5, Lemma 13.2].) First, LX is homeomorphic to LXs, where Xs is the sobrification of X [10, Lemma 2.1]. This is because R+ is sober, and therefore every continuous map from X to R+ hasa unique continuous extension to Xs. This

homeomorphism is also an isomorphism of cones. If Xs is ⊙-consonant, then the Scott topology on LXs coincides with the compact-open topology [5, Corollary 13.5]. The subbasic open subsets {f ∈ LXs | f (Q) ⊆ (r, ∞]} (Q compact saturated in Xs, r ∈ R+) are easily seen to be open half-spaces.
Example 3.15 Here is an example of a locally convex, non-locally linear topolog- ical cone. Consider any complete lattice L, and equip it with the Scott topology and with the cone structure of Example 3.6. Its non-empty convex subsets are its directed subsets. In particular, every open subset is convex, which implies that L is trivially locally convex. For every non-empty convex closed subset C, C is directed and closed, so x = sup C is in C, and therefore C is the downward closure ↓ x of
x. Hence the proper open half-spaces are exactly the complements of downward closures of points. It follows that the topology generated by the open half-spaces is the upper topology. In particular, L is locally linear if and only if the upper and Scott topologies coincide. In particular, for a continuous (complete) lattice L, L is locally linear if and only if L is hypercontinuous [7, Proposition VII-3.4]. The distributive hypercontinuous lattices are the Stone duals of quasi-continuous dcpos [7, Propositions VII-3.7, VII-3.8]. Hence any lattice of the form OX, where X is core-compact but not a quasi-continuous dcpo (or does not have the Scott topol- ogy), is a locally convex topological cone that is not locally linear. For example OR, where R comes with its metric topology, fits.
Remark 3.16 We have already mentioned that local linearity was not used in [4], and one may think that this is due to the authors’ reliance on stable compactness. However, there are stably compact, locally convex but non-locally linear topological cones: any continuous, non-hypercontinuous lattice L will serve as an example (Example 3.15), since every continuous lattice is stably compact in its Scott topology [8, Fact 9.1.6].
Recall that a retraction r : X → Y is a continuous map between topological spaces such that there is a continuous map s : Y → X with r ◦ s = idY . Y is the retract of X. A linear retraction is any retraction r : C → D between semitopolog- ical cones that is also linear. Then D is a linear retract of C. Beware that we do not require the associated section s to be linear in any way.
Heckmann showed that every linear retract of a weakly locally convex cone is weakly locally convex [11, Proposition 6.6]. It follows:
Proposition 3.17 Let C be a locally linear topological cone, D be a topological cone, and r : C → D be a linear retraction. Then D is a weakly locally convex cone.	2
We will see in Section 5 that, conversely, every weakly locally convex cone is a linear retract of some locally linear topological cone.
Keimel’s Separation Theorem, which we reproduce below, is an analogue of the Hahn-Banach separation theorem on semitopological cones, and provides us with a rich collection of lower semi-continuous linear maps.

Theorem 3.18 [17, Theorem 9.1] In a semitopological cone C consider a nonempty convex subset A and an open convex subset U. If A and U are disjoint, then there exists a lower semi-continuous linear functional Λ: C → R+ such that Λ(x) ≤ 1 < Λ(y) for all x ∈ A and y ∈ U.	2
Following Keimel, we call a semitopological cone C convex-T0 if and only if for every pair of distinct points a, b of C, there is a lower semi-continuous linear function Λ: C → R+ such that Λ(a) /= Λ(b) [17, Definition 4.7]. The following is an immediate consequence of [17, Corollary 9.3]. We give the explicit, short proof.
Corollary 3.19 Every locally convex semitopological cone is convex-T0.
Proof. Since C is T0, we may assume that there exists an open subset U containing a but not b. Since C is locally convex, we can find an open convex subset V such that a ∈ V ⊆ U . Realising that the singleton set {b} is a convex set and b ∈/ V , we apply Theorem 3.18 and we find a lower semi-continuous linear functional Λ such that Λ(b) ≤ 1 < Λ(y) for all y ∈ V . Hence Λ(b) < Λ(a), since a ∈ V .	2

Linear maps on cones such as R+, LX, VwX follow our intuition. Let us explore the stranger cones from Example 3.6.
Example 3.20 Consider any complete lattice L with its Scott topology and the cone structure of Example 3.6. For every lower semi-continuous linear map Λ: L → R+, Λ—1((1, ∞]) is a proper open half-space, hence of the form L \ ↓ x0 for some point x0 ∈ L (see Example 3.15). Then x ≤ x0 if and only if Λ(x) < 1 for every x ∈ L. For every r > 0, the equality Λ(x)= Λ(rx)= rΛ(x) implies that Λ(x) can only be equal to 0 or to ∞ (recall that rx = x when r > 0). It follows that the semi-continuous linear maps on L are exactly the maps ∞· χL\↓ x0 , where x0 ∈ X. As a consequence, the dual cone L∗ can be equated with the opposite lattice Lop with the upper topology. The cone structure is that of Lop: addition is infimum in
L, r · x is equal to x if r /= 0, to the top element of L otherwise.
A Riesz-type representation and the Schr¨oder-Simpson Theorem
We have already mentioned a Riesz-type representation theorem for continuous valuations [20]. That states that ν '→ (f '→  f dν) and φ '→ (U '→ φ(χU )) define mutually inverse maps between continuous valuations on X and lower semi- continuous linear functions on LX. Additionally, those define a homeomorphism between VwX and the dual cone (LX)∗, namely, the weak topology on the former is in one-to-one correspondence with the upper weak∗ topology on the latter under this bijection.
There is yet another representation theorem, the so-called Schr¨oder-Simpson Theorem, stating that any linear lower semi-continuous functional φ from VwX to R+ is uniquely determined by a semi-continuous function h ∈ LX in the sense that φ(ν)= h dν for all ν ∈ VwX. The theorem was originally proved by Schr¨oder and Simpson [23], Keimel gave a conceptual proof of it in [18], and the first author gave an elementary proof in [9].

Theorem 3.21 (The Schr¨oder-Simpson Theorem) Let X be a topological space, and Λ be a lower semi-continuous linear map from VwX to R+. There is a unique lower semi-continuous map h ∈ LX such that Λ(ν) =  h dν for every ν ∈ VwX, and h(x)= Λ(δx).

The algebras of the extended powerdomain monad
The algebras of Vw
In order to describe the structure maps of the Vw-algebras, let us first define barycen- tres of continuous valuations by imitating a definition due to [3, Chapter 6, 26.2], and following [4].
Definition 4.1 Let C be a semitopological cone, and ν be a continuous valuation on C. A barycentre of ν is any point bν ∈ C such that, for every linear lower semi-continuous map Λ: C → R+, Λ(bν)= Λ dν.
Remark 4.2 Given a probability measure ν, Choquet called its barycentres its resultants. One can also encounter the name centre of gravity, or centre of mass, of ν. Choquet’s definition applies to the case where C is a Hausdorff locally convex vector space, not a semitopological cone, and uses continuous maps Λ from C to R with its standard topology, not its Scott topology.
Example 4.3 Let C be a semitopological cone, and Σn	riδx  be a simple val-
i
uation on C. Then Σn	rixi is a barycentre of Σn	riδx . In particular, for
i
any x ∈ C, x is a barycentre of the Dirac mass δx. Indeed, for every lower semi-
continuous linear function f : C → R+, we have that f (Σn	rixi)= Σn	rif (xi)= 

∫ f d(
Σn	riδx ).
i=1
i=1

Example 4.4 Let L be a complete lattice with its Scott topology and the cone structure of Example 3.6. For every ν ∈ VwL, the support supp ν is the complement of the largest open set U such that ν(U ) = 0. (The family of those open sets is directed, by the modularity law, and its supremum must be in it, by Scott- continuity.) We claim that the barycentre of ν is supp ν. Indeed, using the definition of barycentres and the fact that the lower semi-continuous linear maps Λ are the maps of the form ∞· χL\↓ x0 , x0 ∈ X, we obtain that x is a barycentre of ν if and only if the following holds: (∗) for every x0 ∈ X, x ≤ x0 if and only if
∞· ν(L \↓ x0) = 0. Since ∞· ν(L \↓ x0) = 0 is equivalent to supp ν ⊆ ↓ x0, hence to the fact that x0 is an upper bound of supp ν, (∗) is equivalent to stating that x is the least upper bound of supp ν.
Lemma 4.5 Barycentres on a convex-T0 semitopological cone C are unique when they exist.
Proof. If x0 and x1 are two barycentres of the same continuous valuation ν, then Λ(x0) = Λ dν = Λ(x1) for every lower semi-continuous linear map Λ: C → R+. Since C is convex-T0, x0 = x1.	2

We now show that the structure maps of the Vw-algebras are nothing but maps that send valuations to their barycentres.
Lemma 4.6 Let (X, α) be an algebra of the monad Vw on the category TOP0. Then X is a topological cone with + deﬁned by x + y = α(δx + δy), and scalar multiplication deﬁned by r · x = α(rδx) for r ∈ R+ and x, y ∈ X. Moreover, the structure map α is linear and sends each μ ∈ VwX to a barycentre of μ.
We say that the cone structure obtained this way is induced by the algebra (X, α). The fact that α is linear and α(μ) isa barycentre of μ has to be understood with respect to that induced cone structure.
Proof. We first notice that every extension map f†, as given in Proposition 2.12,
is linear, so mX = id†	and Vwα = (ηY ◦ α)† are linear.
Let us show that X with the addition and scalar multiplication defined above is a cone. We only verify the associativity of addition and scalar multiplication. For any x, y, z ∈ X and r, s ∈ R+, we do the following computation:
(x + y)+ z = α(δα(δx+δy ) + δz)	definition of addition on X
= α(δα(δx+δy ) + δα(δz ))	definition of structure map
= α(Vwα(δδx+δy )+ Vwα(δδz ))	naturality of the unit
= α(Vwα(δδx+δu + δδz ))	linearity of Vwα
= αmX (δ(δx+δy ) + δδz )	definition of structure map
= α((δx + δy)+ δz)	definition of mX.

Similarly, x + (y + z)= α(δx + (δy + δz)), so (x + y)+ z = x + (y + z). Moreover,
r · (s · x)= r · (α(sδx))	definition of scalar multiplication on X
= α(rδα(sδx))	definition of scalar multiplication on X
= α(rVwα(δsδx ))	naturality of the unit
= α(Vwα(rδsδx ))	linearity of Vwα
= αmX (rδsδx )	definition of structure map
= α(rsδx)	linearity of mX
= (rs) · x	definition of scalar multiplication on X.

To see that X is a topological cone, we assume that U is an open set in X and x + y ∈ U . This means that α(δx + δy) ∈ U , hence δx + δy ∈ α—1(U ). Since VwX is a topological cone and the unit map ηX : x '→ δx : X → VwX is continuous, we can find open sets Ux, Uy such that x ∈ Ux,y ∈ Uy and for any xj ∈ Ux, yj ∈ Uy, δx′ + δy′ ∈ α—1(U ), which means that xj + yj ∈ U for all xj ∈ Ux and yj ∈ Uy. This proves that + is jointly continuous. The joint continuity of scalar multiplication can be proved similarly.
We proceed to prove that α is linear. Let r ∈ R+ and μ, ν ∈ VwX. We have the

following:
α(μ + ν)= α(mX (δμ)+ mX (δν))	monad law
= α(mX (δμ + δν))	linearity of mX
= α(Vwα(δμ + δν))	definition of structure map
= α(Vwα(δμ)+ Vwα(δν))	linearity of Vwα
= α(δα(μ) + δα(ν))	naturality of the unit
= α(μ)+ α(ν)	definition of addition on X.
Similarly, we can prove that α(rμ)= r · α(μ).
Finally, we prove that α(μ) is a barycentre of μ for all μ ∈ VwX. Assume that Λ: X → R+ is a lower semi-continuous linear map. Notice that the composition Λ ◦ α is then a linear map from VwX to R+. Hence by the Schroder-Simpson Theorem there exists a unique lower semi-continuous map h : X → R+ such that Λ ◦ α(ν)=  h dν for all ν ∈ VwX. In particular Λ(x)= Λ ◦ α(δx)= ∫ h dδx = h(x)
μ ∈ VwX. So α(μ) is a barycentre of μ by definition.	2
Corollary 4.7 Let X be a topological space. For every a ∈ VwVwX, mX (a) is the barycentre (U '→ ν∈Uw X ν(U )da) of a in VwX.
Proof. By general category theory, (VwX, mX ) is an algebra of Vw.	2
Corollary 4.8 For every convex-T0 semitopological cone C, there is at most one map α : VwC → C that makes (C, α) a Vw-algebra and induces the original cone structure on C.
Proof. By Lemma 4.6, and since the induced cone structure is the original one, α must map every ν to one of its barycentres, and barycentres are unique by Lemma 4.5.	2
Proposition 4.9 Let (X, α) be an algebra of the monad Vw on the category TOP0. Then X is a weakly locally convex sober topological cone with the induced cone structure.
Proof. By Lemma 4.6, X is a topological cone, and α is linear. It is also a con- tinuous retraction by definition of algebras, since α ◦ ηX = idX . Hence X is linear retract of VwX, which is locally linear and sober. Since sobriety is preserved by continuous retractions (see [8, Exercise 8.2.43] or [7, Exercise O-5.16 (vi)]), X is a weakly locally convex sober topological cone by Proposition 3.17.	2
We may guess that the Vw-algebras are the sober, weakly locally convex, topo- logical cones, or maybe those on which, additionally, every continuous valuation has a barycentre. This is not quite enough. The function α mapping ν to its barycentre must be continuous as well, and barycentres should be unique. The latter happens in all convex-T0 cones, but we do not know whether the cone structure induced by a Vw-algebra (Lemma 4.6) is convex-T0.

Proposition 4.10 Let C be a semitopological cone, and α be a continuous map from VwC to C. If α(ν) is the unique barycentre of ν for every ν ∈ VwC, then (C, α) is an algebra of the monad Vw on the category TOP0.
In that case, the cone structure on C induced by the algebra (C, α) coincides with the original cone structure on C. C is a sober, weakly locally convex, topological cone.
Proof. For every x ∈ C, α(δx)= x by uniqueness of barycentres, and since x is a barycentre of δx (Example 4.3). In order to show that α(Vwα(a)) = α(mC(a)) for every a ∈ VwVwC, we consider any lower semi-continuous linear function Λ: C → R+, and we observe that:

Λ(α(mC(a))) = ∫



x∈C

Λ(x)dmC(a)	α(mC(a)) is a barycentre of mC(a)

=	Λ(x)d(idUw
x∈C
C)†(a)	mC = (idU C)†

=
ν∈Uw C


x∈C
Λ(x)dν  da	disintegration formula (1)

=
ν∈Uw C
Λ(α(ν))da	α(ν) is a barycentre of ν

=
x∈C
Λ(x)dVwα(a)	item (vi) in Lemma 2.10.

This shows that α(mC(a)) is also a barycentre of Vwα(a). Since barycentres are unique, α(mC(a)) = α(Vwα(a)).
Finally, for all x, y ∈ C we observe that α(δx +δy) and x+y are both barycentres of δx + δy, hence they are equal. Similarly, for every r ∈ R+, α(rδx)= r · x. Hence the induced cone structure coincides with the original cone structure on C. We conclude by Proposition 4.9.	2
This simplifies in the case of locally linear cones, where the uniqueness of barycentres and the continuity of the barycentre map are automatic.
Proposition 4.11 Let C be a locally linear semitopological cone such that every continuous valuation ν on C has a barycentre bν. The barycentre map β : VwC → C, deﬁned by β(ν)= bν, is the structure map of a Vw-algebra (and in particular, C is sober and a topological cone).
Proof. Since C is locally linear, it is locally convex hence convex-T0 (Corol- lary 3.19). Therefore Lemma 4.5 applies, showing that the barycentre bν is unique for every ν ∈ VwX, hence that β is well-defined.
We now prove that that β is continuous. Let H be an open half-space of C; since C is locally linear, it suffices to show that β—1(H) is open. If H = C, then β—1(H) = VwX is open. Otherwise, by Theorem 3.18, there exists a linear lower semi-continuous function h : C → R+ such that h(a) ≤ 1 < h(b) for all a ∈ C \ H and b ∈ H. Then H = h—1((1, ∞]), and β—1(H) is then the set of continuous

valuations ν such that h(β(ν)) > 1. By the definition of barycentres, h(β(ν)) = x∈C h(x)dν, so β—1(H) is equal to the open set [h > 1]. By Proposition 4.10, β is the structure map of a Vw-algebra. It follows that C is sober, and a topological cone, by Proposition 4.9.	2

Example 4.12 The extended real numbers R+ with the map μ '→ x∈R+ x dμ is a
Vw-algebra, since R+ with the Scott topology is a locally linear topological cone.
Example 4.13 Let L be a complete lattice with its Scott topology and the cone structure of Example 3.6.
If L is a continuous, non-hyper-continuous dcpo (see Example 3.15), then β : ν '→ supp ν is the structure map of a Vw-algebra on L, as a consequence of the following proposition, although L is not locally linear.
If L is not weakly Hausdorff (see below), then β(ν) is the unique barycentre of ν for every ν ∈ VL, but the cone structure of L is not induced by any Vw-algebra, again by the following proposition. We will also see that every weakly Hausdorff complete lattice is sober, hence Isbell’s example of a non- sober complete lattice [12] is not weakly Hausdorff.
A weakly Hausdorff space is a topological space X such that for all x, y ∈ X, for every open subset U of X that contains ↑ x ∩↑ y, there are open neighborhoods
V of x and W of y such that V ∩ W ⊆ U [19, Lemma 6.6]. (Upward closures are taken with respect to the specialization preordering.)
Proposition 4.14 Let L be a complete lattice with its Scott topology and the cone structure of Example 3.6. For every ν ∈ VL, let β(ν) =  supp ν. The following are equivalent:
there is a Vw-algebra structure on L that induces its cone structure;
β is the structure map of a Vw-algebra on L;
β is continuous;
∨ : L × L → L is jointly continuous;
L is weakly Hausdorff.
In particular, (i)–(v) hold if L is core-compact, and (i)–(v) imply that L is sober.
Proof. We have seen in Example 4.4 that β(ν) is the barycentre of ν. This barycen- tre is unique since L is locally convex (Example 3.15). The implication (iii)⇒(ii) then follows from Proposition 4.10. The converse implication is trivial. The equiv- alence of (i) with (ii) follows from Corollary 4.8.
Since every Vw-algebra is a topological cone (Proposition 4.9), (i) implies (iv). We now assume (iv), and aim to show (iii). We will repeatedly use the following fact: an open set U intersects supp ν if and only if ν(U ) > 0. Indeed, U intersects supp ν if and only if U is not included in the largest open set with ν-measure zero.
Let ν ∈ VL and V be an open neighborhood of	supp ν. We will exhibit an open neighborhood U of ν such that  supp μ ∈ V for every μ ∈ U .

Since V is Scott-open, there are finitely many points x1, ··· , xn ∈ supp ν whose
supremum  n	xi is in V . By (iv), there are open neighborhoods Ui of xi, for
each i, such that for all y1 ∈ U1, ..., yn ∈ Un,  n	yi is in V . Let us define U as

n i=1
[Ui > 0]. For every i, Ui intersects supp ν at xi, so ν(Ui) > 0. It follows that

ν is in U . For every μ ∈ U , we have μ(Ui) > 0 for each i, so Ui must meet supp μ,
say at yi. Then  supp μ ≥  n	yi ∈ V , so  supp μ is in V . This shows (iii).
The equivalence between (iv) and (v) is immediate, since ↑ x ∩↑ y = ↑(x ∨ y).
As for the last part, the binary supremum operation is jointly continuous on any core-compact complete lattice by [7, Corollary II-4.15], so if L is core-compact then
(iv) holds. If (i) holds, then L is sober by Proposition 4.9.	2
Here is a final example. In this case, LX is locally linear (see Example 3.14).
Proposition 4.15 For every core-compact space X, for every continuous valuation ν on LX, the map β(ν): x ∈ X '→ f∈LX f (x)dν is the unique barycentre of ν on LX with its Scott topology. The map β is the structure map of a Vw-algebra on LX, and the cone structure it induces on LX is the usual one.
Proof. Kirch characterised the algebras of the V monad on the category CONT of continuous dcpos: the Eilenberg-Moore category of V on CONT is equivalent to the category of continuous d-cones [20, Satz 7.1]. A d-cone is a dcpo with a cone structure whose addition and scalar multiplication are Scott-continuous. Every continuous d-cone is a topological cone, as a consequence of Ershov’s theorem (see Remark 3.2, and [17, Corollary 6.9 (c)]). Since X is core-compact, LX is a continuous d-cone, hence there is a map β : V(LX) → LX that turns (LX, β) intoa V-algebra. Using another result of Kirch [20, Satz 8.6], which states that for every continuous dcpo Y in its Scott topology, the Scott and weak topologies agree on VY , β is a Vw-algebra map. The value β(ν) is given as a directed supremum of barycentres of simple valuations way-below ν, and one can check that this is equal to f∈LX f (x)dν. Here is an alternative proof, which the reader may find interesting. We will use Jones’ version of Fubini’s theorem [13, Theorem 3.17]. This states that for every (jointly) continuous map f : X × Y → R+, where R+ has the Scott
topology, for all continuous valuations μ on X and ν on Y ,

f (x, y)dν	dμ =	f (x, y)d(μ×ν)=	f (x, y)dμ  dν,
x∈X	y∈Y	(x,y)∈X×Y	y∈Y	x∈X
where μ × ν is the uniquely determined product valuation. Implicit in that theo- rem is the following fact: (∗) the maps y ∈ Y '→ x∈X f (x, y)dμ and x ∈ X '→ y∈Y f (x, y)dν are lower semi-continuous. The latter can be shown using step func- tions as in the proof of Proposition 2.12.
Let g(x)= f∈LX f (x)dν. This makes sense because the map f ∈ LX '→ f (x) is Scott-continuous, hence lower semi-continuous, for every x ∈ X. In order to show that g is continuous, we first notice that App: LX × X → R+, which maps (f, x) to f (x), is (jointly) continuous. Indeed, LX is a continuous lattice (see Example 3.5), hence a c-space. App is clearly separately continuous, and then jointly continuous by

Ershov’s theorem (see Remark 3.2). By (∗), the map x ∈ X '→  f∈LX App(f, x)dν
is lower semi-continuous. But that map is simply g.
Now that g is in LX, we check that it is a barycentre of ν. Let Λ be any lower semi-continuous function from LX to R+. Λ is integration with respect to some uniquely defined continuous valuation μ on X, by the Riesz-type representation theorem mentioned earlier. Then:

Λ(g)= ∫



x∈X

g(x)dμ

=
x∈X	f∈LX
App(f, x)dν  dμ

=
f∈LX


x∈X
App(f, x)dμ  dν	by Jones’s version of Fubini’s theorem

=
f∈LX
Λ(f )dν,

showing that, indeed, g is a barycentre of ν. Note that Jones’ version of Fubini’s theorem applies, crucially, because App is jointly continuous.
There is nothing more to prove: we merely apply Proposition 4.11, using the fact that LX is locally linear.	2

The morphisms of algebras of Vw
Adapting the definition of morphisms of algebras in our setting, a morphism f between two Vw-algebras (X, α) and (Y, β) is a continuous function f : X → Y such that β ◦ Vwf = f ◦ α. Considering the cone structure of X and Y induced by α and β (Proposition 4.9), respectively, we will see that f is a linear map between X and Y . Indeed, for any a, b ∈ X and r ∈ R+,
f (a + b)= f (α(δa + δb))	definition of addition
= β(Vwf (δa + δb))	f is a morphism of algebras
= β(δf (a) + δf (b))	naturality of the unit
= f (a)+ f (b)	definition of addition.

Similarly, we have f (r·a)= r·f (a). Conversely, we want to know whether continuous linear maps are exactly the Vw-algebra morphisms. To prove this, however, we need to assume that Y is convex-T0, and not just weakly locally convex.
Proposition 4.16 Let (X, α), (Y, β) be two Vw-algebras, viewed as topological cones in the sense of Proposition 4.9. If Y is convex-T0, then the Vw-algebra morphisms from (X, α) to (Y, β) are precisely the continuous linear maps between them.
Proof. Let f : X → Y be a linear map. For every lower semi-continuous linear map Λ: Y → R+, Λ ◦ f : X → R+ is lower semi-continuous and linear. Since struc- ture maps send valuations to their barycentres by Lemma 4.6, for any continuous

valuation μ ∈ VwX we have,
Λ(f (α(μ))) = (Λ ◦ f )(α(μ))
= ∫ Λ ◦ fdμ	α(μ) is a barycentre of μ
= ∫ Λ d(Vwf (μ))	item (vi) in Lemma 2.10
= Λ(β(Vwf (μ)))	β(Vwf (μ)) is a barycentre of Vwf (μ).
Since Y is convex-T0, we use Corollary 3.19 to conclude that f (α(μ)) = β(Vwf (μ)).2

The algebras of Vf and Vp
Besides the space VwX of continuous valuations on any topological space X, Heck- mann also considered its subspaces Vf X of simple valuations and VpX of point- continuous valuations on X [11]. In the same paper he showed that VpX is the sobrification of Vf X [11, Theorem 5.5]. We will see that Vf and Vp can also be extended to monads on the category TOP0.
We have seen simple valuations in Example 2.3. We proceed to define point- continuous valuations.
For a topological space X, according to Heckmann [11], one considers, instead of the Scott topology, the point topology on OX determined by the subbasic open sets O(x), x ∈ X, where O(x) = {U ∈ OX | x ∈ U} for each x ∈ X. We denote OX with the point topology by OpX. One can equate OX with the set of continuous maps from X to Sierpin´ski space S = {0, 1} (with the Scott topology of ≤), and then the point topology is the subspace topology induced by the inclusion into SX .
Definition 5.1 A point-continuous valuation μ on (X, OX) is a valuation that is continuous from OpX to R+. The set of all point-continuous valuations on X is denoted by VpX.
One easily sees that every simple valuation is point-continuous, and every point- continuous valuation is a continuous valuation, since the Scott topology on OX is finer than the point topology.
In what follows, we consider Vf X and VpX as subspaces of VwX, that is, the topologies considered are the subspace topologies induced from the weak topology on VwX.
Proposition 5.2 Let f : X → Y be a continuous function between topological spaces X and Y . Then the map V∗f : μ '→ (U ∈ OY '→ μ(f—1(U ))) is continu- ous from V∗X to V∗Y , where μ ∈ V∗X and ∗ is p or f.
Proof. The only difficult point is to show that Vpf sends point-continuous valu- ations to point-continuous valuations. To this end, let μ be any point-continuous valuation and U be any open subset in Y , and r be any positive number in R+ with Vpf (μ)(U ) > r. By definition, μ(f—1(U )) > r. Since μ is point-continuous, we can

find a finite subset F of points such that f—1(U ) ∈  O(x) and for every open subset V ∈   O(x), μ(V ) > r. We claim that	O(y) is an open set con- taining U and such that, for every W ∈	O(y), V f (μ)(W ) > r. The former is obvious since f—1(U ) ∈   O(x) means that F ⊆ f—1(U ), i.e., f (F ) ⊆ U . For
the latter claim, we know that f (F ) ⊆ W , so we have f—1(W ) ∈  x∈F O(x). From the point-continuity of μ, we have μ(f—1(W )) > r, hence Vpf (μ)(W ) > r.
Vpf is continuous since Vwf is (Proposition 2.9).	2

Remark 5.3 The following formula holds: Vf f (Σn
aiδx )= Σn
aiδf (x ).

Proposition 5.4 For all topological spaces X and Y , and for every continuous function f : X → V∗Y , the map

f† : μ '→  U '→ ∫
x∈X
f (x)(U )dμ  : V∗X → V∗Y

is well-deﬁned and continuous, where ∗ is p or f.
Proof. If f† indeed takes its values in V∗Y , then it is continuous, because f† is— that is part of Proposition 2.12.
We proceed to prove that f† takes its values in V∗Y . When ∗ = f, we assume
that μ = Σn	riδx . Then f†(μ)(U ) = Σn	rif (xi)(U ). Since for each i ∈ I,
rif (xi) is a simple valuation, f†(μ), as a finite sum of simple valuations, is again a

simple valuation.
We now show that f† takes its values in Vp
Y . In order to see this, we first notice

that f† is also a continuous map from Vf X to VpY , considering Vf Y as a subspace of VpY . Since VpX is the sobrification of Vf X [11, Theorem 5.5], the function f† has a unique continuous extension e from VpX to VpY . Considering VpY as a subspace

of Vw
Y , then from Proposition 2.12 we know that both e and f† are continuous

functions from V
X to V Y . Since V Y is T , and e and f† coincide on V X,

p	w	w	0	p	f

they coincide on the sobrification Vp
X as well. Thus f†
sends point-continuous

valuations to point-continuous valuations since e does.	2
With all the ingredients listed above, we conclude the following:
Proposition 5.5 V∗ (∗ is p or f) isa monad on the category TOP0, with the unit
η∗ : x → δx : X → V∗X and extension

f† : μ '→ (U '→ ∫



x∈X

f (x)(U )dμ): V∗X → V∗Y



for continuous map f : X → V∗Y . The multiplication m∗
of V∗ at X is (idU∗X
)† .2

Similarly to VwX, Vf X and VpX are also locally linear topological cones with the canonical operations of addition and scalar multiplication. Moreover, we have the following:
Theorem 5.6 [11, Theorem 6.7, Theorem 6.8]

Vf X is the free weakly locally convex cone over X in the category TOP0.
VpX is the free weakly locally convex sober cone over X in the category TOP0.
This means that for a T0 space X, Vf X (resp., VpX) is a weakly locally con- vex (resp., weakly locally convex sober) topological cone, and for every continuous function f : X → C from X to a weakly locally convex (resp., weakly locally convex sober) topological cone C, there is a unique continuous linear function f : V∗X → M such that f ◦ η∗ = f , where ∗ is f or p.
The following is a straightforward consequence of the above theorem.
Corollary 5.7 A topological cone C is weakly locally convex (resp., weakly locally convex and sober) if and only if it is a continuous linear retract of a locally linear (resp., locally linear and sober) topological cone.
Proof. We have seen the “if” direction in Proposition 3.17.
For the “only if” direction, since idC, the identity map over C, is continuous and linear, there exists a unique continuous linear map idC : Vf C → C such that idC ◦ ηf = idC. This exhibits that C is a linear retract of Vf C which is a locally linear topological cone.
To show that every weakly locally convex sober topological cone is a linear retract of some locally linear sober topological cone, we just change Vf into Vp in the above and the same argument applies.	2
The following results from [11, Theorem 6.1] are needed for our further discus- sion.
Theorem 5.8 Let X be a topological space.
Every linear function from Vf X to some cone is uniquely determined by its values on Dirac masses.
Every continuous linear function from VpX to some topological cone is uniquely determined by its values on Dirac masses.
We now have enough ingredients to prove the main results of this section.
Theorem 5.9 Let X be a T0 topological space, and α : Vf X → X be a continuous map. If (X, α) is a Vf -algebra, then X is a weakly locally convex topological cone,

and α is the standard barycentre map Σn
riδxi
n i=1
rixi. Conversely, for

every weakly locally convex topological cone C, there exists a (unique) continuous
linear map α from Vf C to C, sending each simple valuation to its barycentre, and the pair (C, α) is a Vf -algebra.
Proof. A similar argument as in the proof of Lemma 4.6 shows that X is a topo- logical cone with + defined by x + y = α(δx + δy), and scalar multiplication defined by r · x = α(rδx) for all r ∈ R+ and x, y ∈ X. X is weakly locally convex since Vf X is locally linear and the structure map α is a linear retraction. We show that α sends each simple valuation to its barycentre. This is easy since α(δx) = x by the definition of structure map, hence by linearity α sends every simple valuation

n i=1
riδxi
n i=1
rixi, which is a barycentre of Σn
riδxi
(Example 4.3).

Conversely, assume that C is a weakly locally convex topological cone. Since Vf C is the free weakly locally convex topological cone over C, there exists a unique map α such that α◦ηf = idC. Hence α(δx)= x for every x ∈ C. Then α sends each simple valuation to its barycentre, since α is linear. Finally, to see that (C, α) is a 

Vf-algebra, we only need to verify that α◦mf
= α◦Vf αC. Notice that both sides of

the equals sign are continuous linear functions from Vf Vf C to C. From Theorem 5.8 we only need to show they are equal on Dirac masses. To this end, let us assume that μ is a simple valuation on X, and we compute the following,
α ◦ mf (δμ)= α(μ)	monad law
= α(δα(μ))	α ◦ η = id
= α ◦ Vf α(δμ)	naturality of the unit,
and this concludes the proof.	2
The Vf-algebra morphisms are precisely the continuous linear maps between them.
Theorem 5.10 Let X, Y be two weakly locally convex topological cones, and α : Vf X → X, β : Vf Y → Y be the corresponding barycentre maps. Then a con- tinuous map f : X → Y is a Vf -algebra morphism if and only if f is linear.
Proof. Assume first that f a Vf-algebra morphism. For any a, b ∈ X, r ∈ R+, we have
f (a + b)= f (α(δa + δb))	α is the barycentre map
= β(Vf f (δa + δb))	f is a morphism of algebras
= β(δf (a)+ δf (b))	Remark 5.3
= f (a)+ f (b)	β is the barycentre map


Similarly, we can prove that f (ra)= rf (a).
Conversely, assume f is linear. Then for any simple valuation Σn

riδxi , we

have:
n	n
f (α(Σ riδxi )) = f (Σ rixi)	α is the barycentre map

i=1
i=1
n

=	rif (xi)	f is linear,
i=1


and

β(Vf f (Σ riδxi )) = β(Σ riδf (xi))	Remark 5.3

i∈I
i∈I
=	rif (xi)	β is the barycentre map.
i∈I

Hence f ◦ α = β ◦ Vf f , and therefore f is a Vf-algebra morphism.	2
In weakly locally convex topological cones, even simple valuations may have several barycentres. As in Theorem 5.9, we call x the standard barycentre of δx. Note that this is well-defined: if δx = δy, then for every open set U , δx(U ) = 1 if and only if δx(U ) = 1, hence x and y have the same open neighbourhoods, which implies x = y since the cone is T0.
Theorem 5.11 Let X be a T0 topological space, and α : VpX → X be a function. If (X, α) is a Vp-algebra, then X is a weakly locally convex sober topological cone, and α is a linear continuous function that maps every point-continuous valuation to one of its (Choquet) barycentres, and every Dirac mass to its standard barycentre.
Conversely, for every weakly locally convex sober topological cone C, there exists a (unique) continuous linear map α from VpC to C that sends each Dirac mass to its standard barycentre. Then the pair (C, α) is a Vp-algebra.
Proof. The same reasoning as in the proof of Theorem 5.9 will show that X is a continuous linear retract of VpX. Since VpX is locally linear and sober, then X, as a continuous linear retract, is weakly locally convex sober. The proof that α is linear is as in Lemma 4.6.
To see that α maps every point-continuous valuation μ to one of its barycentres, for any continuous linear map Λ: X → R+ we consider two maps from VpX to R+. They are μ '→ Λ ◦ α(μ) and μ '→ Λ dμ. Note that these two maps are continuous linear maps and coincide on Dirac masses on X, hence they are equal from Item (ii) of Theorem 5.8. Hence α is indeed a barycentre map.
Conversely, for any weakly locally convex sober cone C, let f be the identity map from C to C. By Item (ii) of Theorem 5.6, there is a unique continuous linear map f such that f ◦ ηp = f , and this is the desired α. That (C, α) is a Vp-algebra can be verified similarly as in the proof of Theorem 5.9.	2
Theorem 5.12 Let X, Y be two weakly locally convex sober topological cones, and α : VpX → X, β : VpY → Y be the structure maps of the corresponding Vp-algebras. Then a continuous map f : X → Y is a Vp-algebra morphism if and only if f is linear.
Proof. First, if f is a Vp-algebra morphism, then that f is linear follows from the same argument as in the proof of Theorem 5.10.
Conversely, if f is a continuous linear map, then we have already seen in The- orem 5.10 that f ◦ α(δx) = β ◦ Vpf (δx) for any Dirac mass δx. Since α and β are structure maps, they are linear. From its definition, Vpf is linear. Hence both f ◦ α and β ◦ Vpf are continuous linear maps. Using Item (ii) of Theorem 5.8, they coincide on VpX.	2

References
Abramsky, S. and A. Jung, Domain theory, in: S. Abramsky, D. M. Gabbay and T. S. E. Maibaum, editors, Semantic Structures, Handbook of Logic in Computer Science 3, Clarendon Press, 1994 pp. 1–168.

Alvarez-Manilla, M., A. Jung and K. Keimel, The probabilistic powerdomain for stably compact spaces, Theoretical Computer Science 328 (2004), pp. 221–244.
Choquet, G., “Lectures on Analysis,” Mathematics Lecture Note Series II - Representation Theory,
W.A. Benjamin, Inc., 1969.
Cohen, B., M. Escardo´ and K. Keimel, The extended probabilistic powerdomain monad over stably compact spaces, Theory and Applications of Models of Computation (2006), pp. 566–575.
de Brecht, M., J. Goubault-Larrecq, X. Jia and Z. Lyu, Domain-complete and LCS-complete spaces, in: Proc. 8th International Symposium on Domain Theory (ISDT’19), 2019, this volume; arXiv:1902.11142 [math.GN].
Ershov, Y. L., The bounded complete hull of an α-space, Theoretical Computer Science 175 (1997),
pp. 3–13.
Gierz, G., K.-H. Hofmann, K. Keimel, J. D. Lawson, M. Mislove and D. S. Scott, “Continuous Lattices and Domains,” Encyclopedia of Mathematics and its Applications 93, Cambridge University Press, 2003.
Goubault-Larrecq, J., “Non-Hausdorff Topology and Domain Theory,” New Mathematical Monographs
22, Cambridge University Press, 2013.
Goubault-Larrecq, J., A short proof of the Schr¨oder-Simpson theorem, Mathematical Structures in Computer Science 25 (2015), pp. 1–5.
Goubault-Larrecq, J., Isomorphism theorems between models of mixed choice, Mathematical Structures in Computer Science 27 (2017), pp. 1032–1067.
URL  http://www.lsv.fr/Publis/PAPERS/PDF/JGL-mscs16.pdf
Heckmann, R., Spaces of valuations, in: S. Andima, R. C. Flagg, G. Itzkowitz, P. Misra, Y. Kong and
R. Kopperman, editors, Papers on General Topology and Applications: Eleventh Summer Conference at the University of Southern Maine, Annals of the New York Academy of Sciences 806, 1996, pp. 174–200.
Isbell, J., Completion of a construction of Johnstone, Proceedings of the American Mathematical Society 85 (1982), pp. 333–334.
Jones, C., “Probabilistic Non-Determinism,” Ph.D. thesis, University of Edinburgh, Edinburgh (1990), also published as Technical Report No. CST-63-90.
Jones, C. and G. Plotkin, A probabilistic powerdomain of evaluations, in: Proceedings of the 4th Annual Symposium on Logic in Computer Science (1989), pp. 186–195.
Jung, A., Stably compact spaces and the probabilistic powerspace construction, in: J. Desharnais and
P. Panangaden, editors, Domain-theoretic Methods in Probabilistic Processes, Electronic Notes in Theoretical Computer Science 87 (2004), pp. 5–20.
Keimel, K., The monad of probability measures over compact ordered spaces and its eilenberg-moore algebras, Topology and its Applications 156 (2008), pp. 227–239.
Keimel, K., Topological cones: Functional analysis in a T0-setting, Semigroup Forum 77 (2008),
pp. 109–142.
Keimel, K., Locally convex cones and the Schr¨oder-Simpson theorem, Questiones Mathematicae 35
(2012), pp. 353–390.
Keimel, K. and J. D. Lawson, Measure extension theorems for T0-spaces, Topology and its Applications
149 (2005), pp. 57–83.
Kirch, O., “Bereiche und Bewertungen,” Master’s thesis, Technische Hochschule Darmstadt (1993), 77pp.
Lawson, J. D., Domains, integration, and “positive analysis”, Mathematical Structures in Computer Science (2004), pp. 815–832.
Manes, E. G., “Algebraic Theories,” Graduate Texts in Mathematics 26, Springer-Verlag, 1976.
Schr¨oder, M. and A. Simpson, Probabilistic observations and valuations, Technical report, Talk at Mathematical Foundations of Programming Semantics XXI, Birmingham (2005).
Tix, R., “Stetige Bewertungen auf topologischen Ra¨umen,” Master’s thesis, Technische Hochschule Darmstadt (1995), 51pp.
Tix, R., “Continuous D-Cones: Convexity and Powerdomain Constructions,” Ph.D. thesis, Technische Universit¨at Darmstadt (1999).
