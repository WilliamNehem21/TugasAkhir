Available online at www.sciencedirect.com



Electronic Notes in Theoretical Computer Science 278 (2011) 55–69
www.elsevier.com/locate/entcs
Preferential Reasoning for Modal Logics
Katarina Britz	Thomas Meyer	Ivan Varzinczak
Centre for Artificial Intelligence Research
CSIR Meraka Institute and University of KwaZulu-Natal, South Africa

Abstract
Modal logic is the foundation for a versatile and well-established class of knowledge representation for- malisms in artificial intelligence. Enriching modal logics with non-monotonic reasoning capabilities such as preferential reasoning as developed by Lehmann and colleagues would therefore constitute a natural extension of such KR formalisms. Nevertheless, there is at present no generally accepted semantics, with corresponding syntactic characterization, for preferential consequence in modal logics. In this paper we fill this gap by providing a natural and intuitive semantics for preferential and rational modal consequence. We do so by placing a preference order on possible worlds indexed by Kripke models they belong to. We also prove representation results for both preferential and rational consequence, which paves the way for effective decision procedures for modal preferential reasoning. We then illustrate applications of our constructions to modal logics widely used in AI, notably in the contexts of reasoning about actions, knowledge and beliefs. We argue that our semantics constitutes the foundation on which to explore preferential reasoning in modal logics in general.
Keywords: non-monotonic reasoning, preference order, rational closure, actions, beliefs

Introduction and Motivation
Consider the following scenario depicting a nuclear power station: In a particular power plant there is an atomic pile and a cooling system, both of which can be either on or off. An agent is in charge of detecting hazardous situations and preventing the plant from malfunctioning (Figure 1).

Fig. 1. The nuclear power station and its controlling agent.

1571-0661 © 2011 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2011.10.006

It is common knowledge that situations in which the pile is on are usually not hazardous. However, in more specific contexts, say when the pile is on but the cooling system is down, one would expect it to be a hazardous situation. One may then also want to draw conclusions like “if a situation is hazardous, then it is usually the case that the effect of switching the pile off brings about a non- hazardous situation”; or “if the pile is on and the cooling system is off, then usually the surveillance agent knows that a malfunction is imminent”; or “situations in which the pile is on usually ought to be non-hazardous”; or even the more complex “if the agent believes that there is danger, then usually he must perform the action of switching the pile off”.
All of these are examples of defeasible inferences. The first two examples are in- stances of propositional defeasible consequence and are adequately dealt with within the framework for preferential reasoning developed by Lehmann and colleagues in the 90’s [16,19]. For the last four examples, however, it is a different story: Firstly, for their specification we need a logical language that is richer than the propositional one: They require, respectively, the ability to express the effects and preconditions of actions; an agent’s knowledge and beliefs; regulations or obligations; and com- binations thereof. Well established formalisms for dealing with these notions in the AI literature are mostly variants of modal logic: The examples above illustrate applications of dynamic logic [13], epistemic logic [10], and deontic logic [21].
Secondly, it turns out that research on preferential reasoning has really only reached maturity in a propositional context, whereas many logics of interest, like the ones mentioned above, have more structure in both syntax and semantics. If one wants to be able to capture the forms of reasoning exemplified above, then one has to move beyond propositional preferential consequence.
There has by now been quite a substantial number of attempts to incorporate defeasible reasoning in logics other than propositional logic. After a first tentative exploration of preferential predicate logics by Lehmann and Magidor [18], some more recent investigations have attempted to define notions of defeasibility in deontic log- ics [22], and of defeasible subsumption for description logics [3,12,5]. Nevertheless, a generally accepted semantics for preferential reasoning in modal logics, with a corresponding syntactic characterization, does not yet exist.
In the present paper we aim at filling this gap by providing a generalization of classical preferential consequence to an important family of modal logics — we present the semantic foundation, prove the required representation results, point out computational consequences and benefits, and suggest applications of modal preferential reasoning. The good balance between expressivity and computational properties of modal logics makes them good candidates for the type of extension of preferential reasoning that we have in mind — with (propositional) modal logic one can express more than with classical propositional logic without being hampered by the undecidability of many first-order based languages.
The remainder of this paper is organized as follows: In Section 2 we briefly re- cap the seminal work by Lehmann and colleagues on propositional preferential and rational consequence. We then present an account of modal preferential reasoning

in Section 3. Importantly, our representation results are with respect to the corre- sponding propositional properties or rules, and methods employed in a propositional non-monotonic setting therefore translate seamlessly to a modal context. This in- cludes reasoning tasks such as computing the preferential or rational closure of a defeasible knowledge base [19]. Our modal semantics therefore forms the founda- tion of preferential consequence for a whole class of modal-based formalisms, which we illustrate with some case studies, namely modal logics of action (Section 4) and knowledge (Section 5). After discussing some related work (Section 6), we conclude in Section 7.
Propositional Preferential Reasoning
Here we give a brief outline of propositional preferential and rational consequence, as initially defined by Kraus et al. [16]. A propositional defeasible consequence relation |∼ is defined as a binary relation on formulas of an underlying (possibly infinitely generated) propositional logic. |∼ is said to be preferential if it satisfies the following set of properties (below α, β, . . . denote propositional formulas, and |= and ≡ denote, respectively, propositional entailment and logical equivalence):

(Ref) α |∼ α	(And)
α |∼ β, α |∼ γ α |∼ β ∧ γ

(Or)
α |∼ γ, β |∼ γ α ∨ β |∼ γ



(LLE)
α ≡ β, α |∼ γ β |∼ γ
(RW)
α |∼ β, β |= γ α |∼ γ
(CM)
α |∼ β, α |∼ γ α ∧ β |∼ γ

The semantics of (propositional) preferential consequence relations is in terms of preferential models; these are partially ordered structures with states labeled by propositional valuations. We shall make this terminology more precise in the upcoming section on modal preferential consequence, but it essentially allows for a partial order on states, with states lower down in the order being more preferred than those higher up. Given a preferential model P,a pair α |∼ β is in the consequence relation defined by P if and only if the most preferred α-states are also β-states. The representation theorem for preferential consequence relations then states:
Theorem 2.1 (Kraus et al. [16]) A defeasible consequence relation is a prefer- ential consequence relation if and only if it is deﬁned by some preferential model.
If, in addition to the properties of preferential consequence, |∼ also satisfies the following Rational Monotony property, it is said to be a rational consequence relation:

(RM)
α |∼ β, α /|∼ ¬γ


α ∧ γ |∼ β

The semantics of rational consequence relations is in terms of ranked models, i.e., preferential models in which the preference order is modular :
Definition 2.2 Given a set S, ≺ ⊆ S × S is modular if and only if ≺ is a partial order and there is a ranking function rk : S −→ N such that for every s, sj ∈ S,

s ≺ sj if and only if rk(s) < rk(sj).
The representation theorem for rational consequence relations then states:
Theorem 2.3 (Lehmann & Magidor [19]) A defeasible consequence relation is a rational consequence relation if and only if it is deﬁned by some ranked model.

Modal Preferential Consequence
We work in a set of atomic propositions P (together with the distinguished atom ⊥), using the logical connectives ∧, ¬, and a set of modal operators 2i, 1 ≤ i ≤ n. Propositions are denoted by p, q, .. ., and formulas by α, β, . . ., constructed in the usual way. With L we denote the set of all formulas of the modal language. The semantics is the standard possible-worlds one:
Definition 3.1 A Kripke model is a tuple M = ⟨W, R, V⟩ where W is a set of possible worlds, R = ⟨R1,..., Rn⟩, where each Ri ⊆ W × W is an accessibility relation on W, 1 ≤ i ≤ n, and V : W −→ 2r is a valuation function.
Satisfaction, validity and (global) entailment are defined in the usual way [2].
In what follows we present the semantic foundation of preferential reasoning for modal and multi-modal logics. We interpret the defeasible consequence relation |∼ as a relation on formulas of a given underlying modal language.
Definition 3.2 A defeasible consequence relation |∼ ⊆ L×L is a preferential conse- quence relation if and only if it satisfies the properties (Ref), (LLE), (And), (RW), (Or), and (CM), with propositional entailment replaced by modal entailment in the corresponding modal system. |∼ is rational if and only if in addition to being preferential it also satisfies the property (RM).
We propose replacing the propositional valuations in preferential models with model-world pairs, also sometimes referred to as pointed Kripke models. Given a particular class (set) of Kripke models M as in Definition 3.1, let Un denote the set of all pairs (M, w), where M = ⟨W, R, V⟩ is a Kripke model in M and w ∈ W. As alluded to above, our semantics replaces the propositional valuations used in the preferential models of Lehmann et al. with structures over the set Un. We make this more precise now. (We shall follow the notation and terminology defined by Lehmann and colleagues. For more details, the reader is referred to the papers by Kraus et al. [16] and Lehmann and Magidor [19].)
Let S be a set, the elements of which are called states. Let M be a given class of Kripke models, and l : S −→ Un be a labeling function mapping every state to a pair (M, w) where M = ⟨W, R, V⟩ is a Kripke model such that w ∈ W. Let
≺ ⊆ S × S. Given α ∈ L, we say that s ∈ S satisﬁes α if and only if l(s) H α, i.e., M,w H α, where l(s)= (M, w). We define α = {s ∈ S | l(s) H α}. We say that α is smooth if and only if each s ∈ α is either ≺-minimal in α, or there is sj ∈ α
such that sj ≺ s and sj is ≺-minimal in α^. We say that S satisfies the smoothness

condition if and only if for every α ∈ L, α is smooth. We can now define modal preferential models:
Definition 3.3 Let M be a class of Kripke models. A preferential model is a triple P = ⟨S, l, ≺⟩ where S is a set of states satisfying the smoothness condition, l is a labeling function mapping states to elements of Un, and ≺ is a strict partial order on S.
These formal constructions closely resemble those of Kraus et al. [16] and of Lehmann and Magidor [19], the difference being that propositional valuations are replaced with elements of the set Un. In Section 4 we provide an extended example including an instance of a modal preferential model.
Definition 3.4 Given α, β ∈ L and a preferential model P = ⟨S, l, ≺⟩, the con- sequence relation defined by P is denoted |∼P and is defined by: α |∼P β if and
only if every ≺-minimal state s ∈ α is such that s ∈ β^.
We say that a modal preferential model P satisﬁes the defeasible statement
α |∼ β if and only if α |∼P β holds.
We are now in a position to state one of our central results:
Theorem 3.5 A modal defeasible consequence relation is a preferential consequence relation if and only if it is deﬁned by some preferential model.
Proof. The proof is outlined in Appendix A.	2
The significance of this is that the representation result is proved with respect to the same set of properties used to characterize propositional preferential conse- quence. We therefore argue that our definition of preferential models provide the foundation for a semantics for preferential (and rational) consequence for a whole class of multi-modal logics. We do not claim that this is the appropriate notion of preferential consequence for all modal logics, but rather that it describes the basic framework within which to investigate such notions.
In order to obtain a similar result for rational consequence, we restrict ourselves to those preferential models in which ≺ is a modular order on states (cf. Defini- tion 2.2):
Definition 3.6 A ranked model Pr is a preferential model ⟨S, l, ≺⟩ in which the strict partial order ≺ on S is modular.
Since ranked models are preferential models, the notion of rational consequence is as in Definition 3.4. We can then state the following result:
Theorem 3.7 A defeasible consequence relation is a rational consequence relation if and only if it is deﬁned by some ranked model.
Proof. The proof is outlined in Appendix B.	2
One of the primary reasons for defining non-monotonic consequence relations of the kind we have presented above is to obtaina semantic notion, with corresponding

proof-theoretic decision procedure, of defeasible entailment [19]: Given a set of defeasible statements of the form α |∼ β, where |∼ is now viewed as a connective in an enriched modal language, which other defeasible statements should one be able to derive from this?
Definition 3.8 A modal defeasible knowledge base K|∼ is a finite set of statements
α |∼ β, where α, β ∈ L.
A preferential model P satisfies a defeasible knowledge base K|∼ if and only if P satisfies every statement in K|∼, i.e., for every α |∼ β ∈ K|∼, α |∼P β.
We define modal preferential entailment in the obvious way:
Definition 3.9 α |∼ β is preferentially entailed by K|∼ if and only if α |∼P β for every preferential model P satisfying K|∼. The set of defeasible statements preferentially entailed by K|∼ is called the modal preferential closure of K|∼.
The modal preferential closure of K|∼ coincides with the intersection of all pref- erential consequence relations containing K|∼, and is a preferential consequence relation. Modal rational entailment can be defined in a similar way:

Definition 3.10 α |∼ β is rationally entailed by K|∼ if and only if α |∼P
β for

every ranked model Pr satisfying K|∼.
However, as in the propositional case [19], the obvious definition of modal rational closure based on modal rational entailment does not produce an appropriate result.
Theorem 3.11 Given a defeasible knowledge base K|∼, the set of defeasible state- ments rationally entailed by K|∼ is exactly the preferential closure of K|∼.
Proof. The proof is similar to the propositional case [19, Theorem 4.2].	2
The main consequence of this result is that modal rational entailment does not, in general, produce a consequence relation which is rational.
The argument to define and construct a viable notion of rational closure is analo- gous to that given by Lehmann and Magidor [19] in the propositional case. First, we define a preference ordering on consequence relations, with relations further down in the ordering interpreted as more preferred.
Definition 3.12 Let K|∼ be a defeasible knowledge base. The preference order generated by K|∼ is a binary relation on the set of rational consequence relations containing K|∼, defined as follows: |∼0 is preferable to |∼1 (written |∼0  |∼1) if and only if
there is (α, β) ∈ |∼1 \ |∼0 such that for all γ such that γ ∨ α |∼0 ¬α and for all δ
such that γ |∼0 δ, we also have γ |∼1 δ; and
for every γ, δ ∈ L, if γ |∼ δ is in |∼0 \ |∼1, then there is an assertion ρ |∼ ν in
|∼1 \ |∼0 such that ρ ∨ γ |∼1 ¬γ.
Given a defeasible knowledge base K|∼, the idea is to define modal rational closure as the most preferred (with respect to  ) of all the rational consequence

relations containing K|∼. This leads to the following important definition of modal rational closure for defeasible knowledge bases:
Definition 3.13 Let K|∼ be a defeasible knowledge base, let KR be the class of rational consequence relations containing K|∼, and let  be the preference ordering on KR generated by K|∼. If  has a (unique) minimum element |∼, then the modal rational closure of K|∼ is defined as |∼.
Clearly then, if the modal rational closure exists, it is a rational consequence relation. In order to provide the conditions for the existence of modal rational closure, we first need to define a ranking of formulas with respect to K|∼ which, in turn, is based on a notion of exceptionality. The ranking of formulas can also be used to define an algorithm for computing the modal rational closure, when it exists (see below and the discussion in Section 6).
A formula α is said to be exceptional for a defeasible knowledge base K|∼ if and only if K|∼ preferentially entails T |∼ ¬α. A defeasible statement α |∼ β is exceptional for K|∼ if and only if its antecedent α is exceptional for K|∼.
It turns out that checking for exceptionality can be reduced to classical modal entailment checking.
Lemma 3.14 Given a defeasible knowledge base K|∼, let K→ be its classical coun- terpart in which every defeasible statement of the form γ |∼ δ in K|∼ is replaced by γ → δ. The formula α is exceptional for K|∼ if and only if ¬α is globally entailed by K→: i.e., if and only if K→ |= ¬α.
Proof. The proof is similar to the propositional case [19, Corollary 5.22].	2
Let E(K|∼) denote the subset of K|∼ containing statements that are exceptional for K|∼. We define a non-increasing sequence of subsets of K|∼ as follows: E0 = K|∼, and for i > 0, Ei = E(Ei−1). Clearly there is a smallest integer k such that for all j ≥ k, Ej = Ej+1. From this we define the rank of a formula with respect to K|∼ as follows: rK|∼ (α)= k − i, where i is the smallest integer such that α is not exceptional for Ei. If α is exceptional for Ek (and therefore exceptional for all E s), then rK|∼ (α) = 0. Intuitively, the lower the rank of a formula, the more exceptional it is with respect to the defeasible knowledge base K|∼.
Theorem 3.15 Let K|∼ be a ﬁnite defeasible knowledge base. The rational closure of K|∼ exists and is the set R|∼ of defeasible statements α |∼ β such that either rK|∼ (α) > rK|∼ (α ∧ ¬β), or rK|∼ (α)=0 (in which case rK|∼ (α ∧ ¬β)= 0).
Proof. The proof is outlined in Appendix C.	2
Observe from Lemma 3.14 that the determination of the rank of a formula can be reduced to classical (global) entailment checking for the modal logic under consid- eration. It is therefore easy to construct a (na¨ıve) decidable algorithm to determine whether a given defeasible statement is in the modal rational closure of a finite defeasible knowledge base K|∼.

Recent work by Casini and Straccia [5] in the context of description logics makes it possible to improve on this algorithm, from an implementation point of view. Casini and Straccia proposed a syntactic operational characterization of rational closure for the description logic ALC, but without providing a semantic counter- part. The algorithm draws on work by Lehmann and Magidor [19], Freund [11] and Poole [23], is based on performing a number of classical entailment checks (for ALC), and is easily amenable to implementation. From their description it is clear that the number of classical entailment checks needed is quadratic in the size of the knowledge base under consideration.
The significance of their work for us is that their algorithm can readily be ad- justed to determine the modal rational closure of a defeasible knowledge base K|∼, with rational closure membership checking being reduced to a number of modal global entailment checks that is quadratic in the size of K|∼. For the modal logics we consider here, determining membership of the modal rational closure is therefore no harder than global entailment checking.
In what follows we analyze applications of our constructions to some classes of modal logics commonly used in AI. A further application area, in the context of the description logic ALC, was recently explored by the present authors [4].
Preferential Reasoning about Actions
There is in the AI literature a fair number of modal-based formalisms for reasoning about actions and change [8,7,26,9]. These are essentially variants of the multi- modal logic K, in which the modal operators are determined by a (finite) set of actions A = {a1,..., an}: For each a ∈ A, there is associated a modal operator [a]. Formulas of the form [a]α are used to specify the effects of actions and they read as “after every execution of action a, the formula α holds”. The operator ⟨a⟩ is mostly used to specify the executability of actions: ⟨a⟩T reads as “there is a possible execution of action a”.
In our nuclear power plant example, P = {p, c, h}, where p stands for “the atomic pile is on”, c for “the cooling system is on”, and h for “hazardous situation”. As for the actions, we have A = {f, m}, where f stands for “flipping the pile switch”, and m for “malfunction”. One possible specification of such a scenario is given by the following knowledge base:
K = {(p л чc) x h, h → ⟨m⟩T, p → [f]чp, ⟨f⟩T}
(We note that specifying a solution to the frame problem is beyond the scope of this paper. Instead, we refer the reader to the solutions provided by the above-mentioned frameworks which can, in principle, be integrated into the present formalism in a straightforward way.) K basically says that “a hazardous situation is one in which the pile is on and the cooler off”, “a hazardous situation may lead to a malfunction”, “if the pile is on, then flipping switches it off”, and “one can always flip the pile switch”. We can then conclude K |= p → [f]чh, K |= [m]⊥ → (чp V c), and K |= [m]⟨f⟩чp V [f]h.

Recalling our discussion in the Introduction, with such a specification one cannot reason with exceptionalities given by statements of the form “a situation in which the pile is on is usually not hazardous” and “a situation in which the pile is on and the cooling system is off is usually hazardous”. Thanks to our constructions from the previous section, we can move to a defeasible version of a modal logic of actions in which one can capture defeasible consequences.
As an example, assume we are given M = {M1, M2}, where M1 and M2 are as depicted in Figure 2.


M1 :
w2	w3
M2 :


m
w1	w4

Fig. 2. Models depicting the behavior of actions in our nuclear power station scenario.

Hence Un = {(Mi, wj) | i ∈ {1, 2},j ∈ {1, 2, 3, 4}}. Assume S = {si | 1 ≤ i ≤ 8}, and let a labeling function l be such that l(s1) = (M1, w1), l(s2) = (M2, w1), l(s3) = (M1, w2), l(s4) = (M1, w3), l(s5) = (M2, w3), l(s6) = (M2, w2), l(s7) = 
(M1, w4), and l(s8)= (M2, w4). The order ≺ is given by: s1 ≺ s3, s2 ≺ s3, s3 ≺ s4, s3 ≺ s5, s4 ≺ s6, s5 ≺ s6, s6 ≺ s7, and s6 ≺ s8. Figure 3 below depicts the preferential model P = ⟨S, l, ≺⟩.



P :


Fig. 3. Preferential model for the nuclear power plant scenario.

The rationale of this partial order is as follows: The utility company selling the electricity generated by the power plant tries as far as possible to keep both the pile and the cooling system on, ensuring that the pile can be easily switched off (states s1 and s2); sometimes the company has to switch the pile off for maintenance but then tries to keep the cooler running, preferably if turning the pile on again does not cause a fault in the cooling system (state s3); more rarely the company needs to switch off both the pile and the cooler, e.g. when the latter needs maintenance (states s4 and s5); in an exceptional situation, turning the pile on may interfere with the cooler switching it off (state s6); and, finally, only in very exceptional situations would the pile be on while the cooler is off, e.g. during a serious malfunction (states s7 and s8). Let |∼P be the defeasible consequence relation defined by the model P above (cf. Definition 3.4). Then we can check that c л ⟨f⟩T |∼P [f]c (usually, flipping

the switch does not shut down the cooler); чp л c |∼P [f]чh (turning the pile on, when the cooler is on, usually does not lead to a hazardous situation); T |∼P [m]⊥ (meltdowns are unlikely); pлчc /|∼P [m]чh (it is not the case that once a malfunction has taken place in a hazardous situation, one is usually in a safe situation); and чp л c /|∼P ⟨f⟩⟨m⟩T (it is not usually the case that turning the pile on may lead to a situation in which a malfunction is possible).
Moreover, thanks to our representation result (Theorem 3.5), we know that |∼P is a preferential consequence relation (actually it turns out to be a rational conse- quence relation, since ≺ here is a modular partial order).
We started our example with a classical knowledge base, and then constructed a semantic rational consequence relation. This illustrated the semantics well, but in practice we may rather start with a defeasible knowledge base K|∼, from which we may draw defeasible conclusions. The semantics is then hidden from the user, as it forms part of the internal working of the reasoner. In the next section we analyze an example of reasoning with a defeasible knowledge base.
Epistemic Preferential Reasoning
Another family of modal logics that is of great interest from the standpoint of AI is that of epistemic logics, which allow for reasoning about knowledge [10].
The language of basic epistemic logic contains a (finite) set of agents A =
{A1,..., An}. For each agent A ∈ A there is a knowledge operator KA. Formulas are recursively defined in the usual way with {KA1 ,..., KAn } as modal operators. A formula of the form KAα is used to specify agent A’s knowledge about the world and it is read as “agent A knows that α is the case”. For instance, KA1 (α л KA2 α) formalizes the fact that “agent A1 knows both α and that agent A2 also knows α”. The core of epistemic logic is the normal multi-modal logic Km. Hence, the following version of axiom schema K is valid: KAα л KA(α → β) → KAβ, i.e., “if A knows both α and α → β, then she also knows β”. Stronger epistemic logics are obtained by adding additional schemata, expressing specific desired properties of knowledge, to the basic system K. Since K is at the heart of these logics, we shall
suffice with it in our exposition below.
In our example, let us assume that we have two agents, say A and B. The set P is as in the previous section, with the propositions p, c and h keeping their previous intuition. We have the following defeasible knowledge base K|∼:
⎧⎨ h |∼ p л чc, p л чc л чh |∼ ⊥, h |∼ KA(p л чc), h л p л чc |∼ KBKAчc, ⎫⎬
⎩	KBp |∼ p л c, KBp л KAчp |∼ чp, KBp л KBчc |∼ p л чc	⎭
The intuition conveyed by K|∼ is as follows: Hazardous situations are usually
ones in which the pile is on and the cooler is off. The statement p л чc л чh |∼ ⊥ encodes the ‘hard’ constraint p лчc → h [19, p. 6]. Then we have that in hazardous situations our agent A usually believes the pile is indeed on and the cooler is off. In hazardous situations where the pile is on and the cooler is off, agent B knows that

agent A knows that the cooler is down. Then B is usually right about his belief that the pile is on (unless A believes the opposite, in which case it is off); moreover the cooler is also on (unless he knows otherwise, in which case it is off).
From the defeasible knowledge base K|∼ we can preferentially derive the defeasi- ble statement h л p лчc |∼ KAчc л KBKAчc: in hazardous situations due to the pile being on while the cooler is off, usually agent A knows that the cooling is down and B knows that A knows this is the case. Since we know that the preferential closure is a preferential consequence relation (cf. comment after Definition 3.9), this can be derived by applying properties (RW), (CM) and (And) to the defeasible statements in K|∼.
K|∼ does not entail KBp л KBчc лчKAh |∼ h preferentially: situations in which B knows both that the pile is on and the cooler is off, and in which A does not know there is a hazard, are not usually hazardous. We (i.e., the underlying reasoner) can easily construct a modal preferential model satisfying K|∼ that does not satisfy the statement above. Let M be the Kripke model in Figure 4.
A	A



B	A


Fig. 4. A Kripke model depicting knowledge of two agents in our nuclear power station scenario.

From M we construct a modal preferential model P = ⟨S, l, ≺⟩, where S =
{s1, s2, s3, s4}, l(si)= (M, wi), 1 ≤ i ≤ 4, and s1 ≺ s2, s2 ≺ s3, and s3 ≺ s4. It can be checked that P satisfies K|∼. However, KBp л KBчc л чKAh /|∼P h.
It can be checked that KBp л KBчc л чKAh |∼ h is in the modal rational closure of the defeasible knowledge base K|∼.
Related Work
This paper builds on current work on ALC [4], in which rational closure for ALC is studied in more detail.
Also in a DL setting, Britz et al. [3] and Giordano et al. [12] use typicality orderings on objects in first-order domains to define defeasible subsumption in ALC. Both approaches define rational consequence relations, but without representation results. In contrast, we provide a general semantic framework which, unlike these proposals, is relevant to all logics with a possible worlds semantics. This is because our semantics for defeasible consequence yields a single order on relational structures at the meta level, rather than ad hoc relativized orders at the object level.
The notion of defeasibility in action theories has been dealt with in non-modal frameworks for reasoning about actions [1,27]. Contrary to ours, their work is not concerned with extending preferential reasoning to more expressive logics. However,

defeasible statements of the kind we studied here can be used in reasoning about the qualiﬁcations of actions: In situations where α holds, the action a is usually executable; but in the more specific context αj, a’s execution fails. In that sense, our framework also stands as an approach to the qualification problem [20] and to the more general problem of revising action domain descriptions [24,25].
As mentioned in Section 3, Casini and Straccia [5] recently proposed an algo- rithm for determining rational closure in the context of description logics. Their algorithm can be adjusted to determine the modal rational closure as defined in Def- inition 3.13. From the description of this algorithm it follows that, for the modal logics under consideration here, determining membership of the modal rational clo- sure is no harder than global entailment checking. Furthermore, the algorithm can readily be extended to implement refinements presented by presumptive rea- soning [17], and inheritance networks [6]. We are currently investigating further optimizations of the algorithm via suitable definitions of modularity for defeasible knowledge bases [14,15].
Concluding Remarks
The contributions of this paper are as follows: (i ) we filled an important gap in the non-monotonic reasoning community by providing a natural and intuitive se- mantics for preferential reasoning in modal logics; (ii ) we gave to our semantics a corresponding syntactic characterization via our representation results; (iii ) we established the basis with which to ‘lift’ the propositional notions of defeasible con- sequence and closure to modal logics in general, and (iv ) we illustrated how our constructions can be applied in two important families of modal logic.
The simple modal logics that we have assessed here are the backbone of well es- tablished formalisms for reasoning about actions, knowledge, obligations, and com- binations thereof. A proper understanding of preferential reasoning for basic modal logic is therefore important for finding specific definitions of defeasible reasoning in these logics. In that sense, we believe that the results we develop here pave the way for extending preferential and rational consequence, and hence also rational closure, to a whole class of logics for knowledge representation and reasoning.

References
Baral, C. and J. Lobo, Defeasible specifications in action theories, in: Proc. IJCAI, 1997, pp. 1441–1446.
Blackburn, P., J. van Benthem and F. Wolter, “Handbook of Modal Logic,” Elsevier North-Holland, 2006.
Britz, K., J. Heidema and T. Meyer, Semantic preferential subsumption, in: Proc. KR, 2008, pp. 476– 484.
Britz, K., T. Meyer and I. Varzinczak, Semantic foundation for preferential description logics, in: Proc. 24th Australasian Conference on AI, 2011.
Casini, G. and U. Straccia, Rational closure for defeasible description logics, in: Proc. JELIA, 2010,
pp. 77–90.
Casini, G. and U. Straccia, Defeasible inheritance-based description logics, in: Proc. IJCAI, 2011, pp. 813–818.


Castilho, M., A. Herzig and I. Varzinczak, It depends on the context! A decidable logic of actions and plans based on a ternary dependence relation, in: 9th International Workshop on Nonmonotonic Reasoning (NMR), 2002.
De Giacomo, G. and M. Lenzerini, PDL-based framework for reasoning about actions, in: IA*AI, 1995,
pp. 103–114.
Demolombe, R., A. Herzig and I. Varzinczak, Regression in modal logic, Journal of Applied Non- Classical Logics 13 (2003), pp. 165–185.
Fagin, R., J. Halpern, Y. Moses and M. Vardi, “Reasoning about Knowledge,” MIT Press, 1995.
Freund, M., Preferential reasoning in the perspective of Poole default logic, Artificial Intelligence 98
(1998), pp. 209–235.
Giordano, L., N. Olivetti, V. Gliozzi and G. Pozzato, ALC + T : a preferential extension of description logics, Fundamenta Informatica 96 (2009), pp. 341–372.
Harel, D., J. Tiuryn and D. Kozen, “Dynamic Logic,” MIT Press, 2000.
Herzig, A. and I. Varzinczak, On the modularity of theories, in: Advances in Modal Logic (2005), pp. 93–109.
Herzig, A. and I. Varzinczak, A modularity approach for a fragment of ALC, in: M. Fisher, W. van der Hoek, B. Konev and A. Lisitsa, editors, Proceedings of the 10th European Conference on Logics in Artificial Intelligence (JELIA), number 4160 in LNAI (2006), pp. 216–228.
Kraus, S., D. Lehmann and M. Magidor, Nonmonotonic reasoning, preferential models and cumulative logics, Artificial Intelligence 44 (1990), pp. 167–207.
Lehmann, D., Another perspective on default reasoning, Annals of Mathematics and Artificial Intelligence 15 (1995), pp. 61–82.
Lehmann, D. and M. Magidor, Preferential logics: the predicate calculus case, in: Proc. TARK, 1990,
pp. 57–72.
Lehmann, D. and M. Magidor, What does a conditional knowledge base entail?, Artificial Intelligence
55 (1992), pp. 1–60.
McCarthy, J., Epistemological problems of artificial intelligence, in: Proc. IJCAI, 1977, pp. 1038–1044.
McNamara, P., Deontic logic, in: Handbook of the History of Logic, Vol. 7, Elsevier N-Holland, 2006
pp. 197–288.
Nute, D., editor, “Defeasible Deontic Logic,” Synthese Library 263, Kluwer Academic Publishers, 1997.
Poole, D., A logical framework for default reasoning, Artificial Intelligence 36 (1988), pp. 27–47.
Varzinczak, I., Action theory contraction and minimal change, in: Proc. KR, 2008, pp. 651–661.
Varzinczak, I., On action theory change, Journal of Artificial Intelligence Research 37 (2010), pp. 189– 246.
Zhang, D. and N. Foo, EPDL: A logic for causal reasoning, in: Proc. IJCAI, 2001, pp. 131–138.
Zhang, Y., Handling defeasibilities in action domains, Theory and Practice of Logic Programming 3
(2003), pp. 329–376.

A	Proof Sketch for Theorem 3.5
Lemma A.1 (Soundness) For any preferential model P, the consequence rela- tion it deﬁnes is a preferential relation.
Let |∼ denote a preferential relation, i.e., |∼ satisfies the properties for preferen- tial reasoning from Section 2.

Definition A.2 A pair (M, w) ∈ U is normal for α ∈ L iff for every β ∈ L s.t.
α |∼ β, M,w H β.
Lemma A.3 Let |∼ satisfy (Ref), (RW), and (And), and let α, β ∈ L. All normal
(M, w) for α satisfy β iff α |∼ β.
Definition A.4 Let α, β ∈ L. α ≤ β iff α V β |∼ α.
We construct a preferential model as in Definition 3.3. Let P = ⟨S, l, ≺⟩, where:
S = {⟨M, w, α⟩| (M, w) ∈ U is normal for α ∈ L};
l(⟨M, w, α⟩)= (M, w);
j	j
⟨M, w, α⟩≺ ⟨M ,w , β⟩ iff α ≤ β and M,w /H β.
Lemma A.5 ≺ is a strict partial order on S. Lemma A.6 For any α ∈ L, α ⊆ S is smooth. Lemma A.7 α |∼ β iff α |∼P β.
Proof Sketch for Theorem 3.5. Soundness is given by Lemma A.1. For the only if part, let |∼ be a preferential consequence relation, and let P be defined as above. We showed in Lemmas A.5 and A.6 that P is indeed a preferential model. Lemma A.7 shows that P defines a consequence relation that is exactly |∼.   2

B  Proof Sketch for Theorem 3.7
Lemma B.1 (Soundness) If Pr is a ranked model, then the consequence relation
|∼Pr it deﬁnes is rational.
Let |∼ denote a rational relation, i.e., |∼ satisfies the properties for preferential reasoning from Section 2 plus (RM).
Definition B.2 α ∈L is consistent w.r.t. |∼ iff α /|∼ ⊥. Given Pr = ⟨S, l, ≺⟩, α is
consistent w.r.t. |∼Pr iff α/|∼Pr ⊥, i.e., iff there is s ∈ S s.t. s ∈ α.
Let C = {α ∈L| α is consistent w.r.t. |∼}.
Definition B.3 Given α, β ∈ C , α is not more exceptional than β, written αRβ, iff α V β /|∼ чα. α is as exceptional as β, written α ∼ β, iff αRβ and βRα.
That ∼ is an equivalence relation follows from the fact that R is reflexive and transitive. With α we denote the equivalence class of α. The set of equivalence classes of elements of C under ∼ is denoted by C . We write α ≤ β iff αRβ, and α < β iff α ≤ β and α /∼ β.
We construct a ranked model as in Definition 3.6. Let Pr = ⟨S, l, ≺⟩, where:
S = {⟨M, w, α⟩| (M, w) is normal for α ∈ L};
l(⟨M, w, α⟩)= (M, w);
j	j
⟨M, w, α⟩≺ ⟨M ,w , β⟩ iff α < β.

Lemma B.4 ≺ is a modular partial order.
Lemma B.5 Let α ∈L be consistent. α ⊆ S is smooth.
Lemma B.6 α |∼ β iff α |∼Pr β.
Proof Sketch for Theorem 3.7. Soundness is given by Lemma B.1. For the only if part, let |∼ be a rational consequence relation, and Pr be as defined above. By Lemmas B.4 and B.5, Pr is a ranked model. Lemma B.6 shows that Pr defines a consequence relation that is exactly |∼.	2
C  Proof Sketch for Theorem 3.15
We first show that R|~ contains K|~ and then that R|~ is a rational consequence

relation. The remainder of the proof is concerned with showing that if R|~
is a

different rational consequence relation containing K|~ , then R|~ R|~, which proves that R|~ is the modal rational closure of K|~. This part of the proof makes use of the ranks of formulas, but the crucial aspect is the use of three ranked models
Pr, Pj , and Pjj. Pr is a ranked model characterizing R|~, while Pjj is constructed
r	r	1	r

from Pr, and Pj is constructed from Pjj. The models Pjj and Pj
are used to

r	r	r	r
show that R|~  R|~.	2
