Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 301 (2014) 21–37
www.elsevier.com/locate/entcs

Observationally-induced Algebras in Domain Theory
Ingo Battenfeld1
Fakult¨at fu¨r Informatik TU Dortmund Dortmund, Germany

Abstract
We investigate the observationally-induced free algebra approach for constructing computational monads in the categories of classical domain theory. Our investigation yields that the free algebra construction exists for all finitary algebraic signatures and computational prototypes. We furthermore investigate the classical powerdomain constructions in the observationally-induced approach. For the Hoare, Smyth and probabilistic powerdomain constructions we build on established results, showing that they can be recovered observationally-induced. However, the Plotkin powerdomain turns out to be more problematic. Here we show that with the obvious prototype algebra, Heckmanns algebra A, one does not get the classical Plotkin powerdomain.
Keywords: denotational semantics, computational effects, powerdomains, topological domain theory


Introduction
Eugenio Moggi’s theory of computational monads uses a mathematical concept for separating programs involving computational effects, such as nondeterminism, ex- ceptions, state or interactive I/O, from purely functional programs. Moreover, the monadic approach allows to systematically lift pure programs into an effectful en- vironment [17]. This theory has proven so successful that it has been conceptually introduced into Haskell [13], one of the most broadly used functional programming languages today. Later on, Gordon Plotkin and John Power refined Moggi’s ap- proach by constructing the computational monads as free algebras for equational theories in the sense of universal algebra [19]. This idea allows a systematic combina- tion of different effects [11] and helps explaining the origin of effects by introducing the concept of algebraic operations as effect triggers [18]. However, in contrast

1 Email: ingo.battenfeld@tu-dortmund.de

http://dx.doi.org/10.1016/j.entcs.2014.01.003
1571-0661 © 2014 Elsevier B.V. Open access under CC BY-NC-ND license.

to the correspondence between algebraic operations and effect triggers, the corre- spondence between algebraic equations and certain well-behavedness conditions of computational types seems to be slightly artificial.
In 2005 Alex Simpson and Matthias Schr¨oder suggested a novel approach for con- structing computational monads in semantic frameworks [20]. Similar to Plotkin and Power they use algebraic operations as effect triggers, but instead of using an equational theory, they suggest to define properties by a single algebra of com- putational observations, thought of as computational prototype, to characterise a class of complete algebras as computation types. The monad is then given by the free algebra construction into the class of those complete algebras. This approach is close in spirit to Smyth’s theory of observable properties of datatypes [22], and therefore they call it observationally-induced. In [3,4], the observationally-induced free algebra approach has been investigated in the category Top of continuous maps between topological spaces, and, in [2], in general cartesian closed categories. The result in the former case was that the free observationally-induced algebra construc- tion exists for arbitrary finitary signatures and computational prototypes, and in the latter case the same holds under fairly mild conditions on the ambient category. In the work at hand we investigate the observationally-induced free algebra approach in the categories of classical domain theory, in particular in DCPO. One of our main result will be that DCPO supports the free algebra construction for arbitrary finitary signatures and prototypes. This was already claimed in [2], but in contrast to that work, here we use the definitions of [4], which exhibit the category of complete algebras as a full reflective category of the category of algebras for the
given signature.
We also examine the classical powerdomain constructions, i.e. the Plotkin, Hoare, Smyth and probabilistic powerdomains via free observationally-induced al- gebras. The Hoare and Smyth constructions have in slightly different shape already been investigated in op.cit., and the probabilistic powerdomain in [20]. We use those results to show that they can be recovered in the observationally-induced approach. The proofs of completeness of the respective powerdomains all follow the same strat- egy, yielding a systematic template for further constructions. For the Plotkin pow- erdomain, Alex Simpson [21] has suggested to use Reinhold Heckmann’s dcpo A [9]
as computational prototype. However, we show that this observationally-induced
construction not yield the classical Plotkin powerdomain, given by A-valuations
loc.cit. or Goubault-Larrecq’s quasilenses [8].
It should be mentioned that the work at hand and, in particular, some of our results bear close resemblance to Klaus Keimel’s recent work [15], in which he relates state transformer and predicate transformer semantics in the category DCPO.
The paper is organised as follows. In Section 2 we recall the definitions of P -complete algebras as used in [4], and give two requirements under which they form a full reflective subcategory of the category of algebras for the underlying signature. The definitions differ from the original ones proposed by Schr¨oder and Simpson, but with theirs a reflectivity result is not known. In Section 3, we show that DCPO satisfies the two requirements, and hence the free algebra construction

exists for arbitrary signatures and prototypes. In Section 4 we examine in how far the classical powerdomain constructions can be recovered in the ovbservationally- induced approach. Finally, in Section 5 we give conclusions.

Prerequisites
We assume C to be a cartesian closed category and Ω a (finitary) algebraic signature. By CΩ, we denote the category of Ω-homomorphism between Ω-algebras in C, defined as usual. We abbreviate CΩ-algebras (A, {ωA}) by A.
As C is cartesian closed, the category CΩ has C-powers: if A ( = (A, {ωA})) is a CΩ-algebra and X any C-object, the canonical operations on AX are defined pointwise by:
ωAX := λ(fi)i∈|ω|. λx. ωA((fi(x))i∈|ω|).
Moreover, we assume CΩ to be C-enriched, i.e. for CΩ-algebras A and B, the homomorphisms CΩ(A, B) form a C-object, which we denote by [A ⊸ B]. We assume this C-object [A ⊸ B] is a subobject of the exponential BA, and if C has enough limits and colimits, it can be carved out of BA as an equalizer.
Finally, we fix a CΩ-algebra P (= (P, {ωP })) as computational prototype. The next definition is well-known in Synthetic Domain Theory.
Definition 2.1 For CΩ-algebras A, B and C, a CΩ-homomorphism h : A → B is called C-equable, if every CΩ-homomorphism f : A → C has a unique homomor- phism extension f : B → C along h.
In category-theoretical terms, h is orthogonal to the identity idC , written h ⊥
idCX .
Next, we identify our class of computation types as complete algebras in the following sense.
Definition 2.2 A P -complete algebra is a CΩ-algebra C for which every P -equable homomorphism h : A → B is C-equable, i.e.:
h ⊥ idP ⇒ h ⊥ idC.



CP .
We denote the category of CΩ-homomorphisms between P -complete algebras by

Recall that the forgetful functor CΩ → C creates limits. It turns out that the

same holds for the subcategory of P -complete algebras.
Lemma 2.3 The forgetful functor U : CP → C creates limits.
Proof. Clearly, the forgetful functor factors as CP → CΩ → C, and the right part creates limits. Thus, if D is a diagram in CP , and the limit of U(D) ex- ists in C, then it’s limit Lim(D) carries a canonical Ω-algebra structure, making (Lim(D), {ωLim(D)}) the corresponding limit in CΩ. It only remains to show that

(Lim(D), {ωLim(D)}) is P -complete, which follows from a straightforward calcula- tion. The details are left to the inclined reader.	✷
A further assumption we want to make on a categorical framework for provide a good basis for observationally-induced effect monads is that CP inherits C-powers from CΩ. This cannot be shown from our definitions, so we make it our first re- quirement.
Requirement 1 The category CP inherits C-powers from CΩ.
For the next result, let us fix algebras A and B. Recall that we assume [A ⊸ B] to be a subobject of the exponential BA. We denote the inclusion by ι. Moreover we have a canonical map γ : A → BBA , in λ-terms given by λx. λf .f(x). We denote the composite Bι ◦ γ : A → B[A⊸B] by η. For simplicity’s sake we write it in λ-terms as λx. λh .h(x), where we use h to suggest that it takes the place of an Ω-homomorphism.
Lemma 2.4 For all Ω-algebras A and B, the map η : A → B[A⊸B] is an Ω- homomorphism on the corresponding algebra structures.
Proof. We have to show that for all operations ω, the maps η◦ωA and ωB[A⊸B] ◦η|ω|
coincide. If we rewrite ωA as λ(xi)i∈|ω|. ωA((xi)i∈|ω|), we calculate for the first term:

η ◦ ωA = (λx. λh. (h(x))) ◦ (λ(xi)i∈|ω|. ωA((xi)i∈|ω|))
= λ(xi)i∈|ω|. λh. (h(ωA(xi)i∈|ω|)).
For the second term we calculate:
ωB[A⊸B] ◦ η|ω| = (λ(fi)i∈|ω|. λh. ωB((fi(h))i∈|ω|)) ◦ (λ(xi)i∈|ω|. λ(hi)i∈|ω|. (hi(xi))i∈|ω|)
= λ(xi)i∈|ω|. λh. ωB(((λhi. (hi(xi)))(h))i∈|ω|)
= λ(xi)i∈|ω|. λh. ωB((h(xi))i∈|ω|).

So for the terms to be equal, we need h(ωA(xi)i∈|ω|) = ωB((h(xi))i∈|ω|), which is exactly the condition for h to be an Ω-homomorphism.	✷
Thus, in particular, for every CΩ-algebra A, we obtain a canonical CΩ-homomorphism ηA : A → P [A⊸P ]. Our second requirement for a categorical framework, building upon the first, demands this map to have a convenient factorisation.
Requirement 2 For every CΩ-algebra A, the canonical CΩ-homomorphism ηA : A → P [A⊸P ] factors as a P -equable h : A → A′, with A′ being P -complete, followed by a monomorphism A′ → P [A⊸P ].
Observe that the demand on A′ being P -complete, characterises this factorisa- tion unique up to isomorphism.
Proposition 2.5 Under Requirements 1 and 2, the category CP forms a full reflec- tive subcategory of CΩ.

Proof. The reflection of an Ω-algebra A is the P -complete algebra A′ obtained in the factorisation of η from Requirement 2.	✷

Observationally-induced algebras in Domain Theory
We will now consider categories of P -complete algebras in classical domain theory. We start by fixing our notation.
By DCPO we denote the category of Scott-continuous maps between directed complete partially ordered sets (dcpos). It is well-known that DCPO is a carte- sian closed, complete and cocomplete category. Again we assume a finitary al- gebraic signature Ω to be given, and we obtain the category DCPOΩ of Scott- continuous Ω-homomorphisms between dcpo-Ω-algebras (for which we also write DCPOΩ-algebras). As in the previous section, we abbreviate DCPOΩ-algebras by underlining: A := (A, {ωA}). For a (pointwise) directed family of Scott-continuous Ω-homomorphism {hi : A → B}i∈I , the (pointwise) directed supremum  i∈I hi is
also a Scott-continuous Ω-homomorphism A → B, hence the category DCPOΩ is
DCPO-enriched. We denote the dcpo of homomorphisms between A and B by [A ⊸ B]. For DCPO-powers, if X is a dcpo and A a DCPOΩ-algebra, we denote X-power of A by AX.
We also fix a DCPOΩ-algebra P as computational prototype and get the notions of P -equable homomorphisms and complete P -algebras as in the previous section. DCPOP denotes the category of Scott-continuous Ω-homomorphisms between P - complete algebras (which we also abbreviate by DCPOP -algebras).
We will also use the notions of subdcpos and subalgebras, for which we give the following formal definition.
Definition 3.1 If X is a dcpo, then a subdcpo of X is a subset Y ⊆ X such that for every directed {yi}i∈I ⊆ Y , the supremum i∈I yi as calculated in X belongs to Y .
If A = (A, {ωA}) is a DCPOΩ-algebra, then a DCPOΩ-subalgebra is given by a DCPOΩ-algebra B = (B, {ωB}) such that B is a subdcpo of A and the corresponding embedding is a Scott-continuous Ω-homomorphism B → A. We write B ⊳ A to denote that B is a DCPOΩ-subalgebra of A.
If A is a DCPOP -algebra, then a P -complete subalgebra of A is a DCPOΩ- subalgebra B of A which itself is P -complete.
We now proceed to show that DCPO satisfies Requirements 1 and 2 of the previous section. We start with some results which are specific to the category DCPO. The first such observation, which is well known, is that a map f : X ×Y → Z is Scott-continuous if and only if it is continuous in each component separately.
Let us now define component-wise homomorphisms.
Definition 3.2 Let X be a dcpo and A and B be DCPOΩ-algebras. Then a Scott- continuous map f : X × A → B is a right Ω-homomorphism, if for all x ∈ X, ω ∈ Ω and {ai}i∈|ω| ⊆ A, it holds that f(x, ωA((ai)i∈|ω|)) = ωB(f(x, ai)i∈|ω|).

The following result, the straightforward verification of which is left to the in- clined reader, is not specific to DCPO, but holds in every well-pointed cartesian closed category.
Lemma 3.3 Let X be a dcpo and A and B be DCPOΩ-algebras. Then a Scott- continuous map f : X × A → B is a right Ω-homomorphism if and only if its exponential transpose f† becomes a Ω-homomorphism A → BX .
The next lemma, from which Requirement 1 immediately follows, is very specific to the category DCPO.
Lemma 3.4 In the category DCPO, an Ω-homomorphism h : A → B is C-equable if and only if it is CX-equable for every DCPO-power of C.
Proof. Let h be C-equable.  We have to show that it is CX-equable for every
DCPO-power of C.
So assume f : A → CX is any Ω-homomorphism. We consider its exponential transpose g : X × A → C which is a right homomorphism on the corresponding algebra structures. Thus, for every x ∈ X, the corresponding map gx : A → C (given by a '→ g(x, a)) yields a homomorphism A → C, hence has a unique extension

gx : B → C along h.
Thus, we can define a map g : X × B → C, by (x, b) '→ g

, which clearly

^	^x
is a right homomorphism on the corresponding algebra structures. It must also be unique as such, as otherwise we could find some x0 ∈ X, for which gx0 had no unique extension along h, contradicting the C-equablity of it. Hence, it remains to show that g is Scott-continuous.
Since all the gx are Scott-continuous by assumption, it suffices to show that g is Scott-continuous in its first component, i.e. for all b0 ∈ B and directed {xi}i∈I ⊆ X, it holds that

This is to show that i∈I gxi = gWi∈I xi . Since i∈I gxi is the directed supremum of Scott-continuous Ω-homomorphisms B → C, it is itself a Scott-continuous Ω-
homomorphism. As it holds that	g (h(a)) = gW	(h(a)), for all a ∈ A, we get that Wi∈I gxi extends gWi∈I xi along h, and so by uniqueness it must hold that
Corollary 3.5 The category DCPO satisfies Requirement 1 from the previous sec- tion.
In order to show that DCPO also satisfies Requirement 2, we make use of the so-called d-completion [25], which is also known as monotone convergence reflection [6]. It is a topological construction which applied in DCPO assigns to a subset S ⊂ X of a dcpo X, the smallest subdcpo d(S) ⊂ X containing S. Keimel and Lawson [16] have shown that given a semi-topological Ω-algebra (A, {ωA}) (i.e. all operations are separately continuous), the operations can be extended to its d- completion, rendering (d(A), {ωd(A)}) a semi-topological Ω-algebra. We use their result in the following form.

Lemma 3.6 Let A = (A, {ωA}) be a DCPOΩ-algebra, and S ⊆ A be a subset closed under the operations ωA. Then (d(S), {ωA|d(S)}) is a DCPOΩ-subalgebra of A.
Proof. Considering S ⊆ A as a topological subspace, (S, {ωA|S}) becomes a semi- topological Ω-algebra. Hence, by Keimel and Lawsons result, the operations can be extended to its d-completion, and so (d(S), {ωA|d(S)}) is a semi-topological Ω- algebra, making it a DCPOΩ-subalgebra of A.	✷
Proposition 3.7 The category DCPO satisfies Requirement 2, i.e. for every DCPOΩ-algebra, the Scott-continuous Ω-homomorphism η : A → P [A⊸P ] factors as h : A → A′ followed by ι : A′ → P [A⊸P ], such that A′ is P -complete, h is P -equable and A′ ⊳ P [A⊸P ].
Proof. Consider im(η) ⊆ P [A⊸P ], the image of the map η. It is clear that im(η) is closed under the operations {ωP [A⊸P ] }, since η is an Ω-homomorphism, by Lemma
2.4. We set A˜ ⊆ P [A⊸P ] to be the d-completion of im(η), which by the previous lemma becomes a DCPOΩ-subalgebra A˜ of P [A⊸P ]. Now we consider the set
J := {B ⊳ P [A⊸P ]| B is P -complete and A˜ ⊳ B}.
Since DCPO satisfies Requirement 1, P [A⊸P ] ∈ J , hence J is nonempty. Con-
sider J := TB∈J B as a subset of P [A P ]. By Lemma 2.3, J equipped with the in-
⊸
 
duced operations of P [A⊸P ] becomes a P -complete DCPOΩ-subalgebra of P [A⊸P ], as the intersection can be described as the limit of the corresponding DCPOΩ- subalgebra embeddings. Also, it clearly holds that A˜ ⊳ J. Now, we have a factori- sation of η as:
A −→ A˜ −→ J −→ P [A⊸P ],
where all parts are Scott-continuous Ω-homomorphisms, and the map on the right- hand side is a DCPOΩ-subalgebra embedding. It remains to show that composition of the two maps on the left-hand side, which we denote by h : A → J is P -equable.
For this, consider any Scott-continuous Ω-homomorphism f : A → P and the following diagram:

P [A⊸,,

ι

J,,

h
P ]
❄❄❄
❄❄❄Φf
❄❄❄
❄❄❄zz
⑧?, P
⑧⑧⑧
⑧⑧⑧
⑧⑧⑧ f

A ⑧⑧

where Φf : P [A⊸P ] → P is the evaluation map F '→ F(f), which is readily checked to be a Scott-continuous Ω-homomorphism. Thus, composition Φf ◦ ι : J → P extends f along h. It remains to show uniqueness as such.

For this suppose g : J → P is another such map. Then, the equalizer of Φf ◦ ι
and g defines a P -complete DCPOΩ-algebra J′ ⊳ J, which also is a P -complete
DCPOΩ-subalgebra of P [A⊸P ] containing the image of η, and hence A˜, hence
J′ ∈ J , and it follows that J′ ≡ J. This only holds if Φf ◦ ι ≡ g, showing that h is
P -equable, as required.	✷

Thus Proposition 2.5 applies to DCPO.
Theorem 3.8 For every finitary algebraic signature Ω and computational prototype
P , the category DCPOP is a full reflective subcategory of DCPOΩ.
It is well-known that for any finitary algebraic signature, the forgetful functor DCPOΩ → DCPO has a left adjoint, i.e. the absolutely free algebra construction F : DCPO → DCPOΩ exists. Composing this absolutely free algebra functor with the reflection we obtain a free DCPOP -algebra functor.
Corollary 3.9 For every finitary algebraic signature Ω and computational proto- type P , the forgetful functor DCPOP → DCPO has a left adjoint FP : DCPO → DCPOP .

Finally, we show that the P -complete algebras satisfy all algebraic inequations satisfied by P itself. The proof is very much akin to the corresponding proof about algebraic equations in the topological framework [3].
Proposition 3.10 Let t ≤ t′ be an algebraic inequation satisfied by P . Then all
P -complete algebras satisfy t ≤ t′.
Proof. Let X be a discretely ordered countable set. Then X is a dcpo, and we can form the free DCPOΩ-algebra T X, consisting of all generic Ω-terms. T X is itself discretely ordered. Furthermore the algebraic inequation t ≤ t′ induces an inequational theory (Ω, I) and we can form the free DCPO(Ω,I)-algebra FX over X. FX is not discretely ordered as it satisfies our inequation for all variable instantiations.
By the properties of free algebras, we have a canonical Ω-homomorphism h : T X → FX, extending the inclusion X ֒→ FX along the inclusion X ֒→ T X, and there are isomorphisms between Scott-continuous maps X → P , Ω-homomorphisms T X → P and Ω-homomorphisms FX → P , the last correspondence given by extensions along h. This makes h a P -equable Ω-homomorphism.
Thus, for each P-complete Ω-algebra B, every Ω-homomorphisms v : T X → B can be extended along h to an Ω-homomorphisms vˆ : FX → B. So let tv, tv ∈ B be corresponding term instantiations of t, t′ given by v : T X → B. Let U ⊆ B be Scott-open, containing tv. Then we have that for the corresponding terms t, t′ ∈ FX

(i.e. tv = vˆ(t) and t′
= vˆ(t′)), that t ∈ vˆ−1(U), hence t′ ∈ vˆ−1(U), and so t′
∈ U.

This shows tv ≤B t′ , as required.	✷

Powerdomain Constructions
We now examine in how far the classical powerdomain constructions can be recov- ered by the observationally-induced approach. We start with the Hoare, Smyth and (extended) probabilistic powerdomains. The results for the Hoare and Smyth powerdomains have been worked out in a topological setting in [3,4]. The proof strategy is the same in the cases at hand, so we omit the proofs, as the reader should have no problems filling in the details by consulting loc. cit.. In the case of the extended probabilistic powerdomain, the needed technicalities follow essentially from the work of Tix [23], so we give brief hints for the proofs in this case.
For constructing the Plotkin powerdomain in the observationally-induced ap- proach, Simpson [21] has suggested to use Heckmann’s three-element domain A [9] as computational prototype. We give a very simple counterexample showing that the observationally-induced approach with this prototype does not yield the clas- sical Plotkin powerdomain, but may contain genuinely more elements. In fact, the algebra of traditional construction fails to be A-complete even in most simple cases. In the three cases for ordinary nondeterminism, i.e. the Hoare, Smyth and
Plotkin powerdomains, we consider an algebraic signature consisting of a single bi- nary operation Ω = {⋆}, and write the shorthands ⋆-algebras (or DCPO⋆-algebras) and ⋆-homomorphisms (or DCPO⋆-homomorphisms). Furthermore, we let S de- note the two element Sierpinski-domain {⊥, ⊤} with ⊥ ≤ ⊤, but not vice-versa. We constantly identify maps f : X → S with the corresponding Scott-open subsets U := f−1({⊤}).
In the case of the extended probabilistic powerdomain, we use a signature Ω =
{⋆λ| λ ∈ R+}, where R+ denotes the set of the nonnegative real numbers, extended by ∞. We also use R+ to denote the dcpo consisting of the same underlying set and the usual order. R+ becomes a DCPOΩ-algebra (in fact a dcpo-cone [24]) when equipped with the operations as x +λ y := λ · x + (1 − λ) · y, as usual.
The Hoare Powerdomain
The prototype algebra for the Hoare powerdomain is S∨ := (S, ∨), where ∨ : S2 → S is the usual join operation. The Scott-continuous maps f : X → S can be identified with open subsets U ⊆ X, by U = f−1({⊤}).
The classical characterisation of the Hoare powerdomain over a dcpo X exhibits it as the dcpo of nonempty closed subsets of X ordered by inclusion, which we denote by C(X), with the operation given by set-union, i.e. (C(X), ∪). We use a general strategy to show that for every dcpo X, (C(X), ∪) is a DCPOS∨ -algebra. The key for this is to characterise it algebraically as a subset of SSX . This is obtained by the following sequence of results.
Lemma 4.1 The map ι : C(X) → SSX is Scott-continuous and becomes a ⋆- homomorphism (C(X), ∪) → S∨SX .
Lemma 4.2 An element F ∈ SSX is in im(ι) if and only if it satisfies the following two properties:

F(X) = ⊤,
F(U ∨ V ) = F(U) ∨ F(V ).
Theorem 4.3 For every dcpo X, (C(X), ∪) is a S∨-complete algebra.
It is known that for every dcpo X, (C(X), ∪) is the free dcpo-algebra over X for an inequational theory which is given by reflexivity, commutativity and associativity for ⋆, together with the inequation x ≤ x ⋆ y. Thus, freeness follows from the universal property of the classical free algebra construction.
Theorem 4.4 For every dcpo X, the free DCPOS∨ -algebra over X is given by
(C(X), ∪), with the free algebra inclusion X → C(X) being the point closure map.
The Smyth Powerdomain
The prototype algebra for the Smyth powerdomain is S∧ := (S, ∧), where ∧ : S2 → S is the usual meet operation. The classical characterisation of the Smyth powerdo- main over a continuous dcpo X exhibits it as the dcpo of nonempty compact sat-
urated subsets of X ordered by reverse inclusion, which we denote by K(X), with the operation given again by set-union, i.e. (K(X), ∪). Under the assumption of sobriety, one can again show that (K(X), ∪) is a DCPOS∧ -algebra.
Lemma 4.5 For a sober dcpo X, ι : K(X) → SSX is Scott-continuous and becomes a ⋆-homomorphism (K(X), ∪) → S SX .
Lemma 4.6 For a sober dcpo X, an element F ∈ SSX is in im(ι) if and only if it satisfies the following two properties:
F(∅) = ⊥,
F(U ∧ V ) = F(U) ∧ F(V ).
Theorem 4.7 For every sober dcpo X, the DCPO⋆-algebra (K(X), ∪) is S∧-complete.
It is known that for every continuous dcpo X, (K(X), ∪) is the free dcpo-algebra over X for an inequational theory which is given by reflexivity, commutativity and associativity for ⋆, together the inequation x ⋆ y ≤ x. This yields the following result.
Theorem 4.8 For every continuous dcpo X, the free DCPOS∧ -algebra over X is given by (K(X), ∪), with the free algebra inclusion X → K(X) being x '→↑{x}.
The extended Probabilistic Powerdomain

The prototype algebra for the extended probabilistic powerdomain is R+ := (R+, {+λ}), defined as above. The classical characterisation of the extended probabilistic pow- erdomain over a continuous dcpo X exhibits it as the dcpo of Scott-continuous valuations V(X), i.e. Scott-continuous maps ν : O(X) → R+ with ν(∅) = 0 and
ν(U ∪ V ) + ν(U ∩ V ) = ν(U) + ν(V ), ordered pointwise, and with the corresponding
operations given pointwise.

We show the results only for continuous dcpos in this case, as this allows us to use the topological results of [23], because in this case the Scott-topology and the weak topology used in loc.cit. coincide. Also initiality of V(X) for dcpo-cones is only known in this case. Notationally we do not distinguish between operations on DCPO-powers of DCPOΩ-algebras and the corresponding ground algebras. This should not cause any confusion, as the corresponding operation lifting is canonical.
 RX
Lemma 4.9 For a continuous dcpo X, the map ι : V(X) → R+ + is Scott-
 RX
continuous and becomes an Ω-homomorphism (V(X), {+λ}) → R+ + .
Proof. This follows from Satz 4.4 in [23].	✷
 RX

Lemma 4.10 For a continuous dcpo X, an element F ∈ R+
only if it satisfies the following two properties:
F(const0) = 0,
F(f +λ g) = F(f) +λ F(g).
+ is in im(ι) if and

Proof. This is essentially the Riesz-Representation Theorem which is Satz 4.19 in [23].	✷

Theorem 4.11 For every continuous dcpo X, (V(X), {+λ}) is a R+-complete al- gebra.
Proof. The proof is now purely algebraic and follows exactly the steps of the proof of Lemma 4.14 below. The details are left to the inclined reader.	✷
It is known that for every continuous dcpo X, (V(X), {+λ}) is the free dcpo-cone over X, see [12]. This yields the following result.
Theorem 4.12 For every continuous dcpo X, the free DCPO -algebra over X
+
is given by (V(X), {+λ}), with the free algebra inclusion X → V(X) mapping x ∈ X
to the corresponding point evaluation.
The Plotkin Powerdomain
Let A be the three element chain, which has as underlying set {0, 1, 2} with 0 ≤ 1 ≤ 2 and not vice-versa. As suggested by Simpson [21], for the convex powerdomain we choose the prototype algebra A✶ := (A, ✶), where ✶: A2 → A is defined as:


x ✶ y :=
0	if x = y = 0
1	otherwise.

The Scott-continuous maps f : X → A can be identified with pairs of open subsets
⟨U, V ⟩ of X such that U ⊆ V , by U = f−1({2}) and V = f−1({1}), and we may
switch between these representations.

We proceed as in the previous sections to characterise a suitable DCPOA✶ - subalgebra of the double exponential A✶AX algebraically.
Definition 4.13 Let X be a dcpo. Let A(X) be the subdcpo of AAX  given by those elements which satisfy the following three properties:
F(const0) = 0,
F(const2) = 2,
F(f ✶ g) = F(f) ✶ F(g),
where in the last property f ✶ g uses the corresponding operation on A✶X.
That A(X) is indeed a subdcpo of AAX is easily checked, as well as that it is closed under the operation ✶, i.e. it is a subalgebra. In fact it is a complete subalgebra, as the following result shows.
Lemma 4.14 For every dcpo X, the DCPO⋆-algebra (A(X), ✶) is A✶-complete.
Proof. We denote the embedding (A(X), ✶) → A✶AX by e. Let h : A → B be A✶- equable and f : A → (A(X), ✶) be a Scott-continuous ⋆-homomorphism. Consider the following diagram:



e◦f
✐ ❣ ❞ ❜ ❴ ❭ ❩ ❲ ❯ ❘
c ♦

v˛	A

B,,

h
(A(X), ✶) 	e	¸/ A✶ X
✈✈✈:,
✈✈✈✈
✈✈✈✈f
✈✈✈

A ✈

where e ◦ f : B → A✶AX is the unique homomorphism extension of e ◦ f along h, obtained by A✶AX being A✶-complete. It suffices to show that for all b ∈ B, e ◦ f(b) satisfies properties (i)-(iii) of Definition 4.13.

For this, observe that for every f : X → A, the evaluation map π
: A✶AX → A✶

is a ⋆-homomorphism, since the canonical operations on DCPO-powers of A✶- complete algebras are just given by pointwise liftings. Thus we get that πconst0 ◦e ◦ f must be the unique ⋆-homomorphism extension of πconst0 ◦ e ◦ f along h. But the latter is equal to the map const0 : A → A✶, because it factors through f, and all elements of im(ι) satisfy property (i) of Definition 4.13. Thus, by uniqueness of homomorphism extensions, it must also hold that πconst0 ◦ e ◦ f = const0 : B → A✶, showing that for all b ∈ B, e ◦ f(b) satisfies property (i). A very similar argument can be made for showing that the same holds for property (ii).
In order to show that property (iii) holds, observe that ✶: A✶2 → A✶ can be used to compose homomorphisms into A✶, i.e. if g, g′ are any Scott-continuous
⋆-homomorphisms from the same source algebra into A✶, then the pointwise com-
position g ✶ g′ is a Scott-continuous ⋆-homomorphism, as well. Thus, we get that


	
for all f, g : X → A, it holds that (πf ◦ e ◦ f) ✶ (πg ◦ e ◦ f) is a ⋆-homomorphism extension of (πf ◦ e ◦ f) ✶ (πg ◦ e ◦ f) along h. But the latter is equal to πf✶g ◦ e ◦ f, since it factors through f. Finally, πf✶g ◦ e ◦ f is extended along h by πf✶g ◦ e ◦ f,
and so by uniqueness we get that (πf ◦ e ◦ f) ✶ (πg ◦ e ◦ f) ≡ πf✶g ◦ e ◦ f, which shows that for all b ∈ B:

e ◦ f(b)(f ✶ g) = πf✶g ◦ e ◦ f(b)

= ((πf ◦ e ◦ f) ✶ (πg ◦ e ◦ f))(b)

= (πf ◦ e ◦ f)(b) ✶ (πg ◦ e ◦ f)(b)

= e ◦ f(b)(f) ✶ e ◦ f(b)(g),

hence e ◦ f(b) satisfies property (iii) from Definition 4.13, which concludes the proof.	✷
In correspondence to the powerdomains examined in the previous sections, one might expect that the DCPOA✶ -algebra defined in Definition 4.13 is in fact the traditional convex powerdomain. However, we now show that this is not the case even for very simple dcpos.
Several different definitions of the traditional convex powerdomain (or Plotkin powerdomain) can be found in the literature. The standard references [6,1] use the notion of lenses, Goubault-Larrecq [8] substitutes lenses with the notion of quasi lenses to obtain more general results. However, the most suitable definition for our purpose was suggested by Heckmann [9] and is equivalent to Goubault-Larrecq’s. He uses the notion of an A-valuation over X which is a Scott-continuous map
α : O(X) → A such that α(∅) = 0, α(X) = 2, α(U) = 0 implies α(U ∪ V ) = α(V )
and α(U) = 2 implies α(U ∩ V ) = α(V ). For every dcpo X, we denote the set of A-valuations ordered pointwise by AVal(X). It is straightforward to check that the directed supremum of A-valuations in the function space AO(X) is again an A-valuation, hence AVal(X) is always a dcpo. Furthermore we define a binary operation ⊎ : AVal(X)2 → AVal(X), by applying ✶ pointwise, i.e. for all open U ⊆ X, (α⊎α′)(U) := α(U) ✶ α′(U). It is easily checked that ⊎ is Scott-continuous, hence (AVal(X), ⊎) forms a DCPO⋆-algebra.
There is a Scott-continuous ⋆-homomorphism embedding of (AVal(X), ⊎) into
A✶AX , given by the map ι : AVal(X) → AAX . In terms of maps given by pairs of open subsets ι is given by:



ι(α)(⟨U, V ⟩) =
2	if α(U) = 2
0	if α(V ) = 0
1	otherwise.

In fact it becomes a DCPO⋆-algebra embedding. The proof of this claim is left to the inclined reader.
We simply remark that every element in im(ι) satisfies the properties of Defini-

⟨{a, b}, {a, b}⟩
c ◦¸¸¸

ccc c
c
¸¸¸¸¸⟨{b}, {a, b}⟩
¸◦
¸

ccc
cc
⟨{a}, {a}⟩ ◦¸¸
¸¸¸¸¸
¸¸¸¸
ccccc
cccc
¸¸
¸¸¸
¸¸

⟨{b}, {b}⟩

¸¸¸¸
ccccc
¸¸¸¸
ccccc

¸¸¸
cccc ⟨∅, {a, b}⟩
¸¸
¸¸¸◦
cccc

⟨∅, {a}⟩¸¸¸¸
c
⟨∅, {b}⟩

¸¸¸◦ cccc
⟨∅, ∅⟩
Fig. 1. A2
ul	ur
2	1	1	2

2	1	1
1	1
1	1	2
1	1

l	c	r

2	1
2	1	0
1	1
1	1	1
1	2
0	1	2

1	0	1	1	0	1
ll	lr
1	1	1	1

1	1	0
1	0

Fig. 2. A(2)
0	1	1
0	1

tion 4.13, but in the following we will show that these are not enough to characterise
im(ι) completely.
We now give an example of a dcpo X for which AVal(X) /= A(X). In fact, it suffices to take X to be 2, the two-element discrete domain. Let us denote the elements of 2 by {a, b}. AVal(2) is well-known to consist of three elements αa, αb, αab
which are defined as:
α (U) = (2	if a ∈ U


similar for αb and


αab(U) =
0	otherwise,

2	if U = 2
0	if U = ∅
1	otherwise.

Let us also give a sketch of the dcpo A2. In terms of pairs of opens it looks as in Figure 1. The operation ✶ on A✶2 combines elements “towards the middle”. We now sketch A(2) ⊆ AA2 , by giving the corresponding images of the elements of A2, as sketched in Figure 1. Notice that by conditions (i) and (ii), for every F ∈ A(2),
we have that F(⟨∅, ∅⟩) = 0 and F(⟨{a, b}, {a, b}⟩) = 2. Hence, we can omit the top and bottom elements. Thus, A(2) looks as in Figure 2, where we have omitted the orderings and named the elements according to their position in the diagram, i.e. ul for upper left and so on. In fact, we see that A(2) is isomorphic to the subalgebra

of A✶2 obtained by omitting the top and bottom elements, the isomorphism being homomorphic.
There is an obvious embedding κ : AVal(2) → A(2), given by αa '→ l, αb '→ r, αab '→ c. With the following lemma, κ is easily shown to be A-equable.
Lemma 4.15 Every Scott-continuous map f : 2 → A has a unique homomorphism extension f : (A(2), ✶) → A✶ along the canonical embedding 2 → A(2).
Proof. We exemplify the proof by showing the claim for the map f : 2 → A, given by f(a) = 2 and f(b) = 1. The canonical embedding is given by a '→ l and b '→ r. This immediately yields f(l) = 2 and f(r) = 1, and so:

f(c) = f(l ✶ r) = f(l) ✶ f(r) = 1.
Since ul ≥ l, monotonicity yields f(ul) = 2.
The final three cases all follow the same pattern, the most interesting one being
ll. Monotonicity yields f(ll) ≤ f(c) = 1. But we also get:

f(ll) = f(ll ✶ l) = f(ll) ✶ f(l) /= 0,

hence only f(ll) = 1 remains.	✷
Corollary 4.16 The embedding κ : AVal(2) → A(2) is A-equable and the free
DCPOA✶ -algebra over 2 is given by A(2).
So we have shown that the DCPOA✶ -algebra (A(X), ✶) is in general larger that the algebra of A-valuations. However, the question remains whether it characterises the free DCPOA✶ -algebra construction. We conjecture this to be the case for continuous dcpos, but have no proof for it at the moment.
Finally, we remark that we do not think that another observationally-induced theory will yield the traditional Plotkin powerdomain construction. The reason
for this is that the algebra A✶ is a very canonical case of a Plotkin powerdomain, namely the traditional Plotkin powerdomain over the Sierpinsky space S. Thus, A✶ must belong the class of complete algebras for an observationally-induced theory
giving the Plotkin powerdomain. But our example above shows that this is very unlikely to be the case.

5	Conclusions and Further Work
We have shown that the category DCPO of Scott-continuous maps between dcpos supports a free observationally-induced algebra construction for arbitrary finitary algebraic signatures Ω and computational prototypes P. The construction is given by an ordinary absolutely free Ω-algebra construction followed by a reflection functor into the category of P -complete algebras. Showing the existence of the reflection functor was made possible by using the definition of P -complete algebras using P -equable homomorphisms, given in Section 2.

Moreover, we have investigated in how far the classical powerdomains can be recovered in the observationally-induced approach.	For the Hoare, Smyth and (extended) probabilistic powerdomains we have given observationally-induced con- structions which yield the traditional constructions. For any dcpo the observationally- induced Hoare powerdomain is given by the dcpo of non-empty Scott-closed subsets, for all continuous dcpos the observationally-induced Smyth powerdomain is given by the dcpo of nonempty compact saturated subsets and the observationally-induced
(extended) probabilistic powerdomain is given by the dcpo of R+-valued valuations. Corresponding results should also hold for other versions of probabilistic powerdo-
mains.
Only the Plotkin powerdomain falls out of this pattern. We have shown that using Heckmann’s dcpo A as computational prototype does not yield the dcpo of A-valuations, even in simplest cases. Our results suggest that no observationally- induced constructions exists which gives the traditional construction. This is in
accordance with recent investigations by Klaus Keimel 2 , who also examines alge- braic properties of the Plotkin powerdomain.
The attentive reader will have realised that the prototypes we used for the power- domain constructions are always of the form FS where F is the free algebra functor for the inequational theory of the corresponding classical construction. This can be used as a general pattern: as a prototype for an observationally-induced construc- tion for a certain effect E, one can always use the algebra FE S, where F is the free algebra construction obtained by the (in)equational approach of Plotkin and Power. This also yields a method for combining observationally-induced monads: if we want to model a combination of the effects E and E′, we can calculated the combination FE⊛E′ of the free algebra functors FE and FE′ , as in the theory developed in [11,10], and then use FE⊛E′ S as computational prototype. However, in how far this proto- type for the combination yields the traditional combination of the corresponding monads, such as sum and tensor, still needs to be examined. First investigations hint at the situation being non-trivial. Such an approach of combining prototypes
also raises the questions as to whether the various combinations of powerdomain constructions [24,14,5,7,8] can be recovered this way.

Acknowledgements
The author wishes to thank Ernst-Erich Doberkat, Klaus Keimel, Alex Simpson and Thomas Streicher for helpful and encouraging discussions.

References
Samson Abramsky and Achim Jung. Domain theory. volume 3 of Handbook of Logic in Computer Science, pages 1–168. Clarendon Press, Oxford, 1994.
Ingo Battenfeld. Observationally-induced effects in cartesian closed categories. Electr. Notes Theor. Comput. Sci., 286:43–56, 2012.

2 personal communication


Ingo Battenfeld and Matthias Schr¨oder. Observationally-induced effect monads: Upper and lower powerspace constructions. Electr. Notes Theor. Comput. Sci., 276:105–119, 2011.
Ingo Battenfeld and Matthias Schr¨oder. Observationally induced upper and lower powerspace constructions. 2012. submitted for publication.
Ben S. Cohen. Mathematical foundations for denotational semantics for combining probability and nondeterminism over stably compact spaces. Master’s thesis, TU Darmstadt, 2006.
Gerhard Gierz, Karl H. Hofmann, Klaus Keimel, Jimmie Lawson, Michael Mislove, and Dana S. Scott.
Continuous Lattices and Domains. Cambridge University Press, Cambridge, 2003.
Jean Goubault-Larrecq. Prevision domains and convex powercones. In Roberto M. Amadio, editor,
FoSSaCS, volume 4962 of Lecture Notes in Computer Science, pages 318–333. Springer, 2008.
Jean Goubault-Larrecq.	De groot duality and models of choice: angels, demons and nature.
Mathematical Structures in Computer Science, 20(2):169–237, 2010.
Reinhold Heckmann. Abstract valuations: A novel representation of plotkin power domain and vietoris hyperspace. Electr. Notes Theor. Comput. Sci., 6:160–173, 1997.
Martin Hyland, Paul Blain Levy, Gordon D. Plotkin, and John Power. Combining algebraic effects with continuations. Theor. Comput. Sci., 375(1-3):20–40, 2007.
Martin Hyland, Gordon D. Plotkin, and John Power. Combining computational effects: commutativity & sum. In Ricardo A. Baeza-Yates, Ugo Montanari, and Nicola Santoro, editors, IFIP TCS, volume 223 of IFIP Conference Proceedings, pages 474–484. Kluwer, 2002.
Claire Jones. Probabilistic Non-determinism. PhD thesis, LFCS, University of Edinburgh, 1989.
Simon Peyton Jones, editor. Haskell 98 language and libraries. Cambridge University Press, Cambridge, 2003. The revised report, J. Funct. Programming 13 (2003), no. 1.
Klaus Keimel. Topological cones: Foundations for a domain theoretical semantics combining probability and nondeterminism. Electr. Notes Theor. Comput. Sci., 155:423–443, 2006.
Klaus Keimel. On the equivalence of state transformer semantics and predicate transformer semantics. Proceedings of the Workshop Informatics and Information Technologies in Education: Theory, Practice, Didactics, Novosibirsk, 1:78–104, 2012.
Klaus Keimel and Jimmie D. Lawson. D-completions and the d-topology. Ann. Pure Appl. Logic, 159(3):292–306, 2009.
Eugenio Moggi. Computational lambda-calculus and monads. In Proceedings, Fourth Annual Symposium on Logic in Computer Science, 5-8 June, 1989, Asilomar Conference Center, Pacific Grove, California, USA, pages 14–23. IEEE Computer Society, 1989.
Gordon D. Plotkin and John Power. Notions of computation determine monads. In Mogens Nielsen and Uffe Engberg, editors, FoSSaCS, volume 2303 of Lecture Notes in Computer Science, pages 342–356. Springer, 2002. Erratum available at: http://homepages.inf.ed.ac.uk/gdp/publications/.
Gordon D. Plotkin and John Power. Computational effects and operations: An overview. Electr. Notes Theor. Comput. Sci., 73:149–163, 2004.
Matthias Schr¨oder and Alex Simpson. Probabilistic observations and valuations: (extended abstract).
Electr. Notes Theor. Comput. Sci., 155:605–615, 2006.
Alex Simpson. Probabilistic observations and valuations. Talk given at: MFPS XXI, University of Birmingham, 2005. Slides: http://homepages.inf.ed.ac.uk/als/.
Michael B. Smyth. Topology. volume 1 of Handbook of Logic in Computer Science, pages 641–761. Clarendon Press, Oxford, 1992.
Regina Tix. Stetige Bewertungen auf topologischen R¨aumen (continuous valuations on topological spaces). Master’s thesis, TU Darmstadt, 1995.
Regina Tix, Klaus Keimel, and Gordon D. Plotkin. Semantic domains for combining probability and non-determinism. Electr. Notes Theor. Comput. Sci., 129:1–104, 2005.
Oswald Wyler. Dedekind complete posets and scott topologies. In Continuous Lattices, Proceedings of the Conference on Topological and Categorical Aspects of Continuous Lattices, Bremen 1979, volume 871 of Lecture Notes in Mathematics, pages 384–389. Springer, 1981.
