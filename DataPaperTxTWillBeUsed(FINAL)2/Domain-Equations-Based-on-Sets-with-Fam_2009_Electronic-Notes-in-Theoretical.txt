

Electronic Notes in Theoretical Computer Science 257 (2009) 99–115
www.elsevier.com/locate/entcs

Domain Equations Based on Sets with Families of Pre-orders 1
Li-Gang Wu 2
Institute of Mathematics and Interdisciplinary Science School of Mathematics Science
Capital Normal University Beijing, 100048, P.R.China.

Lei Fan3
Department of Educational Technology Capital Normal University Beijing, 100048, P.R.China.


Abstract
In this paper we are interested in finding solutions of domain equations based on posets with families of pre-orders. Let (P, ±) be a poset and let (ω, ≤) be the natural number set. If R = (±n)n∈ω is a family of pre-order relations on P , where ±0= P × P , such that (i)∀n, m ∈ ω, m ≤ n implies
±n⊆±m, and (ii)∩n∈ω ±n=±, then we call (P, ±) a poset with pre-order family R. We write it R-poset or rpos for short and denote it briefly by (P, ±; R) [13, L.Fan]. R-posets are a particular case of quasi-metric spaces (qms) [6] and generalized ultrametric spaces (gums) [3]. R-poset is a ‘nonsymmetric’ version of sfe [1, L.Monteiro]. We propose a fixed points theorem that can be used for solving domain equations. The paper ends in a final coalgebra theorem.
Keywords: R-posets, fixed points, domain equations, final coalgebra



1 The support of the Grant Agency of the Capital Normal University under the Grant No. 09530380004 is gratefully acknowledged.
2 Email: rposet@gmail.com
3 Email: fanlei.cnu@gmail.com





1571-0661 © 2009 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2009.11.029

Introduction and Preliminary
Solving domain equations is a fundamentally important theme in domain the- ory. As a fundamental mathematical problem in semantics, finding solutions of some operators’s fixed points is the essence of finding solutions of a domain equation. The traditional mathematical frameworks for study of such solu- tions [7,8] are those of complete partial orders with continuous (monotone) functions (e.g.Scott fixed points theorem and Tarski fixed points theorem), and of complete metric spaces with nonexpanding and contracting functions (e.g.Banach fixed points theorem). In this paper, we will restrict our attention to the posets with a decreasing sequence of pre-order relations whose intersec- tions in the cases of intersect is the given order relations on them. We pro- pose a fixed point theorem based on R-complete rpos’s(crpos, Definition 1.2) with R-continuous and R-approximating functions (Definition 1.5). Roughly speaking, R-continuous and R-approximating functions on crpos’s correspond to both continuous (monotone) functions on complete partial orders and (lo- cally) R-approximating and R-continuous endofunctors on crpos-categories. In [15], we obtain a kind of R-complete categories of R-posets. Hence, a category-version of fixed point theorem based on crpos may be used to find the solutions of domain equations of an R-approximating and R-continuous endofunctor on crpos-categories.
The structure we are interested in is that of a set where a pre-order relation
±n is defined for every n ∈ ω. We interpret x ±n y as indicating the extent
1 (the smaller the better) to which the transitions of x can be simulated by
Thus, it is not surprising that we assume that any two elements are in
relation ±0 and that ±n⊆±m for m ≤ n in ω. A typical application of this notion is to objects that can be structured or evaluated in stepwise manner, where it makes sense to state that an object can be simulated by another object up to level n. Another situation is when we have a battery of ‘ordered observations’ [11] and an object can be simulated by another object in first n steps. Examples of both situations are given in the sequel.
The motivation for studying sfe’s is that they embody the type of metric reasoning used in semantics, and that they are a kind of simpler mathematical setting. R-poset is an order-version of sfe. The generalization from sfe to R- poset is motivated by the desire to have a better world of reconciling metric spaces with domains. R-posets are a particular case of quasi-metric spaces (qms) [6] and generalized ultrametric spaces (gums) [3]. We define a distance d(x, y)= 2−n when x can be simulated by y up to the greatest (level) n (if x can be simulated by y up to every level n then d(x, y) = 0). The paper generalizes part of the theory developed for both sfe’s and metric spaces, ending with a final coalgebra theorem.  The theory is based on a simple idea, that is,

replacing the arbitrary ϵ ≥ 0 with a particular sequence such as (1/n)n∈ω. The advantage of restriction to the R-poset is that it simplifies definitions and allows a larger set of constructions. But when we trade the pre-order relation for the more general notion of metric we loose some advantages that come with the particular structure we started with.
In the sequel we partly develop a domain theory of these sets with families of pre-order relations, by mimicking part of theory developed for the posets and the metric spaces. The main references are [1,2,3,5,6,8]. Many results in [1] are special cases of our results. Most main results in this paper are adaptations of results in those sources, but it is worth pointing out that the methods of their proofs are an “organic combination” of proofs of results in those sources. The notion of set with a family of pre-orders was borrowed from both [1] and [3], and the development of the theory in the present paper is similar to [1] and [3].
Let (D, ±) be be a poset, let x, y ∈ D be two elements, then x ± y can be interpreted as that not only are they different but that y is a better ap- proximation of y. In other words, x ± y means intuitively that y is consistent with x and is (possibly) more accurate than x. For short, x “approximates” y. Many efforts (e.g.[6, qms by M.B. Smyth], and [3, gums by J.J.M.M.Rutten]) have been made to reconcile the theory of metric spaces with domain theory. The question remains as to how quantities can be introduced to domain the- ory in a simple and elegant way. This paper was intended as an attempt to do this. The R-poset structure, with denumerable pre-orders on a set, was proposed by the second author of this paper in [13].
Example 1.1	(i) Let S be a set and let (Un)n∈ω be a family of sets Un of subsets of S where U0 = {S} . De fine s ±n t by requiring that s ∈ U
imply t ∈ U for every U ∈ U0	···	Un. This gives an rpos.
Consider a transition system ⟨S, A, →⟩.	For a ∈ A and U ⊆ S, let
p U = {s|(∃t ∈ U )s −→a  t} be the set of a-predecessors of U . Extend this
to traces by pεU = U and pav = papvU . Then s ∈ pvS if an d only if s has
trace v. Let Un = {pvS|v has length n}, so that U0	···	Un = {pvS|v
has length ≤ n}. We define s ±n t if and only if, for every trace v of
length ≤ n, s ∈ pvS implies t ∈ pvS, that is to say, if s has traces of length ≤ n then t has the same traces of length ≤ n. Explicitly, s ±n t means that at least any first n consecutive transition steps that can be taken starting in state s can all be simulated by steps from t.
Now we want to evaluate e (Euler number). Not very exactly, we know that e is greater than 2 and less than 3. If there are no further accuracy demands, any value between 2 and 3 can be viewed as e. If we are required to improve the accuracy of evaluation of e then one may obtain a more

accurate value of e between 2.7 and 2.8. This process can be formalized as follows. The real interval [2, 3] is made into an rpos by stipulating that x ±n y if and only if the decimal expansions of x and y agree on the first n digits after the decimal point (all expansions are assumed to be infinite by adding 0 to the right if necessary, and 3 is represented by 2.999...). Then we have a sequence 2 ±0 2.7 ±1 2.71 ±2 ··· ±n−1 xn ±n ··· , where there exists some m such that first n digits of


1
1+  +
1!
1	1
 + ··· +	,
2!	m!

after radix point give xn for every n.
The above examples show that how computations evolve in transition sys- tems. Formally we have the following definitions.
Definition 1.2 [R-chain, R-complete] Let (A, ±; (±n)n∈ω) be an rpos and let (xn)n∈ω be a sequence in A. (xn)n∈ω is called an R-chain if xn ±n xn+1 for every n ∈ ω. If x ∈ A satisfies (i)∀n ∈ ω, xn ±n x, (ii) we have x ± y for every y ∈ A satisfying (i), then x is called the least R-upper bound or R-limit
of (xn)n∈ω. We denote it by x = .R	xn. In this case the sequence is said to
be convergent (to x). A is an R-complete R-poset (crpos for short) if every
R-chain in A is convergent.
Remark 1.3 The following assumption will be needed throughout the paper.
It is required that R-limits preserve every order in R, i.e., .R	xn ±m .R	yn
holds if xn ±m yn for some m ∈ ω and all n ≥ n0 where n0 ∈ ω. In particular, if x ±n y then obviously, we have x ±m x ±m+1 x ±m+2 ··· and y ±m
.y ±m+1 y ±m+2 ··· . .It is not surprising that the assumption only means that

R
n∈ω
x = x ±n y =
R
n∈ω
y holds. Let us mention an important consequence

[14] of the assumption.
Lemma 1.4 If (xmn)m,n∈ω is an R-chain in a crpos for both m and n, then

R
m∈ω
R
n∈ω
xmn)= .R
R
m∈ω
xmn)= .R
xnn.

Proof. Because (xmn)m,n∈ω is an R-chain for both m and n, so xmn ±m xm+1 n

for m, n ∈ ω.	It implies that .R
xmn ±m .R
xm+1 n by assump-

n∈ω	.R
n∈ω

tion in the remark above. Consequently, (
n∈ω xmn)m∈ω is an R-chain and

.R	(.R
xmn) is well-defined. Let .R
(.R
xmn)= x and .R
xnn = y.

m∈ω	n∈ω
m∈ω
n∈ω
.R	n∈ω

By the definition of R-chains and R-limits, xmm  ±m
n∈ω xmn ±m x

for all m ∈ ω, hence y ± x.	On the.other hand, xmn ±m y, because
∀n ≥ m, xmn ±m xnn ±n y. Therefore	R	xmn ±m y. Notice that m is

.R	.R
n∈ω

arbitrary, x =
m∈ω (
n∈ω xmn) ± y. It follows that x = y.	 

Functions between sets with pre-order families are the fundamental mech- anism relating one R-poset to another [13].
Definition 1.5 [R-monotone, R-approximating, R-continuous] Let f : S → T be a mapping between rpos’s S and T . f is R-monotone if f is mono- tone with respect to (w.r.t for short) every ±n in R. f is R-approximating
if x ±n y implies f (x) ±n+1 f (y) for all .x, y ∈ S and.every n ∈ ω. f is

R-continuous if f is R-monotone and f (
R-chain (xn)n∈ω in S.
R
n∈ω
xn) =
R
n∈ω
f (xn) for every

Lemma 1.6 If f : S → T and g : T → U are R-monotone functions such that one of them is R-approximating, then the composition g ◦ f is R- approximating.
Proof. Suppose f is R-approximating. If s ±n t in S then f (s) ±n+1 f (t) in T , hence g(f (s)) ±n+1 g(f (t)) in U . If g is R-approximating the proof is similar.	 
Proposition 1.7 A function f : S → T between crpos’s is R-continuous if and only if it maps convergent sequences in S to convergent sequences in T, preserving the R-limits.
Proof. If f is R-continuous and the R-chain (sn)n∈ω in S converges to s, it is immediate that (f (sn))n converges to f (s) since

R
n∈ω
f (sn)= f (.R
sn)= f (s).

Conversely, it remains to prove that f is R-monotone. Suppose s ±n t and consider the R-chain (sk)m∈ω in S where sk = s for k ≤ n and sk = t for k > n. This sequence converges to t, hence (f (sk))k converges to f (t). In particular, f (s)= f (sn) ±n f (t). Therefore f is R-monotone.	 
We see at once that the identity functions are R-continuous (R-monotone) and the composition of R-continuous (R-monotone) functions is an R- continuous (R-monotone) function. The category CRPOS has R-complete R-posets as objects and R-continuous functions as morphisms. The category CRPOSR has R-complete R-posets that R-limits preserve pre-orders in R as objects and R-continuous functions as morphisms.

Some Basic Constructions on R-posets
Definition 2.1 [Loosening] The loosening of (S, ±; (±n)n∈ω), denoted by (S, ±o; Ro) (S◦ for short), is the rpos with the same underlying set and orders
±o defined by ±o=±0 and ±o	=±n for all n ≥ 0. Evidently, ±o=±.
n	0	n+1

The sequence of orders of S and So are illustrated in the following table:
S :	±0	±1	±2	±3 ··· 
So :	±0	±0	±1	±2 ··· .

Proposition 2.2 Let S be an rpos. Then So is an rpos, R-complete if S
is R-complete. The identity function on S is R-approximating as a function
S → So. An R-monotone (R-approximating, R-continuous) function f : S →
T is also R-monotone (R-approximating, R-continuous) as a function from
So → To.
Proof. Suppose S is R-complete and (sn)n∈ω is an R-c.hain in So, then s0 ±0

s1 ±0 s2 ±1 s3 ±2 ··· . As S is R-complete we have
R
n∈ω
sn = s for some

s ∈ S. By the definition of loosening, sn ±o s if sn ±n−1 s. If t ∈ S such that
sn ±o t for all n > 0, then sn ±n−1 t. .By the definition of R-limits, s ± t.
o
Again by the definition of R-limits, s =	n∈ω sn. If f is R-approximating and

s ±o t then f (s) ±o f (t) since ±o=±0 and ±o⊆±o. If s ±o
t then s ±n t.

0	1	1	2	1	n+1

Hence f (s) ±n+1 f (t). Thus f (s) ±o
f (t). If f is R-continuous then

Ro
n∈ω
sn)= f (.R	sn
R
n∈ω
f (sn
Ro
n∈ω
f (sn).

The more details are left to the reader.	 
Definition 2.3 [Function spaces] Let S and T be rpos’s, let [S → T ] be the set of all R-continuous functions from S to T , where f ±n g if and only if f (s) ±n g(s) for all s ∈ S. The subset of [S → T ] of all R-approximating and R-continuous functions, with induced orders, is written as [S ⇒ T ].
Definition 2.4 [Powerdomains] Let S be an rpos, let X and Y be subsets of S. Put X ±0 Y and, for n > 0,X ±n Y if every x ∈ X has some y ∈ Y such that x ±n y. We denote by P(S) the set of all subsets of S, by Pne the set of all nonempty subsets of S. Note that if X ⊆ Y , then one sees immediately that X ±n Y for every n.
Proposition 2.5 If S is an rpos then P(S) and Pne(S) are rpos’s. If f : S → T is R-monotone, then the function P(f ) : P(S) → P(T ) deﬁned by P(f )(X) = {f (s)|s ∈ X} and its restriction Pne(f ) : Pne(S) → Pne(T ) are R-monotone. If furthermore f is R-approximating then Pne(f ) is also R- approximating.
Proof. It is easily seen that P(S) and Pne(S) are rpos’s. To prove P(f ) is R-monotone, suppose that X ±n Y in P(S). If Y is empty then X is empty. In particular they are equal, so the conclusion is immediate. If neither is empty, to prove that P(f )(X) ±n P(f )(Y ) pick some element in P(f )(X), which has necessarily the form f (x) for some y ∈ Y such that x ±n y. But

f is R-monotone, so f (x) ±n f (y). The proof of P(f )(X) ±n+1 P(f )(Y ) is similar.	 

Next we give some results [14] that will be applied in the proofs of the following propositions and theorems. The following basic fact provide a nat- ural and intrinsic way to define the R-limit of an R-chain of R-monotone (R-continuous) functions.

Lemma 2.6 Let S and T be crpos’s. If (fn)n∈ω is an R-chain of R-monotone mappings from S to T then for some R-monotone mapping f : S → T,

R
n∈ω
fn = f if and only if .R
fn(s) = f (s) for every s ∈ S. Moreover, if

(fn)n∈ω are R-continuous then f is also R-continuous.


Proof. If (fn)n∈ω is an R-chain and .R
fn = f then (fn(s))n∈ω is an R-
.R

chain and fn(s) ±n f (s) for every s ∈ S and n ∈ ω. Let	n∈ω fn(s) = g(s).
If x ±m y then g(x)= .R	fn(x) ±m .R	fn(y)= g(y). It follows that g is
R-monotone. Obviously, g.± f . But f ± g since fn ±n g for every n ∈ ω.

Hence f = g. Conversely,
R
n∈ω
fn(s)= f (s) implies that fn(s) ±n f (s) holds

for all s ∈ S and n ∈ ω. For every s ∈ S and n ∈ ω, if g ∈ [S → T ] and
fn(s) ±n g(s) then f (s) ± g(s). Thus f ± g. Consequently, .R	fn = f .
If (fn)n∈ω are R-continuous then we only need to show that

R
m∈ω
xm)= .R
f (xm)

whenever (xm)m∈ω is an R-chain in S. Indeed


and
R
m∈ω
xm)= .R
fn(.R
xm)= .R
R
m∈ω
fn(xm)

R
m∈ω
We are reduced to proving
f (xm)= .R
R
n∈ω
fn(xm).

R
n∈ω
R
m∈ω
fn(xm)= .R
R
n∈ω
fn(xm).

For k ∈ ω, fn(xk) ±k .R
fn(xm) for all n ∈ ω. Therefore

R
n∈ω
Notice that k is arbitrary,
fn(xk) ±k .R
R
m∈ω
fn(xm).


Similarly,
R
k∈ω

.R
R
n∈ω

.R
fn(xk) ± .R

fn(xm) ± .R
R
m∈ω

.R
fn(xm).

fn(xk).

n∈ω
m∈ω
k∈ω
n∈ω

We also have a direct proof as follows by Lemma 1.4



R
n∈ω
R
m∈ω
fn(xm)

R
n∈ω
fn(xn)

R
m∈ω
R
n∈ω
fn(xm)

because (fn(xm))m,n∈ω is an R-chain for both m and n in crpos T .	 
Proposition 2.7 If S and T are crpos’s then so is [S → T ] where [S → T ]
is the set of R-continuous functions from S to T.
Proof. Immediate from Lemma 1.4 and Lemma 2.6.	 
Theorem 2.8 ([14]) CRPOSR is a cartesian closed full subcategory of
CRPOS.

Lemma 2.9 If .R
fn = f in [S → T ] and .R
gn = g in [T → U ] then

n∈ω
n∈ω

n∈ω gn ◦ fn = g ◦ f in [S → U ].
Proof. From Lemma 2.6, it suffices to show that .R

gn ◦ fn(s) = g ◦ f (s)

for every s ∈ S. Indeed
g ◦ f (s)=	g(.R

fn(s))

R
m∈ω
gm(.R
fn(s))

R
m∈ω
R
n∈ω
(gm ◦ fn(s))

R
n∈ω
gn ◦ fn(s) (Lemma 1.4).


We return to the topic of finding solutions of domain equations based on R-posets. Let’s see some natural constructions of R-continuous (R- approximating) functions.
Proposition 2.10 Let S, S',T and T ' be crpos’s.
The function f '→ fo from [S → S'] to [So → S'o] is R-approximating and R-continuous.
The function (f, g) '→ f ×g from [S → S']×[T → T '] to [S×T → S' ×T']
is R-continuous.
The function (f, g) '→ f +g from [S → S']×[T → T '] to [S +T → S' +T']
is R-continuous.
The function (f, g) '→ [f → g] from [S' → S] × [T → T '] to [[S → T ] →

[S' → T ']] is R-continuous, where [f → g]h = g ◦ h ◦ f.
' g◦h◦f  '
,,
f	g
J	 
S	h	T
The function f '→ P(f ) from [S → S'] to [P(S) → P(S')] is R- monotone, as is the corresponding function for the functor Pne.
Proof.
It is evident that f '→ fo is R-approximating.	That f '→ fo is R-
continuous follows from (.R	fn)o = .R	fo.

If f and g are R-continuous then
f × g(.R
=	(f × g)(.R

(sn, tn)) sn, .R



tn)

R
n∈ω
n∈ω
(f (sn), g(tn))
n∈ω

R
n∈ω
(f × g)(sn, tn).

Hence f ×g is R-continuous. Because .R
(fn, gn)= (.R
fn, .R
gn)

for every R-chain (fn, gn)n∈ω and

R
n∈ω
=	(.R
fn × .R
fn(s), .R
gn)(s, t)
gn(t))

n∈ω	n∈ω

R
n∈ω
R
n∈ω
(fn(s), gn(t))
(fn × gn)(s, t),

(f, g) '→ f × g is R-continuous.
For an arbitrary R-chain (1, xn)n∈ω, we have

(f + g)(.R
(1, xn))

=	(f + g)(1, .R
xn)

=	(1, .R
f (xn))

R
n∈ω
(f + g)(1, xn)

In the same manner we can see that (f + g)(.R
(2, yn)) = .R
(f +

g)(2, yn) for an arbitrary R-chain (2, yn). .It is easy t.o check tha.t (f, g) '→

f + g is R-monotone. The verification of
R
n∈ω
fn +
R
n∈ω
gn =
R
n∈ω
(fn +

gn) is similar to (ii).
g◦h◦f : S' → T ' is R-continuous because the composite of R-continuous functions is an R-continuous function. From

[f → g](.R
hn)

=	g ◦ (.R
hn) ◦ f

R
n∈ω
R
n∈ω
g ◦ hn ◦ f
[f → g]hn,

we deduce that [f → g] is R-continuous. If f ±n f' and g ±n g' then [f → g](h)= g ◦ h ◦ f ±n g' ◦ h ◦ f' = [f ' → g'](h).
Notice that h is arbitrary, [f → g] ±n [f' → g']. From

R
n∈ω
fn → .R	gn]h

R
n∈ω
gn) ◦ h ◦ (.R
fn)

R
n∈ω
R
n∈ω
gn ◦ h ◦ fn
[fn → gn](h),

it follows that (f, g) '→ [f → g] is R-continuous.
We only consider the case of Pne. Suppose f ±n f' and X ∈ Pne(S). An element in Pne(f )(X) has the form f (s) for some s ∈ X. The element f'(s) is in Pne(f')(X) and f (s) ±n f'(s). This shows that Pne(f )(X) ±n Pne(f')(X). As this is true for every X we conclude that Pne(f ) ±n Pne(f').

A Fixed Point Theorem
Domain theory’s development strongly depends on fixed point theorems. Up till now, many kinds of fixed point theorem have been proposed and applied to different fields. The Scott fixed point theorem is one of the order versions of fixed point theorems. A typical case of the metric versions of fixed point the- orems is the Banach fixed point theorem (also known as the contraction map- ping theorem or contraction mapping principle). Combining order with metric we propose an rpos version based on R-continuous and R-approximating self mapping on R-complete R-posets.
Theorem 3.1 (A Fixed Point Theorem Based on crpos) An
R- approximating and R -continuous function f  :  S  →  S  on

a non-empty crpos S has a unique f ixed point.
Proof. Choose x0 ∈ S since S is not empty. Of course, x0 ±0 f (x0), hence
f (x0) ±1 f 2(x0).	Thus fn(x0) ±n fn+1(x0) for all n.	It f.ollows that

(fn(x0))n∈ω is an R-chain in S. Notice that S is R-complete, exists. From
R
n∈ω
fn(x0)

R
n∈ω
fn(x0)) = .R
fn+1(x0)= .R
fn(x0),

f has a fixed point .R
fn(x0). Suppose y is another fixed point of f , i.e.,

y = f (y). It is ea.sily seen that x0 ±0 y, hence f (x0) ±1 f (y) = y. Thus

fn(x0) ±n y and
R
n∈ω
fn(x0) ± y. On the other hand, from y ±0 x0 and

.y = f (y) ±1 f (x0) we conclude .that y ±n fn(x0) for all n. Therefore y ±

R
n∈ω
fn(x0). Consequently, y =
R
n∈ω
fn(x0), which proves the theorem.	 

In order to have a category-version of this fixed point theorem, we need the following preparations.
Definition 3.2 [ω-chains, cocones, colimits] Let C be a category. An
ω-chain in C is a sequence Σ = (Sn, αn)n∈ω of objects and morphisms

S −α→0
S −α→1
· · · −α→n
Sn+1 ··· .

A cocone σ :Σ → S over Σ is an object S together with a sequence σ = (σn)n∈ω of morphisms σn : Sn → S such that, σn = σn+1 ◦ αn for every n ∈ ω, i.e., the diagram

S	α0    α1  αn−1  
αn S 
··· 

0 ¸¸¸¸ 1 ¸¸¸
n	n+1

¸¸¸¸¸¸ ¸¸¸
σ0¸¸¸σ1¸¸¸	σn	σ n+1

¸¸¸¸¸¸¸¸¸
J 


commutes.
¸¸¸zzS_˛ ,s

A colimit of Σ (written S = ColimΣ) is a cocone σ : Σ → S such that for every other cocone τ : Σ → T , there is a unique morphism ι : S → T satisfying τn = ι ◦ σn for every n ∈ ω, i.e., the diagram

S ¸ α0    α1 	αn−1	 
αn	 S 
··· 

0 ¸¸¸¸¸¸¸1
¸¸¸¸¸
n ¸¸
, n+1

¸¸¸¸¸ ¸¸¸
τn¸¸¸,σn+1 τ

σ0¸¸¸σ¸1¸¸¸¸¸	σn	,, ¸¸¸
n+1

¸¸¸¸¸¸¸¸z˛
,,,,
¸¸¸¸zJ˛ 

z  J  s
S = ColimΣ
commutes. If ι : S → T exists but not necessarily unique, then S is a weak colimit of Σ.
The following theorem is well known and plays an important role in the sequel. But it is not difficult to prove this theorem. The details are left to the reader.

Theorem 3.3 Let C be a category and let F : C → C be a functor. Let α0 : S0 → F S0 be a morphism in C. Let the ω-chain Σ= (Sn, αn)n be deﬁned by Sn+1 = FSn and αn+1 = F αn for all n ≥ 0. If this ω-chain has a colimit σ : Σ → S and if F Σ = (F Σ,Fαn)n has a colimit Fσ : F Σ → FS with Fσ = (F σn)n then FS ∼= S.
Definition 3.4 [crpos-categories] A category C is crpos-enriched, or a crpos- category, if every hom-set C(S, T ) isa crpos and composition of morphisms is R-continuous.
Example 3.5 The  category  CRPOSR  is  crpos-enriched,  where  each
CRPOSR(S, T ) is the function space [S → T ].  The composite of R-
continuous functions is R-continuous because .R	gn◦.R	fn = .R	gn◦fn.
If C and C' are crpos-categories, the product category C × C' is also a crpos- category.
The following propositions and definitions from Definition 3.6 to Theorem
3.13 are from [15]. For more details we refer the reader to [15].
Definition 3.6 [Embedding-projection pairs]An embedding-projection pair α : D → E between crpos’s D and E is a pair of R-continuous maps αe : D → E and αp : E → D satisfying αp ◦ αe = 1D. We denote it briefly by α = ⟨αe, αp⟩. If β : E → U is another e-p pair, the composition β ◦ α is the e-p pair ⟨βe ◦ αe, αp ◦ βp⟩. We write CRPOSep to express the category with the same objects as CRPOSR and e-p pairs as morphisms.
Remark 3.7 For αe  : D  → E, we have αe(s) ±n  αe(t) implies s =
αp(αe(s)) ±n αp(αe(t)) = t. Hence αe is an embedding w.r.t ±n and ±.
Definition 3.8 [Pre-orders on CRPOSep] Let D and E be rpos’s. We write D ±n E if and only if there exists an embedding-projection pair αn : D → E such that αe ◦ αp ±n 1E.
n	n
Lemma 3.9 (±n)n∈ω is a pre-order family on the class of R-posets.
Lemma 3.10 Let Σ= (Sn, αn)n be an ω-chain in CRPOSep. Let σ :Σ → S and τ :Σ → T be cocones. Then Σ is an R-chain if and only if the sequence (τe ◦ σp)n is an R-chain in [S → T ].
n	n
Theorem 3.11 Let Σ= (Sn, αn)n∈ω be an R-chain in CRPOSep. A cocone
R
σ :Σ → S is an R-limit of Σ if and only if .R	σe ◦ σp = 1S.
n∈ω  n	n
Remark 3.12 Lemma 3.10 and Theorem 3.11 can be easily generalized to crpos-categories with decomposable projections. To avoid repetitions the de- tailed proof is omitted. A projection in a category C is a morphism p : S → S

such that p◦p = p. We say C has decomposable projections if every projection
p : S → S has an e-p pair μ : T → S such that p = μe ◦ μp.
Theorem 3.13 CRPOSep is R-complete, i.e., every R-chain in CRPOSep
R	R
is convergent.
Notation 3.1 The category with the same objects as C and e-p pairs as mor- phisms is denoted by Cep. A functor F from C to D gives a functor Fep from Cep to Dep by putting FepS = FS for any object S and Fepμ = ⟨Fμe,Fμp⟩ for any e-p pair μ : S → T. We simply write F instead of Fep when no confusion can arise. Unless otherwise stated the following functors between Cep and Dep are as given above.
Definition 3.14 [R-monotone (R-approximating, R-continuous) functors] Let C and D be crpos-categories.  A functor F from Cep to Dep is R-monotone if for every e-p pair μ  : S  →  T in Cep and every n  ≥ 0, if μe ◦ μp  ±n  1T  then (F μ)e ◦ (F μ)p  ±n  1FT . If, in the same conditions, (F μ)e ◦ (F μ)p  ±n+1  1FT , the func- tor F  is said to be R-approximating.   If F  is R-monotone and
F (.R	σe ◦ σp) = .R (Fσe ◦ Fσp), then F is said to be an R-continuous

n∈ω  n	n
functor.
n∈ω	n	n

Proposition 3.15 Let C and D be crpos-categories. If F is an R-continuous functor from Cep to Dep and if Σ = (Sn, αn)n∈ω is an R-chain in Cep with colimit σ : Σ → S then F Σ = (FSn,Fαn)n∈ω is an R-chain in Dep with colimit Fσ : F Σ → FS with Fσ = (F σn)n∈ω.
Proof. As F is R-monotone and Σ is an R-chain, from αe ◦ αp ±n 1S	we
n	n	n+1

conclude that (F αn)e ◦ (F αn)p ±n 1FS 
, so F Σ is an R-chain. Since F is a

functor, Fσ is a cocone of F Σ. By hypothesis , σ :Σ → S is an R-limit of Σ,
so by Theorem 3.11, .R	σe ◦ σp = 1S. As F is R-continuous,
n∈ω  n	n
F (.R	σe ◦ σp)= .R  (Fσe ) ◦ (Fσp)= 1FS,
n∈ω  n	n	n∈ω	n	n
hence Fσ is an R-limit of F Σ by Theorem 3.13.	 
Here a category-version of the fixed point theorem (Theorem 3.1) will be proposed to find the solutions of domain equations of an R-approximating and R-continuous endofunctor on crpos-categories.
Theorem 3.16 Let C be a crpos-category with decomposable projections and let F be an R-approximating and R-continuous endofunctor on Cep. Suppose there is an e-p pair α0 : S0 → F S0. If Cep is R-complete then there is an S with S ∼= FS.
Proof. We define inductively Sn+1 = FSn and αn+1 = F αn.  This gives

an ω-chain Σ = (Sn, αn)n.	Let’s assume inductively that αe ◦ αp  ±n
1Sn+1 , which is certainly true for n = 0.	Since F  is R-approximating,

e n+1
= (F αn)e and αp
= (F αn)p, it follows that αe
p
n+1
±n+1

1Sn+2 .  So Σ is an R-chain.  Let σ  : Σ →  S be a colimit of Σ,
which exists because Cep is R-complete. As F is R-continuous and R- approximating, hence F Σ = (F Sn,Fαn)n is an R-chain with R-limit Fσ : F Σ → FS by Proposition 3.15. By Theorem 3.1, S ∼= FS.	 
Definition 3.17 [Locally R-monotone, R-approximating, R- continuous] A functor F between crpos-categories C and D is locally R-monotone (locally R-approximating) if the function α '→ Fα from C(S, T ) to D(FS, FT ) is R-monotone (R-approximating) for all objects S and T
in C. If F is locally R-monotone and F (.R	αn) = .R	F (αn) for every
R-chain (αn)n∈ω then F is said to be locally R-continuous.
Proposition 3.18 Let C and D be crpos-categories. If F : Cep → Dep is locally R-monotone (locally R-approximating, locally R-continuous) then F is R-monotone (R-approximating, R-continuous).
Proof. If μ : S → T is an e-p pair with μe ◦ μp ±n 1T then (F μ)e ◦ (F μ)p =
F (μe ◦ μp) ±n 1FT . Because F is locally R-continuous,
F (.R	σe ◦ σp)= .R (Fσe ◦ Fσp).
n∈ω  n	n	n∈ω	n	n
Therefore F is R-continuous. The similar conclusion can be drawn for the
R-approximating case.	 

By Proposition 2.10, the loosening functor is locally R-approximating and R-continuous, and the product and sum functors are locally R-continuous. Several other useful functors includes the identity functor and the constant functors.

A Final Coalgebra Theorem in CRPOSR
In this part it is shown that every locally R-approximating and locally R- continuous functor on CRPOSR has a final F -coalgebra.
Definition 4.1 [Coalgebra] Let C be a category and F : C → C a functor. An F -coalgebra is a pair (S, α) where S is an object and α : S → FS is a morphism. An F -coalgebra morphism from (S, α) to (T, β) is a morphism σ : S → T in C such that β ◦ σ = (Fσ) ◦ α, i.e., the following diagram

commutes


S 	σ	 T 

α	β
J	 J 
FS  Fσ  FT 
An F -coalgebra is final if there is a unique morphism to it from any F - coalgebra.
Theorem 4.2 Let F : C → C be a locally R-approximating and locally R- continuous functor on a crpos-category C. If β : T ∼= FT is an isomorphism then (T, β) is a ﬁnal F-coalgebra.
Proof. Let (S, α) be an F -coalgebra. Define Ψ : C(S, T ) → C(S, T ) by Ψ(γ)= β−1 ◦ (Fγ) ◦ α for all γ.

S	Ψ(γ)  T 
α	β−1
J	 
FS  Fγ  FT 


As F is locally R-continuous, we have
R
n∈ω

γn)

=	β−1 ◦ F (.R
γn) ◦ α

R
n∈ω
R
n∈ω
β−1 ◦ F (γn) ◦ α
Ψ(γn).

Hence Ψ is R-continuous. The function Ψ is R-approximating because F is locally R-approximating. By Theorem 3.1, Ψ has a unique fixed point σ. σ is a morphism because β ◦ σ = β ◦ Ψ(σ)= (F σ) ◦ α. It is immediate that any morphism is a fixed point of Ψ. Therefore σ is the only morphism from (S, α) to (T, β).	 
Theorem 4.3 (A Final Coalgebra Theorem) Every locally R- approximating and locally R-continuous functor F : CRPOSR → CRPOSR has a ﬁnal F-coalgebra.
Proof. Because F is a locally R-approximating and locally R-continuous functor, so F is R-approximating and R-continuous. Let α : S0 → F S0 be a morphism in CRPOSep (e.g. take S0 to be a singleton and αe arbitrary). By Theorem 3.16, Fep has a fixed point. That fixed point is also a fixed point of F , and so by the previous theorem 4.2 it is a final F -coalgebra.	 

Corollary 4.4 Every locally R-approximating and locally R-continuous func- tor F : CRPOSR → CRPOSR has a unique ﬁxed point up to isomorphism.
Proof. This is because final coalgebras are unique up to isomorphism.	 

Acknowledgement
The referees are thanked for their very valuable comments. The authors wishes to thank the Institute of Mathematics and Interdisciplinary Science, School of Mathematics Science, Capital Normal University, where the paper was writ- ten, for financial support. The authors also wishes to thank Professor Wan- Liang Wang and Professor Shang-Zhi Wang for their support.

References
L.Monteiro. Semantic domains based on sets with families of equivalences. Electronic Notes in Theoretical Computer Science, 11, pp1-34. 1998.
D.Turi and J.J.M.M.Rutten. On the foundations of final coalgebra semantics: non-well-founded sets, partial orders, metric spaces. Mathematical Structures in Computer Science,8(5): 481-540. Augest 1998.
J.J.M.M.Rutten. Elements of Generalized Ultrametric Domain Theory. Technical Report CS- R9507, CWI, Amsterdam, 1995.
M. W . Mislove: Topology, domain theory and theoretical computer science. Topology and its Applications, Vol. 89, pp3-59. 1998.
M.B.Smyth and G.D.Plotkin. The category-theoretic solution of recursive domain equations(extended abstract). Proceedings of 18th Annual Symposium on Foundations of Computer Science, pp13-17. OCT. 31-NOV. 2, 1977.
M.B.Smyth. Quasi uniformities: reconciling domains with metric spaces. Proceedings of the 3rd Workshop on Mathematical Foundations of Programming Language Semantics, APR.8-10,1987. Lecture Notes In Computer Science, Vol. 298, pp236-253. Springer-Verlag, Berlin, 1988.
V.Stoltenberg-Hansen, I.Lindstr¨om and E.R.Griffor. Mathematical Theory of Domains. Cambridge University Press, 1994.
S.Abramsky and A.Jung. Domain theory, In S.Abramsky, D.Gabay and T.S.E.Maibaum, editors. Handbook of Logic in Computer Science, Vol.3: 1-168. Oxford University Press, 1995.
S.MacLane. Categories for the Working Mathematicians, Springer-Verglag, Berlin. New York. Heidelberg, 1971.
B.A.Davey and H.A.Priestley. Introduction To Lattices and Order. Cambridge Press, 2002.
W.L.Wang and L.Fan. Ordered observation systems. Fuzzy Systems and Mathematics, Vol.20 (Supplement), pp157-160. September,2005.(In Chinese).
L.Fan. Some Questions in Domain Theory, Ph.D Thesis, Capital Normal University 2001. (In Chinese).
L.Fan,W.Ji and W.L.Wang. The Information Order Approximation and Generalized Chains’Completion, Beijing: Capital Normal University, Preprint, 2005, (in Chinese).

L.G.Wu and L.Fan: Cartesian closed category of R-Posets, Proceedings of the 2009 International Conference on Foundations of Computer Science (FCS2009), Las Vegas, Nevada, July 13-16, 2009, USA CSREA Press 2009 (to be published).
L.G.Wu, L.Fan and Y.Gao. A kind of R-complete categories for R-posets. Proceedings of the Second International Joint Conference on Computational Sciences and Optimization (CSO2009), Vol.1, pp639-643. IEEE Computer Society Press, 2009.
