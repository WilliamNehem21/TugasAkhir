Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 283 (2012) 13–27
www.elsevier.com/locate/entcs

An Inductive-style Procedure for Counting Monochromatic Simplexes of Symmetric Subdivisions with Applications to Distributed Computing
Armando Castan˜eda1and Sergio Rajsbaum2,3
Instituto de Matema´ticas Universidad Nacional Auto´noma de M´exico Ciudad Universitaria, D.F. 04510, M´exico

Abstract
In the weak symmetry breaking (WSB) task, each of n + 1 processes has to decide either 0 or 1 such that not all processes decide the same value. A WSB algorithm should be wait-free, namely, processes are asynchronous (there is no bound on their relative speeds), and potentially faulty (any proper subset may halt without warning). Also, it should be comparison based, namely, processes can only use comparison operations (<, >, =) on the values they read from the memory.
Symmetric chromatic subdivisions of an n-simplex have been used to represent the executions of a distributed algorithm solving the WSB task. Informally, each simplex of such a subdivision corresponds to an execution of the algorithm. Each vertex is labeled with the local state of a process in the execution; it is colored with the process ID, and also with the binary value the process decides in the execution. The symmetry properties of such a complex come from the comparison based requirement of a WSB algorithm.
Let C denote the number of monochromatic n-simplexes of such a subdivision, counted by orientation.
Previous work has shown that C = 1 + Σn−1 n+1 ki, for some coefficients ki ∈ Z. This characterization
i=0  i+1
of C implies that the WSB task on n + 1 processes is solvable if and only if n is such that the binomial coefficients are relatively prime, or equivalently, if and only if n is not a primer power.
This paper presents an inductive style procedure that yields an alternative proof of the characterization of
C. Roughly speaking, the proof consists in a procedure for modifying gradually the binary coloring of a symmetric chromatic subdivision, and computing the degree of the maps produced during the procedure.
Keywords: Distributed computing, Weak symmetry breaking, Renaming, Combinatorial topology.


Introduction
A task T on n + 1 processes is specified by an input complex, I, an output complex,
O, and an input-output relation Δ. The input complex specifies the possible inputs

1 Email: acastanedar@uxmcc2.iimas.unam.mx
2 Email: rajsbaum@matem.unam.mx
3 Supported by UNAM PAPIIT and PAPIME projects.

1571-0661 © 2012 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2012.05.003

to the processes. Each simplex in I specifies input values for the processes. For each input simplex, Δ specifies a set of output simplexes, containing the values the processes are allowed to decide in an execution. Topological methods have been used in Distributed Computing to study which tasks can be solved, and with what complexity (see for example [3,9,10,11,12,13]). Roughly speaking, executions of a distributed algorithm for a task T starting in an input simplex, can be represented by an algorithm complex. Each simplex of such a complex corresponds to an exe- cution of the algorithm. The vertices of a simplex are labeled with the local state of the process in the execution; each one is colored with a distinct process id, and hence the complex is called chromatic. The values decided by the processes induce a simplicial map from the algorithm complex to the output complex, that respects the specification given by Δ. Using topological invariants of the algorithm complex one can prove that T is not solvable, or derive an algorithm for solving T . For the wait-free model considered in this paper, the topological invariant is that the algorithm complex always induces a subdivision of the input complex. In a wait- free model, processes are asynchronous (there is no bound on their relative speeds), and potentially faulty (any proper subset may halt without warning). Also, the processes communicate with each other using a read/write shared memory.
In this paper we are interested in the weak symmetry breaking (WSB) task [8]: each of n +1 processes has a unique ID in [n]= {0,..., n}, and after communicating with each other, processes decide either 0 or 1, such that not all processes decide the same value. An algorithm for the WSB task is required to be comparison based : processes can only use comparison operations (<, >, =) on the values read from the memory. Recall that the WSB task is equivalent to the celebrated M -renaming task [1], when M = 2n. In this task each process is issued a unique name taken from a large namespace, and after coordinating with one another, processes choose unique names taken from a (much smaller) namespace of size M .
Prior research [2,5,10,11] has shown that the executions of a WSB algorithm can be represented as a chromatic subdivision K of an n-simplex, with a binary coloring on its vertexes that is “symmetric” on the boundary. The binary coloring repre- sents the values decided by the processes, and the monochromatic n-simplexes of K correspond to the executions in which all processes decide the same output value. Let C denote the number of monochromatic n-simplexes in K counted by orienta-
tion. In [4] it is proved that C =1 + Σn−1 n+1 ki, for some integers k0,..., kn−1.
i=0	i+1
This characterization of C has implications on the solvability of the WSB task: if
n+1 ,..., n+1 are not relatively prime, then there are no integers k0,..., kn−1
1	n
such that C = 0, which implies that there is no WSB algorithm for n + 1 processes.
Otherwise there is a WSB algorithm. In [6] it is observed that n is a prime power if and only if  n+1 ,..., n+1 are not relatively prime. Therefore, there is a WSB
1	n
algorithm for n + 1 processes if and only if n is not a prime power.
Two combinatorial approaches for proving the characterization of C were intro- duced in [4]. Both are based on the Index Lemma 5.2, which is a restatement of Corollary 2 in [7]. One approach consists of replacing the inside of K with a very simple complex, where the number of monochromatic simplexes can be counted, and

observing that this number is not modified so long as the boundary of the resulting complex is the same as the boundary of K, by the Index Lemma. This approach is described in detail in [5].
It is presented in [6] a third approach which is algebraic. Roughly speaking, it consists on, first, noticing that the colorings of K induce a chain map φ from the chain complex of K to the chain complex of an annulus of dimension n, that is equiv- ariant with respect to the symmetric group over [n]; then, exploiting the symmetric properties of φ, it computes the degree of φ, which implies the characterization of C.
In this paper we describe in detail the other approach in [4]. We present an inductive style procedure that yields an alternative proof of the characterization of C. The procedure gradually modifies the binary coloring of the subdivision, making sure that each time the binary coloring of a vertex is changed, the binary coloring of other vertexes on the boundary also changes, to preserve the symmetry of the binary coloring. The proof consists in computing how each one of these color changes affects C. In algebraic topology language, the proof consists on computing the degree of the chain maps induced by the simplicial maps produced during the procedure.
The rest of the paper is organized as follows. Section 2 present a brief review of some combinatorial topology concepts and Section 3 presents the notion of divided images that is used in the formal statement of the characterization of C in Theorem
6.1. Sections 4 and 5 contain some lemmas used in the proof of Theorem 6.1 in Section 6.

Combinatorial topology preliminaries
We assume the reader is familiar with concepts such as (combinatorial) simplexes, (combinatorial) complexes, simplicial maps and orientability.
Let K be an n-complex. The i-graph, 0 ≤ i ≤ n, of K has a node for every i-simplex of K and an edge between two vertexes if they share an (i − 1)-face. We say that K is i-connected 4 if its i-graph is connected, or if it consists of a single vertex when i = 0. If we say that an n-complex is connected, we mean to the highest dimension n, i.e., the complex is n-connected.
A complex Kn is a n-pseudomanifold if each of its i-simplexes, i ≤ n, is a face of at least one of its n-simplexes, and each of its (n− 1)-simplex is face of either one or two n-simplexes. The boundary of a pseudomanifold Kn, bd(Kn), is the subcomplex induced by its (n − 1)-simplexes that are contained in exactly one n-simplex.
A coloring of a complex K is a function f from its vertexes to a set of colors. The set of colors of the vertexes of a simplex τ ∈ K, is denoted f (τ ). A binary coloring of K is a coloring with colors {0, 1}. A coloring of a simplex is proper if it gives different values to different vertexes. If a coloring of a simplex gives the same value

4 This definition is not equivalent to the usual definition of i-connected. Roughly speaking, the usual definition of i-connected means that the complex does not have “holes” of dimension less or equal than i (the homology group of dimension k ≤ i is trivial).

b to every vertex, we say the simplex is b-monochromatic or just monochromatic. An n-complex is chromatic if it has a coloring that uses n + 1 colors and each one of its simplexes is properly colored.
Let σn be a simplex that has proper coloring id with [n]. Then, d = +1 denotes the positive orientation that contains the sequence ⟨0, 1,..., n⟩, i.e., the sequence of vertexes ⟨v0, v1,..., vn⟩ of σn such that id(vi)= i, 0 ≤ i ≤ n, and d = −1 denotes negative orientation. If σn is oriented d, its (n − 1)-face without color i, receives the induced orientation (−1)id.
A pseudomanifold Kn is orientable if it is possible to give an orientation to each of its n-simplexes such that if σ, σj ∈ Kn share an (n− 1)-face τ then τ gets opposite induced orientations from σ and σj. Such an orientation is a coherent orientation of Kn.

Divided images
Divided images are introduced and studied in [2], to model the structure of the complex associated to a distributed algorithm. This section briefly reviews the main properties of these combinatorial topology objects.
Definition 3.1 [2, Definition 4.1] Let Kn, Ln be complexes and ψ be a function that maps every simplex of Ln to a finite subcomplex of Kn. The complex Kn is a divided image of Ln under ψ if:
ψ(∅)= ∅
∀τ ∈ Kn, there is a simplex σ ∈ Ln such that τ ∈ ψ(σ)
∀σ0 ∈ Ln, ψ(σ0) is a single vertex
∀σ1, σ2 ∈ Ln, ψ(σ1 ∩ σ2)= ψ(σ1) ∩ ψ(σ2)
∀σ ∈ Ln, ψ(σ) is a dim(σ)-pseudomanifold with bd(ψ(σ)) = ψ(bd(σ))
The complex Kn is a divided image of Ln if there exists ψ such that Kn is a divided image of Ln under ψ.
Figure 1 depicts a divided image of dimension 2 where L2 is the complex consist- ing of a 2-simplex and all its faces, and the arrows show how ψ maps the vertexes of L2. It is worth noticing that a divided image is not necessarily a subdivision, even if it is connected. For example, a torus L of dimension 2 with a 2-simplex τ removed from it, is a divided image of a 2-simplex σ: bd(σ) is mapped to bd(τ ) and σ is mapped to L.
Let Kn be a divided image of Ln under ψ. Kn is connected if for every i-simplex σ ∈ Ln, if i ≥ 1 then ψ(σ) is i-connected, and if i ≥ 2 then bd(ψ(σ)) is (i − 1)- connected. Similarly, Kn is orientable if for every σ ∈ Ln, ψ(σ) is orientable. And Kn is coherently oriented if for every n-simplex σ ∈ Ln, the n-pseudomanifold ψ(σn) is coherently oriented.
The carrier of a simplex τ ∈ Kn, carr(τ ), is the simplex σ ∈ Ln of smallest dimension such that τ ∈ ψ(σ). Assume Ln is chromatic. The set colors of a simplex σ ∈ Ln is denoted id(σ). The divided image Kn is chromatic if every simplex τ ∈ Kn



Fig. 1. A divided image of dimension 2.

with dim(τ )= dim(carr(τ )), is properly colored with id(carr(τ )). Figure 2 depicts a chromatic divided image of a 2-simplex.
Let Kn be a divided image of σn under ψ. A cross edge of Kn is a 1-simplex
{u, v} ∈ bd(Kn) such that there exist distinct i-faces σ, σj of σn, 0 ≤ i ≤ n − 2, such that u ∈ ψ(σ), u ∈/ ψ(σj), v ∈/ ψ(σ) and v ∈ ψ(σj). This implies that if Kn has no cross edges then for every σ ⊂ σn, there exists v ∈ ψ(σ) such that carr(v)= σ. The bold edge in Figure 1 is a cross edge.
Roughly speaking, the j-corners of a divided image are the j-simplexes that have an i-face in the boundary, for every i ≤ j. The 2-simplexes marked with a small cross are the 2-corners of the divided image in Figure 1.
Definition 3.2 Let Kn be a divided image of σn under ψ, and σj be a j-face of
σn. The set of j-corners of ψ(σj) is:
j-corners(ψ(σj)) = { τj ∈ ψ(σj)|∀ 0 ≤ k ≤ j, ∃ σk, ρk, such that
σk ⊆ σj, ρk ∈ ψ(σk) and ρ0 ⊂ ρ1 ⊂ ... ⊂ ρj = τj}

Some lemmas about orientability
This section presents some lemmas concerning orientability of chromatic divided images. For the rest of the paper, for a simplex σn that is properly colored with [n], let σn—1 denote the (n − 1)-face of σn without color i ∈ [n]. The proof of Lemma
is easy and is left to the reader.
Lemma 4.1 Let Kn be a chromatic, connected and orientable divided image of
σn under ψ. In any coherent orientation of Kn, ψ(σn—1) has a coherent induced
orientation.
Lemma 4.2 Let Kn be a chromatic, connected and orientable divided image of σn under ψ. In any coherent orientation of Kn, all simplexes of n-corners(Kn) have the same orientation.
Proof. Consider faces σ1, σ2,..., σn—1 of σn such that σ1 ⊂ σ2 ⊂ ... ⊂ σn—1. For 1 ≤ i ≤ n − 1, let Ki denote the complex ψ(σi). Assume Ki has the induced orientation by Ki+1. By Lemma 4.1, Ki is coherently oriented. We proceed by induction on n. For the base, we have that K1 has an odd number of 1-simplexes

because K1 is chromatic and connected. Also, the 1-corners of K1 are the 1-simplexes containing the two vertexes of its boundary. It is not hard to see that these simplexes have the same orientation. Suppose the lemma holds for i − 1. We prove that it holds for i.
By Definition 3.2 of n-corners, every simplex of (i−1)-corners(Ki—1) is contained in some simplex of i-corners(Ki). However, it is not necessary true that every simplex of i-corners(Ki) contains a simplex of (i − 1)-corners(Ki—1). Let τ i—1 and ρi—1 be simplexes of (i − 1)-corners(Ki—1) and τ i and ρi be the simplexes of i- corners(Ki) such that ρi—1 ⊂ ρi and τ i—1 ⊂ τ i. By definition of orientability, τ i induces its orientation multiplied by (−1)k to τ i—1, and ρi induces its orientation multiplied by (−1)k to ρi—1, for some k. Also, by induction hypothesis, the simplexes of (i − 1)-corners(Ki—1) have the same orientation, and thus τ i and ρi have the same orientation. Consider now a face λi—1 of σi such that λi—1 /= σi—1. Let Li—1 denote the complex ψ(λi—1) and Li—2 denote the complex ψ(σi—1 ∩ λi—1). Consider a simplex γi—2 of (i − 2)-corners(Li—2). Let τ i—1 ∈ (i − 1)-corners(Ki—1), ρi—1 ∈ (i − 1)-corners(Li—1) and τ i, ρi ∈ i-corners(Ki) be the simplexes such that γi—2 ⊂ τ i—1 ⊂ τ i and γi—2 ⊂ ρi—1 ⊂ ρi. Using the fact that Ki is a connected and chromatic divided image, one can prove that τ i and ρi have the same orientation. By the previous case, this one holds. This complete the proof.	2
For a simplex σn, in what follows let σn denote the complex containing all faces of σn. Consider a chromatic divided image Kn of σn under ψ. Let σ and σj be i-faces of σn. A simplicial bijection μ : ψ(σ) → ψ(σj) is id-preserving if for every u, v ∈ ψ(σ), if id(u) = id(v) then id(μ(u)) = id(μ(v)). If in addition, for every u ∈ ψ(σ), rk(id(u)) = id(μ(u)), where rk : id(σ) → id(σj) is the bijection such that if x < y then rk(x) < rk(y), then μ is id-rank-preserving. Notice that there can be only one id-rank-preserving bijection. Kn has structural-symmetry if for every two i-faces σ and σj of σn, there is an id-preserving simplicial bijection between ψ(σ) and ψ(σj). Similarly, Kn has structural-rank-symmetry if for every two i-faces σ and σj of σn, there is an id-rank-preserving simplicial bijection between ψ(σ) and ψ(σj). Clearly, if Kn has structural-rank-symmetry, it has structural-symmetry.
Assume Kn has structural-symmetry. For every i-faces σ and σj of σn, fix an

id-preserving simplicial bijection μ
′ : ψ(σ) → ψ(σj) such that μ—1 = μ ′
. Let F

σσ	σσ′	σ σ
be the family of simplicial bijections μσσ′ . Then Kn has structural-symmetry with
respect to F. For each μσσ′ , u ∈ ψ(σ) and v ∈ ψ(σj) are isomorphic with respect to μ if μ(u) = v. Isomorphic simplexes with respect to μ are defined similarly. Observe that isomorphic simplexes between ψ(σ) and ψ(σj) are well defined since μσσ′ = μσ′σ .
Let Kn be a chromatic divided image of σn under ψ with structural-symmetry
with respect to a family F, and with a binary coloring b. The coloring b is symmetric with respect to F if every μσσ′ ∈ F is color-preserving, i.e., for every v ∈ ψ(σ), b(v)= b(μ(v)). If there is a family of simplicial bijections such that b is symmetric with respect to it, then b is symmetric. Also, b is rank-symmetric if it is symmetric with respect to the family of id-rank-preserving simplicial bijections. Therefore a divided image with a (rank-)symmetric binary coloring, has structural-(rank-

0



0

2	1

2	1	2	1
Fig. 2. A chromatic divided image with a symmetric binary coloring.
)symmetry. Figure 2 presents a chromatic divided image with a rank-symmetric binary coloring (white and black circles represent binary colors 0 and 1).
Lemma 4.3 Let Kn be a chromatic, connected and orientable divided image of σn, with structural symmetry with respect to F. In any coherent orientation of Kn, the n-simplexes of Kn that contain isomorphic (n − 1)-simplexes of bd(Kn), have the same orientation.
Proof. Let Kn—1 and Kn—1 denote ψ(σn—1) and ψ(σn—1). Consider isomorphic
i	j	i	j
simplexes ρn—1 ∈ Kn—1 and τn—1 ∈ Kn—1, i.e., for f n−1 n−1 ∈ F, f n−1 n−1 (ρn—1)= 
i	j	σi	σj	σi	σj
τn—1. Let ρn and τn be the unique simplexes of Kn such that ρn—1 ⊂ ρn and
τn—1 ⊂ τn. The induced orientation of ρn—1 is the orientation of ρn multiplied by (−1)i and the induced orientation of τn—1 is the orientation of τn multiplied by (−1)j. Thus, it is sufficient to prove that ρn—1 and τn—1 have the same induced orientation, multiplied by (−1)i and (−1)j, respectively.
By Definition 3.2, every simplex of (n − 1)-corners(Kn—1) or (n − 1)- corners(Kn—1) is face of a simplex in n-corners(Kn). Consider simplexes γn—1 ∈(n−
1)-corners(Kn—1) and λn—1 ∈(n− 1)-corners(Kn—1). By Lemma 4.2, γn—1 and λn—1
i	j
have the same induced orientation, multiplied by (−1)i and (−1)j. Since Kn—1 is connected, Kn—1 has only two possible coherent orientations. Therefore, an orien- tation of an (n − 1)-simplex of Kn—1 induces the orientation of the other (n − 1)- simplexes in a coherent orientation. Something similar happens with Kn—1. It can be easily proved by induction on n, that any ids-preserving simplicial bijection
f : Kn—1 → Kn—1, maps (n− 1)-corners to (n− 1)-corners. Thus, an (n− 1)-simplex

i
of Kn—1
j
is isomorphic to an (n − 1)-simplex of Kn—1
with the same orientation,

multiplied by (−1)i and (−1)j.	2
Counting monochromatic simplexes
Consider a chromatic n-pseudomanifold K that has a binary coloring on its vertexes. This section presents a lemma that can be used to count the monochromatic n- simplexes (with respect to the binary coloring) of K, by counting on bd(K). This lemma is the basis for proving Theorem 6.1 in Section 6.
Consider an oriented simplex σ with a proper coloring c. Let ⟨c0,.	, cdim(σ)⟩
be the sequence of the c colors of σ in ascending order. The simplex σ is counted

by orientation with respect to c in the following way. It is counted as +1 if the sequence ⟨c0,..., cdim(σ)⟩ belongs to its orientation, i.e., the sequence of vertexes
⟨v0, v1,..., vdim(σ)⟩ such that c(vi)= ci,0 ≤ i ≤ dim(n), belongs to the orientation of σ. Otherwise it is counted as −1.
Definition 5.1 [Index and Content] Consider a coherently oriented pseudomani- fold Kn with the induced orientation on its boundary. Let c be a coloring, not necessarily proper, of Kn with [n].
The content of Kn, C(Kn), is the number of the properly colored n-simplexes of Kn counted by orientation.
The index i of Kn, Ii(Kn), is the number of properly colored (n−1)-simplexes of bd(Kn) with [n] − {i} counted by orientation.
If there is no ambiguity, we just write C or Ii. Lemma 5.2 below is the restate- ment of Corollary 2 in [7] using our notation.
Lemma 5.2 (Index Lemma) Let Kn be a coherently oriented, connected and col- ored pseudomanifold with [n]. Then C = (−1)iIi.
Figure 3 shows a pseudomanifold with its 2-simplexes counterclockwise oriented. Notice that colors 0, 1 and 2, in this order, of the unique properly colored 2- simplex, denoted by the circular arrow, follow the counterclockwise direction, and thus C = +1. An edge in the boundary with colors 0 and 1, is counted +1 or −1 according to its induced orientation and the direction followed by 0 and 1, in this order. Hence I2 = +1. It can be easily verified that (−1)2I2 = (−1)1I1 = (−1)0I0. Notice that the coloring c induces a simplicial map from Kn to a properly colored simplex σn. Thus we can think of the index of Kn as the number of times that bd(Kn) is “wrapped around” bd(σn), i.e., a combinatorial version of the notion of degree.
2	2



0	2



1  −1 0
+1  1

Fig. 3. The Index Lemma.

For a chromatic pseudomanifold with a binary coloring, we define the coloring
c, Definition 5.3, that uses colors [n].
Definition 5.3 Let Kn be a chromatic pseudomanifold with a binary coloring. For every v ∈ Kn, the coloring c is defined as c(v)= (id(v)+ b(v)) mod (n + 1), where id and b are the chromatic and binary coloring of Kn, respectively.

Lemma 5.4 proves that the number of monochromatic n-simplexes under b and the properly colored n-simplexes under c are related. Thus the boundary induces the number of monochromatic n-simplexes, by the Index Lemma.
Lemma 5.4 ([5, Lemma 3.5]) Let Kn be chromatic pseudomanifold with a bi- nary coloring b and a coloring c as in Deﬁnition 5.3. An n-simplex of Kn is monochromatic under b if and only if it is properly colored under c.
An inductive style proof
This section proves Theorem 6.1, which formalizes the symmetric chromatic subdi- visions described in the Introduction. The theorem considers that the content C of Kn is computed with respect to the coloring c defined in Definition 5.3. By Lemma 5.4, C counts the monochromatic n-simplexes of Kn. Also observe that Kn is not necessarily a chromatic subdivision of σn; for example, for dimension 2, it can be a torus without a 2-simplex.
Theorem 6.1 Let Kn be a chromatic, connected and orientable divided image of
σn, with a rank-symmetric binary coloring and no cross edges. Then, for some
integers k0,..., kn—1, C =1 + Σn—1 n+1 ki.
i=0	i+1
First Section 6.1 describes the idea used in the proof of Theorem 6.1 and then Section 6.2 presents the proof.

An Example
The strategy is to start with a binary coloring equal to 0 on the boundary, ∀v ∈ bd(Kn), b(v) = 0, and then process groups of isomorphic vertexes (change their binary color to 1) with carriers of dimension l, until bd(Kn) gets its original binary coloring. This action is called l-step and it may be done more than once in each dimension l. A step guarantees that after executing it, the coloring b of Kn remains rank-symmetric. Moreover, steps are done by dimension: a vertex with carrier of dimension l + 1 is processed if and only if every vertex with carrier of dimension l has its correct binary color. For example, for dimension 3, first, if necessary, the corners are processed, then the vertexes inside the divided images of the edges, and finally the vertexes inside the divided images of the triangles. The vertexes inside the divided image of the tetrahedron are not modified and actually their coloring does not matter. The main part of the proof is to analyze how all these steps affect the index of Kn. It will be proved that all changes in a step affect the index in the same way.
Figure 4 presents an example of the inductive procedure. The vertexes have colorings b and c. Assume the 2-simplexes are counterclockwise oriented. For a properly colored 1-simplex on the boundary, the arrow shows the direction followed by c colors 1 and 2, and −1 or +1 denotes how this simplex is counted by I0. The procedure begins with a binary coloring equal to 0 on the boundary, Figure 4 (a). The index at the beginning of the procedure always is equal to ±1, according to

0	1






2	−1
1 +1  2
−1  1
0	1 +1 2	2

(a)	(b)

1	1








0	1	0	2	0	2	0	2
(c)	(d)
Fig. 4. An example of the inductive procedure.

the orientation. The procedure has a 0-step, Figure 4 (b), that adds a multiple of three to the index because a 2-simplex has three 0-faces. Figure 4 (c) shows a 1-step which adds a multiple of three to the index because a 2-simplex has three 1-faces. The procedure ends with the 1-step in Figure 4 (d).
The proof
Recall that the index and content of Kn are computed with respect to the coloring c defined in Definition 5.3. Assume Kn has a coherent orientation. The Lemma 6.2 computes the value of the index at the beginning of the procedure.
Lemma 6.2 If for every v ∈ bd(Kn), b(v)= 0, then Ii = ±1.
Proof. Consider the faces σ0, σ1,..., σn—1 of σn such that id(σi)= [i]. Let Ki de- note ψ(σi). It is clear that Ki is a chromatic, connected and orientable divided image of σi under ψ|σi . Assume Ki has the the induced orientation by Ki+1. By Lemma 4.1, Ki has a coherent induced orientation. By the definition of c, Definition 5.3, for every v ∈ bd(Kn), c(v)= id(v). Notice that Kn—1 contains all the properly colored (n − 1)-simplexes of bd(Kn) with [n − 1]. Actually, every (n − 1)-simplex of Kn—1 is properly colored with [n − 1]. Therefore, we can recursively use Index Lemma 5.2. That is, In(Kn)= C(Kn—1) and, by Index Lemma, In(Kn)= (−1)n—1In—1(Kn—1). We can do the same with Kn—1 and Kn—2, i.e., In—1(Kn—1)= (−1)n—2In—2(Kn—2), and so on. Thus, In(Kn) = (−1)1+2+...+n—1I1(K1). Observe that I1(K1) = ±1. And by Index Lemma, (−1)nIn(Kn)= (−1)iIi(Kn).	2
Consider v ∈ bd(Kn) such that b(v) = 0. The vertex v is processed when its binary color is changed from 0 to 1. Colorings, simplexes and values after processing

v, are marked with a dot (˙). Thus, Ii and I˙i denote the index of Kn before and after processing v, and c(v) and c˙(v) are its coloring c before and after processing
it.
Let k denote n+1 . Let σ1, σ2 ... σk be the l-faces of σn. For 1 ≤ j ≤ k, consider the id-rank-preserving bijection fj : ψ(σ1) → ψ(σj). Let us assume that theres exists v ∈ ψ(σ1) such that carr(v)= σ1 and b(v)= 0. For 1 ≤ j ≤ k, let vj denote fj(v), the isomorphic vertex of v in ψ(σj). Thus v = v1. Also b(vj)=0 and carr(vj)= σj. An l-step consists of processing one by one the vertexes v1, v2 ... vk. The vertexes of bd(Kn) are processed by dimension, i.e., the procedure applies an l-step if and only if all necessary (l−1)-steps have been done. Therefore, when an l- step is the next step in the procedure, each vertex with carrier of dimension smaller than l, has its correct binary color, and each vertex with carrier of dimension greater than l, has binary color 0. It is clear that b is rank-symmetric at the beginning of the procedure, however b is not symmetric in the middle of a step. Colorings, simplexes and values after a step are denoted with a circumflex ( ). For the rest of the proof, fix the l-step associated with the vertexes V = {v1 ... vk} and assume that none of the vertexes of V has been processed. The assumption that the binary coloring b of Kn is rank-symmetric helps in proving that b remains rank symmetric after an l-step.
3


7	-1
v
0	5

1
0
4
1
2
+1
-1	u
3
0

Fig. 5. The extended definition of content.

The core of the proof is computing how the index of Kn changes when a vertex of V is processed. To do that, the definition of content is extended for colored pseudomanifolds with an arbitrary number of colors. For a colored and oriented pseudomanifold Ln (possibly colored with more that n + 1 colors) and a set of n +1 colors H, C(Ln, H) denotes the number of properly colored n-simplexes in Ln with H, counted by orientation. C(Ln, H) is the content of Ln with H. For st(v, Ln), we write C(v, Ln, H) instead of C(st(v, Ln), H). Figure 5 presents a colored pseudomanifold L2 in which st(u, L2) and st(v, L2) are the regions bounded by bold lines. The reader can check that C(u, L2, {3, 4, 5})= −1, C(v, L2, {1, 2, 3})=1 and
C(u, v, L2, {0, 2, 3})= −1, assuming each 2-simplex is counterclockwise oriented.
Lemma 6.3 below describes how the index Ii changes when any vertex in bd(Kn) is processed. For the rest of the section, assume bd(Kn) has the induced orientation by Kn.
Lemma 6.3 Consider a vertex v ∈ bd(Kn) such that b(v) = 0. If v is processed then I˙i = Ii + C˙(v, bd(Kn), [n] − {i}) − C(v, bd(Kn), [n] − {i}).

Proof. First, observe c(v) /= c˙(v). Consider an (n − 1)-simplex τ ∈ st(v, bd(Kn)). We have two cases. If c(τ ) /= [n] − {i} then it is possible c˙(τ ) = [n] − {i}. In the other case, if c(τ ) = [n] − {i} then c˙(τ ) /= [n] − {i}. Thus, I˙i is Ii plus all those (n − 1)-simplexes of bd(Kn) that will be properly colored with [n] − {i} after
v is processed, minus all those properly colored (n − 1)-simplexes of bd(Kn) with
[n] − {i} before v is processed. Also, notice that st(v, bd(Kn)) contains all those (n − 1)-simplexes that change their coloring c when v is processed. Therefore, I˙i = Ii + C˙(v, bd(Kn), [n] − {i}) − C(v, bd(Kn), [n] − {i}).	2
The following two lemmas and corollary intuitively say that when a vertex of V
is processed, I˙i can be computed by counting in a specific “region” of bd(Kn).
Lemma 6.4 Consider an (n − 1)-simplex τ ∈ st(v, bd(Kn)). If c(τ ) = [n] − {i}
then τ ∈ st(v, ψ(σn—1)).
Proof. First, by Definition 3.1 of a divided image and because σn—1 ∈ bd(σn),
we have that ψ(σn—1) ⊂ bd(Kn).  We have two cases.  If l = n − 1, V is an

n − 1 step, then v has a carrier of dimension n − 1 and hence v ∈/
bd(ψ(σn—1))

(notice if v ∈ bd(ψ(σn—1)) then it cannot have a carrier of dimension n − 1). Thus
st(v, bd(Kn)) = st(v, ψ(σn—1)).
The second case is l < n − 1. Let σ be the carrier of v. Consider a face σn—1 of
σn such that σ ⊂ σn—1 and σn—1 /= σn—1. We have v ∈ ψ(σn—1) and i ∈ id(σn—1).
i	j	j	j
Consider an l-simplex ρ ∈ st(v, ψ(σ)). Let γ be a simplex of st(v, ψ(σn—1)) such
that ρ ⊂ γ. Let u be the vertex of γ such that id(u) = i. Observe that u ∈/ ρ
and hence u ∈/ ψ(σ). Since Kn does not have cross edges, then u has a carrier of dimension greater than l. Thus b(w) = 0 and hence c(w)= i and c(γ) /= [n] − {i}. This implies st(v, ψ(σn—1)) contains every properly colored (n − 1)-simplexes of st(v, bd(Kn)) with [n] − {i}.	2
Corollary 6.5 Let v  be a vertex of V such that v  ∈  ψ(σn—1).  Then
C(v, bd(Kn), [n] − {i})= C(v, ψ(σn—1), [n] − {i}).
Lemma 6.6 Let v be a vertex of V such that v ∈ ψ(σn—1). If v is processed then

I˙i = Ii − C(v, ψ(σn—1), [n] − {i}).
Proof. By Lemma 6.3, if v is processed,
I˙i = Ii + C˙(v, bd(Kn), [n] − {i}) −

C(v, bd(Kn), [n] − {i}).	And by Corollary 6.5,  C(v, bd(Kn), [n] − {i})	=
C(v, ψ(σn—1), [n] − {i}).  Consider an (n − 1)-simplex τ ∈ st(vi, ψ(σn—1)).  Re-
i	i
call that id(τ ) = [n] − {i}. By the definition of coloring c, Definition 5.3, one can
conclude c(τ )= [n] − {i} if and only if τ is 0-monochromatic. Also observe τ˙ is not 0-monochromatic and hence c˙(τ ) /= [n] − {i}. Thus, C˙(vi, bd(Kn), [n] − {i})=0 and so I˙i = Ii − C(v, bd(Kn), [n] − {i}).	2
Lemma 6.7 below shows that the content of vertexes u, v ∈ V, are essentially the same, assuming none of them have been processed. This property will imply that all the modifications in a step affect the index in the same way.
Lemma 6.7 Let u, v ∈ V be vertexes of ψ(σn—1) and ψ(σn—1), respectively. Then
i	j
(−1)iC(u, ψ(σn—1), [n] − {i})= (−1)jC(v, ψ(σn—1), [n] − {j}).
i	j

Proof. Consider the faces σl+1,..., σn—1, σn such that id(σm)= [m], l < m ≤ n. For m < n, assume ψ(σm) has the induced orientation by ψ(σm+1). By Lemma 4.1, ψ(σm) has a coherent induced orientation. It is clear that ψ(σm) is a chromatic, connected and orientable divided image of σm under ψ|σm with a rank symmetric binary coloring and no cross edges. By induction on m, we prove that the lemma holds for the vertexes of V that belong to ψ(σm).
For the base of the induction, l + 1, consider faces σl and σl of σl+1, without
i	j
id color i and j. Let Ll and Ll denote ψ(σl) and ψ(σl). Notice that Ll and Ll
i	j	i	j	i	j
only contain one vertex of V, respectively. Consider u, v ∈V such that u ∈ Ll and
v ∈ Ll. By the definition of coloring c, Definition 5.3, one can conclude that, for τ ∈ st(u, Ll), c(τ )= id(τ ) if and only if τ is 0-monochromatic. Consider an l-simplex τ ∈ st(u, Ll). Recall that id(τ ) = [l + 1] − {i}. Suppose τ is 0-monochromatic. Thus, for each w ∈ τ , c(w) = id(w). Notice that if τ has induced orientation d then C(u, Ll, [l + 1] − {i}) counts τ as d. Something similar happens with l-
simplexes in st(v, Ll). Consider the isomorphic l-simplex ρ of τ in st(v, Ll). Notice
j	j
that ρ is 0-monochromatic. By Lemma 4.3, τ and ρ have the same orientation,
multiplied by (−1)i and (−1)j, respectively. Therefore, (−1)iC(u, Ll, [l + 1] −{i})= 
(−1)jC(v, Ll, [l + 1] − {j}).
Suppose the lemma is true for m − 1. We prove it is true for m. Consider the faces σm—1 and σm—1 of σm. Thus, id(σm—1)= [m − 1] and id(σm—1)= [m] − {k}.
k
Let Lm—1 and Lm—1 denote ψ(σm—1) and ψ(σm—1). We have that Lm—1 and Lm—1
k	k	k
contain more than one vertex of V. Consider u, v ∈V such that u ∈ Lm—1, v ∈ Lm—1 and they are isomorphic. As in the base of the induction, it can be easily proved that (−1)mC(u, Lm—1, [m − 1]) = (−1)kC(v, Lm—1, [m] − {k}). Consider a vertex w ∈V such that w /= u and w ∈ Lm—1. Observe that if we prove C(u, Lm—1, [m − 1]) = C(w, Lm—1, [m − 1]), the lemma follows.
Let σm—2 and σm—2 be faces of σm—1 such that u ∈ ψ(σm—2) and w ∈ ψ(σm—2).
i	j	i	j
Assume, w.l.o.g., faces σm—2 and σm—2 do not have colors i and j. Let Lm—2 and
i	j	i
Lm—2 denote ψ(σm—2) and ψ(σm—2). The idea is to prove that C(u, Lm—1, [m−1]) =
j	i	j
(−i)iC(u, Lm—2, [m − 1] − {i}) and C(w, Lm—1, [m − 1]) = (−i)jC(w, Lm—2, [m − 1] −
i	j
{j}), by using Index Lemma on complexes st(u, Lm—1) and st(w, Lm—1). Then, C(u, Lm—1, [m − 1]) = C(w, Lm—1, [m − 1]), by induction hypothesis. However, it is possible c colors st(u, Lm—1) and st(w, Lm—1) with more than m colors, and thus Index Lemma cannot be used on them. So it is defined an extra coloring cj for these two complexes that uses m colors.
Consider st(u, Lm—1).	The coloring cj is defined as follows.	For each x ∈ st(u, Lm—1), if b(x) = 0 then cj(x) = c(x), otherwise cj(x) = c(u). Since b(u) = 0 and for every x ∈ st(u, Lm—1), id(x) ∈ [m − 1], we have that cj uses colors [m − 1]. Therefore, Index Lemma can be applied on st(u, Lm—1). Also, as noticed above, for each τ ∈ st(u, Lm—1), c(τ ) = id(τ ) if and only if τ is 0-monochromatic, and thus cj(τ )= id(τ ) if and only if c(τ )= id(τ ). Thus, C(st(u, Lm—1)) and C(st(u, Lm—2)) with respect to cj, are equal to C(u, Lm—1, [m − 1]) and C(u, Lm—2, [m − 1] − {i}) with respect to c, respectively. Now, for an (m − 2)-simplex τ ∈ bd(st(u, Lm—1)),

if cj(τ ) = [m − 1] − {i} then τ ∈ st(u, Lm—2). In other words, Lm—2 is the only
i	i
“region” of bd(st(u, Lm—1)) containing properly colored simplexes with [m−1]−{i}.

First observe that σm—2 ∈ bd(σm—1) and hence Lm—2 ⊂ Lm—1. Also if τ
∈/ Lm—2

i	i	i
then there must exists x ∈ τ such that id(x) = i. Since x ∈ st(u, Lm—1), there
exists a 1-simplex connecting x and u. Because there are no cross edges, x has a carrier of dimension greater than l and hence b(x) = 0. Therefore cj(x)= i and so cj(τ ) /= [m − 1] − {i}.
By Index Lemma 5.2, C(st(u, Lm—1)) = (−i)iIi(st(u, Lm—1)). Also, we get Ii(st(u, Lm—1)) = C(st(u, Lm—2)) because for every τm—2 ∈ bd(st(u, Lm—1)) such that cj(τm—2) = [m − 1] − {i}, we have that τm—2 ∈ Lm—2. Therefore, C(st(u, Lm—1)) = (−i)iC(st(u, Lm—2)). Similarly, by adding the appropriate cj col- oring to st(w, Lm—1), we get C(st(w, Lm—1)) = (−i)jC(st(w, Lm—2)). By induc-
tion hypothesis, (−i)iC(st(u, Lm—2)) = (−i)jC(st(w, Lm—2)), thus C(st(u, Lm—1)) =
i	j
C(st(w, Lm—1)). The lemma follows.	2
For Lemma 6.8, recall that a dot ( ˙ ) denotes a value after a vertex is processed and a circumflex ( ) denotes a value after a step is done. Lemma 6.8 directly implies Lemma 6.9.
Lemma 6.8 After the l-step associated to V is done, we have that I^i = Ii + n+1 k,
for some k ∈ Z.
Proof. Consider vertexes vi, vj ∈ V such that vi ∈ ψ(σn—1) and vj ∈ ψ(σn—1).
i	j
By Index Lemma 5.2, (−1)i—jIi = Ij and (−1)i—jI˙i = I˙j . And by Lemma 6.6,
I˙j = Ij − C(vj, ψ(σn—1), [n] − {j}), when vj is processed. Combining these three
equations, we get I˙i = Ii − (−1)j—iC(vj, ψ(σn—1), [n] − {j}). Using Lemma 6.7, we get C(vi, ψ(σn—1), [n] − {i})= (−1)j—iC(vj, ψ(σn—1), [n] − {j}), and hence I˙i =
i	j
Ii − C(vi, ψ(σn—1), [n] − {i}). In other words, when the vertex vj is processed, the index Ii changes as if vi is processed. Since Kn does not have cross edges, there

is not a 1-simplex connecting vi and vj, and so vj
∈/ st(vi, bd(Kn)).  Therefore,

the c coloring of the (n − 1)-simplexes in st(vi, ψ(σn—1)) do not change when vj
is processed, and hence C(vi, ψ(σn—1), [n] − {i}) = C˙(vi, ψ(σn—1), [n] − {i}). Thus,

i
^	n—1
 n+1	i

|V| = n+1 .	2
Lemma 6.9 Let Ii and I^i be the index es of Kn before and after all the l-steps in
the procedure are done. Then I^i = Ii − n+1 k, for some k ∈ Z.
By Lemma 6.2, Ii = ±1 at the beginning of the procedure, according to the
orientation. And by Lemma 6.9, after all l-steps in the procedure, I^i = Ii − n+1 k,

Σn—1  n+1 
i+1

Therefore, at the end of the procedure, Ii = 1 +
Index Lemma 5.2, Theorem 6.1 follows.
References
i=0	i+1
kl, for some kl ∈ Z. By


H. Attiya, A. Bar-Noy, D. Dolev, D. Peleg & R. Reischuck. Renaming in Asynchronous Environment. Journal of the ACM 37(3): 524–548 (1990).

H. Attiya & S. Rajsbaum. The Combinatorial Structure of Wait-Free Solvable Tasks. SIAM Journal on Computing 31(4): 1286–1313 (2002).
E. Borowsky & E. Gafni. Generalized FLP Impossibility Result for t-Resilient Asynchronous Computations. Proceedings of the 25th. Annual ACM Symposium on Theory of Computing, 91– 100 (1993).
A. Castan˜eda & S. Rajsbaum. New Combinatorial Topology Upper and Lower Bounds for Renaming. Proceedings of the 27th. Annual ACM Symposium on Principles on Distributed Computing, 295–304 (2008).
A. Castan˜eda & S. Rajsbaum, New Combinatorial Topology Upper and Lower Bounds for Renaming: The Lower Bound. Distributed Computing 22(5), pp. 287–301, 2010.
Castan˜eda A., Herlihy M. and Rajsbaum S, An Equivariance Theorem with Applications to Renaming. Tech Report #1975, IRISA, Universit´e de Rennes 1 (France), 2011.
K. Fan. Simplicial Maps from an Orientable n-Pseudomanifold into Sm with the Octahedral Triangulation. Journal of Combinatorial Theory 2: 588–602 (1967).
E. Gafni, S. Rajsbaum & M. Herlihy. Subconsensus Tasks: Renaming is Weaker than Set Agreement. Proceedings of the 20th. International Symposium on Distributed Computing, 329–338 (2006).
E. Gafni & E. Koutsoupias. Three-Processor Tasks Are Undecidable. SIAM Journal on Computing 28(3): 970–983 (1999).
M. Herlihy & S. Rajsbaum. Algebraic Spans. Mathematical Structures in Computer Science 10(4): 549–573 (2000).
M. Herlihy & N. Shavit. The Topological Structure of Asynchronous Computability. Journal of the ACM 46(6): 858–923 (1999).
G. Hoest & N. Shavit. Toward a Topological Characterization of Asynchronous Complexity. SIAM Journal on Computing 36(2): 457–497 (2006).
M. Saks & F. Zaharoglou, Wait-Free k-Set Agreement Is Impossible: The Topology of Public Knowledge. SIAM Journal on Computing 29(5), 1449–1483 (2000).
