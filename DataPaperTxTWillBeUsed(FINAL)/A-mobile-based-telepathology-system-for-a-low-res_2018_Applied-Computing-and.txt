







Original Article
A mobile-based telepathology system for a low resource setting in Ethiopia
Admasu Abate a, Mengistu Kifle a,b,c, Sena Okuboyejo b,d,⇑, Victor Mbarika b
a Addis Ababa University, Ethiopia
b ICITD, Southern University and A&M, Baton Rouge, LA, United States
c Ethiopian Federal Ministry of Health, Ethiopia
d Covenant University, Ogun State, Nigeria



a r t i c l e  i n f o

Article history:
Received 5 February 2017
Revised 20 June 2017
Accepted 13 August 2017
Available online 16 August 2017

Keywords:
Blood cell counting Ethiopia malaria Smartphone Technology Telepathology
a b s t r a c t 

In most developing countries like Ethiopia, blood count of a microscopic image is done manually which is tedious, time consuming and error-prone. Recent advances in technology have introduced the use image processing software especially mobile technology. This research designed a low-cost smart phone micro- scope adapter, and developed a decision support system for automatic blood cell count and malaria. The image acquisition and processing applying the adapter and the software was tested in two clinics. The result, compared to the manual way of diagnosing microscopic images, is simple for diagnostic process and provides better decision support for malaria and blood cell counting, as well as speed up the diagno- sis process. For blood cell counting and malaria detection, it takes about 30 s to 1 min using this system, but using a manual system it takes around 10–20 min. The preliminary result indicates that the devel- oped system is cost-effective for higher and medium clinics in rural and urban clinic setup. This reduces the initial, running and maintenance cost of the laboratory equipment and also improves the quality of services.
© 2017 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University. This is an
open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).





Introduction

Blood cell counting gives important information about the type and number of cells in the blood, especially red blood cells, white blood cells and platelets. The information obtained from the count can be used to identify symptoms such as weakness, fatigue, bruis- ing, anemia, infection, and many other disorders [11]. There are two means of counting blood cells, automatic and manual ([9], Jan- uary). The automatic means of blood cell counting uses complete blood count machine Hematology analyzer) or flow cytometry. However, in most developing countries like Ethiopia, blood count of a microscopic image is done by manual way, which is tedious, time taking and error-prone ([11,9], January). These errors lead to wrong diagnosis and treatment. The existing automatic blood

* Corresponding author at: Covenant University, Ogun State, Nigeria.
E-mail address: sena.okuboyejo@covenantuniversity.edu.ng (S. Okuboyejo).
Peer review under responsibility of King Saud University.

cell counting devices are expensive and do not show the structure of the blood cells, and are limited in the diagnosis of common blood disease like, malaria, leukemia, sickle cell disease. However, in recent times, blood cell counting is possible from microscopic blood images using image processing software either by computer or mobile phone. This image processing provides both the struc- tural and count information, but the basic challenge is image acquisition step.
One of the major advantages of automated systems is the reduc- tion of time consumed by manual systems and cost effectiveness. These days’ computer systems are replacing human being in most area which needs expertise. Since computer systems map the expertise knowledge, the errors due to less experience will be reduced. In this system, the time for image processing is very min- imal. For blood cell counting it take about 30 s. to 1 min. but using a manual system it takes around 10–15 min. There are automated machines to count blood cells, hematology analyzer machine, which are expensive for low resource setting areas. Not only the cost of the machine there chemical reagent is also expensive and not available in the market. They provide the count for RBC, WBC, Hemoglobin and platelets, but they didn’t provide the struc- tural information for the diagnosis of blood diseases like malaria and leukemia. Malaria is one of the major killer blood diseases in


http://dx.doi.org/10.1016/j.aci.2017.08.002
2210-8327/© 2017 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University.
This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).

most developing countries like Ethiopia, thus providing the struc- tural information and helping the diagnosis of malaria will have great contribution.
Historically, microscopic images can be acquired using a perma- nently mounted camera unit on a microscope, two main types of camera sensors are attached to the microscope; charge coupled device CCD) and complementary metal oxide semiconductor CMOS) [7]. In the past, CCD cameras were used for highest quality images. However, CMOS cameras have narrowed the difference in quality [7]. Presently, both camera sensors are used to capture more pixels than required for optimal photomicrographs with each generation of smartphones, there has been a significant improve- ment in their hardware and software specification [8,3,10]. Recent advances in smartphones include integrated camera utilizing CMOS sensors. We capitalize on the availability of smart phone with high quality digital camera to design a low-cost smartphone microscope adapter and develop an application to acquire and pro- cess microscopic images to support automatic blood cell count, medical diagnosis and e-consultation.

Review of related works

Hartman et al. [5] developed an iPhone application to facilitate rapid diagnostic pathology teleconsultation utilizing a smart- phone. The mobile application developed is only used for sending acquired microscopic image for teleconsultation. The developed mobile application has no image processing steps (for decision support system) to facilitate diagnosis for less experienced person- nel. Fontelo et al. [4] in their work, also presented the advancement of mobile networks and smartphones in developing countries. The paper explains 3-D printed mobile adapters for capturing micro- scopic images. Nine pathologists worldwide evaluated the images for quality, adequacy for telepathology consultation, and confi- dence rendering a diagnosis based on the images viewed on the web. The system lacked microscopic image processing for decision support. The system only discussed the quality of the image acquired from microscope using smartphone camera.
In Yang & Zhan [13], the integration of a Quantitative Phase Imaging QPI) method onto a smartphone platform and the applica- tion of imaging red blood cells was demonstrated. The adopted QPI method solves the Intensity Transport Equation ITE) from two de- focused pupil images taken in one shot by the smartphone camera. This system uses smart phone microscope for image capturing, and has no image processing steps for diagnosis and decision support system. The system presented in this paper uses ordinary micro- scope and smartphone for image capturing and uses image pro- cessing for malaria detection and blood cell counting for decision support system. According to Auguste & Palsana [2], The Open Mobile Telepathology System (OMT) is a combination of two com- ponents, the Pocket Electronic Health Record (pEHR) and the Mobile Whole Slide Imaging (mWSI) app. This system is more about image acquisition and transportation over the internet using mobile applications. The system has no image processing and deci- sion support system for blood cell counting and malaria diagnosis. In Reni [6], Malaria, a deadly disease which according to the World Health Organization (WHO) is responsible for the fatal ill- ness in 200 million people around the world in 2010, is diagnosed using peripheral blood examination. This work developed an auto- mated system for malaria detection which is comparable to man- ual diagnosis of malaria. The work uses Annular Ring Ratio transform for blood component identification. But the system lacks how to acquire microscopic image using smartphone and has no mobile application developed for decision support [14]. This paper demonstrates a compact and cost-effective imaging cytometry platform installed on a cell-phone for the measurement of the den- sity of red and white blood cells as well as hemoglobin concentra-
tion in human blood samples. Fluorescent and bright-field images of blood samples are captured using separate optical attachments to the cell-phone and are rapidly processed through a custom- developed smart application running on the phone for counting of blood cells and determining hemoglobin density. This system requires additional optical hardware components for microscopic image acquisition. In a point-of-care POC) setting, it is critically important to reliably count the number of specific cells in a blood sample [1]. Software-based cell counting, which is faster than manual counting, while much cheaper than hardware-based counting, has emerged as an attractive solution potentially applica- ble to mobile POC testing. This system explains how software- based blood cell counting is faster and cheaper than hardware based systems. However, the system has no microscopic image acquisition and processing steps for blood cell counting and malaria detection. Image processing steps were employed for blood cell counting to identify Leukemia [12]. Leukemia is diag- nosed with complete blood counts which is done by calculating all blood cells and compare with the number of white blood cells (White Blood Cells/WBC) and red blood cells (Red Blood Cells/ RBC). The system uses image processing algorithms such as thresh- olding, canny edge detection and color identification filters. This system lacks microscopic image acquisition steps using smart- phone camera.

Design architecture

The system design is a five step process involving image acqui- sition, image pre-processing, image segmentation, image post- processing, and blood cell classification as shown in Fig. 1. The graphical user interface was developed after the image processing steps.
Image acquisition is the first step of the system. Digitized images of the samples on the slides are acquired with a smart- phone camera which is mounted upon the microscope. High reso- lution images will better for detection of blood cell. The minimum image resolution accepted by laboratory professional was acquired by 4mpx mobile camera with the support of developed image pro- cessing application; therefore the application could be deployed in the low resource setting environment. The image acquisition is based on the mathematical expression:
f (x; y) = i(x; y).r(x; y)	(1)
Where f (x; y) : Intensity at the point (x, y),
i(x; y): Illumination at the point (x, y),
(The amount of source illumination incident on the scene).
r(x; y): Reflectance/transmissivity at the point (x, y),
(The amount of illumination reflected or transmitted by the
object)
0 < i(x; y) < ∞ and 0 < r(x; y) < ∞
However, microscopic image acquisition using smartphone camera needs an interface or adapter to create a stable system between the microscope eyepiece and the mobile phone. One of the challenges encountered while trying to capture microscopic images using a smartphone at the clinics is stability and focusing. This was resolved by designing a smartphone microscope adapter with no optical component using solid work software. The micro- scope eyepiece length and diameter are measured and used in the adapter to get focus point between the smartphone camera and eyepiece lens. Since the eyepiece is cylindrical, a radius of
1.5 cm and height of 4–5 cm was used. The adapter is flexible to cover all smart phones for microscopic image acquisition. Since the Smartphone camera is not always at the center, thus the adap- ter should have a movable holder for the phone from each side and





Fig. 1. System design block diagram.


bottom. In addition to this, the adaptor must have a hole (with radius of 1.5 cm) that allows the phone camera to see the eyepiece. The shape and type of material used for the adapter will be chosen based on weight. Fig. 2 depicts the adapter materials from wood and plastic.
Image acquisition on the mobile phone is done using the adap- ter, but for further image processing and to provide decision sup- port system, a computer or mobile telephone with 64 GB is used. Thus, to access the mobile phone camera directly from the com- puter, Droidcam software is used.
In the image pre-processing step, either the image or the video acquired during image acquisition step will be converted to differ- ent color space (color image (red, green blue (rgb) to gray). This conversion provides a possibility to see the dynamic range and intensity difference between the pixels. Normalization and his- togram equalization is applied to resolve both contrast and bright- ness problems during image acquisition. Adaptive filtering is applied to remove noise which is added at the time of capturing the microscopic images or videos. This noise can be dust particles that are present on the slide while preparing the slides. In the case of video processing, motion artifacts will be considered. Image seg- mentation involves applying the gray threshold function on both the gray scale image and video. The gray threshold function creates a binary image by minimizing the intra-class variation of the black and white pixels. The holes in the binary image or video are filled by using infill method, so that the binary image and video will be segmented. Since blood images are further processed for count and malaria detection, the segmentation process is very important. Once the blood image is segmented, it will cluster blood cells into white blood cells (WBC), red blood cells (RBC) and Platelet. From the segmentation result, it is easier to identify the shape and size change in the blood cells. The image post-processing step is to provide further information for the blood count and blood disease like malaria. This is used for the decision support system develop- ment. The part of the image or video at the border has less informa- tion and is removed from the binary image to reduce the processing complexity. The blood cell classification process groups blood cells into different components based on size. White
blood cells are big and covers around 14–17 pixels while red blood cells are smaller and cover around 4–7 pixels. Blood platelets are even smaller than red blood cells. For white blood cell detection and counting, both the red blood cells and blood platelets are con- sidered as background image and the area opening method is used. This method allows deleting all the objects with a size smaller than the structuring element. The structuring element will have a circu- lar shape and its size will be calculated on the basis of the objects average size in the image.
Graphical user interface (GUI)

The graphical user interface (GUI) is developed using Matlab R2013a software. The mobile camera is directly accessed from this part, which enables the user to record videos. Previously stored images and videos can be loaded and processed for further study even it can be send email automatically from the user interface.
Initially the system was designed and developed to run on com- puter to help the diagnosis of blood disease. Since smart-phones are available with enough internal memory space and can be extended using external memory space, the system can be used for point-of-care implementation. To link the application to pro- vide point of cares, we converted the developed Matlab GUI to Android application using MATLAB coder or MATLAB JA compiler. The application was tested using mobile phone with 32 GB mem- ory and the result was the same as that obtained from a computer system.
In the GUI depicted by Fig. 3, the preview button starts the smartphone camera and displays the image on the live camera axis. In the previewing stage, the laboratories technician focuses the stage and control the stage movement. The acquire button cap- tures microscopic images of the sample on the stage. The record and stop video buttons are to initiate and end video recordings for the sample while moving the stage up and down. It is very important when large numbers of images are required for analysis of the sample. The axes are used to display the live, acquired and processed images. This can be also used for zooming the images to see features which are not visible during acquisition.





Fig. 2. The adapter prototype from wooden and plastic materials.




Fig. 3. Graphical user interface of the application.


The load button puts previously acquire images to the system. This can be for further processing, learning purpose or to send the image via Email. Blood count and malaria buttons are impor- tant for blood sample diagnosis. When a count of the blood cells is required, blood count button is used and it opens a new page where blood images are input and the RBCs, WBCs and Platelets counts are automatically calculated and displayed. In addition it will display the corresponding histograms for each blood cell type. The malaria button adds blood images and automatically provides support whether the sample image contains Plasmodium or not.

System deployment, testing and evaluation

The system was tested in two clinics: Ayu specialized Higher Clinic and TesfaMariam Medium clinic. The laboratory technicians were involved on the discussion and testing of the system. This prototype uses any brand of smartphone, the higher the camera pixels, the higher the resolution and magnification. Currently the Smartphone is used only for image acquisition, thus memory of the smart phone has no effect. The memory can be expanded to 64 GB (it could be external) when the smart phone is for both image acquisition and image processing. The laboratory techni- cians were trained on the installation procedure, how to access the mobile camera directly on the laptop computer and how to focus the phone camera with the microscope eyepiece for better image acquisition. Fig. 4 represents the system set up. The user guide manual was developed for clinical setup use. The manual was sent for comments to laboratory technician and based on their feedback received the final version of the document was prepared and tested in the clinical setup.
In Fig. 5 below, a laboratory technician is seen using the image processing software developed using matlab R2013a, for image acquisition and processing. The brightness, resolution and magni- fication of the images can be varied using the microscope basics and the effects seen on the laptop screen. Fig. 6 depicts an image captured using the system.

Result and discussion

Both the adapter and the software are tested for image acquisi- tion and processing. The system is very simple to use for laboratory



Fig. 4. System setup.




Fig. 5. A laboratory technician using the system.




Fig. 6. Acquired microscopic images using mobile phone camera with 5 mega pixels.


technicians, it needs about 15 min training and supportive manual which explains how to use the system and basic software mainte- nance. Both clinic laboratory technicians agreed that ‘‘the imple- mentation of the system will speed up the diagnosis process”. Since the manual way of diagnosing microscopic images is tedious, time taking and needs expertise, the implementation of this sys- tem will make simple the diagnosis process and provides decision support for malaria and blood cell counting. Both clinic laboratory technicians also said the implementation of the system will reduce the cost of the laboratory equipment like Hematology analyzer and Flow Cytometry which are used for cell counting. Not only the ini- tial cost of these laboratory equipment, but also their maintenance cost which is equally expensive.
As shown in the image acquisition section, the adapter should be placed first and adjusted till there is minimum shadow on the image. The quality of the images acquired depends on the slide preparation, even with poor slide preparation, better images were acquired when compared to the manual diagnosis. The better the quality of the image acquired, the better the processing for both malaria diagnosis and blood cell counting. The major factors that affect image processing are dust particles on the slide and the thickness of the sample. During image acquisition, the system will automatically and sequentially store the image using patient ID number and date in a designated folder, thus, easy retrieval. The cases are automatically labeled by a system-generated ID which will be used for laboratory process. This ID is also recorded in the patient registration book as well as on the patient card obtained from the reception before processing the application.
Table 1
A comparison of the acquired and processed images.



Since the system can easily interface with a computer, it is very easy to store copies of the acquired images in the computer hard disk daily. This will reduce the effect of memory size on the phone’s battery life. Most Ethiopian health facilities are powered either from the main electric supply or from solar system and this system will be deployed to the health centers and above. The basic challenge in implementing this system in Ethiopia is, most labora- tory technicians are accustomed to the manual diagnosis approach and are not willing to accept new technologies easily. But this can be addressed through training and consulting about the system and its advantage over the existing one. The system was tested for both blood cell counting and malaria detection using the fol- lowing image (Fig. 7). For malaria detection, both the manual sys- tem and the mobile based system result was the same, malaria was not found. The blood cell counting of the system was compared not only with the result from the manual system but also with the result from the automatic blood cell counting machine (Hematol- ogy analyzer) and the result is given in Table 1.
During the interview process from junior to experienced labora- tory technicians, the minimum time required to count WBC in manual system was ranged from 10 to 20 min. The automated machine (hematology analyzer) takes 2–4 min that depend on the machine model. In the developed mobile application the time required to count RBC and WBC was ranging from 30 to 60 s that is less than 1 min. The result obtained by the mobile application was close to both systems. As a conclusion the system computa- tional time as compared to manual system is 1500% times better than the manual and 300% than the automated system.

Implication of the study

This project provides a mechanism of acquiring microscopic images using smartphone camera and speeds up the diagnosis of blood diseases. It can be used as a system of standardizing in health institutions in the diagnosis of blood disease. For telemedi- cine, the acquired image and blood cell count can be sent to differ-




Original image	Gray Scale image	Inverted image

Fig. 7. Various image formats of the blood sample.

ent health sectors for consulting, diagnosing or experience sharing. The system also serves as an educational tool for laboratory tech- nicians to revisit the image from the database and learn for the future. In addition to the above advantages for medical purpose, the image acquisition system can be used by research institutes for further processing. Rather than transporting the particles or molecules under investigation to other advanced centers, it is pos- sible to send the microscopic images and real videos in short per- iod of time and obtain response as soon as possible. In most low resource setting environment internet coverage is limited; how- ever the mobile coverage and accesses are widely applied in most rural area of developing countries including Ethiopia. Most of smart phones now days have 3G network for internet access to connect to centralized system for storage and share data.
Since the implementation of this system creates standardiza- tion for blood disease diagnosis, the government will have a chance to control the health facilities easily. It also provides microscopic image acquisition and storage for patient data which will be used by medical personnel and hospital manager for evidence of their diagnosis result and medication consequence. Even the patient can take his microscopic images to different medical personnel in different health facilities for further investigation.

Conclusion

This paper presents a Smartphone telepathology system for counting the blood cells and malaria diagnosis. The proposed sys- tem of blood cell counting and malaria diagnosis is fast, cost effec- tive and produces accurate results in low resource environment. The system can easily be implemented anywhere in medical facil- ities with minimum infrastructure and it is very user friendly. This system also recognizes overlapping blood cells and counts them independently.
References

D. Ahn, N.S. Kim, S. Moon, T. Park, S.H. Son, Optimization of a cell counting algorithm for mobile point-of-care testing platforms, Sensors 14 (2014) 15244–15261.
L. Auguste, D. Palsana, Mobile whole slide imaging (mWSI): a low resource acquisition and transport technique for microscopic pathological specimens, bmjinnov-2015 (2015).
L. Bellina, E. Missoni, Mobile cell-phones (M-phones) in telemicroscopy: increasing connectivity of isolated laboratories, Diag. Pathol. 4 (19) (2009).
P. Fontelo, F. Liu, Y. Yagi, Evaluation of a smartphone for telepathology: Lessons learned, J. Pathol. Inform. 6 (2015).
D.J. Hartman, A.V. Parwani, B. Cable, I.C. Cucoranu, J.S. McHugh, B.J. Kolowitz, et al., Pocket pathologist: a mobile application for rapid diagnostic surgical pathology consultation, J. Pathol. Inform. 5 (2014).
S. Kareem Reni, Automated low-cost malaria detection system in thin blood slide images using mobile phones, University of Westminster, 2014, Doctoral dissertation..
S. Park, L. Pantanowitz, A.V. Parwani, Digital imaging in pathology, Clin. Lab. Med. 32 (4) (2012) 557–584.
S. Park, A. Parwani, M. Satyanarayanan, L. Pantanowitz, Handheld computing in pathology, J. Pathol. Inform. 3 (15) (2012).
Putzu, L., Di Ruberto, C., 2013. White blood cells identification and counting from microscopic blood image. In: Proceedings of World Academy of Science, Engineering and Technology, 73, 363.
Ritter N, Cooper J, 2007. Segmentation and border identification of cells in images of peripheral blood smear slides. In: Proceedings of the thirtieth Australasian conference on computer science, 62, 161–169.
F. Sadeghian, Z. Seman, A.R. Ramli, B.H. Kahar, M.I. Saripan, A framework for white blood cell segmentation in microscopic blood images using digital image processing, Biol. Proced. Online 11 (1) (2009) 196.
Suryani, E., Wiharto, W., Polvonov, N., 2015. Identification and counting white blood cells and red blood cells using image processing case study of leukemia. arXiv preprint arXiv:1511.04934., 1511.04934.
Z. Yang, Q. Zhan, Single-shot smartphone-based quantitative phase imaging using a distorted grating, PloS One 11 (7) (2016).
Zhu, H., Sencan, I., Wong, J., Dimitrov, S., Tseng, D., Nagashima, K., et al., 2013. Cost-effective and rapid blood analysis on a cell-phone. (Vol. 13).
