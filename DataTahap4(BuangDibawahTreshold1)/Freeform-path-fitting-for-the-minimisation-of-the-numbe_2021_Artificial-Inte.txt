respect to the field and obstacle contours, respectively. In final evalua- tion experiments it is set w 36m and ε = 99%, which implies a spatial interpolation grid of at least 5 m along headland and obstacle headland paths and 10m along interior lanes. Note that when collecting field and obstacle contour data points from real-world fields, these typically are already recorded to be sufficiently well shape-defining. Therefore, interpolation points along the field and obstacle contours are here added spatially only for improved constraint checking. The field and

fore discussing constraints in detail, two more implementation details are therefore described. First, the last point of any interior lane is linearly ex- trapolated (leveraging the penultimate point for the direction) to obtain the intersection with the headland path. Second, after fitting of any inte- rior lane its coordinates are extended by above discussed spatial interpo- lation technique with spacing according to Eq. (2).

Fig. 3. Visualisation of real-world transitions between headland path and interior lanes. As illustrated, the transitions between headland path and interior lanes can be “messy” in the sense that these often cause an increased amount of compacted field areas due to crossings of tyre traces. This motivates the minimisation of such transitions, and therefore to minimise the number of interior lanes as a proxy.

Fig. 4. For very tight angles between headland path and interior lanes undesired hairpin turns may become necessary due to the limited agility of in-field operating tractors. The more transitions between headland path and interior lanes the higher also the probability that such turns may occur, in particular, for complex fields. This provides the second motivation for the minimisation of the number of interior lanes by freeform path fitting.

The operating width w is given by available machinery hardware setup. For example, for spraying applications on fields growing cereals or rapeseed in central Europe it is often w 36m or w 24m. To sum up, for the proposed method three hyperparameters occur: ε ∈ [0, 1], Δθmax ∈ [0, π] and Δk > 0. For the latter a lower bound can be determined as Δk > w . Then all three hyperparameters are lower bounded. The choice of ε = 99% as discussed above is reasonable for an accurate interpolation grid. To account for two operating widths

is defined by only two points for the former case for the generation of straight interior lanes. For rectangular field shapes this method is opti- mal. However, for the general case of arbitrarily shaped fields optimality of straight interior lanes is not guaranteed. Since the problem class of straights fitting is included as a subset in the problem class of freeform path fitting, the latter will always be at least as good as the former for any objective, including, e.g., minimisation of total accumulated path length of interior lanes or total travel time along interior lanes. The crit- ical disadvantage of freeform path fitting is the requirement of at least one shaping hyperparameter to constrain desired turning or curvatures of resulting paths. In contrast, for straights fitting no such shaping hyperparameter is required. Instead, it must solely be accounted for the physical machine operating width.

Fig. 6. Results for 10 real-world fields. The assumed operating width is w = 36m. Optimal solutions of fitting straights and freeform paths for the minimisation of Nl are displayed in the left and right subplot for each field, respectively. Axes are denominated in meters. Latitude and longitude of all 10 fields are summarized in Table 1.

Field data was obtained from satellite images in Google Earth (http://earth.google.com) by tracking field contours and contours of all in-field obstacle areas (such as e.g., tree islands), before exporting those raw location data points as .kml-files and feeding it to proposed algorithm. Fields were selected to emphasize effects of the compared path fitting methods on a variety of very differently shaped fields as well as with and without in-field obstacle areas. The latitude and

Field sizes vary between 10.3 ha and 62.9 ha. Results are summarised in Fig. 6 and Table 2. The following observations are made. First, savings range from −1 lane to -9 lanes. Percentage-wise, this implies the number of interior lanes could be reduced by −7% to

Second, while in some scenarios the optimised freeform path plan- ning is intuitive such as for Field 8, it is surprising in other cases such as for Field 4. There are also subtle details about the exact optimal length of reference paths. In general, it therefore seems to be difficult to devise a reliable rule of thumb to select optimal reference paths. Thus, for gen- eral field shapes it clearly is best to turn to a data-dependent numerical optimisation method such as the proposed algorithm.

Fig. 7. Illustration of the effect of the rotation angle of straight interior lanes on the total number of interior lanes Nl for Field 1 in Fig. 6 and w = 36m. Note that Nl varies within a large range of 14 to 24 lanes.

Ultimately, after having fitted interior lanes within field contours one can on top (i) determine field coverage path plans, e.g., according to the methods in Plessen (2018) and Plessen (2019), before (ii) smoothing out trajectories by accounting for actuation constraints of the in-field operating vehicle, for example, according to the control methods in Backman et al. (2012) or Plessen and Bemporad (2017).

The most obvious disadvantage of freeform path fitting is the in- creased amount of steering that is needed along interior lanes. However, this is largely relevant only as long as there is a human vehicle driver. Currrently, such a driver would have to apply significantly increased ef- fort for freeform path tracking. However, for an envisioned future with fully automated robotic field coverage this disadvantage is dismissed.

This paper contributed to the task of in-field path planning within agricultural fields by proposing a freeform path fitting method for the minimisation of the number of transitions between headland path and interior lanes. Therefore, as a proxy the minimisation of the number of interior lanes was selected as optimisation criterion. Spatial interpola- tion distances for pruning during the generation of interior lanes and constraints for the shaping of freeform paths were discussed. The poten- tial of minimising the number of interior lanes by freeform path fitting was evaluated on 10 real-world fields and compared to the more com- mon technique of fitting straight interior lanes. Field sizes varied be- tween 10.3 ha and 62.9 ha with some including in-field obstacle areas. For an operating width of 36 m optimal straights fitting resulted in a range of between 9 to 39 interior lanes. In comparison, freeform path fitting resulted in savings in the range of −1 lane to −9 lanes or, perentage-wise speaking, in a reduction of the number of interior lanes by −7% to −67%.

This paper focused on the very clear to quantify number of interior lanes as the optimisation criterion, which served as a proxy for the minimisation of the number of transitions between headland path and interior lanes. For future work an alternative objective such as the total accumulated path length along interior lanes may be considered. Then, ideally three consecutive layers are evaluated for determining the optimal grid of interior lanes fitted within field contours. These three layers represent (i) selecting a reference path candidate as partial segment of the headland path and generating a corresponding grid of interior lanes as discussed in this paper, (ii) determining a routing solu- tion for the coverage of all lane segments, before (iii) generating smoothed out trajectories accounting for agility and actuation con- straints of the in-field operating vehicle, whereby the final detailed tra- jectory must also be planned such as to minimise spraying gaps. Similarly to as presented in this paper, it must then be iterated over ref- erence path candidates before the total path length minimising solution is returned.

