A magnetic microsystem has been designed on a chip to demonstrate the improved performance of an integrated Hall element. The major deficiencies of relatively poor performance of an integrated Hall element has been upgraded through the use of a high efficiency, integrated micro coil, which has been optimized using multiphysics finite element tools. An extensive characterization of the integrated Hall element has allowed the creation of the most complete simulation model, which is usable both in a high level system simulator as well as in a detailed circuit simulation. All results were verified by measuring the fabricated ASIC.

For current measurements the typical requirement is a linearity range extending over five or six decades. The required linearization and absolute accuracy for a magnetic force measurement is in the range of 0.1% /1/, and for the position or rotation angle a 12-bit resolution is a typical specification /2/. There are two or three

possible sensor types of magnetic field available for integration on a chip. There are: Hall-effect sensors, Hall elements near field micro coils, and large, integrated coils for AC field generation /3/. The Hall element and near field micro coil are investigated in the paper.

Sensitivity. It is well known that the sensitivity of a Hall element is poor compared to MR or GMR sensors, which prevent many designers from using them in their magnetic circuits. However, we will demonstrate that in most cases it is possible to effectively compensate for this deficiency. The typical sensitivity of an integrated Hall element is around 100μV/1mAmT (100V/AT) in a standard CMOS process, while its noise is about 10nV/¥Hz. This means that the equivalent noise is §10nT¥Hz at 1mA Hall element bias current. The achievable dynamic range in a 1Hz frequency bandwidth is over 100dB.

An important parameter is also the temperature coefficient of the Hall element sensitivity, which is highly non-linear and very process dependent. Unfortunately, the sensitivity is also dependent on the mechanical stress caused by the plastic package. There are few possibilities of converting such an inaccurate sensor element into a high precision sensor system. The most promising approach is an alive sensor sensitivity calibration using a near field micro coil.

Last but not least, the residual offset of the Hall element is an issue to be considered. The root cause of it is the asymmetry of the four terminal devices, which can be modeled as a resistor bridge. A well-known spinning technique /4/ is the way to minimize the offset. Less known is a requirement that the spinning needs to rotate around a fixed voltage potential of a central sensor point, as shown in Figure 1.

Finally, the remaining offset voltage is trimmed with both a DC value and its temperature coefficient. With such arrangements the achievable offset can be reached in the range of ±10μT. An important issue to design a Hall-element sensor is to have an extensive and well characterized simulation model. The complexity of the model is seen in Figure 2.

The key function of near-field micro coil is to generate a relative strong reference magnetic field on board to be used for either online or offline Hall element sensitivity adjustment. The offline adjustment can be performed either at wafer sorting or final testing of the device by applying a reference current to the coil and measuring and trimming the Hall element response to the desired value. The application of this method is simple, however it does not cover the temperature effect of the sensitivity, nor the sensitivity variation due to package pressure effect.

The most important parameters affecting the efficiency parameters are: numbers of coil turns per metal level, the number of metal levels, the coil area, and its position to the Hall element. The area of the Hall element has been reduced to 14μm by 14μm as shown in Figure 4, and was optimized for the 0.35 CMOS mixed signal technology /5/.

In Figure 5a the 3D 12-turn micro coil layout is presented, and in Figure 5b a micro photograph of the element is shown. The four terminal Hall element is upgraded to the six terminal providing an on-board reference magnetic field generation of 5mT at a 10mA coil current. This is a decent level for a reference field, which cannot be compromised by noise even if a very short reference pulses would be applied. When using a bipolar reference pulse the problem of offset voltage is eliminated.

Furthermore, the reference magnetic field should not interfere with normal measurements, so it is necessary to perform the calibration at the higher frequency, which is outside the operating bandwidth of the system. A good candidate is a spinning frequency, which is usually up to two decades above the operating corner frequency of the magnetic system. If the reference current pulse starts in the first spinning cycle, it would contribute a positive reference voltage to the output, so the output voltage would be the sum of signal voltage Vsig and the reference voltage Vref. The resulting output voltage Vout is:

This is an elegant, out of band generation of the reference voltage without disturbing the normal operation. The error signal is produced by comparing the residual reference voltage to a required voltage and simply adjusting the sensitivity of the system to an accurate level by changing the Hall element bias current. A high level model has been designed and the result of simulation is shown in Figure 6. The measured results match very well with the simulation, proving that it is an effective way to calibrate the sensor on-line, without disturbing the normal operation.

The red line is the preset reference voltage to be reached at reference field, generated by the micro coil. The blue line is the actual signal value reaching the required value after the self-regulation is completed. The step shows the digital or discrete gain settings. Therefore the output is alternating around the final value. This alternation frequency is outside of the system bandwidth and it is easily filtered out.

