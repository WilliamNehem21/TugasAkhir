This paper describes a System-on-Chip(SoC) for pressure balance measurement in total knee arthroplasty (TKA). This SoC consists of 8051 processor, ADC, RF transceiver with 3Mbps MSK transmitting and 64kbps OOK receiving, SPI interface for transmitting the data between the SoC and EEPROM, SRAM acting as memory buffer and some other peripherals. Fabricated in 0.18μm CMOS, the area of the SoC with pads is up to 3 mm2*3 mm2.

It’s reported that 90% of the population over the age of 40 suffers from some degree of degenerative joint disease[1]. Artificial biological material is used to replace the bone and cartilage of the knee that has been damaged in total knee arthroplasty. It has a more than 30-year history in the treatment of arthritis of one compartment of the tibiofemoral joint. The total of knee replacement surgery had been more than 600,000 in 2007. There will be nearly 1.4 million knee replacement performed in the year 2015[2].

The artificial knee implant may fail because of attrition, loosening or misalignment. As a result, recover surgery is needed, which will bring more pain to the patient. In order to diagnose the implanted knee, to evaluate operating method of TKA, or to evaluate design of knee implants, many researchers have investigated the problems of total knee arthroplasty. [3]-[7] The imbalance of knee implants will induce the life of the artificial knee implants. And in this paper, we propose a SoC design for pressure balance measurement in total knee arthroplasty. Fig. 1 shows the designed device performances as a monitor by measuring the pressure on both sides of the knee implant. There are 3 sensors each side. The sum of the sensors is the pressure values. In this paper, we will focus on the implementation of the SoC.

Figure 1 shows the system architecture of the device. The device consists of 6 sensors, an EEPROM and a design SoC chip. The sensors are divided into a couple of parts equally. The range of each sensor is 0~1.5Kg, and then the range of each side is 4.5Kg. At first, the designed SoC chip receives the data from the sensors. Second, the received data will be packaged by some encoders integrated in the SoC chip. At last, the packaged data will be transmitted by the RF transmitter integrated in the SoC chip to the base station outside the device.

The digital core of the SoC is designed based on DW8051 IP core which is higher performance than traditional 8051 microcontroller. [8] The DW8051 IP core executes per instruction in a 4-clock bus cycle, as opposed to the 12-clock bus cycle in the traditional 8051. And this microcontroller manages the MAC, SPI interface, ADC interface and other digital blocks by reading/writing Special Function Registers (SFRs).

This SoC integrates a 4KB SRAM and a 256B SRAM. The size of the SRAM is determined by recognition task, while the size of the SRAM is determined by the size of program. Because the size of software is less than 4KB, we utilize a 4KB SRAM to storage the software. Once the system is powered up, it initializes. The boot-loader is executed to download the software from the EEPROM chip to the 4kB SRAM of the SoC.

The MAC consists of transmission and receiving processing block. Figure 4 shows us the main functions of the MAC. In the transmission processing block, the transmitted data converts to the cyclic redundancy check (CRC) code and then the Reed-Solomon (RS) code. The RS code will be whitened before transmission. The receiving processing is inverse process of the transmission processing. The received data will be decoded by the RS decoder and the CRC decoder. The main function of the MAC is to package the data received from the sensor array.

Figure 5 shows the format of the package. The complete package consists of a preamble, a header and two data blocks. And each data block contains a data part, a CRC part and a RS part. In the data part of the data clock, 112 bits is valid, and the last bit is invalid.

FIFO memory is a key component of the SoC, which is commonly used for buffer and flow control. A classical asynchronous FIFO is implemented. [9] Asynchronous FIFOs are used to safely pass data from one clock domain to another clock domain. The FIFO design in this paper uses 6-bit pointers with 32 write-able locations to handle full condition, and uses 4-bit pointers with 8 read-able locations to help handle empty

condition. The data to be written is one byte (8 bits), while the data to be read is four bytes (32 bits). Figure 6 shows the full and empty conditions of the FIFO. On reset, both pointers are reset to zero. As soon as the first data is written, the empty flag is cleared. When the write pointer has wrapped around one more time than the read pointer, the FIFO is full. If the high 3 bits of the write pointer is equal to the read pointer, the FIFO is empty.

The whole integrated SoC is realized based on a 0.18μm CMOS process using the above described circuit principles. The final layout is shown in Figure 10. The die size is 3mm*3mm. Figure 8 shows the simulation result of the digital core of the SoC. SO is the output of EEPROM, and the figure in the white block shows the downloading of the program. TXD is the output of TX of MAC which will be transmitted by the RF, and it is a key signal to judge the output of the SoC wrong or right.

The SoC designed for pressure balance measurement applications in total knee arthroplasty is fabricated in UMC18 CMOS process with a die size of 3mm*3mm. The SoC integrates all building blocks---including RF transmitter, ADC, DW8051, ADC interface, MAC, MAC controller, boot-loader, SPI interface for EEROM, MUX, LDOs and BandGap. We can use this chip to measure the pressure applications in total knee arthroplasty. And it is high level of integration.

