In the process of absorbing samples of automatic clinical analysis instruments, it has a lot of problems with single direction method, such as low accuracy, inaccurate of liquid absorbed, short sample and tip blocked. According to this problem, this paper applies dynamic method of level detection to capacitance sensor. In the method, the influence of the inertness of the motor drive and microcapillarity caused by the infiltration between probe and the liquid are reduced. At the same time, a grey dynamic filtering based on dynamic GM (1, 1) is used to improve the stability of capacitance sensor output. Finally, experiments are performed to verify the feasibility of the method. Compared with single direction method, the dynamic method improves the accuracy from 0.3mm to 0.1mm.

The probe capacitance sensor is widely used in liquid level detection system, shift from automatic clinical analysis of biochemical analyzer, enzyme immunoassay analyzer, to urine analyzer instrument trace, it is a contractive liquid level detection method. In 1970, the Greiner Elect Ronic Company of Switzerland first introduced capacitance method to testing equipment, the technology becoming commonly used in instrument manufacturers. Companies as Abbott, Hitachi, Tecan, Hamilton, Beckman, Mindray have developed different characteristics of the liquid level detection technology based on capacitive principle.

two plate insulation medium thickness,  as permittivity medium .Probe type capacitance sensor is different from traditional plate capacitance sensor, probe is a conductor, there is capacitance effect between it and the sample cup at the bottom of the metal frame, thus a capacitance sensor is formed. The filling the medium of electrical insulation is air, and due to the shape if probe is irregular, it is unable to establish a accurate mathematical model, so we just get a very rough estimation [4-7].

Because of the small area of the tip position of the probe when the probe is not touched with the liquid surface of the sample cup, the capacitance value is very small. When the probe is exposed to the sample cup of the liquid level, the sample is equivalent to a good conductor, the sample area of the bottom of the metal as a capacitor plate with the sample cup rack form capacitance effects; the equivalent plate area suddenly becomes larger, so the capacitance value suddenly becomes larger. Applications need to be liquid to be measured as a plate at one end, it is only be used for liquid level detection of conductive liquids. Capacitive

When the probe is ascend slowly, due to the liquid and probe adhesion the liquid doesn’t release probe immediately, even though at the end the probe is higher than the level, the probe won’t release liquid until the adhesion is less than the probe with the liquid gravity, the probe position has been higher than the level of a few millimeters height. To determine the distance that probe carries on and off the liquid from liquid surface is what we need to study and solve. Situations of probe contacting and leaving from liquid can be shown in figure 2 [1].

Dynamic measurement method is characteristic of that the probe in the liquid surface dynamic tracking, probe downward movement and detect liquid level, when exposed to the liquid surface and capacitance sensor output variation is greater than the judgment standard, the probe stop moving immediately, and then upward movement preparation from liquid surface. When capacitance sensor output change less than judgment standard, it’s concluded that the probe leaves liquid surface completely. The probe goes downward movement again, repeat level detection process. Probe heads down in small amplitude reciprocating motion, measuring liquid level height dynamically. Dynamic method uses motor inertia of positive & negative fast switching to reduce unidirectional movement, and eliminates motor motion inertia by controlling motor movement up and down to the same distance, thereby eliminating motor motion inertia to the influence of liquid level detection.

Due to the circuit operation process of electromagnetic interference and the existence of noise in motor movements, capacitance sensor output signal contains a lot of noise. The system noise amplitude maximum 30mV, the noise will have a great influence in the judgment of whether or not the probe comes into contact with liquid surfaces. A lot of experiments show that the phenomenon of infiltration caused by capacitance sensor output tiny fluctuation amplitude of about 10mV, the noise of the system will flood the small fluctuation and could not to be used for analysis. In order to improve the accuracy of capacitance sensor output value that TMS320F2812 sampled, this paper uses the dynamic filtering algorithm based on the gray GM (1, 1) model for sampling result processing, effectively reduced the capacitance sensor output of burr, disturbance and invalid signals. Grey dynamic algorithm is suitable for solving poor information and uncertain problem, so grey dynamic filtering algorithm can guarantee capacitance sensor output change of real-time, and the judgment of the capacitance sensor output value changes timely.

introduced by the influence of the tiny fluctuation, and through a lot of experiments, we finally determine 0.1V as standard in experiments. ADC module of TMS320F2812 starts sampling capacitance sensor output values when probe contacting liquid level or goes from liquid level, slowly.

Conclusion: We can get the actual position from the capacitance sensor output change curve that the motor stopped. Compare the actual location that the motor stopped with the real liquid level position, we can come to the concluded of the error that motor motion inertia brings into as is shown in table 1. From the table we can see that when the probe starts detecting liquid level from the same height, the faster the motor running, the larger error that the motor inertia cause. Draw up table 1, the curve is shown in figure 4. The error that motor movement inertia introduced and the speed of motor does not have linear relationship. The movement loader is different according to different application environment, this paper can't figure out a general use error calculation formulation

As shown in figure 5, choose the same variation 0.1V as liquid level detection standard, and conduct the measurements with unidirectional and dynamic method respectively. In the figure of capacitance sensor output values, the heavy line stands for the unidirectional method while the fine solid line stands for dynamic method. From the unidirectional measurement curve can see, the error that motor movement inertia introduces, keeps motor going into liquid deeper, meanwhile capacitance sensor output values change for 0.48V. From dynamic measurement curve we can see that, the movement that motor goes up and down for the same distance can offset the error which introduced by motor motion inertia, so the depth that motor goes into the liquid is shallow, and the capacitance sensor output variation is 0.26V.

For the selection of standard value, there is a need of comprehensive consideration of the motor motion inertia and the error introduced by infiltrating the influence of the tiny fluctuation. Contrast to unidirectional method curve, dynamic method can effectively eliminate the error introduced by motor motion inertia, meanwhile the smaller the standard value chose, the better motor motion inertia error is eliminated, however if the standard value is chose too small, the errors introduced by infiltration phenomenon, will influence the measurement results greatly. So the selection of standard value should be in avoiding infiltration phenomenon influence under the condition of the maximum degree of eliminating motor motion inertia error. In this paper, we finally determined 0.1V as standard in the experiment.

capacitance sensor output is improved by noise filtering of the sampling results, which ensure the stability of capacitance sensor output value variation to provide accurate judgment. At the same time through a lot of experiments to choose the best variation as liquid surface detection standard value, we can effectively eliminate the error introduced by phenomenon of infiltrating. Finally, we can detect liquid level accurately, in dynamic measurement method for probe type capacitance sensor, and minimize carry pollution caused by probe hang fluid.

