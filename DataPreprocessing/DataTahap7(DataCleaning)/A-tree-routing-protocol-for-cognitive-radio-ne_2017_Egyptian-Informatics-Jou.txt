we can overcome this problem and utilize the unused radio frequency band efficiently by applying the concept of cognitive radio(cr) that has been proposed by mitola. mitola has proposed that spectrum holes can be best used by permitting unlicensed users to access the spectrum band when the licensed users are not available. the licensed users are called primary users(pus), whereas the unlicensed users are called secondary users(sus) or cr nodes. the pu is the user that has absolute authority and higher priority to use the spectrum band at any time and any place. the su is the user that uses the spectrum band as a visitor only at the time that pu is not available.



in this paper, we apply a tree routing protocol for cognitive radio network(c-trp). a tree-based routing is used before for large-scale wireless networks. for example, it is used in ieee 802.16j in which the wireless network type was used in japan, and the wireless land type operates on 2.4 ghz band and the zigbee standard for sensor wireless network.



node sends periodically a root announcement(rann) messages to all nodes. when a node receives rann message, it caches the parent that sends this message as a potential parent. then, each node selects one parent from potential parents based on the best path metric from the node to the root node.



the authors proposed two routing decision schemes for link metric calculation. the first schema is global decision schema. the global decision schema is a metric for route selection from end to end. whereas the second one called local decision schema, which selects the best interface for transmission, based on least load interface.



our proposed c-trp is communicated among all connected nodes on a spectrum band. each node executes the c-trp based on information received from other neighboring nodes. the algorithm chooses a reference point in the network and calculates all the routes to that reference point. when redundant paths are found, the c-trp algorithm picks one channel by which to forward its messages and disable, or block, forwarding on the other channel to avoid the interference and achieve the fair distribution of spectrum among sus to let other su found available free channels. many works[23,24] have considered the criterion of maximizing throughput fairness among sus.



as its name implies, c-trp computes a tree structure that spans all nodes in a specific spectrum band. redundant channels are placed in a blocking or standby state to prevent data forwarding. the node network is then in interference-free condition. however, if a forwarding channel fails or becomes unavailable(primary user occupies it or other secondary user use it), the proposed algorithm recomputes the spectrum tree topology so that the properly blocked channels can be reactivated(channel switching).



each node has its unique node-id in spectrum-tree. the node-id of node is{a0 a1... an}, where a0 is the number of spectrum band in which the spectrum-tree is formed, and it is also the node-id of the root in this spectrum tree.(n): is the hop number



when the next-closest parent nodes receive the ra message, it adds its node cost to path-cost value and rebroadcasts the ra message with new accumulative path-cost. the path-cost value is incremented by each node along the tree down. each node chooses the lowest channel to become root channel to send data on it to the root node.



in this section, we evaluate the performance of the c-trp protocol by numerical simulation via network simulator ns-2 with an extension to support multi-hop multi-channel cognitive radio environment. the ns-2 visual trace analyzer is used to analyze the simulation results which are stored in ns-2 trace file. the simulation is carried out under different network settings, environments e.g. channel conditions, number of cr nodes.



when the node seeks to forward packets, it balances between assigning new channels and using the currently active channel. if the cr nodes use the new channel, it will avoid the queuing delay but cost the switching delay, else if the cr nodes use the current active channel, it will avoid the switching delay but it will cost the queuing delay. this load balance distributes the traffic load between the available channels that lead to decrease the eted. on the other hand, the ctbr and stod-rp use the same channel along the path from end to end.



