mapping technology. A typical mobile LiDAR system usually consist of many kinds of sensors such as GPS positioning system used for obtaining the position of carrier, inertial navigation system(INS) used for obtaining the attitude of carrier, laser scanner used for getting the distance and angle of the scanning spot and digital camera used for capturing target texture [1-3]. As the foundation of the whole system, data acquisition is one of the most important parts in the mobile 3D laser scanning system. Current researches on mobile LiDAR system are focused on system integration and system application, but little research work on data acquisition. In practical work, data acquisition usually has been completed by programs which have been offered by the manufacturer of each sensor. This will cause some problems such as complex to operate, the time difference between starting time of each sensor is big, difficult to unify and so on. Meanwhile, it also reduces the integration between the performances of the system. Therefore, it is necessary to design the data acquisition software for the overall system.

Relying on data acquisition software offered by sensor manufacturers, 3D laser scanner acquisition has some problems such as the complicated operation, lower integration, and poor portability and so on. In order to solve these problems, this paper designed and implemented a multi-sensor integrated mobile 3D laser scanning data acquisition system using Qt multithreading mechanism and serial programming techniques to set up 3D laser scanner parameters and acquire and save multi-sensor data. This system also could be used on different platforms.

Using RS-232 to USB convertor to connect the GPS receiver to the data acquisition computer and using RS-485 to USB convertor to connect the INS to the data acquisition computer. The laser scanner is connected to the computer through USB. Besides, access the GPS synchronization signals to the INS external sync signal input terminal, meanwhile the GPS synchronization signal is used to trigger the digital camera automatically.

In this paper, multi-threading technology achieves the concurrency function for multi-sensor data acquisition at the software level. Multithread technology not only ensure each of sensors to get the data independently, but also improve the efficiency of multi-core computer utility. Because that Qt does not have specific serial control class, this paper uses the third party QextSerialPort class to complete the control of the serial port. This paper uses Qt 4.7.2 version and Qt Creator 2.1.0 completed the development of the system

Begins execution of the QThread by calling run().Usually we should create an instance of subclass of QThread and reimplement the run() function. Then calling start() function to start execution the thread, the start() function will default call the run() function. Note here that in the laser scanner thread we use the API provided by the manufacturer of the laser scanner to achieve the setting of the scanning range and scanning parameters of the laser scanner. The thread synchronization can use mutex QMutex to ensure that at any time and at most there is only one thread can get the mutex. Qt provides a convenient class QMutex Locker used to lock and unlock the QMutex automatically.

This paper relates to three data acquisition threads, so we should create the relevant serial port object to constructors of each thread and initialize the serial port. The QextSerialPort class provide the struct PortSetting to set the baudrate, parity, databits, stopbits, flowtype and timeout of the serial port. In Qt, reading serial port data is like with reading a file data, we can use ReadOnly mode to open the port. The serial object created as follows:

