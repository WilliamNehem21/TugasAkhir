Original Article
A mobile-based telepathology system for a low resource setting inEthiopia
Admasu Abatea, Mengistu Kiﬂea,b,c, Sena Okuboyejob,d,⇑, Victor Mbarikab
aAddis Ababa University, Ethiopia
bICITD, Southern University and A&M, Baton Rouge, LA, United States
cEthiopian Federal Ministry of Health, Ethiopia
dCovenant University, Ogun State, Nigeria
article info
Article history:Received 5 February 2017Revised 20 June 2017Accepted 13 August 2017Available online 16 August 2017Keywords:Blood cell countingEthiopia malariaSmartphoneTechnologyTelepathologyabstract
In most developing countries like Ethiopia, blood count of a microscopic image is done manually which istedious, time consuming and error-prone. Recent advances in technology have introduced the use imageprocessing software especially mobile technology. This research designed a low-cost smart phone micro-scope adapter, and developed a decision support system for automatic blood cell count and malaria. Theimage acquisition and processing applying the adapter and the software was tested in two clinics. Theresult, compared to the manual way of diagnosing microscopic images, is simple for diagnostic processand provides better decision support for malaria and blood cell counting, as well as speed up the diagno-sis process.For blood cell counting and malaria detection, it takes about 30 s to 1 min using this system,but using a manual system it takes around 10–20 min. The preliminary result indicates that the devel-oped system is cost-effective for higher and medium clinics in rural and urban clinic setup. This reducesthe initial, running and maintenance cost of the laboratory equipment and also improves the quality ofservices./C2112017 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University. This is anopen access article under the CC BY-NC-ND license ( http://creativecommons.org/licenses/by-nc-nd/4.0/ ).
1. IntroductionBlood cell counting gives important information about the typeand number of cells in the blood, especially red blood cells, whiteblood cells and platelets. The information obtained from the countcan be used to identify symptoms such as weakness, fatigue, bruis-ing, anemia, infection, and many other disorders [11]. There are two means of counting blood cells, automatic and manual ( [9], Jan- uary). The automatic means of blood cell counting uses completeblood count machine Hematology analyzer) or ﬂow cytometry.However, in most developing countries like Ethiopia, blood countof a microscopic image is done by manual way, which is tedious,time taking and error-prone ([11,9], January). These errors lead to wrong diagnosis and treatment. The existing automatic bloodcell counting devices are expensive and do not show the structureof the blood cells, and are limited in the diagnosis of commonblood disease like, malaria, leukemia, sickle cell disease. However,in recent times, blood cell counting is possible from microscopicblood images using image processing software either by computeror mobile phone. This image processing provides both the struc-tural and count information, but the basic challenge is imageacquisition step.One of the major advantages of automated systems is the reduc-tion of time consumed by manual systems and cost effectiveness.These days’ computer systems are replacing human being in mostarea which needs expertise. Since computer systems map theexpertise knowledge, the errors due to less experience will bereduced. In this system, the time for image processing is very min-imal. For blood cell counting it take about 30 s. to 1 min. but usinga manual system it takes around 10–15 min. There are automatedmachines to count blood cells, hematology analyzer machine,which are expensive for low resource setting areas. Not only thecost of the machine there chemical reagent is also expensive andnot available in the market. They provide the count for RBC,WBC, Hemoglobin and platelets, but they didn’t provide the struc-tural information for the diagnosis of blood diseases like malariaand leukemia. Malaria is one of the major killer blood diseases in
http://dx.doi.org/10.1016/j.aci.2017.08.0022210-8327//C2112017 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University.This is an open access article under the CC BY-NC-ND license ( http://creativecommons.org/licenses/by-nc-nd/4.0/ ).⇑Corresponding author at: Covenant University, Ogun State, Nigeria.E-mail address:sena.okuboyejo@covenantuniversity.edu.ng (S. Okuboyejo). Peer review under responsibility of King Saud University.
Production and hosting by ElsevierApplied Computing and Informatics 14 (2018) 186–191
Contents lists available atScienceDirect
Applied Computing and Informatics
journal homepage: www.sciencedirect.com
most developing countries like Ethiopia, thus providing the struc-tural information and helping the diagnosis of malaria will havegreat contribution.Historically, microscopic images can be acquired using a perma-nently mounted camera unit on a microscope, two main types ofcamera sensors are attached to the microscope; charge coupleddevice CCD) and complementary metal oxide semiconductorCMOS)[7]. In the past, CCD cameras were used for highest qualityimages. However, CMOS cameras have narrowed the difference inquality[7]. Presently, both camera sensors are used to capturemore pixels than required for optimal photomicrographs with eachgeneration of smartphones, there has been a signiﬁcant improve-ment in their hardware and software speciﬁcation [8,3,10]. Recent advances in smartphones include integrated camera utilizingCMOS sensors. We capitalize on the availability of smart phonewith high quality digital camera to design a low-cost smartphonemicroscope adapter and develop an application to acquire and pro-cess microscopic images to support automatic blood cell count,medical diagnosis and e-consultation.1.1. Review of related worksHartman et al.[5]developed an iPhone application to facilitaterapid diagnostic pathology teleconsultation utilizing a smart-phone. The mobile application developed is only used for sendingacquired microscopic image for teleconsultation. The developedmobile application has no image processing steps (for decisionsupport system) to facilitate diagnosis for less experienced person-nel. Fontelo et al.[4]in their work, also presented the advancementof mobile networks and smartphones in developing countries. Thepaper explains 3-D printed mobile adapters for capturing micro-scopic images. Nine pathologists worldwide evaluated the imagesfor quality, adequacy for telepathology consultation, and conﬁ-dence rendering a diagnosis based on the images viewed on theweb. The system lacked microscopic image processing for decisionsupport. The system only discussed the quality of the imageacquired from microscope using smartphone camera.In Yang & Zhan[13], the integration of a Quantitative PhaseImaging QPI) method onto a smartphone platform and the applica-tion of imaging red blood cells was demonstrated. The adopted QPImethod solves the Intensity Transport Equation ITE) from two de-focused pupil images taken in one shot by the smartphone camera.This system uses smart phone microscope for image capturing, andhas no image processing steps for diagnosis and decision supportsystem. The system presented in this paper uses ordinary micro-scope and smartphone for image capturing and uses image pro-cessing for malaria detection and blood cell counting for decisionsupport system. According to Auguste & Palsana [2], The Open Mobile Telepathology System (OMT) is a combination of two com-ponents, the Pocket Electronic Health Record (pEHR) and theMobile Whole Slide Imaging (mWSI) app. This system is moreabout image acquisition and transportation over the internet usingmobile applications. The system has no image processing and deci-sion support system for blood cell counting and malaria diagnosis.In Reni[6], Malaria, a deadly disease which according to theWorld Health Organization (WHO) is responsible for the fatal ill-ness in 200 million people around the world in 2010, is diagnosedusing peripheral blood examination. This work developed an auto-mated system for malaria detection which is comparable to man-ual diagnosis of malaria. The work uses Annular Ring Ratiotransform for blood component identiﬁcation. But the system lackshow to acquire microscopic image using smartphone and has nomobile application developed for decision support [14]. This paper demonstrates a compact and cost-effective imaging cytometryplatform installed on a cell-phone for the measurement of the den-sity of red and white blood cells as well as hemoglobin concentra-tion in human blood samples. Fluorescent and bright-ﬁeld imagesof blood samples are captured using separate optical attachmentsto the cell-phone and are rapidly processed through a custom-developed smart application running on the phone for countingof blood cells and determining hemoglobin density. This systemrequires additional optical hardware components for microscopicimage acquisition. In a point-of-care POC) setting, it is criticallyimportant to reliably count the number of speciﬁc cells in a bloodsample[1]. Software-based cell counting, which is faster thanmanual counting, while much cheaper than hardware-basedcounting, has emerged as an attractive solution potentially applica-ble to mobile POC testing. This system explains how software-based blood cell counting is faster and cheaper than hardwarebased systems. However, the system has no microscopic imageacquisition and processing steps for blood cell counting andmalaria detection. Image processing steps were employed forblood cell counting to identify Leukemia [12]. Leukemia is diag-
nosed with complete blood counts which is done by calculatingall blood cells and compare with the number of white blood cells(White Blood Cells/WBC) and red blood cells (Red Blood Cells/RBC). The system uses image processing algorithms such as thresh-olding, canny edge detection and color identiﬁcation ﬁlters. Thissystem lacks microscopic image acquisition steps using smart-phone camera.2. Design architectureThe system design is a ﬁve step process involving image acqui-sition, image pre-processing, image segmentation, image post-processing, and blood cell classiﬁcation as shown in Fig. 1. The graphical user interface was developed after the image processingsteps.Image acquisitionis the ﬁrst step of the system. Digitizedimages of the samples on the slides are acquired with a smart-phone camera which is mounted upon the microscope. High reso-lution images will better for detection of blood cell. The minimumimage resolution accepted by laboratory professional was acquiredby 4mpx mobile camera with the support of developed image pro-cessing application; therefore the application could be deployed inthe low resource setting environment. The image acquisition isbased on the mathematical expression:
fðx;yÞ¼iðx;yÞ:rðx;yÞð 1Þ
Wherefðx;yÞ:Intensity at the point (x, y),iðx;yÞ: Illumination at the point (x, y),(The amount of source illumination incident on the scene).rðx;yÞ: Reﬂectance/transmissivity at the point (x, y),(The amount of illumination reﬂected or transmitted by theobject)0<iðx;yÞ<1and 0 <rðx;yÞ<1However, microscopic image acquisition using smartphonecamera needs an interface or adapter to create a stable systembetween the microscope eyepiece and the mobile phone. One ofthe challenges encountered while trying to capture microscopicimages using a smartphone at the clinics is stability and focusing.This was resolved by designing a smartphone microscope adapterwith no optical component using solid work software. The micro-scope eyepiece length and diameter are measured and used inthe adapter to get focus point between the smartphone cameraand eyepiece lens. Since the eyepiece is cylindrical, a radius of1.5 cm and height of 4–5 cm was used. The adapter is ﬂexible tocover all smart phones for microscopic image acquisition. Sincethe Smartphone camera is not always at the center, thus the adap-ter should have a movable holder for the phone from each side andA. Abate et al. / Applied Computing and Informatics 14 (2018) 186–191 187bottom. In addition to this, the adaptor must have a hole (withradius of 1.5 cm) that allows the phone camera to see the eyepiece.The shape and type of material used for the adapter will be chosenbased on weight.Fig. 2depicts the adapter materials from woodand plastic.Image acquisition on the mobile phone is done using the adap-ter, but for further image processing and to provide decision sup-port system, a computer or mobile telephone with 64 GB is used.Thus, to access the mobile phone camera directly from the com-puter, Droidcam software is used.In theimage pre-processingstep, either the image or the videoacquired during image acquisition step will be converted to differ-ent color space (color image (red, green blue (rgb) to gray). Thisconversion provides a possibility to see the dynamic range andintensity difference between the pixels. Normalization and his-togram equalization is applied to resolve both contrast and bright-ness problems during image acquisition. Adaptive ﬁltering isapplied to remove noise which is added at the time of capturingthe microscopic images or videos. This noise can be dust particlesthat are present on the slide while preparing the slides. In the caseof video processing, motion artifacts will be considered. Image seg- mentationinvolves applying the gray threshold function on boththe gray scale image and video. The gray threshold function createsa binary image by minimizing the intra-class variation of the blackand white pixels. The holes in the binary image or video are ﬁlledby using inﬁll method, so that the binary image and video will besegmented. Since blood images are further processed for count andmalaria detection, the segmentation process is very important.Once the blood image is segmented, it will cluster blood cells intowhite blood cells (WBC), red blood cells (RBC) and Platelet. Fromthe segmentation result, it is easier to identify the shape and sizechange in the blood cells. Theimage post-processingstep is to provide further information for the blood count and blood diseaselike malaria. This is used for the decision support system develop-ment. The part of the image or video at the border has less informa-tion and is removed from the binary image to reduce theprocessing complexity. Theblood cell classiﬁcationprocess groups blood cells into different components based on size. Whiteblood cells are big and covers around 14–17 pixels while red bloodcells are smaller and cover around 4–7 pixels. Blood platelets areeven smaller than red blood cells. For white blood cell detectionand counting, both the red blood cells and blood platelets are con-sidered as background image and the area opening method is used.This method allows deleting all the objects with a size smaller thanthe structuring element. The structuring element will have a circu-lar shape and its size will be calculated on the basis of the objectsaverage size in the image.2.1. Graphical user interface (GUI)The graphical user interface (GUI) is developed using MatlabR2013a software. The mobile camera is directly accessed from thispart, which enables the user to record videos. Previously storedimages and videos can be loaded and processed for further studyeven it can be send email automatically from the user interface.Initially the system was designed and developed to run on com-puter to help the diagnosis of blood disease. Since smart-phonesare available with enough internal memory space and can beextended using external memory space, the system can be usedfor point-of-care implementation. To link the application to pro-vide point of cares, we converted the developed Matlab GUI toAndroid application using MATLAB coder or MATLAB JA compiler.The application was tested using mobile phone with 32 GB mem-ory and the result was the same as that obtained from a computersystem.In the GUI depicted byFig. 3, the preview button starts thesmartphone camera and displays the image on the live cameraaxis. In the previewing stage, the laboratories technician focusesthe stage and control the stage movement. The acquire button cap-tures microscopic images of the sample on the stage. The recordand stop video buttons are to initiate and end video recordingsfor the sample while moving the stage up and down. It is veryimportant when large numbers of images are required for analysisof the sample. The axes are used to display the live, acquired andprocessed images. This can be also used for zooming the imagesto see features which are not visible during acquisition.Microscope Image AcquisitImage Pre-Processing Image Segmentation Image Post-ProcessingBlood Cell Classi/g976ication 
Fig. 1.System design block diagram.
Fig. 2.The adapter prototype from wooden and plastic materials.188 A. Abate et al. / Applied Computing and Informatics 14 (2018) 186–191The load button puts previously acquire images to the system.This can be for further processing, learning purpose or to sendthe image via Email. Blood count and malaria buttons are impor-tant for blood sample diagnosis. When a count of the blood cellsis required, blood count button is used and it opens a new pagewhere blood images are input and the RBCs, WBCs and Plateletscounts are automatically calculated and displayed. In addition itwill display the corresponding histograms for each blood cell type.The malaria button adds blood images and automatically providessupport whether the sample image contains Plasmodium or not.3. System deployment, testing and evaluationThe system was tested in two clinics: Ayu specialized HigherClinic and TesfaMariam Medium clinic. The laboratory technicianswere involved on the discussion and testing of the system. Thisprototype uses any brand of smartphone, the higher the camerapixels, the higher the resolution and magniﬁcation. Currently theSmartphone is used only for image acquisition, thus memory ofthe smart phone has no effect. The memory can be expanded to64 GB (it could be external) when the smart phone is for bothimage acquisition and image processing. The laboratory techni-cians were trained on the installation procedure, how to accessthe mobile camera directly on the laptop computer and how tofocus the phone camera with the microscope eyepiece for betterimage acquisition.Fig. 4represents the system set up. The userguide manual was developed for clinical setup use. The manualwas sent for comments to laboratory technician and based on theirfeedback received the ﬁnal version of the document was preparedand tested in the clinical setup.InFig. 5below, a laboratory technician is seen using the imageprocessing software developed using matlab R2013a, for imageacquisition and processing. The brightness, resolution and magni-ﬁcation of the images can be varied using the microscope basicsand the effects seen on the laptop screen. Fig. 6depicts an image captured using the system.3.1. Result and discussionBoth the adapter and the software are tested for image acquisi-tion and processing. The system is very simple to use for laboratory
Fig. 3.Graphical user interface of the application.
Fig. 4.System setup.
Fig. 5.A laboratory technician using the system.A. Abate et al. / Applied Computing and Informatics 14 (2018) 186–191 189technicians, it needs about 15 min training and supportive manualwhich explains how to use the system and basic software mainte-nance. Both clinic laboratory technicians agreed that ‘‘the imple- mentation of the system will speed up the diagnosis process ”. Since the manual way of diagnosing microscopic images is tedious,time taking and needs expertise, the implementation of this sys-tem will make simple the diagnosis process and provides decisionsupport for malaria and blood cell counting. Both clinic laboratorytechnicians also said the implementation of the system will reducethe cost of the laboratory equipment like Hematology analyzer andFlow Cytometry which are used for cell counting. Not only the ini-tial cost of these laboratory equipment, but also their maintenancecost which is equally expensive.As shown in the image acquisition section, the adapter shouldbe placed ﬁrst and adjusted till there is minimum shadow on theimage. The quality of the images acquired depends on the slidepreparation, even with poor slide preparation, better images wereacquired when compared to the manual diagnosis. The better thequality of the image acquired, the better the processing for bothmalaria diagnosis and blood cell counting. The major factors thataffect image processing are dust particles on the slide and thethickness of the sample. During image acquisition, the system willautomatically and sequentially store the image using patient IDnumber and date in a designated folder, thus, easy retrieval. Thecases are automatically labeled by a system-generated ID whichwill be used for laboratory process. This ID is also recorded inthe patient registration book as well as on the patient cardobtained from the reception before processing the application .Since the system can easily interface with a computer, it is veryeasy to store copies of the acquired images in the computer harddisk daily. This will reduce the effect of memory size on thephone’s battery life. Most Ethiopian health facilities are poweredeither from the main electric supply or from solar system and thissystem will be deployed to the health centers and above. The basicchallenge in implementing this system in Ethiopia is, most labora-tory technicians are accustomed to the manual diagnosis approachand are not willing to accept new technologies easily. But this canbe addressed through training and consulting about the systemand its advantage over the existing one. The system was testedfor both blood cell counting and malaria detection using the fol-lowing image (Fig. 7). For malaria detection, both the manual sys-tem and the mobile based system result was the same, malaria wasnot found. The blood cell counting of the system was compared notonly with the result from the manual system but also with theresult from the automatic blood cell counting machine (Hematol-ogy analyzer) and the result is given in Table 1. During the interview process from junior to experienced labora-tory technicians, the minimum time required to count WBC inmanual system was ranged from 10 to 20 min. The automatedmachine (hematology analyzer) takes 2–4 min that depend onthe machine model. In the developed mobile application the timerequired to count RBC and WBC was ranging from 30 to 60 s thatis less than 1 min. The result obtained by the mobile applicationwas close to both systems. As a conclusion the system computa-tional time as compared to manual system is 1500% times betterthan the manual and 300% than the automated system.4. Implication of the studyThis project provides a mechanism of acquiring microscopicimages using smartphone camera and speeds up the diagnosis ofblood diseases. It can be used as a system of standardizing inhealth institutions in the diagnosis of blood disease. For telemedi-cine, the acquired image and blood cell count can be sent to differ-
Fig. 6.Acquired microscopic images using mobile phone camera with 5 megapixels.
Original image        Gray Scale image  Inverted image  
Fig. 7.Various image formats of the blood sample.Table 1A comparison of the acquired and processed images.
System Total time ResultRBC mili/cumm WBC/cummManual system 10–15 min – 7000Mobile-based system 30–60 s 4.97 6970Automatic system 2–4 min 5.03 7020190 A. Abate et al. / Applied Computing and Informatics 14 (2018) 186–191ent health sectors for consulting, diagnosing or experience sharing.The system also serves as an educational tool for laboratory tech-nicians to revisit the image from the database and learn for thefuture. In addition to the above advantages for medical purpose,the image acquisition system can be used by research institutesfor further processing. Rather than transporting the particles ormolecules under investigation to other advanced centers, it is pos-sible to send the microscopic images and real videos in short per-iod of time and obtain response as soon as possible. In most lowresource setting environment internet coverage is limited; how-ever the mobile coverage and accesses are widely applied in mostrural area of developing countries including Ethiopia. Most ofsmart phones now days have 3G network for internet access toconnect to centralized system for storage and share data.Since the implementation of this system creates standardiza-tion for blood disease diagnosis, the government will have a chanceto control the health facilities easily. It also provides microscopicimage acquisition and storage for patient data which will be usedby medical personnel and hospital manager for evidence of theirdiagnosis result and medication consequence. Even the patientcan take his microscopic images to different medical personnel indifferent health facilities for further investigation.5. ConclusionThis paper presents a Smartphone telepathology system forcounting the blood cells and malaria diagnosis. The proposed sys-tem of blood cell counting and malaria diagnosis is fast, cost effec-tive and produces accurate results in low resource environment.The system can easily be implemented anywhere in medical facil-ities with minimum infrastructure and it is very user friendly. Thissystem also recognizes overlapping blood cells and counts themindependently.References
[1]D. Ahn, N.S. Kim, S. Moon, T. Park, S.H. Son, Optimization of a cell countingalgorithm for mobile point-of-care testing platforms, Sensors 14 (2014)15244–15261
.[2]
L. Auguste, D. Palsana, Mobile whole slide imaging (mWSI): a low resourceacquisition and transport technique for microscopic pathological specimens,bmjinnov-2015 (2015)
.[3]
L. Bellina, E. Missoni, Mobile cell-phones (M-phones) in telemicroscopy:increasing connectivity of isolated laboratories, Diag. Pathol. 4 (19) (2009)
. [4]
P. Fontelo, F. Liu, Y. Yagi, Evaluation of a smartphone for telepathology: Lessonslearned, J. Pathol. Inform. 6 (2015)
. [5]
D.J. Hartman, A.V. Parwani, B. Cable, I.C. Cucoranu, J.S. McHugh, B.J. Kolowitz,et al., Pocket pathologist: a mobile application for rapid diagnostic surgicalpathology consultation, J. Pathol. Inform. 5 (2014)
. [6]
S. Kareem Reni, Automated low-cost malaria detection system in thin bloodslide images using mobile phones, University of Westminster, 2014, Doctoraldissertation.
.[7]
S. Park, L. Pantanowitz, A.V. Parwani, Digital imaging in pathology, Clin. Lab.Med. 32 (4) (2012) 557–584
. [8]
S. Park, A. Parwani, M. Satyanarayanan, L. Pantanowitz, Handheld computingin pathology, J. Pathol. Inform. 3 (15) (2012)
. [9] Putzu, L., Di Ruberto, C., 2013. White blood cells identiﬁcation and countingfrom microscopic blood image. In: Proceedings of World Academy of Science,Engineering and Technology, 73, 363.[10] Ritter N, Cooper J, 2007. Segmentation and border identiﬁcation of cells inimages of peripheral blood smear slides. In: Proceedings of the thirtiethAustralasian conference on computer science, 62, 161–169.[11]
F. Sadeghian, Z. Seman, A.R. Ramli, B.H. Kahar, M.I. Saripan, A framework forwhite blood cell segmentation in microscopic blood images using digitalimage processing, Biol. Proced. Online 11 (1) (2009) 196
. [12] Suryani, E., Wiharto, W., Polvonov, N., 2015. Identiﬁcation and counting whiteblood cells and red blood cells using image processing case study of leukemia.arXiv preprint arXiv:1511.04934., 1511.04934.[13]
Z. Yang, Q. Zhan, Single-shot smartphone-based quantitative phase imagingusing a distorted grating, PloS One 11 (7) (2016)
. [14] Zhu, H., Sencan, I., Wong, J., Dimitrov, S., Tseng, D., Nagashima, K., et al., 2013.Cost-effective and rapid blood analysis on a cell-phone. (Vol. 13).A. Abate et al. / Applied Computing and Informatics 14 (2018) 186–191 191