


ORIGINAL ARTICLE
Chattering-free sliding mode observer for speed sensorless control of PMSM

Mahmoud M. Gaballah *, Mohammad El Bardini, Mohammad Sharaf

Dept. of Industrial Electronics & Control Engineering, Faculty of Electronic Engineering, Minufiya University, 32852, Egypt

Received 23 June 2016; revised 18 November 2016; accepted 21 December 2016
Available online 31 December 2016

Abstract This article presents a new speed observer based on fuzzy logic for speed sensorless control applications of permanent magnet synchronous motor ‘‘PMSM”. The switch function in traditional Sliding Mode Observer ‘‘SMO” is replaced by a rule based fuzzy logic system. The pro- posed observer not only improves the system dynamic performance during disturbances or param- eter variations, but also has a high accuracy tracking performance with sufficient chattering reduction. The validity of the new observer corroborated through experimental results using TMS320F28069M Digital Signal Processor ‘‘DSP”.
© 2016 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University. This is
an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).



Introduction

Permanent Magnet Synchronous Machine ‘‘PMSM” become a good choice in servo drives, and is on the way to step beside induction machines in traction applications. Traditional PMSM drives employ position sensors to measure the speed, and rotor angular position. These sensors present several disadvantages, such as reduced reliability, susceptibility to noise, additional cost and weight and increased complexity of the drive system. Recently, there has been much interest in developing a sensorless algorithms in which the motor was

* Corresponding author at: Sigma Electronic Industries, Cairo, Egypt. E-mail addresses: Mahmoud.Gaballah1@gmail.com (M.M. Gabal- lah), dralbardini@ieee.org (M. El Bardini), mohamed.sharaf@el-eng. menofia.edu.eg (M. Sharaf).
Peer review under responsibility of King Saud University.
controlled using the estimated values of the angular speed of the rotor [1,2].
Several methods have been developed to estimate the rotor speed or position, and among them are Flux Linkage Observer ‘‘FLO”, Extended Kalman Filter ‘‘EKF” based observer, and Sliding Mode Observer ‘‘SMO”. The latter has a fast response, good robustness for external disturbances, and machine parameter variations [3,4]. The SMO uses a sliding mode vari- able structure in the control loop to compensate the parametric uncertainties keeping the observer independent of the unknown signals during the sliding motion with a stable dynamic error [5,6]. The estimated values in an ordinary SMO contain high frequency oscillation components because of the discrete switch control. The switch function is critical to the observer performance and it allows appearing the chat- tering phenomenon that can excite high frequencies which isn’t desirable in high performance speed drives [7,8]. Several solutions are proposed to make a trade-off between chattering phenomenon reduction, and observer robustness. In [9–11] a first order and second order SMO proposed, the chattering phenomenon reduced but low pass filter causes unavoidable

http://dx.doi.org/10.1016/j.aci.2016.12.002
2210-8327 © 2016 The Authors. Production and hosting by Elsevier B.V. on behalf of King Saud University. This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).





and unpredictable time delays in the estimated values which need a compensation technique. In [12], the ordinary switch function replaced with the sigmoid function, low-pass filter avoided but there is a tracking error. In [13] a higher-order sliding mode ‘‘HOSM” observer presented, the estimation
To guarantee the observer convergence based on lyapunov’ direct theory, the observer gain ‘‘k” should be [11]:
k > max(|ea||eb|)	(6)
Once the system reaches the sliding surface, then:

accuracy improved, but selecting sliding mode gains and boundary layer are difficult as they are dependent on the rotor
(¯i = [~ia
~ib
]T = 0

(7)

speed. Other algorithms such as artificial neural network [14] and artificial intelligence (AI) methods [15], can achieve high performance, but they are relatively complicated and require large computational time.
p¯i = [ p~ia p~ib ]T = 0
Substituting Eq. (7) in Eq. (5), the back EMF can be obtained as follows:

This paper introduces a new Fuzzy Sliding Mode Observer (FSMO) in which the switch function in traditional Sliding Mode Observer ‘‘SMO” was replaced by a rule based Fuzzy
0 = 0 + ea — ksgn(¯ia) ;
0 = 0 + eb — ksgn(¯ib)
ea = ksgn(i¯a )
eb = ksgn(i¯b )
(8)

Logic System ‘‘FLS”. The proposed observer not only ensures the robustness for various disturbances, but also improves the
The back EMF in Eq. (8) usually contain high frequency com-
ponents [19]. To relieve this noise a low pass filter applied:

dynamic performance. The observer was experimentally tested out on a TMS320F28069M DSP Controller, and experimental results were introduced to validate the proposed observer
p(e^a)= —x0e^a + x0ea
p(e^b)= —x0e^b + x0eb
(9)

covering digital implementation cost, position estimation accu- racy, and speed response.

Motor model and sliding mode observer
where x0 = 2pf0, and f0 is the cut-off frequency of the filter.
Finally the rotor position, and rotor speed can be calcu- lated as follows:
8< ^h = arctan — e^a 


Based on these assumptions the motor appears to be or becomes unsaturated; all the stator resistance, self- and mutual
: x^ r = p^h
e^b
(10)

inductances for each phase are the same, neglecting the iron losses. The PMSM model in the stationary reference frame is described by the following equations [16]:
( Ls(pia )= —Rsia — ea + Va
Design of fuzzy sliding mode observer (FSMO)

The idea behind SMO is to select the switching gain so the slid- ing function ’’ksgn(¯i)’’ compensate the parametric uncertain-


s



where

b
( ea

s b	b

= —wfxr

b


sin h



(2)
signals during the sliding motion insuring a stable dynamic error [5,6]. The discontinuous sign function in Eq. (4) is critical to the observer performance and needs fast switching of

eb = —wfxr  cos h
To observe the EMF components, the sliding mode observer is designed as follows [17,18]:
Ls(p^ia)= —Rs^ia + Va — ksgn(^ia — ia)	(3)
Ls(p^ib)= —Rs^ib + Vb — ksgn(^ib — ib)
  1	if x > 0


motion states, which will cause chattering [20,21]. To eliminate the chattering phenomenon in classical SMO, the fixed numer- ical values of the switching function are replaced by linguistic variables, and the switching function is calculated through fuzzy logic system. The new Fuzzy SMO ‘‘FSMO” will have the robustness property of SMO with sufficient chattering reduction via Fuzzy Logic System ‘‘FLS”. The FSMO block diagram is depicted in Fig. 1, and built as follows:

Subtracting Eq. (1) from Eq. (3), V  cancel V , and the
Ls(p^ib)= —Rs^ib + Vb — kFs

a
error equations will be the following:
Ls(p~ia)= —Rs~ia + ea — ksgn(¯ia)
Ls(p~ib)= —Rs~ib + eb — ksgn(¯ib)
b


(5)
where Fs = FSMO(¯i; p¯i)	(12)
The proposed FSMO will have 49 if-then rule base, two input variables [¯i; and pi¯] which define the current error and its rate



Fig. 1	Block diagram of FSMO.


of change, respectively, and one crisp output (Fs). All fuzzy variables have the same universe of discourse [—1 to 1], and been divided into seven fuzzy sets (A0, A1, A2, A3, A4, A5,
and A6) and (B0, B1, B2, B3, B4, B5, and B6) for the input variables, and (NB = negative big, NM = negative medium, NS = negative small, ZE = zero, PS = positive small, PM = positive medium, and PB = positive big) for the output variable. Membership functions are chosen in the form of sym- metrical triangular as in Fig. 2.
The output fuzzy ‘Fs’ set is normalized in the interval [—1, 1] therefore, Fs = |FSMO(¯i; p¯i)| 6 1. A simple fuzzy rule table is constructed considering the following reaching and stability requirements;

When (¯i * p¯i) becomes a positive value, the membership function of Fs is set in such a way that its sign becomes sim- ilar to that of (¯i) and therefore, ¯i * Fs 6 0.
When (¯i * p¯i) is a negative value, the reaching condition
would be satisfied automatically. In this case, the member- ship function of Fs could be changed with negative or even positive sign to enhance the tracking performance.

Regarding seven membership functions for each input vari- able of the fuzzy rule base, 49 if-then rules of Fig. 2 are
obtained using expert engineering knowledge in the navigation field and satisfying the above-mentioned stability and reaching conditions. The FLS output is calculated based on singleton fuzzification strategy, center-average defuzzification and pro- duct inference. At each input values the FLC gives an output signal corresponds to the increase or decrease in sliding func- tion (Fs) to satisfy the dynamic stability of the observer.

Experimental setup

To assess the performance and the robustness of the proposed observer, field oriented control strategy was applied to an experimental DSP-based PMSM drive apparatus. The block diagram of the experimental setup is shown in Fig. 3. It consists of power inverter, PMSM with parameters shown in Table 1 and loading arrangement, voltage and current sensing circuits, and floating point TMS320F28069M digital controller.
The controller running clock and Pulse Width Modulation ‘‘PWM” switching frequency are 50 MHz and 10 kHz, respec- tively. To avoid the switching harmonics in the samples phase currents, the sampling frequency is selected as 10 kHz for the current control loops and 1 kHz for the speed control loop. Two PI controllers are used for current, and speed control



Fig. 2	Input MFs, and Rule base of FSMO Algorithm.



Fig. 3	Sensorless PMSM field-oriented control algorithm block diagram.




6
4
2
0

180
90
-90
-180
Actual and estimated rotor speed (KRPM)






loop, and the tuning process of controller constants is designed to get a bandwidth of 400 HZ, and 40 HZ respectively. The resultant PI controller constants are KP = 10—4, Ki = 0.97 for current controllers, and KP = 167.32, Ki = 28.58 for the
speed controller.

Experimental results

Several tests have been carried out to verify the correctness and
180
90
-90
-180


20

0

-20














0.2	0.4	0.6	0.8	1.0	1.2	1.4	1.6














Time (sec)

robustness of the proposed observer.
Test 1: Speed step increasesreference from 10% to 100% of rated speed with constant load; this test examine the steady- state performance of the proposed observer at low and high- speed, comparing its performance with the traditional SMO.
Figs. 4, and 5 shows the experimental results for traditional
SMO, and the proposed observer respectively.
The actual and estimated rotor speed for traditional SMO is shown in Fig. 4a, while Fig. 4b, and c shows the waveforms of the actual and estimated rotor positions obtained for tradi- tional SMO respectively. The rotor position error is shown in Fig. 4d. The average steady-state speed error is (300/4000 = 7.5%) at 4000 rpm, and (55/400 = 13.7%) at 400 rpm.
The actual and estimated rotor speed for FSMO is shown in Fig. 5a, while Fig. 5b and c shows the waveforms of the actual and estimated rotor positions obtained for FSMO respectively.
Fig. 4 Traditional SMO speed response and rotor position waveforms at speed step reference from 400 to 4000 rpm.



The rotor position error is shown in Fig. 5d. The average steady-state speed error is (50/4000 = —1.25%) at 4000 rpm, and (10/400 = 2.5%) at 400 rpm. It can be observed that the FSMO is accurate with sufficient chattering reduction com-
pared with traditional SMO.
Test 2: The speed response to bipolar command from 400 rpm to —400 rpm with constant load; this test examines the performance of the proposed observer at low speed bipolar command. The bipolar speed command is a square waveform with a half cycle of 2.5 s and bipolar references ±400 rpm. Fig. 5 shows the waveforms of the actual and estimated rotor


Actual and estimated rotor speed (KRPM)
6
4
2
0

Actual and estimated rotor speed (KRPM)
6
4
2
0




180
90
-90
-180

180
90
-90
-180
180
90
-90
-180

180
90
-90
-180



20

0

-20







0.2	0.4	0.6	0.8	1.0	1.2	1.4	1.6







Time (sec)
20

0

-20






0.2	0.4	0.6	0.8	1.0	1.2	1.4	1.6






Time (sec)



Fig. 5	FSMO speed response and rotor position waveforms at speed step reference from 400 to 4000 rpm.
Fig. 7	FSMO speed response and rotor position waveforms when doubling the stator resistance.





400
200
0
-200
-400
-600

180
90
-90
-180

180
90
-90
-180
(a) Actual and estimated rotor speed (RPM)
the core loss, copper loss and mechanical frictions. As a result, the stator winding resistances increase. The main purpose of this test was to examine the robustness of the proposed obser- ver in case of doubling the motor resistance. This test was done by connecting 1 X resistor in series with the stator winding, and a speed step reference from 400 rpm to 4000 rpm.
Fig. 6 shows the waveforms of the actual and estimated rotor speed, actual and estimated rotor positions, and the rotor position error respectively. Although position estimation error exists, it is very small because of high rotating speed. In this case, about 55 rpm speed estimation errors appear at tran- sient time. But they converge to zero very quickly. Test results prove the good performance of the proposed observer, despite of the variations of stator resistance, in the speed range from 10% of rated speed to full one (see Fig. 7).




50

0

-50







0.5	1.0	1.5	2.0	2.5	3.0	3.5	4.0







Time (sec)
Conclusion

A new efficient fuzzy based SMO algorithm for sensorless vec- tor control of PMSM was introduced. The chattering reduc- tion is achieved by using linguistic variables, and the switching function is calculated through fuzzy logic system.

Fig. 6 FSMO speed response and rotor position waveforms at bipolar command from 400 rpm to —400 rpm.

speed, actual and estimated rotor positions, and the rotor posi- tion error respectively. It can be observed that the estimated speed approaches the real value and responds correctly to the bipolar command. The dynamic response seems satisfactory.
Test 3: Observer robustness to motor parametervariation; the body temperature of a running motor increases because of
The proposed algorithm is successfully implemented on a DSP controller, and the performance is compared to the tradi- tional SMO. Experimental results prove that the proposed FSMO has sufficient chattering reduction along with a good estimation accuracy, and high immunity to the motor parameter’s variations. In future work, a research is suggested to develop a Genetic based sliding mode controller ‘‘GAs-SMC”, which will be used to choose the appropriate SMC discontinuous part’s gain to reduce the problem of chat- tering in SMC.

References

K.T. Ajmal, M.T. Rajappan Pillai, Back EMF based sensorless BLDC drive using filtered line voltage difference, in: International Conference on Magnetics, Machines & Drives, AICERA- iCMMD, 2014.
A.E. Fitzgerald, C. Kingsley, S.D. Umans, Electric Machinery, McGraw-Hill, 2003.
Tingting Gao, A sliding-mode observer design for the unknown disturbance estimation of a PMSM, in: The 27th Chinese Control and Decision Conference, 2015.
J.M. Liu, Z.Q. Zhu, Improved sensorless control of permanent magnet synchronous machine based on third-harmonic back- EMF, in: Proc. IEEE International Electric Machines & Drives Conference, 2013, pp. 1180–1187.
F.J. Lin, P.H. Shen, Robust fuzzy neural network sliding-mode control for two-axis motion control system, IEEE Trans. Ind. Electr. 53 (4) (2006) 1209–1225.
F. Lin, C. Lin, P. Huang, Recurrent fuzzy neural network controller design using sliding-mode control for linear synchronous motor drive, IEE Proc. – Control Theory Appl. 151 (4) (July 2004) 407–416.
G. Tarchala, Influence of the sign function approximation form on performance of the sliding-mode speed observer for induction motor drive, in: Proc. IEEE Int. Symp. Ind. Electronics, 2011, pp. 1397–1402.
M.L. Corradini, G. Ippoliti, S. Longhi, G. Orlando, A quasi- sliding mode approach for robust control and speed estimation of PM synchronous motors, IEEE Trans. Ind. Electron. 59 (2) (Feb. 2012) 1096–1104.
M. Comanescu, Cascaded emf and speed sliding mode observer for the non-salient PMSM, in: IECON 201O-36th Annual Conference on IEEE Industrial Electronics Society, Sep 2010,
pp. 792–797.
M. Comanescu, L. Xu, T.D. Batzel, Decoupled current control of sensorless induction motor drives by integral sliding mode, IEEE Trans. Industr. Electron. 55 (11) (2008) 3836–3845.
Vasilios C. Ilioudis, PMSM Sensorless Control based on Sliding Mode Observers Methodology for Nonlinear Systems with
Model Imprecision, International Workshop on Recent Advances in Sliding Modes (RASM), 2015.
K. Hongryel, S. Jubum, L. Jangmyung, Highspeed sliding-mode observer for the sensorless speed control of a PMSM, IEEE Trans. Ind. Electr. 58 (9) (2011) 4069–4077.
S.K. Kommuri; Sch. of Electron. Eng., Kyungpook Nat. Univ., Performance comparison of sliding mode observers for back EMFs based speed estimation in PMSM, in: 15th International Conference on Control, Automation and Systems (ICCAS), 2015.
J. Resendiz, W. Yu, L. Fridman, Discrete-time sliding mode neural observer for continuous time mechanical systems, in: 47th IEEE Conference on Decision and Control, 2008, pp. 2838–2843.
L. Da, X. Wang, Observer-based decentralized fuzzy neural sliding mode control for interconnected unknown chaotic systems via network structure adaptation, Fuzzy Sets Syst. 16 (2010) 2066–2080.
H. Kim, J. Son, J. Lee, A high-speed sliding-mode observer for the sensorless speed control of a PMSM, IEEE Trans. Ind. Electr. 58 (9) (Sept 2011) 4069–4077.
Z. Qiao, T. Shi, Y. Wang, Y. Yan, C. Xia, X. He, New sliding- mode observer for position sensorless control of permanent- magnet synchronous motor, IEEE Trans. Ind. Electr. 60 (2) (Feb 2013) 710–719.
N.K. Quang, D.Q. Vinh, N. That, Q.P. Ha, Observer-based integral sliding mode control for sensorless PMSM drives using FPGA, in: International Conference on Control, Automation and information Sciences (ICCAIS), 2013, pp. 218–223.
P. Tao, J. Lin, Z. Chen, Ultra-low and zero speed sensorless control of permanent magnet synchronous motor based on sliding mode observer, in: IEEE Advanced Information Technology, Electronic and Automation Control Conference (IAEAC), 2015.
H.T. Yau, C.L. Chen, Chattering-free fuzzy sliding-mode control strategy for uncertain chaotic systems, Chaos Solitons Fract. 30 (3) (2006) 709–718.
Jafar Keighobadi, Parisa Doostdar, Fuzzy sliding mode observer for vehicular attitude heading reference system, Positioning 4 (3) (2013) 215–226.
