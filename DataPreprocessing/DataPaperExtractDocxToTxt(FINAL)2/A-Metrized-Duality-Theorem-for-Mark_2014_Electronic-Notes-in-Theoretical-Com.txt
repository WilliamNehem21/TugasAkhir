Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 308 (2014) 211–227
www.elsevier.com/locate/entcs

A Metrized Duality Theorem for Markov Processes


Abstract
We extend our previous duality theorem for Markov processes by equipping the processes with a pseudometric and the algebras with a notion of metric diameter. We are able to show that the isomorphisms of our previous duality theorem become isometries in this quantitative setting. This opens the way to developing theories of approximate reasoning for probabilistic systems.
Keywords: Markov processes, Aumann algebras, Stone duality, metrics, isometry, probabilistic reasoning, quantitative reasoning.

Introduction
Stone-type dualities are recognized as being ubiquitous, especially in computer science. For example Plotkin [22] and Smyth [23] (see also [21]) emphasized that the duality between state-transformer semantics and predicate-transformer semantics is an instance of Stone-type duality. A similar duality was observed for probabilistic transition systems [14]. Recently several authors, see for example [3], have emphasized the duality between logics and transition systems from a coalgebraic perspective. Mislove et al. [19] have found a duality between labelled Markov processes and C∗-algebras based on the closely related classical Gelfand duality.
In a recent paper [15], a Stone-type duality was developed for Markov processes defined on continuous state spaces. The algebraic counterpart of the Markov processes were called Aumann algebras in honour of Aumann’s work on probabilistic reasoning [1]. Aumann algebras capture, in algebraic form, a modal logic in which bounds on probabilities enter into the modalities. This logic can be stripped down to a very spartan core – just the modalities and finite conjunction – and still characterize bisimulation for labelled Markov processes [5, 6]. However, to obtain

http://dx.doi.org/10.1016/j.entcs.2014.10.012
1571-0661/© 2014 Elsevier B.V. All rights reserved.

the strong completeness properties that are implied by the duality theorems, one needs infinitary proof principles [12].
One of the critiques [11] of logics and equivalences used for the treatment of proba- bilistic systems is that boolean logic is not robust with respect to small perturbations of the real-valued system parameters. Accordingly, a theory of metrics [7, 8, 24, 25] was developed and metric reasoning principles were advocated. In the present paper we extend our exploration of duality theory with an investigation into the role of metrics and exhibit a metric analogue of the duality theory. This opens the way for an investigation into quantitative aspects of approximate reasoning.
In the present paper we integrate quantitative information into the duality of [15] by endowing Markov processes with a (pseudo)metric and Aumann algebras with a quantitative “norm-like” structure called a metric diameter. The interplay between the pseudometric and the boolean algebra is somewhat delicate and had to be carefully examined for the duality to emerge. The final results have easy proofs but the correct way to impose quantitative structure on Aumann algebras was elusive. The key idea is to axiomatize the notion of metric diameter on the Aumann algebra side. This is a concept more like a norm than a distance, but one can derive a metric from it. The idea comes from a paper by Banaschewski and Pultr [2] on Stone duality for metric spaces. However, our formulation is not quite the same as theirs.

Background
Given a relation R ⊆ M × M , the set N ⊆ M is R-closed iff
{m ∈ M | ∃n ∈ N, (n, m) ∈ R}⊆ N.

We assume that the reader is familiar with the definitions of field of sets, σ-algebra, measurable function, measurable space and measure.
If (M, Σ) is a measurable space and R ⊆ M × M is a relation on M , then Σ(R) denotes the set of measurable R-closed subsets of M .
Given a measurable space M = (M, Σ), we view the set Δ(M, Σ) of measures defined on Σ, as itself being a measurable space by endowing it with the σ-algebra F generated by the sets F (S, r)= {μ ∈ Δ(M, Σ) : μ(S) ≥ r} for arbitrary S ∈ Σ and r > 0.
Measure theory works most smoothly in conjunction with certain topological assump- tions. A Polish space is the topological space underlying a complete separable metric space. An analytic space is the image of a Polish space X under a continuous function f : X → Y , where Y is also a Polish space. The special properties of analytic spaces were crucial in the proof of the logical characterization of bisimulation [6].
Let M be a set and d : M × M → R.

: d(x, x)=0 
: d(x, y)= d(y, x)
: d(x, y) ≤ d(x, z)+ d(z, y) We say that (M, d) is a pseudometric space.
Pseudometrics arise as metric analogues of bisimulation [7, 8]. A pseudometric defines an equivalence relation called the kernel of the pseudometric, by x ∼ y iff d(x, y) = 0. The metrics defined in [7, 8] had bisimulation as the kernel.
In a pseudometric space (M, d), the open ball with center x ∈ M and radius ε > 0 is the set {y ∈ M | d(x, y) < ε}. The collection of open balls forms a base for a topology called the metric topology. We can extend the pseudometric to sets in a manner analogous to the way in which one extends metrics to compact sets.
Definition 2.2 For a pseudometric d on M we define the Hausdorff pseudometric
dH on the class of subsets of X by
dH (X, Y )= max(sup inf d(x, y), sup inf d(x, y)).
x∈X y∈Y	y∈Y x∈X

We need to verify that these are indeed pseudometrics. The proof of the following lemma is omitted here; it is not too hard.
Lemma 2.3 If d : M × M → [0, 1] is a pseudometric on M, then dH is a pseudo- metric on subsets of M.
Markov processes (MPs) are models of probabilistic systems with a continuous state space and probabilistic transitions [6, 9, 20]. In earlier papers, they were called labeled Markov processes to emphasize the fact that there were multiple possible actions, but here we will suppress the labels, as they do not contribute any relevant structure for our results.
Definition 2.4 [Markov process] A Markov process (MP) is a tuple M = (M, Σ, θ), where (M, Σ) is an analytic space and θ ∈ JM → Δ(M, Σ)).
In a Markov process M = (M, Σ, θ), M is the support set, denoted by suppM, and θ is the transition function. For m ∈ M , θ(m):Σ → [0, 1] is a probability measure on the state space (M, Σ). For N ∈ Σ, the value θ(m)(N ) ∈ [0, 1] represents the probability of a transition from m to a state in N .
The condition that θ is a measurable function JM → Δ(M, Σ)) is equivalent to the condition that for fixed N ∈ Σ, the function m '→ θ(m)(N ) is a measurable function JM → [0, 1]) (see e.g. Proposition 2.9 of [9]).

Markovian logic (ML) is a multi-modal logic for semantics based on MPs [1, 4, 10, 13, 16, 18, 26]. In addition to the Boolean operators, this logic is equipped with probabilistic modal operators Lr for r ∈ Q0 that bound the probabilities of tran- sitions. Intuitively, the formula Lrϕ is satisfied by m ∈M whenever the probability of a transition from m to a state satisfying ϕ is at least r.
Definition 2.5 [Syntax] The formulas of L are defined by the grammar
ϕ ::= ⊥| ϕ → ϕ | Lrϕ
where r can be any element of Q0.
The Boolean operators ∨, ∧, ¬, and T are defined from → and ⊥ as usual. For
r1,..., rn ∈ Q0 and ϕ ∈ L, let
Lr1···rn ϕ = Lr1 ··· Lrn ϕ.

The semantics for Lrϕ is defined as follows; the semantics of the other constructs are obvious. For MP M = (M, Σ, θ) and m ∈ M ,
M,m |= Lrϕ if θ(m)(Jϕ)) ≥ r,
where Jϕ) = {m ∈ M | M,m |= ϕ}.
For this to make sense, Jϕ) must be measurable, this is readily verified. We define negation in the obvious fashion and use the words valid and satisﬁable in the usual way.
This logic can be axiomatized using Hilbert-style axioms. The (strong) complete- ness of this logic is proved in [12, 18, 26] by assuming Lindenbaum’s lemma (every consistent set can be expanded to a maximal consistent set) as a meta-axiom. The duality theorem of Kozen et al. [15] implies strong completeness without needing this assumption.
The logical equivalence induced by ML on the class of MPs coincides with bisimulation equivalence [6, 20]. The proof requires that the state space be an analytic space.

Stone Duality for Markov Processes
In this section we briefly summarize the results of our previous duality paper [15].
We introduce an algebraic version of Markovian logic consisting of a Boolean algebra with operators Fr for r ∈ Q0 corresponding to the operators Lr of ML. We call these algebras Aumann algebras. They are dual to certain Markov processes constructed from zero-dimensional Hausdorff spaces called Stone–Markov processes (SMPs).

Definition 3.1 [Aumann algebra] An Aumann algebra (AA) is a structure A = (A, →, ⊥, {Fr}r∈Q0 , ≤) where
(A, →, ⊥, ≤) is a Boolean algebra;
for each r ∈ Q0, Fr : A → A is a unary operator; and
the axioms in Table 1 hold for all a, b ∈ A and r, s, r1,..., rn ∈ Q0.
The Boolean operations V, Λ, ч, and T, are defined from → and ⊥ as usual.
Morphisms of Aumann algebras are Boolean algebra homomorphisms that commute with the operations Fr. The category of Aumann algebras and Aumann algebra homomorphisms is denoted AA.
We abbreviate Fr1 ··· Frn a by Fr1···rn a. (AA1) T≤ F0a
(AA2) T≤ FrT
(AA3) Fra ≤ чFsчa, r + s > 1
(AA4) Fr(a Λ b) Λ Fs(a Λ чb) ≤ Fr+sa, r + s ≤ 1 (AA5) чFr(a Λ b) Λ чFs(a Λ чb) ≤ чFr+sa, r + s ≤ 1 (AA6) a ≤ b ⇒ Fra ≤ Frb
(AA7)  Vr<s Fr1···rnra = Fr1···rnsa
Table 1 Aumann algebra
The operator Fr is the algebraic counterpart of the logical modality Lr. The first two axioms state tautologies, while the third captures the way Fr interacts with negation. Axioms (AA4) and (AA5) assert finite additivity, while (AA6) asserts monotonicity.
The most interesting axiom is the infinitary axiom (AA7). It asserts that Fr1···rnsa is the greatest lower bound of the set {Fr1···rnra | r < s} with respect to the natural order ≤. In SMPs, it implies countable additivity.
As expected, the formulas of Markovian logic modulo logical equivalence form a free countable Aumann algebra. Define ≡ on formulas in the usual way and let [ϕ] denote the equivalence class of ϕ modulo ≡, and let L≡ = {[ϕ] | ϕ ∈ L}.
Theorem 3.2 The structure
(L/≡, →, [⊥], {Lr}r∈Q0 , ≤)
is an Aumann algebra, where [ϕ] ≤ [ψ] iff ▶ ϕ → ψ.
A Stone–Markov process (SMP) is a Markov process (M, A, θ), where A is a distin- guished countable base of clopen sets that is closed under the set-theoretic Boolean

operations and the operations
Fr(A)= {m | θ(m)(A) ≥ r |},	r ∈ Q0.
The measurable sets Σ are the Borel sets of the topology generated by A. Morphisms of such spaces are required to preserve the distinguished base; thus a morphism f : M→N is a continuous function such that
for all m ∈ M and B ∈ ΣN ,
θM(m)(f−1(B)) = θN (f (m))(B);

for all A ∈ AN , f−1(A) ∈ AM.
Unlike Stone spaces, SMPs are not topologically compact, but we do postulate a completeness property that is a weak form of compactness, which we call saturation. One can saturate a given SMP by a completion procedure that is reminiscent of Stone–Cˇech compactification [15]. Intuitively, one adds points to the structure
without changing the represented algebra. An MP is saturated if it is maximal with respect to this operation.
Definition 3.3 [Stone–Markov Process] A Markov process M = (M, A, θ) with distinguished base is a Stone–Markov process (SMP) if it is saturated.
The morphisms of SMPs are just the morphisms of MPs with distinguished base as defined above.
The category of SMPs and SMP morphisms is denoted SMP. Fix an arbitrary countable Aumann algebra
A = (A, →, ⊥, {Fr}r∈Q0 , ≤).
Let U∗ be the set of all ultrafilters of A. The classical Stone construction gives a Boolean algebra of sets isomorphic to A with elements
Qa¢∗ = {u ∈ U∗ | a ∈ u},	QA¢∗ = {Qa¢∗ | a ∈ A}.

The sets Qa¢∗ generate a Stone topology τ∗ on U∗, and the Qa¢∗ are exactly the clopen sets of the topology.
Let F be the set of elements of the form αr = Ft ···t ra for a ∈ A and t1,..., tn,r ∈ Q0.
1	n
As before, we consider this term as parameterized by r; that is, if αr = Ft ···t ra,
1	n
then αs denotes Ft ···t sa. The set F is countable since A is. Axiom (AA7) asserts
1	n

all infinitary conditions of the form

αs =   αr.	(1)
r<s

for αs ∈ F. Let us call an ultrafilter u bad if it violates one of these conditions in the sense that for some αs ∈ F, αr ∈ u for all r < s but αs /∈ u. Otherwise, u is called good. Let U be the set of good ultrafilters of A.
Let τ = {B ∩U | B ∈ τ∗} be the subspace topology on U , and let
Qa¢ = {u ∈U | a ∈ u} = Qa¢∗ ∩U	QA¢ = {Qa¢ | a ∈ A}.

Then τ is countably generated by the sets Qa¢ and all Qa¢ are clopen in the subspace topology.
We can now form a Markov process M(A) = (U, Σ, θ), where Σ is the σ-algebra generated by QA¢ and θ : U → QA¢ → [0, 1] is defined on the generators by
θ(u)(Qa¢)= sup{r ∈ Q0 | Fra ∈ u} = inf{r ∈ Q0 | чFra ∈ u}.
It can be shown that θ extends uniquely to a transition function [15].
Theorem 3.4 If A is a countable Aumann algebra, then M(A)= (U, QA¢, θ) is a Stone Markov process.
Most of the technical difficulties of our earlier paper are in the proof of this theorem.
Let M = (M, B, θ) be a Stone Markov process with distinguished base B. By definition, B is a field of clopen sets closed under the operations
Fr(A)= {m ∈ M | θ(m)(A) ≥ r}.
Theorem 3.5 The structure B with the set-theoretic Boolean operations and the operations Fr, r ∈ Q0 is a countable Aumann algebra.
We denote this algebra by A(M). Now we have the duality theorem.
Theorem 3.6 (Duality Theorem [15])
Any countable Aumann algebra A is isomorphic to A(M(A)) via the map
β : A→ A(M(A)) deﬁned by
β(a)= {u ∈ supp(M(A)) | a ∈ u} = Qa¢.

	Any Stone Markov process M = (M, A, θ) is homeomorphic to M(A(M)) via the map α : M→ M(A(M)) deﬁned by
α(m)= {A ∈A| m ∈ A}.

In [15], we also give a categorical version of this theorem with the contravariant functors between the two categories given explicitly.

Extending the Duality to Metrized Markov Processes
We add quantitative structure to both Markov processes and Aumann algebras. We prove an extended version of the representation theorem for metrized Markov processes versus metrized Aumann algebras. This theorem states that starting from an arbitrary metrized Markov process, we can extend the Aumann algebra constructed in the previous section to a metrized Aumann algebra that preserves the pseudometric and conversely. In other words the natural isomorphisms that arise in the duality of [15] will turn out to be isometries.
We equip Stone Markov processes with a pseudometric that measures distances between the states of the MP. The key condition that we impose is that for a particular state m, the diameters of the clopens containing m converges to 0.
Definition 4.1 [Metrized Markov process] A metrized Markov process is a tuple (M, d), where M = (M, A, θ) is a Stone Markov process with A its countable base of clopens and d : M × M → [0, 1] is a pseudometric on M satisfying for arbitrary m ∈ M the property


(M)	inf
c∈A,m∈c
sup{d(n, nj) | n, nj ∈ c} = 0.


The following lemma gives a number of conditions equivalent to (M). In particular, it shows the connection between the topology of the Stone Markov space and the pseudometric topology.
Lemma 4.2 For a metrized MP (M, d), where M = (M, A, θ), the following are equivalent:

∀m,	inf
c∈A,m∈c
sup{d(n, nj) | n, nj ∈ c} =0 

∀m, mj	inf
c∈A,m,m′∈c
sup{d(n, nj) | n, nj ∈ c} = d(m, mj)

∀m, ∀ε > 0 ∃c ∈A (m ∈ c Λ ∀n, nj ∈ c d(n, nj) < ε)
∀m ∀ε > 0 ∃c ∈A (m ∈ c Λ ∀n ∈ c d(m, n) < ε)
The topology generated by A reﬁnes the pseudometric topology generated by d.
	The pseudometric d is continuous in both arguments with respect to the A- topology.

Proof. Note that (i) is just (M).
⇔ (iii) is immediate from the definitions.
For (iii) ⇒ (iv), we can substitute m, n for n, nj in (iii).

For (iv) ⇒ (iii), let m and ε > 0 be arbitrary, and let c ∈ A such that m ∈ c and for all n ∈ c, d(m, n) < ε/2 and d(n, m) < ε/2. Then for any n, nj ∈ c, d(n, nj) ≤ d(n, m)+ d(m, nj) < ε/2+ ε/2= ε.
For (iv) ⇔ (v), let Nε(m)= {x | d(m, x) < ε}. Then,
∀m ∀ε > 0 ∃c ∈A (m ∈ c Λ ∀n ∈ c d(m, n) < ε Λ d(n, m) < ε)
⇔ ∀m ∀ε > 0 ∃c ∈A (m ∈ c Λ ∀n ∈ c n ∈ Nε(m))
⇔ ∀m ∀ε > 0 ∃c ∈A (m ∈ c Λ c ⊆ Nε(m)).

The last statement says that every basic open neighborhood of the pseudometric topology contains a basic open neighborhood of the A-topology, which says exactly that the A-topology refines the pseudometric topology.
For (iii) ⇒ (vi), to show that d is continuous in its second argument, let m, x and ε > 0 be arbitrary and let c ∈A such that x ∈ c and for all n, nj ∈ c, d(n, nj) < ε. Then for all y ∈ c,
d(m, y) ≤ d(m, x)+ d(x, y) < d(m, x)+ ε
d(m, x) ≤ d(m, y)+ d(y, x) < d(m, y)+ ε

so d(m, y) ∈ (d(m, x) − ε, d(m, x)+ ε). That d is continuous in its first argument follows from symmetry.
For the other direction, suppose d is continuous in its second argument. Then for all m and ε > 0, the set Nε(m) is open and contains m, thus there exists a basic open set c ∈A such that m ∈ c and c ⊆ Nε(m). Thus the A-topology refines the pseudometric topology of d.
Statement (ii) implies (i) immediately by taking mj = m in (ii).
To show (i) implies (ii), let m, mj and ε > 0 be arbitrary. From (iv), we have c ∈A such that m ∈ c and from (iii) we have that for all n, nj ∈ c, d(n, nj) < ε/2 and we have cj ∈A such that mj ∈ cj and for all n, nj ∈ cj, d(n, nj) < ε/2. We claim that for all n, nj ∈ c ∪ cj, d(n, nj) < d(m, mj)+ ε, which will establish (ii).
If n, nj ∈ c, then
d(n, nj) ≤ d(n, m)+ d(m, nj) < ε/2+ ε/2= ε ≤ d(m, mj)+ ε.

If n, nj ∈ cj, the argument is the same, replacing m by mj. If n ∈ c and nj ∈ cj, then
d(nj, n)= d(n, nj) ≤ d(n, m)+ d(m, mj)+ d(mj, nj)
< ε/2+ d(m, mj)+ ε/2= d(m, mj)+ ε.

2

Definition 4.3 [Isometric Markov processes] Given two metrized MPs (Mi, di), where Mi = (Mi, Σi, θi) for i = 1, 2, an isometry from M1 to M2 is a map f : M1 → M2 such that for arbitrary m, n ∈ M1,
d1(m, n)= d2(f (m),f (n)).

Now we introduce the metrized Aumann algebras. Despite their name, the metrized AAs are not directly equipped with a pseudometric structure, but with a concept of metric diameter. Later we will prove that the metric diameter can indeed define a pseudometric.
Definition 4.4 [Metrized Aumann algebra] A metrized Aumann algebra is a tuple (A, | |), where A = (A, →, ⊥, {Fr}r∈Q0 , ≤) is an Aumann algebra and | | : A → [0, 1] is a metric diameter on A, which is a map satisfying, for arbitrary a, b ∈ A and ultrafilter u, the following properties
(A1) |⊥| = 0;
(A2) if a ≤ b, then |a|≤ |b|;
(A3) if a Λ b /= ⊥, then |a V b|≤ |a| + |b|; (A4) inf{|a|| a ∈ u} = 0.
Definition 4.5 [Isometric Aumann Algebras] Given two metrizable Aumann Alge- bras (Ai, | |i) for i = 1, 2, an isometry from A1 to A2 is a map f : A1 → A2 such that for any a ∈ A1,
|a|1 = |f (a)|2.

We can now extend the duality results presented in the previous section to include the metric structure.
Consider a metrizable MP (M, d), where M = (M, A, θ). As before, let A(M) be the AA constructed from M. We extend this construction so that A(M) becomes a metrized AA. For arbitrary a ∈ A, let
|a|d = sup{d(m, n) | m, n ∈ a},
under the assumption that sup ∅ = 0.
Lemma 4.6 (A(M), | |d) is a metrized Aumann Algebra.
Proof. (A1) |⊥|d = 0 follows from the assumption that sup ∅ = 0.
(A2) If c1 ⊆ c2, then sup{d(m, n) | m, n ∈ c1}≤ sup{d(m, n) | m, n ∈ c2}.
(A3) Suppose that c1 ∩ c2 /= ∅. Let z ∈ c1 ∩ c2, x ∈ c1 and y ∈ c2. Then, the triangle inequality for d guarantees that
d(x, y) ≤ d(x, z)+d(z, y) ≤ sup{d(x, z) | x, z ∈ c1}+sup{d(z, y) | z, y ∈ c2} = |c1|+|c2|.

Consequently, sup{d(x, y) | x ∈ c1,y ∈ c2}≤ |c1| + |c2| and similarly, sup{d(y, x) | x ∈ c1,y ∈ c2}≤ |c1| + |c2|. Since
|c1 ∪ c2| = max{|c1|, |c2|, sup{d(x, y) | x ∈ c1,y ∈ c2}, sup{d(x, y) | x ∈ c2,y ∈ c1}},
|c1 ∪ c2|≤ |c1| + |c2|.
(A4) Using the notation of the previous duality theorem 3.6, we know that for any ultrafilter u of A(M) and any clopen c ∈ A, we have that
α−1(u) ∈ c iff c ∈ u.
Then, inf{|c|d | c ∈ u} = inf{|c|d | α−1(u) ∈ c}.
Since α is a bijection, α−1(u) ∈ M and |c|d = sup{d(n, nj) | n, nj ∈ c}, using (M) we obtain

inf
c∈A,c$α−1(u)
sup{d(n, nj) | n, nj ∈ c} = 0,

therefore inf{|c|d | c ∈ u} = 0.	2

Consider a metrizable AA (A, | |) and, as before, let M(A) be the MP constructed from A. We extend this construction so that M(A) will become a metrizable MP.
For arbitrary ultrafilters u, v of A, let
δ| |(u, v)= inf{|a|| a ∈ u ∩ v}.
Lemma 4.7 (M(A), δ| |) is a metrized MP.
Proof. First, we prove that δ| | is a pseudometric over the space of ultrafilters. From (A4) we can simply infer that δ| |(u, u) = 0, while the symmetry of δ| | follows from the definition.
We now prove the triangle inequality: let u, v, w be three arbitrary ultrafilters. Let
a ∈ u ∩ v, b ∈ u ∩ w and c ∈ w ∩ v. Obviously b ∪ c ∈ u ∩ v. Then,


inf
a∈u∩v
|a|≤ |b ∪ c|.

Since b ∩ c /= ∅, using (A3) we get |b ∪ c|≤ |b| + |c| which guarantees that for any
b ∈ u ∩ w and any c ∈ w ∩ v,


inf
a∈u∩v
|a|≤ |b| + |c|,



implying

Hence,
inf
a∈u∩v

|a|≤ inf
b∈u∩w

|b| + inf
c∈w∩v

|c|.

δ| |(u, v) ≤ δ| |(u, w)+ δ| |(w, v)

which proves that δ| | is a pseudometric.
It remains to verify (M). Since from theorem 3.6 we know that a ∈ u iff u ∈ β(a),
(M) follows directly from (A4).	2

Finally, we extend the representation theorem 3.6 to include the metric structure. Essentially, we show that the isomorphisms α and β of the duality theorem are isometries.
Theorem 4.8 (The metric duality theorem) (i) Any metrizable countable Aumann algebra (A, | |) is isomorphic to (A(M(A)), | |δ| | ) via the map β : A→ A(M(A)) deﬁned by
β(a)= {u ∈ supp(M(A)) | a ∈ u} = Qa¢.
Moreover, β is an isometry of metrizable Aumann algebras, i.e., for arbitrary
a ∈ A,
|a| = |β(a)|δ| | .
	Any metrizable Stone Markov process (M, d), where M = (M, A, θ) is homeo- morphic to (M(A(M)), δ| |d ) via the map α : M→ M(A(M)) deﬁned by
α(m)= {A ∈A| m ∈ A}.
Moreover, α is an isometry of MPs, i.e., for arbitrary m, n ∈ M,
d(m, n)= δ| |d (α(m), α(n)).

Proof. We only need to prove the two isometries.
The isometry of AAs. We need to prove that |a| = |β(a)|δ| | .
Observe that

|β(a)|δ
| | =	sup
u,v∈β(a)
δ| |(u, v)=	sup	inf
u,v∈β(a) a′∈u∩v
|aj|.

Since β(a) is the set of all ultrafilters containing a, aj quantifies over all elements that belong to the intersection of all ultrafilters containing a. But this intersection is nothing else but the principal filter ↑ a of a. Hence, the previous equality became


|β(a)|δ| | 
= inf
a′∈†a
|aj|.

Now the monotonicity stated by (A2) guarantees that


inf
a′∈†a
|aj| = |a|.


The isometries of MPs. We need to prove that d(m, n)= δ| |d (α(m), α(n)).

From Lemma 4.2(ii) we know that


d(m, n)=	inf
c∈A,c$m,n
|c|d.

From Theorem 3.6 we also know that
m, n ∈ c iff c ∈ α(m) ∩ α(n).
Consequently,
d(m, n)= inf{|c|d | c ∈ α(m) ∩ α(n)} = δ| |d (α(m), α(n)).
2

We have claimed earlier that the metric diameter on an Aumann algebra induces a pseudometric. We now demonstrate this.
Let (A, | |) be a metrized AA. For arbitrary a, b ∈A and ε > 0, let
Bε(b)=  {β(bj) | bj ∈ A, |bj|≤ ε, b Λ bj /= ⊥}.
Intuitively, Bε(b) is a ball that contains all ultrafilters that are at distance at most ε from some ultrafilter containing b. This definition allows us to define a natural distance on A by
d| |(a, b)= inf{ε > 0 | Bε(b) ⊇ β(a) and Bε(a) ⊇ β(b)}.
Intuitively, if in the light of the duality we think of the elements of A as sets of ultrafilters, then the previous distance is just the Hausdorff pseudometric of the distance between ultrafilters.
To prove that the previous construction is not void, we show in the next lemma that for any non-zero element a ∈A the ball Bε(a) is not empty for any ε.
Lemma 4.9 If a /= ⊥, then for any ε > 0 there exists aj /= ⊥ such that a Λ aj /= ⊥
and |aj|≤ ε.
Proof. Since a =/	⊥, there exists an ultrafilter u such that a ∈ u. For any other
aj ∈ u, a ∩ aj ∈ u, hence a ∩ aj /= ⊥. Moreover, using (A4) there exists aj ∈ u such that |aj|≤ ε.	2
Now we prove that d| | is indeed a pseudometric: it is the Hausdorff pseudometric of the pseudometric δ| | on ultrafilters.
Lemma 4.10 The function d| | previously deﬁned on the support set of a metrizable Aumann Algebra is a pseudometric. Moreover,

d| |(a, b)= max{ sup	inf δ| |(u, v),	sup	inf
δ| |(v, u)}.

u∈β(a) v∈β(b)	u∈β(a) v∈β(b)

We omit the proof, which is not completely trivial, from this abstract.

Metric Duality in Categorical Form
We present the previous results in a more categorical format. The categories of metrized Aumann algebras (MAA) and metrized Markov processes (MMP) are defined as follows.
The objects of MAA are metrized AAs and their morphisms are expansive morphisms of AAs, i.e., morphisms f : A1 → A2 of AAs such that for any a ∈ A1,
|a|1 ≤ |f (a)|2.

The objects of MMP are metrized MPs and their morphisms are non-expansive morphisms of MPs, i.e., morphisms f : M1 → M2 of SMPs such that for any m, n ∈ M1,
d1(m, n) ≥ d2(f (m),f (n)).
We define contravariant functors A : MMP → MAAop and M : MAA → MMPop. The functor A on an object M produces the Aumann algebra A(M) defined in Theorem 3.5. On arrows f : M→N we define A(f )= f−1 : A(N ) → A(M). We have previously proved that this is an Aumann algebra homomorphism. To see that it is also expansive, consider a morphism f : M→N such that for any m, n ∈ M,
dM(m, n) ≥ dN (f (m),f (n)).
Observe that for arbitrary a ∈ A(N ),
|a|A(N ) = |a|d	and |f−1(a)|A(M) = |f−1(a)|d
and in this context the previous inequality guarantees that
|a|A(N ) ≤ |f−1(a)|A(M).

The functor M : MAA → MMPop on an object A gives the Stone–Markov process M(A) defined in Theorem 3.4. On morphisms h : A → B, it maps ultrafilters to ultrafilters by M(h)= h−1 : M(B) → M(A); that is,
M(h)(u)= h−1(u)= {A ∈ AN | h(A) ∈ u}.
Another way to view M(h) is by composition, recalling that an ultrafilter can be identified with a homomorphism u : A→  by u = {a | u(a)= 1}. In this view,
M(h)(u)= u ◦ h,
where ◦ denotes function composition.

We have proven in our previous paper [15] that this is a morphism of SMPs. That it is also non-expansive can be demonstrated as follows.
Let h : A→B be a morphism such that for arbitrary a ∈ A,
|a|A ≤ |f (a)|B.
Using the previous results it is not difficult to verify that for arbitrary ultrafilters
u, v of B,
δ| | (u, v) ≥ δ| | (h−1(u), h−1(v)).
B	A
And since
δ| | (u, v)= δM(B)(u, v) and δ| | (h−1(u), h−1(v)) = δM(A)(h−1(u), h−1(v)),
B	A
We obtain that M(h) is non-expansive.
Theorem 4.11 The functors M and A deﬁne a dual equivalence of categories.
A
MMP	MAAop
M

Conclusions
We have extended the duality theory of [15] to a quantitative setting. It is important to note that the conditions we have imposed on the pseudometric relate the topology of the Markov process to the pseudometric topology. This can be seen from the fact that the pseudometric topology is refined by the Stone topology. We have defined our Stone Markov processes to be Hausdorff spaces, which was necessary for the duality theory. In effect, this means that the clopens separate points; in other words, one cannot have two states that satisfy exactly the same formulas. In view of the logical characterization of bisimulation, this implies that no two distinct states are bisimilar; that is, the process is already minimal with respect to bisimulation. If we look at a broader class of Markov processes, then we would have possibly nontrivial bisimulations on the space. The Stone Markov processes would be a reflective subcategory with the reflector sending each Markov process to a version of the process with all the bisimulation equivalence classes collapsed to point; this would be a Stone Markov process. How does the topology on a Stone Markov process “know” about the transition structure? Note that the base of clopens is required to be closed under the Fr operations, which are defined in terms of the transition function.
The only work of which we are aware similar to this is a paper by Banaschewski and Pultr [2] called “A Stone duality for metric spaces.” They are not working with Markov processes, so there is nothing like the Aumann algebra structure there. They

gave us the idea of using a metric diameter, but their axiomatization is different and the proofs that we developed do not resemble theirs.
The main impact of this work is to put quantitative reasoning about Markov processes on a firmer footing. It has been over a decade since metric analogues of bisimulation were developed, but they have not had the impact that they might have had. One reason is that with ordinary logical reasoning, one has a clear understanding of what completeness means, thus users of these logics have a good understanding of the power of the principles they are using. What does completeness mean for metric reasoning and approximate reasoning in general? The standard Stone-type duality theorem captures the concept of completeness; it is our hope that the present work will pave the way towards a similar understanding of approximate reasoning principles. There is much to be done, however. In a previous paper [17] we began investigating the relationship between the logic and metrics on Markov processes. The results of the present paper could perhaps strengthen and deepen these preliminary results.

Acknowledgments
Panangaden’s research was supported by an NSERC grant. Mardare’s research was supported by VKR Center of Excellence MT-LAB and by the Sino-Danish Basic Research Center IDEA4CPS. Kozen’s research was supported by the National Security Agency.

References
	Robert Aumann. Interactive epistemology II: probability. International Journal of Game Theory, 28:301–314, 1999.
	B. Banaschewski and A. Pultr. Stone duality for metric spaces. In R. A. G. Seely, editor, Category Theory 1991, volume 13 of CMS Conference Proceedings, pages 33–42. CMS, 1991.
	M. M. Bonsangue and A. Kurz. Duality for logics of transition systems. In FoSSaCS, pages 455–469, 2005.
Luca Cardelli, Kim G. Larsen, and Radu Mardare. Continuous markovian logic - from complete axiomatization to the metric space of formulas. In CSL, pages 144–158, 2011.
	J. Desharnais, A. Edalat, and P. Panangaden. A logical characterization of bisimulation for labelled Markov processes. In proceedings of the 13th IEEE Symposium On Logic In Computer Science, Indianapolis, pages 478–489. IEEE Press, June 1998.
	J. Desharnais, A. Edalat, and P. Panangaden. Bisimulation for labeled Markov processes. Information and Computation, 179(2):163–193, Dec 2002.
J. Desharnais, V. Gupta, R. Jagadeesan, and P. Panangaden. Metrics for labeled Markov systems. In
Proceedings of CONCUR99, number 1664 in Lecture Notes in Computer Science. Springer-Verlag, 1999.
Jos´ee Desharnais, Vineet Gupta, Radhakrishnan Jagadeesan, and Prakash Panangaden. A metric for labelled Markov processes. Theoretical Computer Science, 318(3):323–354, June 2004.
E.-E. Doberkat. Stochastic Relations. Foundations for Markov Transition Systems. Chapman and Hall, New York, 2007.

	R. Fagin and J. Y. Halpern. Reasoning about knowledge and probability. Journal of the ACM, 41(2):340–367, 1994.
A. Giacalone, C. Jou, and S. Smolka. Algebraic reasoning for probabilistic concurrent systems. In
Proceedings of the Working Conference on Programming Concepts and Methods, IFIP TC2, 1990.
	R. Goldblatt. Deduction systems for coalgebras over measurable spaces. Journal of Logic and Computation, 20(5):1069–1100, 2010.
	Aviad Heifetz and Philippe Mongin. Probability logic for type spaces. Games and Economic Behavior, 35(1-2):31–53, April 2001.
D. Kozen. A probabilistic PDL. Journal of Computer and Systems Sciences, 30(2):162–178, 1985.
Dexter Kozen, Kim G. Larsen, Radu Mardare, and Prakash Panangaden. Stone duality for Markov processes. In Proceedings of the 28th Annual IEEE Symposium On Logic In Computer Science. IEEE Press, 2013.
K. G. Larsen and A. Skou. Bisimulation through probablistic testing. Information and Computation, 94:1–28, 1991.
	Kim G. Larsen, Radu Mardare, and Prakash Panangaden. Taking it to the limit: Approximate reasoning for markov processes. In Proceedings of the 37th International Symposium on the Mathematical Foundations of Computer Science, volume 7464 of Lecture Notes In Computer Science, pages 681–692, 2012.
Radu Mardare, Luca Cardelli, and Kim G. Larsen. Continuous markovian logics - axiomatization and quantified metatheory. Logical Methods in Computer Science, 8(4), 2012.
M. Mislove, J. Ouaknine, D. Pavlovic, and J. Worrell. Duality for labelled Markov processes. In
I. Walukiewicz, editor, Foundations of Software Science and Computation Structures, FOSSACS, volume 2987 of Lecture Notes In Computer Science, pages 393–407, 2004.
Prakash Panangaden. Labelled Markov Processes. Imperial College Press, 2009.
G. D. Plotkin. Lecture notes on domain theory. Available from his home page as The Pisa Notes, 1983.
	Gordon D. Plotkin. Dijkstra’s predicate transformers and Smyth’s power domains. In Abstract Software Specifications, volume 86 of Lecture Notes in Computer Science, pages 527–553. Springer, 1979.
	M. Smyth. Powerdomains and predicate transformers. In J. Diaz, editor, Proceedings of the International Colloquium On Automata Languages And Programming, pages 662–676. Springer-Verlag, 1983. Lecture Notes In Computer Science 154.
	Franck van Breugel and James Worrell. An algorithm for quantitative verification of probabilistic systems. In K. G. Larsen and M. Nielsen, editors, Proceedings of the Twelfth International Conference on Concurrency Theory - CONCUR’01, number 2154 in Lecture Notes In Computer Science, pages 336–350. Springer-Verlag, 2001.
	Franck van Breugel and James Worrell. Towards quantitative verification of probabilistic systems. In Proceedings of the Twenty-eighth International Colloquium on Automata, Languages and Programming. Springer-Verlag, July 2001.
C. Zhou. A complete deductive system for probability logic with application to Harsanyi type spaces. PhD thesis, Indiana University, 2007.
