Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 298 (2013) 71–92
www.elsevier.com/locate/entcs
On Concurrent Games with Payoff
Pierre Clairambault1,2 Glynn Winskel3
Computer Laboratory University of Cambridge

Abstract
The paper considers an extension of concurrent games with a payoff, i.e. a numerical value resulting from the interaction of two players. We extend a recent determinacy result on concurrent games [5] to a value theorem, i.e. a value that both players can get arbitrarily close to, whatever the behaviour of their opponent. This value is not reached in general, i.e. there is not always an optimal strategy for one of the players (there is for finite games). However when they exist, we show that optimal strategies are closed under composition,
which opens up the possibility of computing optimal strategies for complex games compositionally from optimal strategies for their component games.
Keywords: Concurrent Games, Game Semantics, Determinacy.


Introduction
Games are a well-established tool in mathematics, economics, logic, and of course computer science: in the latter, two-player games in particular are very widely used to model situations where an agent (e.g. a program) interacts with its environment (e.g. the user, the operating system). For instance, researchers in game semantics
[9] have managed to build very precise (fully abstract [1,8]) models of higher-order programming languages with various computational effects. Another particularly rich line of work has been the application of game-theoretic tools for algorithmic and verification purposes: one expresses a desirable property of a system as a game, and reduces the satisfaction of this property to the existence of a “good” strategy for this game. Here, the meaning of “good” can be either qualitative (positions are winning or losing, with each player wanting to reach a winning position) or quantitative (positions have a given payoff, with both players trying to maximize their payoff). For these purposes, one generally wants the games considered to be determined :

1 The authors gratefully acknowledge the support of the ERC Advanced Grant ECSYM.
2 Email: Pierre.Clairambault@cl.cam.ac.uk
3 Email: Glynn.Winskel@cl.cam.ac.uk

1571-0661 © 2013 Elsevier B.V. Open access under CC BY-NC-ND license.
http://dx.doi.org/10.1016/j.entcs.2013.09.008

qualitatively, this means that one of the players necessarily has a winning strategy, and quantitatively that the game has a well-defined value that well-chosen strategies can reach or get arbitrarily close to. For this reason, the classes of games considered for these purposes generally enjoy determinacy : the most well-known such result is Martin’s famous theorem [12] stating that for sequential, tree-like games whose winning positions form a Borel set, one of the players must have a winning strategy. It is well-known that Martin’s theorem generalizes to the quantitative setting if the game is zero-sum, i.e. in each position the payoffs of the two players sum to zero. In the last decade, there has been a growing interest in extensions of these games with concurrency. One very successful definition of (turn-based) concurrent games has been proposed by Henzinger, de Alfaro et. al. [3,4,7]: their games are based on Blackwell games [13], where at any point, the next state is decided by a function of parallel choices of both players. In these games, the pure strategy determinacy result of sequential games is weakened into a mixed strategy determinacy, where strategies are allowed to make probabilistic choices.
However in semantics, models of concurrent processes generally allow a more liberal, non turn-based form of concurrency. Starting with the work of Petri, many have come to advocate a view of concurrency based on partial orders, specifying the causal dependency between events—see [16] for an early summary of Petri’s work and its relation with domain theory. Following this approach, several notions of concurrent games have been proposed as a basis for denotational semantics: in terms of closure operators [2] or asynchronous transition systems [15]. Recently, Winskel and Rideau introduced a more general setting for concurrent games [17]. It is based on the notion of event structure [18], a partial order of causal dependency on events with a consistency relation expressing nondeterministic choice. In the present paper, it is this framework that we will refer to as concurrent games. We showed in [5] that in this setting qualitative determinacy is satisfied for well-founded games meeting a structural condition called race-freedom expressing that moves of one player do not directly interfere with moves of the other. Here, we consider an extension of concurrent games with zero-sum payoff, and show a generalization of the qualitative determinacy result of [5] to a quantitative one. As the reader will see this is not a trivial exercise and requires a much finer analysis than for the qualitative case.
Note that we obtain pure strategy determinacy – our strategies do not make probabilistic choices, although they can act non-deterministically. There is an ap- parent contradiction with the line of work based on Blackwell games mentioned above, since they only have mixed strategy determinacy. This is due to a crucial difference between the two settings: in our games, no progess assumption is made and strategies can legitimately choose not to play, possibly resulting in a deadlock if both strategies choose to do so. We argue that this is a desirable property, since very often in computer science we have to deal with systems that might not termi- nate. However from the game theory perspective, this implies that Blackwell games are not instances of our zero-sum concurrent games. (They do fit into our general framework however—see [20].)

We also investigate quantitative features with respect to the compositional struc- ture of concurrent games. In sequential games, strategies can be composed using a form of parallel composition and a hiding operation to make internal play in- visible. This fact (first remarked on by Conway and emphasised by Joyal [10] in his analysis of Conway’s work [6]) is seldom used in economics and algorithmics. However, it is at the very heart of game semantics, the compositional analysis of programs and programming languages in terms of games and strategies. Our con- current games are compositional; in fact, the main result of [17] was to define and characterise strategies for which composition behaves well (i.e. is associative, and has identities). Not only is compositionality a prerequisite for building denotational models of programming languages (as they organize naturally as categories, see e.g. [11]), but it is also a very successful general approach for proving properties of com- plex programs. Adapting the earlier work on concurrent strategies, we show here that optimal strategies are stable under composition, thus building a bicategory of optimal strategies. This is a significant step towards a compositional analysis of optimal strategies: instead of modeling complex behaviours as payoff functions and then computing values and optimal strategies, construct complex optimal strategies by composition from elementary ones. Extensions with payoff should also prove useful for purely semantic purposes: pay-off is a powerful notion that allows us to express familiar winning strategies—as strategies of positive value—as well as more arcane game-theoretic notions, such as well-bracketing [14].
In Section 2, we recall the framework of concurrent games originally presented in [17]. In Section 3, we show how to enrich these concurrent games with payoff and introduce the notion of value of games and strategies. In Section 4, we prove the main result of our paper, the value theorem. Finally in Section 5, we investigate the compositional aspects of payoff games; in particular we show that optimal strategies are stable under composition and form a bicategory.

Preliminaries
Event structures
An event structure comprises (E, ≤, Con), consisting of a set E, of events which are partially ordered by ≤, the causal dependency relation, and a nonempty consistency relation Con consisting of finite subsets of E, which satisfy
{ej | ej ≤ e} is finite for all e ∈ E,
{e}∈ Con for all e ∈ E,
Y ⊆ X ∈ Con ⇒ Y ∈ Con,  and
X ∈ Con & e ≤ ej ∈ X ⇒ X ∪ {e}∈ Con
The conﬁgurations, C∞(E), of an event structure E consist of those subsets x ⊆ E
which are
Consistent: ∀X ⊆ x. X is finite ⇒ X ∈ Con , and

Down-closed: ∀e, ej. ej ≤ e ∈ x ⇒ ej ∈ x.
Often we shall be concerned with just the finite configurations of an event structure. We write C(E) for the ﬁnite configurations of an event structure E.
Two events which are both consistent and incomparable w.r.t. causal depen- dency in an event structure are regarded as concurrent. In games the relation of immediate dependency e d ej, meaning e and ej are distinct with e ≤ ej and no event in between, will play an important role. For X ⊆ E we write [X] for
{e ∈ E | ∃ej ∈ X. e ≤ ej}, the down-closure of X; note if X ∈ Con, then [X] ∈ Con is a configuration and in particular each event e is associated with a prime config- uration [e].
Notation 1 Let E be an event structure. We use x−⊂y to mean y covers x in
C∞(E), i.e. x ⊂ y in C∞(E) with nothing strictly in between, and x  e  y to mean

x∪ {e} = y for x, y ∈ C∞(E) and event e ∈/ x. We use x  e
, expressing that event

e
e is enabled at configuration x, when x−−⊂ y for some y.

Definition 2.1 Let E and Ej be event structures. A (partial) map of event structures f : E → Ej is a partial function on events f : E ~ Ej such that for all x ∈ C∞(E) its direct image fx ∈ C∞(Ej) and ∀e1, e2 ∈ x, f (e1) = f (e2) (with both defined) ⇒ e1 = e2 . (It is sufficient to verify the above condi- tions just for finite configurations x ∈ C(E).)

Maps of event structures compose as partial functions, with identity maps given by identity functions. We will say the map is total if the function f is total; then f restricts to a bijection x ∼= fx for x ∈ C∞(E).

Definition 2.2 We define the following two process operations.
Products. The category of event structures has products A×B with projections Π1 to A and Π2 to B. The effect is to introduce arbitrary synchronisations between events of A and events of B in the manner of process algebra.
Restriction. The restriction of an event structure E to a subset of events R, written E T R, is the event structure with events Ej = {e ∈ E | [e] ⊆ R} and causal dependency and consistency induced by E.

Using these two operations, we can obtain a notion of synchronized compo- sition. Synchronized compositions play a central role in process algebra, in such seminal work as Milner’s CCS and Hoare’s CSP. Synchronized compositions of event structures A and B are obtained as restrictions A × B T R. We obtain pullbacks as a special case. Let f : A → C and g : B → C be maps of event structures. Defin- ing P to be A × B T {p ∈ A × B | f Π1(p)= gΠ2(p) with both defined}, we obtain a

pullback square
P

B

C
in the category of event structures. When f and g are total the same construction gives the pullback in the category of event structures with total maps.
Some technology—for instance that of stable families [19]—is needed to con- struct and analyze products, synchronized compositions and pullbacks. For the purposes of this paper the following characterization of the pullback of total maps will be sufficient. By a ﬁnitary partial order is meant a partial order where every element dominates only finitely many elements. (The characterization follows from the construction of pullbacks in event structures from those in stable families [19].)
Proposition 2.3 . Let P, Π1, Π2 be the pullback of total maps f : A → C and g : B → C in the category of event structures. Conﬁgurations C∞(P ) correspond to the composite bijections
θ : x ∼= fx = gy ∼= y
between conﬁgurations x ∈ C∞(A) and y ∈ C∞(B) s.t. fx = fy for which the transitive relation generated on θ by taking
(a, b) ≤ (aj, bj) if a ≤A aj or b ≤B bj

is a ﬁnitary partial order—we call such θ secured bijections. The correspondence takes z ∈ C∞(P ) to the secured bijection got as the composite θz : Π1z ∼= f Π1z = gΠ2z ∼= Π2z and respects inclusion. A fortiori, Π1z = π1θz and Π2z = π2θz, where π1 and π2 are projections to the ﬁrst and second components of the pairs in θz.
Definition 2.4 Let (E, ≤, Con) be an event structure. Let V ⊆ E be a subset of ‘visible’ events. Define the projection of E on V , to be E↓V =def (V, ≤V , ConV ), where v ≤V vj iff v ≤ vj & v, vj ∈ V and X ∈ ConV iff X ∈ Con & X ⊆ V .

Concurrent strategies
Event structures with polarity
Both a game and a strategy in a game are to be represented using event structures with polarity, which comprise (E, pol ) where E is an event structure with a polarity function pol : E → {+, −} ascribing a polarity + (Player) or − (Opponent) to its events. The events correspond to (occurrences of) moves. Maps of event structures with polarity are maps of event structures which preserve polarities.
Definition 2.5 We define the following two simple operations on event structures with polarity.

Dual. The dual, E⊥, of an event structure with polarity E comprises the same underlying event structure E but with a reversal of polarities.
Simple parallel composition. Let A and B be event structures with polarity. The operation A  B simply juxtaposes disjoint copies of A and B, maintaining their causal dependency and specifying a finite subset of events as consistent if it restricts to consistent subsets of A and B. Polarities are unchanged.
The constructions previously introduced for event structures generalize directly in the presence of polarities.
Pre-strategies
Let A be an event structure with polarity, thought of as a game; its events stand for the possible occurrences of moves of Player and Opponent and its causal dependency and consistency relations stand for the constraints imposed by the game. A pre- strategy represents a nondeterministic play of the game—all its moves are moves allowed by the game and obey the constraints of the game; the concept will later be refined to that of strategy. A pre-strategy in A is defined to be a total map σ : S → A from an event structure with polarity S. Two pre-strategies σ : S → A and τ : T → A in A will be essentially the same when they are isomorphic, i.e. there is an isomorphism θ : S ∼= T such that σ = τθ; then we write σ ∼= τ .
Let A and B be event structures with polarity. Following Joyal [10], a pre- strategy from A to B is a pre-strategy in A⊥  B, so a total map σ : S → A⊥  B. We write σ : A+ B  ¸to express that σ is a pre-strategy from A to B. Note that a pre-strategy σ in a game A, e.g. σ : S → A, coincides with a pre-strategy from the empty game ∅ to the game A, i.e. σ : ∅+A .¸

Composing pre-strategies
We present the composition of pre-strategies via pullbacks. Given two pre-strategies σ : S → A⊥  B and τ : T → B⊥  C, ignoring polarities we can consider the maps on the underlying event structures, viz. σ : S → A  B and τ : T → B  C. Viewed this way we can form the pullback in the category of event structures as shown below
A ,T

idA τ
z 
P	A  B  

C 	 A¸ C


z	σ idC
S	C
where the map A  B  C → A  C is undefined on B and acts as identity on A and
C. The partial map from P to A  C given by the diagram above (either way round the pullback square) factors as the composition of the partial map P → P ↓ V , where V is the set of events of P at which the map P → A  C is defined, and a total map P ↓ V → A  C; the partial map acts as identity on V and is undefined otherwise, and the total map as f . The resulting total map gives us the composition

τ⊙σ : P ↓ V → A⊥  C once we reinstate polarities.
Identities w.r.t. composition are given by copy-cat strategies. Let A be an event structure with polarity. The copy-cat strategy from A to A is an instance of a pre-strategy, so a total map γA : CCA → A⊥  A. It describes a concurrent strategy based on the idea that Player moves, of positive polarity, always copy previous corresponding moves of Opponent, of negative polarity. For c ∈ A⊥  A we use c to mean the corresponding copy of c, of opposite polarity, in the alternative component. Define CCA to comprise the event structure with polarity A⊥  A together with the extra causal dependencies generated by c ≤CCA c for all events c with pol A⊥  A(c)= 
+. A finite subset of CCA is consistent if its down-closure w.r.t. ≤CCA is consistent in
A⊥ A. The copy-cat pre-strategy γA : A+ A  ¸is defined to be the map γA : CCA →
A⊥ A where γA acts as the identity function on the common set of events.
Strategies
The main result of [17] is that two conditions on pre-strategies, receptivity and in- nocence, are necessary and sufficient for copy-cat to behave as identity w.r.t. the composition of pre-strategies. Receptivity ensures an openness to all possible moves of Opponent. Innocence restricts the behaviour of Player: Player may only intro- duce new relations of immediate causality of the form g d ⊕ beyond those imposed by the game.
Definition 2.6 • Receptivity. A pre-strategy σ is receptive iff
a	s
σx−−⊂ & pol A(a)= −⇒ ∃!s ∈ S. x−−⊂ & σ(s)= a. 
Innocence. A pre-strategy σ is innocent when it is both
+-innocent: if s d sj & pol (s)=+ then σ(s) d σ(sj), and
−-innocent: if s d sj & pol (sj)= − then σ(s) d σ(sj). A strategy is a receptive and innocent pre-strategy.
Theorem 2.7 (from [17]) Let σ : A+ B  ¸be pre-strategy. Copy-cat behaves as identity w.r.t. composition, i.e. σ ◦ γA ∼= σ and γB ◦ σ ∼= σ, iff σ is receptive and innocent. Copy-cat pre-strategies γA : A+ A  ¸are receptive and innocent.
Theorem 2.7 motivated the definition of a strategy as a pre-strategy which is receptive and innocent. In fact, we obtain a bicategory, Games, in which the objects are event structures with polarity—the games, the arrows from A to B are strategies σ : A+ B  ¸and the 2-cells are maps of spans. The vertical composition of 2-cells is the usual composition of maps of spans. Horizontal composition is given by the composition of strategies ⊙ (which extends to a functor on 2-cells via the universality of pullback).
Interaction
In this paper, we will be particularly interested in the results of the interaction between a strategy σ : S → A and a counter-strategy τ : T → A⊥ in order to determine the resulting payoff. Unlike the composition τ⊙σ where the interaction of σ and τ are hidden, it is the status of the configurations in C∞(A) their full

interaction induces which decides the resulting payoff. Ignoring polarities, we have total maps of event structures σ : S → A and τ : T → A. Form their pullback,



S
P
z
T
z ,cτ
A, 

to obtain the event structure P resulting from the interaction of σ and τ . Because σ or τ may be nondeterministic there could be several maximal configurations in C∞(P ). Define the set of results of the interaction of σ and τ to be
⟨σ, τ≤ =def {σΠ1z | z is maximal in C∞(P )} .
For any two strategies σ : S → A and τ : T → A⊥, maximal configurations C∞(P ) correspond to maximal secured bijections—see Proposition 2.3. The set of such maximal secured bijections, the possible interactions of σ and τ , is denoted by [σ, τ ]. In particular, for any x ∈ C∞(A) we have x ∈ ⟨σ, τ≤ iff there exists a witness θ ∈ [σ, τ ] such that x = σπ1θ. We explore a little further the nature of such
a
witnesses. Say that x is +-maximal if for all x−−⊂ , then pol (a) = −. Because
σ and τ are receptive, maximality of z ∈ C∞(P ) amounts to +-maximality of Π1z and Π2z. Accordingly, finding a witness θ ∈ [σ, τ ] amounts to finding θ a secured bijection for which π1θ and π2θ are +-maximal.
Concurrent games with payoff
We begin the core of the paper, the treatment of payoff in concurrent games. R
denotes R ∪ {−∞, +∞}, the reals extended with a minimum and maximum.
Definition 3.1 A concurrent game with payoff is a triple (A, κ+, κ−), where
A	A
A is a concurrent game and κ+, κ− : C∞(A) → R are payoff functions.
A	A
Throughout this paper, we will only consider zero-sum concurrent games, i.e.
for all z ∈ C∞(A), κ−(z) = −κ+(z). It follows that our games with payoff will be
A	A
described by a concurrent game and its payoff function κA = κ+ : C∞(A) → R. We extend the usual constructions on concurrent games to games with payoff.
Definition 3.2 • Dual. If A is a concurrent game with payoff, then the payoff function on A⊥ is defined by κA⊥ (x)= −κA(x), for x ∈ C∞(A⊥).
Parallel composition. If A, B are concurrent games with payoff, then the payoff function on A  B is defined by κA  B (x)= κA(x1)+ κA(x2), where x1 ∈ C∞(A) is the projection of x on A and x2 ∈ C∞(B) is the projection of x on B.
We now turn to the definitions leading to the value of a game. Since games and strategies are nondeterministic, these definitions come in two variants: the optimistic describing the outcome of a game if all the nondeterministic choices are

in favour of Player, and the pessimistic describing the dual case, when all of those choices are in favour of Opponent. One of the main result of the paper will be that for race-free well-founded games (to be defined below), the two corresponding notions of value coincide.
Definition 3.3 We define the optimistic (↑) and pessimistic (↓) results of an interaction, and values of a strategy and of a game, as follows. Here, σ is a strategy on A and τ is a counter-strategy (a strategy on A⊥), and the notation σ : A signifies a strategy σ : S → A.
r↑(σ, τ ) = supx∈⟨σ,τ ⟩ κA(x)	r↓(σ, τ ) = infx∈⟨σ,τ ⟩ κA(x) v↑(σ) = infτ :A⊥ r↑(σ, τ )		v↓(σ) = infτ :A⊥ r↓(σ, τ ) v↑(A) = supσ:A v↑(σ)		 v↓(A) = supσ:A v↓(σ)
We say that a game A has a value if v↑(A) = v↓(A) = −v↓(A⊥) = −v↑(A⊥): the optimistic and pessimistic values coincide, and commute with (−)⊥. The com- mutation with (−)⊥ is a form of minimax property, since the order of quantification on strategies is reversed in v(A) and −v(A⊥), whereas the coincidence of the opti- mistic and pessimistic value deals with nondeterminism. Note that not all games have a value:
Example 3.4 Take the game A = g  ⊕ with two events of opposite polarities conflicting with each other, along with κ(∅) = 0, κ({⊕}) = 1 and κ({g}) = −2. Then it is easy to prove that v↑(A)= 1, v↓(A)= −2, v↑(A⊥)=2 and v↓(A⊥)= −1.
Example 3.5 The example above suggests a simple relationship between v↓(A) and v↑(A⊥) but this is not always the case. For example, consider the infinite game A comprising the event structure with polarity
g	⊕1 	 ⊕z2   ⊕z3   ·z· ·   ⊕zn   ·z· · 
where κ(∅)= 0, κ({⊕1,..., ⊕n})= −n, κ({⊕1,..., ⊕n} ∪ {g})= n, κ({⊕1,.. .})= 
+∞ and κ({⊕1,.. .} ∪ {g})= −∞. Then, one can establish the following values:
v↓(A) = 0	v↓(A⊥) = −∞
v↑(A) = +∞	v↑(A⊥) = −∞
These values are a bit subtle to establish, so we detail the proofs in the Appendix.
The first example features a race, where both players compete for the same resource, whereas the second example is not well-founded : the game allows infinite configurations. These brings us to the two following definitions, that will be crucial to get the value theorem.
Definition 3.6 An event structure S is well-founded if all its configurations are
a	a′
finite. A game A is race-free if for all x ∈ C(A) such that x−−⊂ and x−−⊂ with
pol (a)= − and pol (aj)= +, we have x ∪ {a, aj}∈ C(A).

Definition 3.7 Let A be a concurrent game with payoff, and x ∈ C∞(A). Let A/x
be the residual of A after x, comprising
events, {a ∈ A \ x | x ∪ [a]A ∈ C∞(A)},
consistency relation, X ∈ ConA/x ⇔ X ⊆f A/x & x ∪ [X]A ∈ C∞(A),
causal dependency, the restriction of that on A.

Define κA/x : C∞(A/x) → R by taking κA/x(y) = κA(x ∪ y). Finally, define (A, κA)/x = (A/x, κA/x). When x is a singleton {a}, we shall generally write A/a instead of A/{a}. Finally, we will often write v†(x) (resp. v↓(x)) for v†(A/x) (resp. v↓(A/x)) when A is understood from the context.
The value theorem
In this section, we prove the value theorem on concurrent games. The proof proceeds in two steps. First, we exhibit key constructions on strategies and the study the results of their interactions. This analysis will allow us to characterize the values of all positions of the game. Exploiting well-foundedness of the game, we will deduce the sought-for value theorem.

Constructions on strategies
In “glueing” strategies together it is helpful to assume that all the initial negative moves of the strategies are exactly the same, and indeed coincide with the initial negative moves of the game:
Lemma 4.1 Let σ : S → A be a strategy. Then there exists a strategy σj : Sj → A
with σ ∼= σj, for which
∀s ∈ S . pol S′ [s ]S′ = {−} ⇒ σ (s )= s .	(†)
Proof. As a consequence of receptivity and negative innocence [17], whenever ∅ ⊆— y in C(A) there is a unique x ∈ C(S) so that ∅ ⊆— x & σx = y. Consequently, the map σ induces an order isomorphism w.r.t. inclusion between configurations x ∈ C(S) where ∅ ⊆— x and y ∈ C(A) where ∅ ⊆— y. The order isomorphism restricts to an order isomorphism between prime configurations. It follows that σ is bijective between events s ∈ S— and events a ∈ A—. This bijection extends to a bijective renaming of events of S to those of Sj.	2
Henceforth we will assume all strategies satisfy the property (†). In particular, its adoption facilitates the definition of a ‘sum’ of strategies in a game.
Proposition 4.2 Let σi : Si → A, for i ∈ I, be strategies (assumed to satisfy (†)). W.l.o.g. we may assume that whenever indices i, j ∈ I are distinct then so are those events of Si and Sj which causally depend on a positive event (otherwise we could tag such events by their respective indices). Deﬁne S to be the event structure
with events Si∈I Si, causal dependency s ≤S ej iff s ≤S ej, for some i ∈ I, and

consistency X ∈ ConS iff X ∈ ConSi , for some i ∈ I. Deﬁning []i∈I σi(s)= σi(s) if
s ∈ Si yields a strategy []i∈I σi : S → A.
Proof. Pre-strategy. Follows from the observation that for any x ∈ C(Si∈I Si) there is i ∈ I such that x ∈ C(Si). Therefore preservation of configuration and local injectivity directly follow from those properties for the σis.
Receptivity. Trivial, since (†) is preserved by union and implies receptivity.
Innocence. For any s1, s2 ∈ Si∈I Si, if s1 d s2 then there is i ∈ I such that
s1, s2 ∈ Si and s1 d s2 in Si as well. Therefore if pol (s1) /= − or pol (s2) /= + then by innocence of σi we have σi(s1) d σi(s2) as well, therefore ([]i∈I σi)(s1) d ([]i∈I σi)(s2) and []i∈I σi is innocent.	2
The next construction takes a strategy σ on a game A/a, where a is a minimal
positive event of game A, and creates a strategy on A that starts by playing a, then resumes as σ.
a
Proposition 4.3 Suppose A is a race-free game such that ∅−−⊂ with pol (a)= +.

Then for any strategy σ : S → A/a, where w.l.o.g. a ∈/
playa(σ): Sj → A: the event structure Sj comprises
events, S ∪ {a},
S, there is a strategy

causal dependency, that on S extended by a ≤S′ s, for s ∈ S, whenever a ≤A σ(s),
with consistency, X ∈ ConS′ iff X ∩ S ∈ ConS,
and playa(σ)(s)= σ(s), for s ∈ S, with playa(σ)(a)= a.
Proof. It is easy to check that Sj is an event structure and that playa(σ) is a total map of event structures which preserves polarity. Innocence is inherited from σ. That it is receptive follows from the race-freedom of A: Let x ∈ C(Sj) and
a′
playa(σ)x−−⊂ where aj ∈ A and pol (aj)= −. If a ∈ x then receptivity condition for playa(σ) follows directly from that of σ. If a ∈/ x then x ∈ C(S) and playa(σ)x = σx.
a′
From the race-fredom of A we deduce that σx−−⊂ in A/a. Again the receptivity
condition for playa(σ) follows from that of σ.	2
Given a strategy on σ on a residual game A/a, where a is an initial negative event of A, we can create a strategy on A that awaits a, then resumes as σ.
a
Proposition 4.4 Suppose A is a game such that ∅−−⊂ with pol (a)= −. Then for
any strategy σ : S → A/a, where w.l.o.g. a ∈/ S, there is a strategy waita(σ): Sj →
A: the event structure Sj comprises
events, S ∪ A—, where A— =def {aj ∈ A | pol A[aj]A ⊆ {−}},
causal dependency, that on S and A— extended by a ≤S′ s, for s ∈ S, whenever
a ≤A σ(s) or pol (s)= +,
with consistency, X ∈ ConS′ iff X ∩ S ∈ ConS & waita(σ)X ∈ ConA, where waita(σ)(sj) is deﬁned to be σ(sj) if sj ∈ S, otherwise sj.
Proof. By innocence, the causal dependencies on S and A— agree where they

overlap. As a ∈/ S, by assumption, we obtain a partial order ≤S′ from the definition above. It is routine to check that Sj is an event structure.
Observe that if σ(s) ∈ A— then s ∈ S—, for all s ∈ S: otherwise there would be a maximal positive event on which s causally depended, contradicting −-innocence of σ.
In checking that waita(σ), clearly a total function, is a map of event structures it is straightforward to show that the image of a configuration x ∈ C(Sj) is down-closed in A. By definition waita(σ) preserves consistency, so waita(σ)x is also consistent and in C(A). Suppose now s1, s2 ∈ x with waita(σ)(s1) = waita(σ)(s2). If both s1, s2 ∈ S then σ(s1)= σ(s2) so s1 = s2 as σ is map of event structures. Otherwise, either s1 ∈/ S or s2 ∈/ S. If both s1 ∈/ S and s2 ∈/ S, then s1 = s2, directly from the definition of waita(σ). Otherwise, w.lo.g. suppose s1 ∈ S and s2 ∈/ S. Then σ(s1) = s2 and s2 ∈ A—. By the observation above, s1 ∈ S—. But σ is assumed to satisfy (†), so σ(s1)= s1 = s2. The function waita(σ) is indeed a map of event structures.
The map waita(σ) clearly preserves polarity. The construction preserves the innocence inherited from σ.  We show receptivity.  Suppose x ∈  C(S) and
a′
waita(σ)x−−⊂ in A where aj has negative polarity. Consider first the case when
a′
aj ∈ A—. Then it can be checked that x ∪ {aj} ∈ C(Sj). This yields x−−⊂ with
waita(σ)(aj) = aj. To show uniquesness, assume waita(σ)(sj) = aj. If sj ∈/ S
we obtain waita(σ)(sj) = sj = aj. If on the other hand, sj ∈ S we obtain waita(σ)(sj) = σ(sj) = aj ∈ A—. By the observation, sj ∈ S— and σ(sj) = sj as σ satisfies (†), and again sj = aj.
In the case where aj ∈/ A— there must be a1 ≤A aj with pol (a1) = +. Hence there is s1 ∈ x, with pol (s1)= +, such that σ(s1)= a1. From the causal dependency of
a′
Sj we must have a ∈ x. It follows that x \ {a} ∈ C(S) and σ(x \ {a})−−⊂ in A/a,
whereupon receptivity of σ ensures the required receptivity condition for waita(σ).2 We will make use later of the following extension of the notion of residual from
games to strategies:
Definition 4.5 Let σ : S → A be a strategy and x ∈ C∞(S). Define the function σ/x : S/x → A/σx to be the restriction of σ. In the case where x is a singleton {s}, we shall generally write σ/s instead of σ/{s}.
Proposition 4.6 For σ : S → A a strategy and x ∈ C∞(S), the function σ/s :
S/s → A/σ(s) is a strategy.
Proof. A straightforward check.	2
Interactions between the constructed strategies
Let A be a game with payoff κA and σ : S → A and τ : T → A⊥ be strategies. The set of values resulting from their interaction is given by {κAx | x ∈ ⟨σ, τ≤}, which we generally write as κ⟨σ, τ≤ when the game is clear from the context. We use ⟨σ, τ≤+ =def {x ∈ ⟨σ, τ≤ | + ∈ pol x} for the configurations in ⟨σ, τ≤ containing

events of positive polarity. In this subsection, we analyse the possible interactions between the strategies constructed above, and prove a sequence of key lemmas.
Lemma 4.7 Let A be a well-founded race-free game with payoff. Let σ : S → A
and τ : T → A⊥ be strategies. Then:
κ⟨σ, τ≤ = {−v | v ∈ κ⟨τ, σ≤}
Proof. Straightforward by definition of κA⊥ .	2
Lemma 4.8 If the game A is well-founded and race-free,
κ⟨ [] σi,τ≤⊆  κ⟨σi,τ≤	κ⟨ [] σi,τ≤+ =  κ⟨σi,τ≤+

i∈I
i∈I
i∈I
i∈I

Proof. First, we prove that κ⟨[]i∈I σi,τ≤ ⊆ Si∈I κ⟨σi,τ≤. Take y ∈ ⟨[]i∈I σi,τ≤. Necessarily, there is a secured bijection θ ∈ [[]i∈I σi,τ ] such that σπ1θ = y. By definition of []i∈I σi, there is i ∈ I such that π1θ ∈ Si. It follows that θ ∈ [σi,τ ], therefore y ∈ ⟨σi,τ≤ as well.
Likewise if y ∈ ⟨σi,τ≤ with a positive event, take its witness θ ∈ [σi,τ ]. We have θ ∈ [[]i∈I σi,τ ]: in particular maximality follows from that of θ in [σi,τ ]. Indeed, since y has a +-event, this event is only consistent with events in Si, hence any extension of θ must be compatible with Si.	2
Lemma 4.9 If A is race-free and well-founded, then,
κ⟨playa(σ),τ≤ = κ⟨σ, τ/a≤

Proof. First we prove that κ⟨playa(σ),τ≤ ⊆ κ⟨σ, τ/a≤. Take y ∈ ⟨playa(σ),τ≤ and its witness θ ∈ [playa(σ),τ ] such that y = playa(σ)π1θ.
We first prove that a ∈ y. Indeed, suppose a /∈ y. Then, we have π1θ ∈ C(Sj) (with Sj = S ∪ {a} and playa(σ) : Sj → A, by definition of playa(σ)) with a /∈ π1θ. By definition of playa(σ) that immediatly implies that π1θ ∈ C(S), and playa(σ)π1θ = σπ1θ. But since σ : S → A/a we have y = playa(σ)π1θ ∈ C(A/a), so
a	a
y ∪ {a}∈ ConA and y−−⊂ , since a is minimal in A. This implies that π2θ−−⊂ by

a
receptivity, and we also have π θ
by definition of Sj. It is immediate that

1 −−⊂
θj = θ ∪ {(a, a)}
is a secured bijection extending θ between y ∪ {a} and π2θ ∪ {a}, contradicting the maximality of θ.
Therefore, a ∈ y, so we have (a, a) ∈ θ. Set θj = θ \ {(a, a)}. First, we note that π1θj = y \{a}∈ C(S). Indeed it is down-closed (≤S′ being conservative over ≤S for events distinct from a), and consistent (since y \ {a} = y ∩ S ∈ ConS by definition of ConS′ ). Likewise we have π2θj = π2θ \ {a} ∈ C(T/a) (with τ : T → A⊥), by definition of T/a. Moreover θj is still a secured bijection. Finally it is maximal. Indeed, suppose θj ∪{(s, t)} is a valid extension of θj. Then θ∪{(s, t)} would also be a valid extension of θ, by definition of Sj and T/a. But that contradicts maximality of θ, so θj ∈ [σ, τ/a]. Since κA/a(σπ1θj)= κAy, we have proved the inequality.

We now turn to the other inequality. Take y ∈ κ⟨σ, τ/a≤ along with its witness θ ∈ [σ, τ/a]. Then setting θj = θ ∪ {(a, a)} it is direct by definition of Sj and T/a that we have π1θj ∈ C(Sj) and π2θj ∈ C(T ). It is a bijection, and is maximal since any extension (s, t) would also be a valid extension for θ. Therefore θj ∈ [playa(σ),τ ] with κA(playa(σ)π1θj)= κA/aσπ1z = κA/a(y).	2
Lemma 4.10 We have the following equalities between strategies:
playa(σ)/a = σ	waita(σ)/a = σ
Proof. Trivial.	2
Lemma 4.11 If A is well-founded and race-free, then,
κ⟨waita(σ),τ≤⊇		κ⟨σ, τ/t≤	κ⟨waita(σ),τ≤+ =		κ⟨σ, τ/t≤+
t:τ (t)=a	t:τ (t)=a
Proof. We start with the left-to-right inclusion. Take y ∈ ⟨waita(σ),τ≤ (supposed to have positive events) along with its witness θ ∈ [waita(σ),τ ]. Since y has positive events it must contain a, because positive events in Sj are set to depend on a. Therefore there is some t ∈ T such that τ (t) = a and (a, t) ∈ θ. Defining θj = θ \ (a, t), we still have a secured bijection and we have π1θj = π1θ \ {a} ∈ C(S) by definition of Sj (with waita(σ) : Sj → A), and likewise π2θj = π2θ \ {t} ∈ C(T/t). Moreover θj is maximal: any extension (sj, tj) would still hold on θ. Indeed suppose that θj ∪ {(sj, tj)} is a valid extension of θj. Then we have π1(θj ∪ {sj}) ∈ C(S), so π1(θj∪{sj, a}) ∈C(Sj): it is down-closed because π1(θj∪{sj}) is down-closed in S and by definition of Sj, and consistent because (π1(θj∪{sj, a}))∩S = π1(θj∪{sj}) ∈ ConS and waita(σ)(π1(θj ∪{sj, a})) = σ(π1(θj ∪{sj}))∪{a} ∈ C(A) (since σ(π1(θj ∪{sj})) ∈ C(A/a)). Likewise, π2(θj ∪ {tj}) ∈ C(T/t) so obviously π2(θj ∪ {tj, t}) ∈ C(T ). We have established that θj ∈ [σ, τ/t], with κA/a(π1θj)= κA(π1θ).
Reciprocally take t ∈ T such that τ (t) = a, and y ∈ ⟨σ, τ/t≤ with its witness θ ∈ [σ, τ/t]. Then it is direct to prove that θj = θ ∪ {(a, t)} ∈ [waita(σ),τ ], and κ((waita(σ))π1θj) = κ(y) by definition of κ on A/a. Moreover if y had a positive event, so has (waita(σ))π1θj.	2
¿From this follow two important corollaries. Firstly, if a is an initial positive event of A we have κ⟨playa(σ), waita(τ )≤ = κ⟨σ, τ≤; two strategies, one playing a move and the other waiting for the move, synchronise. This immediately follows from the Lemmas 4.9 and 4.10. Secondly, the following additional construction will be crucial. For (ei)i∈I the family of negative minimal events of A and strategies σi : Si → A/ei, we define casei∈Iσi =def []i∈I waitei σi. Roughly, this strategy waits for an input ei and then proceeds as σi; though the full story is subtle as two distinct events ei and ej may be consistent with each other and the strategies σi and σj overlap. Then, we have:
Corollary 4.12 Setting casei∈Iσi = []  waita (σi), and if τ : T → A⊥ is such that
T has a minimal +-event, then.
κ⟨casei∈Iσi,τ≤⊆   κ⟨σi,τ/t≤	κ⟨casei∈Iσi,τ≤+ =    κ⟨σi,τ/t≤+
i∈I,t:τ (t)=ai	i∈I,t:τ (t)=ai

If T has no +-minimal event, then κ⟨casei∈Iσi,τ≤ = {κ(∅)}.
Proof. We apply the following reasoning, putting all the previous lemmas together:
κ⟨casei∈Iσi,τ≤ = κ⟨ [] waitai (σi),τ≤
i∈I
⊆  κ⟨waitai (σi),τ≤
i∈I

⊆  (	 
i∈I t:τ (t)=ai
κ⟨σi,τ/t≤)

All these inclusions become equalities when restricted to configurations with a pos- itive event.	2
In the lemmas above and this corollary, in all the cases where we have inclusions instead of equalities this is by necessity. For instance with the case construction above, a configuration in ⟨σi,τ≤, by definition a maximal configuration of the pull- back of σi and τ , although it reappears as a configuration of the pullback of casei∈Iσi and τ , may no longer be maximal so fail to contribute to ⟨casei∈Iσi,τ≤.
Values of these constructions
Lemma 4.13 For any race-free well-founded game A, a a minimal +-event of A
and σ : S → A/a a strategy, we have:
v†(playa(σ)) = v†(σ)	v↓(playa(σ)) = v↓(σ)
Proof. We first prove v†(playa(σ)) ≤ v†(σ). Let τ : T → A⊥/a, and k ∈ κ⟨playaσ, waitaτ≤. By Lemma 4.9, we have k ∈ κ⟨σ, (waitaτ )/a≤. By Lemma 4.10, we have k ∈ κ⟨σ, τ≤. Let us now prove v†(σ) ≤ v†(playa(σ)). Let τ : T → A⊥, and k ∈ κ⟨σ, τ/a≤. Then by Lemma 4.9 we also have k ∈ κ⟨playaσ, τ≤.
We prove v↓(playaσ) ≤ v↓(σ). Let τ : T → A⊥/a and k ∈ κ⟨σ, τ≤. By Lemma 4.10, we have k ∈ κ⟨σ, (waitaτ )/a≤.  By Lemma 4.9, we also have k ∈ κ⟨playaσ, waitaτ≤. We prove the converse inequality. Take τ : T → A⊥, and k ∈ κ⟨playaσ, τ≤. By Lemma 4.9 we also have k ∈ κ⟨σ, τ/a≤.	2
Lemma 4.14 For any race-free well-founded game A, a strategy σ : S → A and s
a minimal event in S, we have:
v↓(σ) ≤ v↓(σ/s)
Proof. Let τ : T → A⊥/σs, and k ∈ κ⟨σ/s, τ≤. If s has positive polarity, then by Lemmas 4.11 and 4.7, we also have k ∈ κ⟨σ, waitσsτ≤. Likewise if s has negative polarity, then by Lemmas 4.9 and 4.7 we also have k ∈ κ⟨σ, playσsτ≤.	2
Lemma 4.15 Suppose A is race-free and well-founded and σ : S → A is a strategy with a minimal +-event. Let (fj)j∈J be the family of minimal +-events of A. Then, v↓(σ) ≤ supj∈J v↓({fj}) and v†(σ) ≤ supj∈J v†({fj}).
Proof. Pessimistic case. Let s be the minimal +-event of S. Necessarily there must be j0 ∈ J such that σ(s)= fj0 . By Lemma 4.14, we have v↓(σ) ≤ v↓(σ/s) as

needed.
Optimistic case. If we had the optimistic inequality v†(σ) ≤ v†(σ/s) the proof would be just as straightforward, unfortunately it is not true in general since σ could have another conflicting minimal +-event. Therefore in the optimistic case we cannot directly pick a j ∈ J and we are required to think of the problem more globally, involving classical reasoning.
Suppose that the inequality is false, i.e. supj∈J v†({fj}) < v†(σ). This implies that there is α ∈ R such that supj∈J v†({fj}) < α and v†(σ) > α. The first inequality implies ∀j ∈ J, ∀σ : A/fj, ∃τj : A⊥/fj, ∀k ∈ κ⟨σj,τj≤, k < α, which is easily shown to imply
∀(σm)m∈M , ∃(τa)a∈σM , ∀m ∈ M, ∀k ∈ κ⟨σm, τσm≤, k < α
where M is the set of positive minimal events in S, and for all m ∈ M , σm : A/σm and τa : A/a. Applying this property to the family of strategies obtained by σm = σ/m, we get a family of counter-strategies (τa)a∈σM . We extend this family to J by setting τj to be the empty strategy (closed under receptivity) whenever ej /∈ σM . Thus, we get a family (τj)j∈J . Similarly, the second inequality implies that:
∀τ : A⊥, ∃k ∈ κ⟨σ, τ≤, k > α.
Applied to τ = casej∈J τj, we get k ∈ κ⟨σ, casej∈J τj≤ such that k > α. By Corollary
4.12 (and Lemma 4.7), there is m0 ∈ M such that we also have k ∈ κ⟨σ/m0, τσm0 ≤. However, applying (1) to m0 also shows that k < α—a contradiction. Hence, the required inequality is true.	2
Lemma 4.16 Let A be a race-free well-founded game and (ei)i∈I the family of its negative minimal events. Then,
min(κ(∅), infi∈I supσ:A/e v↓(σ)) ≤ v↓(A) min(κ(∅), infi∈I supσ:A/e v†(σ)) ≤ v†(A)
Proof. For as long as possible, we do not distinguish the optimistic and pes- simistic cases. If the inequality is false, then there is a real α ∈ R such that min(κ(∅), infi∈I supσ:A/ei v(σ)) > α > v(A), which in turn implies:
κ(∅) >α 
∀i ∈ I, ∃σi : A/ei, ∀τ : A⊥/ei, r(σi,τ ) >α 
∀σ : A, ∃τ : A⊥, r(σ, τ ) <α 
In particular, (3) gives a family (σi)i∈I . Instantiating (4) to casei∈Iσi, we get τ : T → A⊥ such that r(casei∈Iσi,τ ) < α. Reformulating the inequalities above with this data, we have:
κ(∅) >α 
∀i ∈ I, ∀t, τ (t)= ei ⇒ r(σi,τ/t) >α 
r(casei∈I,τ ) <α 
Pessimistic case. Since r↓(casei∈Iσi,τ ) < α, there must be y ∈ ⟨casei∈Iσi,τ≤ such that κ(y) < α. If T has no minimal +-event, then necessarily we have y = ∅

(since all the +-events of casei∈Iσi : Sj → A depend on a negative event), therefore κA(y)= κA(∅) > α—a contradiction. Therefore, T has a minimal +-event. Then by Corollary 4.12, there is a minimal +-event t ∈ T and τ (t)= ei0 and k ∈ κ⟨σi0 ,τ/t≤ such that k = κ(y) < α. But this is absurd by (6), so we have found a contradiction. Optimistic case. By (7) instantiated on the optimistic case we have that for all
k ∈ κ⟨casei∈I,τ≤, k < α. Take y ∈ ⟨casei∈I,τ≤ (⟨casei∈I,τ≤ is non-empty by Zorn’s lemma). As above, y cannot be empty as that would cause a contradiction, and T must have a minimal +-event. By Corollary 4.12, there is a minimal +-event t ∈ T and τ (t)= ei0 and k ∈ κ⟨σi0 ,τ/t≤ such that k = κ(y) < α, contradicting (6).   2

Value theorem
Let A be a fixed well-founded and race-free game.
Lemma 4.17 Let x ∈ C(A). Let (ei)i∈I be the family of extensions of x of negative polarity, and (fj)j∈J be the family of extensions of x of positive polarity. Then,
v†(x) = max(min(κ(x), inf v†(x ∪ {ei})), sup v†(x ∪ {fj}))

i∈I
j∈J

v↓(x) = max(min(κ(x), inf v↓(x ∪ {ei})), sup v↓(x ∪ {fj}))

i∈I
j∈J


Proof. The reasoning is the same in the optimistic and pessimistic cases, so we do not distinguish them.
≤. Let σ : S → A/x be a strategy. If there is a minimal event s ∈ S with pol (s) = +, then v(x) ≤ v(σ) ≤ supj∈J v(x ∪ {fj}) by Lemma 4.15. Otherwise, there is no such minimal s ∈ S. Then v(σ) ≤ κ(x). Indeed, letting τ : T → A/x be the empty strategy closed by receptivity, we have ⟨σ, τ≤ = {∅} and r(σ, τ )= κ(x). Similarly taking i0 ∈ I, by Lemma 4.14 we have v(σ) ≤ v(σ/ei0 ), and therefore v(σ) ≤ infi∈I v(x ∪ {ei}).
≥. Let us prove that supj∈J v(x ∪ {fj}) ≤ v(x), taking j0 ∈ J and σ : A/(x ∪

{fj0 }). Then by Lemma 4.13 we have v(playfj
σ)= v(σ), so v(σ) ≤ v(x). Finally,

by Lemma 4.16 we have as needed min(κ(x), infi∈I v(x ∪ {ei})) ≤ v(x).	2
Theorem 4.18 If A is well-founded and race-free then A has a value, i.e. we have:
v†(A)= v↓(A)	v(A)= −v(A⊥)
(Note that the second equality only makes sense because by the ﬁrst, we can talk in a non-ambiguous way of the value v(A) of a game A.)
Proof. Let x ∈ C(A) be maximal such that v(A/x) /= −v(A⊥/x). Let (ei)i∈I be the family of negative extensions of x and (fj)j∈J its family of positive extensions. Then,
v(A/x) = max(min(κA(x), inf v(A/(x ∪ {ei}))), sup v(A/(x ∪ {fj})))

i∈I
j∈J

= max(min(−κA⊥ (x), inf −v(A⊥/(x ∪ {ei}))), sup −v(A⊥/(x ∪ {fj})))

i∈I
j∈J

= − min(max(κA⊥ (x), sup v(A⊥/(x ∪ {ei}))), inf v(A⊥/(x ∪ {fj})))

i∈I
= −max(min(κA⊥ (x), inf v(A⊥/(x ∪ {fj}))),
j∈J
j∈J

min(sup v(A⊥/(x ∪ {ei})), inf v(A⊥/(x ∪ {fj}))))

i∈I
j∈J

But for all i0 ∈ I, v(A⊥/(x∪{ei })) ≤ v(A⊥/x). Indeed take σ : S → A⊥/(x∪{ei }),

take τ : T → A/x, then by Lemma 4.9 we have κ⟨σ, τ/ei0 ≤ = κ⟨playei
σ, τ≤. Likewise

for all j0 ∈ J we have v(A⊥/x) ≤ v(A⊥/(x∪{fj })). Indeed take σ : S → A⊥/x and

τ : T → A/(x∪{fj0 }), then by Lemma 4.9 (and Lemma 4.7) we have κ⟨σ, playfj
τ≤ =

κ⟨σ/fj ,τ≤. Therefore supi∈I v(A⊥/(x ∪ {ei})) ≤ infj∈J v(A⊥/(x ∪ {fj})), and:
v(A/x)= −max(min(κA⊥ (x), inf v(A⊥/(x ∪ {fj}))), sup v(A⊥/(x ∪ {ei})))

= −v(A⊥/x)
j∈J
i∈I

—a contradiction. Therefore there is no such maximal x and the property is true for the empty configuration, thus v(A)= −v(A⊥) since A is well-founded.	2
We say that a strategy σ : S → A is optimal when its pessimistic value is equal to the value of the game. Note that it also implies that the optimistic value is equal to the value of the game, since for all σ : S → A we must have v↓(σ) ≤ v†(σ) ≤ v(A). It also follows that for optimal strategies, the pessimistic and optimistic values coincide. When σ is optimal, we will therefore sometimes just write v(σ) for its value.
Example 4.19 Any well-founded race-free game has a value. However this value is not necessarily reached: there are games without optimal strategies. Consider the game A with events {⊕i | i ∈ N}, pairwise inconsistent, with κ(∅)=0 and κ({⊕i})= 
i. Its value is +∞ since each positive natural number can be reached, but no strategy σ satisfies v↓(σ) = +∞ (though the strategy that plays a nondeterministic choice of natural number satisfies v†(σ)= +∞).

Compositionality of optimal strategies
Finally we study how payoff relates to the composition of strategies. We hope that thinking compositionally about values and optimal strategies can be helpful in computing values and optimal strategies for complex games from smaller ones. There are two main kinds of composition of strategies. The first is the categorical composition τ ⊙ σ of σ : S → A⊥  B and τ : T → B⊥  C. The second is parallel composition σ  τ : S  T → A  B.
We start this section with the following characterisation of the pessimistic value of strategies.
Proposition 5.1 Let A be a game and σ : S → A a strategy. Then,
v↓(σ)= inf{κ(σx) | x ∈ C(S) +-maximal} .

Proof. ≤. It suffices to show:
∀x ∈ C∞(S) +-maximal, ∃τ : T → A⊥, ∃y ∈ ⟨σ, τ≤, κ(y) ≤ κ(σx)
Thus, let x ∈ C∞(S) be +-maximal. Set T = (σx)⊥ with τ : T → A⊥ acting as the identity on events. τ is obviously innocent but not necessarily receptive, consider its closure τ j : T j → A⊥ under receptivity. Define
θ = {(s, σs) | s ∈ x} .
Because σ is a map of event structures it follows that θ is a secured bijection. It is maximal since x is +-maximal σx is +-maximal in T by construction of T . Additionally we have π1θ = x ∈ C∞(S) and π2θ = σx ∈ C∞(T j), and both are
+-maximal by the hypothesis on x and construction of T j. Therefore θ ∈ [σ, τ j]. It follows that σπ1θ = σx ∈ ⟨σ, τ j≤.
≥. It suffices to show that for all τ : T → A⊥/x and y ∈ ⟨σ, τ≤ there exists a
+-maximal x ∈ C∞(S) such that κ(σx) ≤ κ(y). Such a y ∈ ⟨σ, τ≤ necessarily has a witness θ ∈ [σ, τ ]. Necessarily x = π1z is +-maximal and κ(σx)= κ(y).	2
¿From this, we get:
Proposition 5.2 For strategies σ : S → A⊥  B and τ : T → B⊥  C, we have v↓(τ ⊙ σ) ≥ v↓(τ )+ v↓(σ). Likewise for σ : S → A and τ : T → B, we have v↓(σ  τ )= v↓(σ)+ v↓(τ ).
For categorical composition, v↓(τ ⊙ σ) ≤ v↓(τ )+ v↓(σ) does not hold in general, and neither do the two inequalities in the optimistic case. However, the situation is different for optimal strategies. To establish this, we first note:
Proposition 5.3 For race-free, well-founded A and B, v(A  B)= v(A)+ v(B).
Proof. By the value theorem, it does not matter whether we work on the optimistic or pessimistic cases. For simplicity, let us pick the pessimistic one. Firstly, we prove that v(A  B) ≥ v(A)+ v(B). Indeed, let σ : S → A and τ : T → B be strategies. Then, as needed we have v↓(σ  τ ) ≥ v↓(σ)+ v↓(τ ) by Proposition 5.2.
Moreover, this inequality also holds for A⊥ and B⊥, therefore v(A⊥  B⊥) ≥ v(A⊥)+ v(B⊥), from which it follows that v(A  B) ≤ v(A)+ v(B) by the value theorem and the definition of the dual of games with payoff.	2
Theorem 5.4 If σ : S → A⊥  B and τ : T → B⊥  C are optimal strategies, so is τ ⊙ σ. Moreover copycat is optimal, therefore there is a bicategory of concurrent games with payoff and optimal strategies.
Proof. Suppose σ and τ optimal. We reason as follows:
v↓(τ ⊙ σ) ≥ v↓(σ)+ v↓(τ )= v(A⊥  B)+ v(B⊥  C)= v(A⊥  C)
This implies that v↓(τ ⊙ σ)= v(A⊥  C), since a strict inequality would contradict the definition of v(A⊥  C).
Any +-maximal x ∈ C(A⊥  A) has the form y ∪ y, where y ∈ C(A). Moreover, κA⊥  A(x) = κA(y) − κA(y) = 0, therefore we have v↓(γA) = 0. However we also have v(A⊥  A)= v(A) − v(A) = 0, therefore copycat is optimal.	2

We finish this section by remarking that from the theorem above it follows that when σ and τ are optimal, we have v(τ ⊙ σ) = v(σ)+ v(τ ), since both sides are forced by optimality to coincide with the value of the game.
Conclusion
We have proved a value theorem for race-free well-founded concurrent games. Note that this theorem is not an equilibrium theorem since the value is not always reached. However it is always reached in finite games. In fact our constructions on strategies give an algorithm to compute the value and optimal strategies for finite games. In future we plan to investigate the existence and computation of equilibria in the non-zero-sum case. This will require the extension of our framework to deal with probabilistic strategies, and should allow us to formulate a better connection with the concurrent games of [3,7].
We proved that optimal strategies are stable under composition, forming a bi- category. This compositional structure is worth investigating further. In other work, we have developed an extension of concurrent games with symmetry, where events can be duplicated and hence form the basis for a cartesian closed category of concurrent strategies. We plan to investigate extensions of the present development in the presence of symmetry, thus providing the basis for a concurrent program- ming language based on the simply-typed λ-calculus and concurrent operations on strategies, for which typable terms describe optimal strategies.

References
Samson Abramsky, Radha Jagadeesan, and Pasquale Malacaria. Full abstraction for pcf. Inf. Comput., 163(2):409–470, 2000.
Samson Abramsky and Paul-Andr´e Melli`es. Concurrent games and full completeness. In LICS, pages 431–442. IEEE Computer Society, 1999.
Rajeev Alur, Thomas A. Henzinger, and Orna Kupferman. Alternating-time temporal logic. J. ACM, 49(5):672–713, 2002.
Krishnendu Chatterjee and Thomas A. Henzinger. A survey of stochastic ω-regular games. J. Comput. Syst. Sci., 78(2):394–413, 2012.
Pierre Clairambault, Julian Gutierrez, and Glynn Winskel. The winning ways of concurrent games. In
LICS. IEEE Computer Society, 2012.
John Conway. On Numbers and Games. Wellesley, MA: A K Peters, 2000.
Luca de Alfaro and Thomas A. Henzinger. Concurrent omega-regular games. In LICS, pages 141–154. IEEE Computer Society, 2000.
J. M. E. Hyland and C.-H. Luke Ong. On full abstraction for pcf: I, ii, and iii. Inf. Comput., 163(2):285– 408, 2000.
Martin Hyland. Game semantics. In Semantics and logics of computation, Publications of the Newton Institute. Cambridge University Press, 1997.
Andre Joyal. Remarques sur la th´eorie des jeux a` deux personnes. Gazette des sciences math´ematiques du Qu´ebec, 1(4), 1977.
Joachim Lambek and Philip J. Scott. Introduction to higher order categorical logic. Cambridge Univiversity Press, 1988.

Donald A. Martin. Borel determinacy. The Annals of Mathematics, 102(2):363–371, 1975.
Donald A. Martin. The determinacy of Blackwell games. J. Symb. Log., 63(4):1565–1581, 1998.
Paul-Andr´e Melli`es. Asynchronous games 4: A fully complete model of propositional linear logic. In
LICS, pages 386–395. IEEE Computer Society, 2005.
Paul-Andr´e Melli`es and Samuel Mimram. Asynchronous games: Innocence without alternation. In Lu´ıs Caires and Vasco Thudichum Vasconcelos, editors, CONCUR, volume 4703 of Lecture Notes in Computer Science, pages 395–411. Springer, 2007.
Mogens Nielsen, Gordon D. Plotkin, and Glynn Winskel. Petri nets, event structures and domains. In Semantics of Concurrent Computation, volume 70 of Lecture Notes in Computer Science. Springer, 1979.
Silvain Rideau and Glynn Winskel. Concurrent strategies. In LICS, pages 409–418. IEEE Computer Society, 2011.
Glynn Winskel. Event structures. In Wilfried Brauer, Wolfgang Reisig, and Grzegorz Rozenberg, editors, Advances in Petri Nets, volume 255 of Lecture Notes in Computer Science, pages 325–392. Springer, 1986.
Glynn Winskel. Event structures, stable families and games. Lecture notes, Comp Science Dept, Aarhus University, Available from http://daimi.au.dk/∼gwinskel, 2011.
Glynn Winskel. Distributed probabilistic and quantum strategies. In MFPS 2013, Electr. Notes Theor. Comput. Sci., 2013.


Appendix
The values for the game of Example 3.5:
v↓(A) = 0	v↓(A⊥) = −∞
v†(A) = +∞	v†(A⊥) = −∞ .
Proof. v↓(A). Let σ : S → A be an arbitrary strategy. By Proposition 5.1, its pessimistic value is inf{κ(σx) | x ∈ C(S) +-maximal}, therefore it suffices to examine the +-maximal configurations of S of worst payoff. If S admits an infinite configuration x, then σx contains all the +-events. By receptivity there is x ⊆ xj ∈ C∞(S) such that σxj = A of payoff −∞. Now, suppose S has no infinite configuration. If S has a +-maximal configuration x containing i +-events but no
−-event, its payoff is κA(σx) = −i. If S has such a configuration for arbitrarily large i then the value of σ is −∞, otherwise it is −i for i the largest such that S has a +-maximal configuration containing i +-events and no −-event. Taking the supremum over all strategies σ, we obtain a pessimistic value of 0, reached by the empty strategy (closed under receptivity).
v↓(A⊥). Let σ : S → A⊥ be an arbitrary strategy. If all its +-maximal configu- rations contain no +-event, then the configuration x containing all the −-events is
+-maximal and has value κA⊥ (σx) = −∞. If there is a +-maximal configuration x ∈ C∞(S) containing a +-event s, then there is i such that s depends on the first i −-events. This means that any +-maximal configuration containing at least i
−-events must contain a +-event as well. So for any j ≥ i, there is a +-maximal configuration y ∈ C∞(S) containing the first j −-events and a +-event, and hence has payoff κA⊥ (σy) = −j. This is for arbitrary j, so σ has pessimistic value −∞. Any σ has a pessimistic value of −∞, so A⊥ has a pessimistic value of −∞.

v†(A). This case is a bit more subtle. Intuitively, one might think that Player cannot ensure a payoff higher than 0, since he cannot control when -or if - Opponent will play the —-event. However, using nondeterminism Player can do better and apply intuitively a family of deterministic sub-strategies. The definition of the optimistic value will ensure that the most favorable such sub-strategy is always selected in an interaction.
Define S as having the following events and causality:
S = {g,
⊕2,1
⊕3,1 d ⊕3,2
⊕4,1 d ⊕4,2 d ⊕4,3
..., 
⊕ω,1 d ... d ⊕ω,n d .. .}
with consistent subsets the finite subsets of {g} ∪ {⊕α,i | i < α}, for α ∈ N ∪ {ω}. Take σ : S → A the obvious morphism mapping g to g and ⊕α,i to ⊕i, σ is a strategy. Now, take an arbitrary τ : T → A⊥. Two cases are possible. If T does not contain any +-event, then by receptivity of τ there is an interaction
θ = {(⊕ω,1, g1),..., (⊕ω,n, gn),.. .}∈ [σ, τ ]
which is such that σπ1θ = {⊕1,..., ⊕n,.. .} of payoff +∞, so r†(σ, τ )= +∞. If T does contain a +-event t, say it depends on (the unique events in T corresponding to) g1,..., gi. For each j ≥ i, there is a +-maximal configuration
x = {g, ⊕j+1,1, ⊕j+1,2,..., ⊕j+1,j}
containing exactly j +-events and the —-event, and this yields an interaction
θ = {(g, t), (⊕j+1,1, g1),..., (⊕j+1,j, gi)}∈ [σ, τ ]
such that π1θ = x. This configuration x has payoff κA(σx)= j and this holds for any j, so r†(σ, τ )= +∞. Taking the infimum over all strategies τ : T → A⊥ we get that v†(σ)= +∞, so v†(A)= +∞.
v†(A⊥). Take an arbitrary strategy σ : S → A⊥. If it never plays any +-event, then its optimistic value is —∞: this value is reached against the strategy τ : T → A that plays all the +-events. If there is a configuration x ∈ C∞(S) with a +-event, say this +-event depends on the first i —-events. For j ≥ i, σ has an optimistic value of —j against the strategy τj that plays the first j +-events. So, the optimistic value of σ is —∞ as well, yielding a value for the game of v†(A⊥)= —∞.	2
