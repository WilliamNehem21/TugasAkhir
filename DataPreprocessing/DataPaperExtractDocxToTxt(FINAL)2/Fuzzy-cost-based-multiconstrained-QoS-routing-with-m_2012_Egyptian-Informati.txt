
ORIGINAL ARTICLE

Fuzzy-cost based multiconstrained QoS routing with mobility prediction in MANETs
G. Santhi a,*, Alamelu Nachiappan b,1

a Department of Information Technology, Pondicherry Engineering College, India
b Department of EEE, Pondicherry Engineering College, India

Received 30 August 2011; revised 18 November 2011; accepted 27 December 2011
Available online 29 January 2012

Abstract Multi-constrained QoS routing deals with finding routes that satisfies multiple indepen- dent QoS constraints simultaneously. This paper proposes a Fuzzy cost based Multi constrained Quality of service Routing (FCMQR) protocol to select an optimal path by considering multiple independent QoS metrics such as bandwidth, end-to-end delay, and number of intermediate hops. This is based on multi criterion objective fuzzy measure. In this method all the available resources of the path is converted into a single metric fuzzy cost. Mobility prediction is done to find the lifetime of the path. The path with the maximum lifetime and minimum fuzzy cost will be considered to be the optimal one and used for transmission. Simulation results show that the proposed FCMQR provides an accurate and efficient method of estimating and evaluating the QoS routing stability and cost in dynamic mobile networks.
© 2012 Faculty of Computers and Information, Cairo University. Production and hosting by Elsevier B.V. All rights reserved.





* Corresponding author. Mobile: +91 9443291154.
E-mail addresses: shanthikarthikeyan@pec.edu (G. Santhi), nalam63@ pec.edu (A. Nachiappan).
1 Mobile: +91 9443269968.

1110-8665 © 2012 Faculty of Computers and Information, Cairo University. Production and hosting by Elsevier B.V. All rights reserved.

Peer review under responsibility of Faculty of Computers and Information, Cairo University.
doi:10.1016/j.eij.2011.12.001

Introduction

A Mobile Ad-hoc Network (MANET) is a dynamically re-con- figurable wireless network with no fixed infrastructure. They are self-created and self-organized. These networks are charac- terized by dynamic topology, high node mobility, low channel bandwidth and limited battery power [1]. These characteristics demand a new way of designing and operating the routing pro- tocols. Ad-hoc networks are useful in many situations such as military applications, conferences, emergency search and res- cue operations [2]. The popularity of group computing leads to multicasting. Numerous multicast routing protocols have been already proposed with the ultimate goal of efficient route establishment and message exchange within a MANET [3].
In MANETs the nodes are free to move randomly and a node may join or leave the multicast tree at any time. Hence

20	G. Santhi, A. Nachiappan


maintaining group membership function and building optimal multicast tree is challenging in wireless MANETs. The provision of QoS guarantee is of utmost importance for the development of the multicast services since it can improve performance and allow critical information to flow even under difficult conditions [4]. The QoS routing in MANETs is difficult because the network topology may change constantly due to node mobility and the available state information for routing changes dynamically [5]. A survey of QoS aware routing protocols for MANETs show that most of them take into consideration one or two metrics. But this is not sufficient since the topology of the MANET is determined by many factors such as link stability, node mobility and battery power of the mobile devices [6]. All of these factors are correlated. Thus, consideration of only one or two factors is not sufficient for choosing an optimal path.
However, selecting a route which satisfies all multiple con- straints is an NP complete problem [7]. There is no accurate mathematical model to describe it. Fuzzy logic is used to pro- vide a feasible tool to solve the multi-metric QoS problem. Fuzzy logic is a theory that not only supports several inputs, but also exploits the pervasive imprecision information [8,14]. So adopting fuzzy logic to solve multi metric problems in ad hoc networks is an appropriate choice. This paper pro- poses a simple and effective protocol called fuzzy-cost based multi-constraints QoS multicast routing protocol with mobil- ity prediction for MANETs. It considers the multiple corre- lated QoS selection parameters such as bandwidth, end-to- end delay, and number of intermediate hops, and translates them into a single metric fuzzy-cost. In MANETs, the reliabil- ity of a path depends on the stability of each link of this path because of the dynamic topology changes frequently. Using mobile predicting mechanism this protocol chooses the most stable path which satisfies the multiple QoS constraints with minimum fuzzy cost and maximum path stability.
The remainder of this paper is organized as follows. Section 2 briefly describes the related works. Section 3 describes the de- sign of multiple selection parameters and Section 4 explains about the fuzzy logic inference engine. Section 5 explains the mobility prediction mechanism and Section 6 describes the cost effective life time prediction of a path. Section 7 describes about the route discovery process of the proposed protocol. Simulation results are discussed in Section 8. Section 9 de- scribes the conclusion.

Related works

A large number of routing protocols already has been proposed for mobile ad hoc networks. Proposed protocols are often subdivided into three categories, namely; Proactive, reactive and hybrid [2]. Proactive routing protocols need to maintain routes between all nodes pairs all the time, while reactive routing protocols only build and maintain routes on demand. Studies have shown that reactive routing protocols perform better in terms of packet delivery ratio and incur low- er routing overhead especially in the presence of high mobility. Over the last few years, many reactive routing protocols for MANET have been proposed. Hybrid routing protocol combines the features of both proactive and reactive protocol. In the literature very few routing algorithm exists for MANET using fuzzy logic. In this section Fuzzy Logic Wireless
Multipath Routing (FLWMR) [9] and Fuzzy Logic Wireless Load Aware Multipath Routing (FLWLAMR) [9] have been explained briefly.

Fuzzy Logic Wireless Multipath Routing (FLWMR)

In FLWMR the hop count is considered as the only QoS met- ric for route selection. When a source host wants to send a message to a destination, it first calls upon the local fuzzy logic controller to determine whether to send the message or drop it. If the decision is to send the traffic, FLWMR floods the net- work with route request packets (RREQ) to explore multiple paths to the destination [9]. When the destination receives the first request packet, it records the entire path and returns a route reply (RREP) packet to the source via that path. The destination then waits for a programmable time to receive other RREQ messages in order to discover additional routes that are disjoint from the first one. The additional paths re- ceived by the source are added to the path pool for use by the fuzzy router. When a node detects a link break, it is not necessary to do route discovery again, since FLWMR stores multiple routes to the destination. The fuzzy controller then decides the usage of paths for the offered traffic based on the traffic importance and network status.

Fuzzy Logic Wireless Load Aware Multipath Routing (FLWLAMR)

FLWLAMR also chooses the route with the least delay as the primary route for delivering packets between the source node and the destination node, the second route is the path which is the maximally disjointed path with the primary one and has the shortest distance [9]. The fuzzy routing algorithm re- sides at the source node monitors the congestion status of ac- tive routes and feeds the network status to the fuzzy logic controller in order to make the best routing decision. The net- work status is measured as the number of packets buffered at each node’s interface. When the RREQ packet reaches the des- tination, it calculates the network status by measuring the number of packets buffered in each intermediate node in the network and sends back to the source with each RREP. Both FLWMR and FLWLAMR dynamically allocate network bandwidth depending on the priority of the messages and the status of the network.

Description of multiple selection parameters

Most current routing protocols in MANETs try to achieve a single routing objective such as reducing end-to-end delay or increasing packet delivery fraction or increasing the lifetime of battery powered mobile nodes using a single route selection metric like the number of intermediate hops or remaining bat- tery power of the intermediate nodes. As the various routing objectives in MANETs are not completely independent, an improvement in one objective can only be achieved at the ex- pense of others. Hence, a single objective routing protocol can severely compromise network performance on the remain- ing overlooked objectives. Therefore, efficient routing in MANETs requires selecting routes that meet multiple objec- tives. Multiple routing objectives can be met together only if multiple routing metrics that give detailed information on

Fuzzy-Cost based Multiconstrained QoS	21


the state of the intermediate links in a route are considered [10]. The disadvantage of using a single metric is that it can only be used for satisfying one criterion – either maximize packet delivery fraction, minimize delay or increase battery life, due to the specific rule used in defining the best cost path. The proposed protocol in this paper is designed to achieve various objectives while selecting a route. (i) The different objectives that are considered for route selection is to minimize the end-to-end delay; (ii) maximize packet delivery; and (iii) maximize the lifetime of path. Several metrics have been cho- sen to meet these objectives and to produce a single cost metric
(C). QoS metrics considered here for selecting the routes are available bandwidth (B), end-to-end delay (D), and number of hops (N). The relationship between the cost function C and the other metrics is given by
C = f(B; D; N)	(1)
The bandwidth calculating function is defined as the mini-
mum number of available free slots between two nodes in a path. The end-to-end delay of a path is the summation of the node delay at each node plus the link delay at each link on the path [11].
D(p(s; t)) =  e ∈ P(s; t)delay(e)+  e ∈ P(s; t)delay(n)
B(p(s; t)) = min{bandwidth(e); e ∈ P(s; t)}
where p(s, t) denotes the path from source ‘s’ to destination
node ‘t’ of a multicast tree and ‘e’ is any link between two nodes of tree.
Implementation of fuzzy inference engine

Figure 1 shows the three major processes involved in the fuzzy logic system (FLS). They are fuzzification, fuzzy inference and defuzzification [12]. The inputs into our FLS are: (i) the num- ber of intermediate hops, (ii) bandwidth, and (iii) delay.

Fuzzzification of inputs and outputs: The three input vari- ables to be fuzzified are the number of intermediate nodes, bandwidth and end-to-end delay. On the existing knowl- edge of MANET, the terms ‘‘Low’’, ‘‘Medium’’, ‘‘High’’ are used to describe the number of hops, bandwidth and

delay. For the output variable cost the terms ‘‘Very Low’’, Low’’, ‘‘Medium’’, ‘‘High’’ and ‘‘Very High’’ are used. Triangular membership functions as shown in Figures. 2 and 3 are used for representing these variables.
Knowledge base rule structure: The fuzzy rules have IF– THEN structure. The inputs are then combined using the AND operator. The following is an example of rules which describes the input output mapping.
If (Hop Count is ‘‘Short’’) AND (Bandwidth is ‘‘High’’) AND (End-to-End Delay is ‘‘Low’’) Then Cost is ‘‘Very Low’’
The interpretation is that maximum bandwidth, minimum number of intermediate hops and minimum delay are favor- able inputs and hence it yields very low cost. Since each input variable has three linguistic states, the total number of possible
fuzzy inference rules is 3 \ 3 \ 3 = 27. Table 1 shows some of the fuzzy rule base in the fuzzy controller.














Figure 2 Fuzzy memberships function for bandwidth, delay and hop count.






Figure 3	Fuzzy membership function for cost.
















Figure 1	Selection of multi objective optimal route.

22	G. Santhi, A. Nachiappan


Defuzzification: Defuzzification refers to the way a crisp value is extracted from a fuzzy set as a representation value. There are many kinds of defuzzifiers. Here the cen- troid of area strategy is taken for defuzzification [13].
The stability ‘Pst’ of the path is obtained from Eq. (3) and low- er cost based on Eq. (1). Finally the path selection parameter is represented by the following
Pst * C

 z lA(Z)zdz
COZ	l (Z)dz
d = abs(P
— C)	(5)

A
lA(Z) = the aggregated output of the membership function.
The cost is extracted as the output by applying the fuzzy knowledge base rules.

Mobile prediction mechanism

In mobile ad hoc network, the reliability of a path depends on the stability or availability of each link of this path because of the dynamic topology changes frequently. It supposes a free space propagation model [15], where the received signal strength solely depends on its distance to the transmitter. Therefore, using the motion parameters (such as speed, direc- tion, and the communication distance) of two neighbors, the duration of time can be determined in order to estimate that two nodes remain connected or not. Suppose two nodes ‘i’ and ‘j’ are within the transmission distance ‘ra’ between them, let (xi, yi) and (xj, yj) be the coordinate of mobile host ‘i’ and mobile host ‘j’. Also let (vi, hi) be the speed and the moving direction of node ‘i’, let (vj, hj) be the speed and the moving direction of node ‘j’. The link expiration time (LET) is pre- dicted by
—(ab + cd)+ q(ﬃﬃ(ﬃﬃaﬃﬃﬃ2ﬃﬃ+ﬃﬃﬃﬃﬃcﬃﬃ2ﬃﬃ)ﬃﬃrﬃﬃ2ﬃﬃﬃ—ﬃﬃﬃﬃﬃ(ﬃaﬃﬃﬃdﬃﬃﬃ—ﬃﬃﬃﬃﬃbﬃﬃcﬃﬃﬃ)ﬃ2ﬃﬃ)ﬃﬃ
The path that maximizes the value of ‘d’ is selected. To get
the best possible path with higher link stability and lower cost we divide the result by their difference. In the route discovery process each node will decide the next hop which maximizes the value of ‘d’ for the desired destination.

7. Description of proposed FCMQR protocol

In the proposed scheme each node maintains a table which keeps the list of the nodes to which it has a connection and the associated bandwidth and delay to reach that neighbor. This table is termed as neighbor table. Each node exchanges the QoS information periodically with its neighbors to con- struct the neighbor table. This neighbor table is used to update the routing table periodically. In multi constrained routing protocol, all constraint parameters are designed to be collected and transferred by route discovery process. For collecting the arguments demanded by fuzzy system, the RREQ packet is modified as shown in Figure 4.
The RREQ packet is extended with three additional fields: min_bandwidth, sum_delay and min_LET. These fields update the available bandwidth, end-to-end delay and LET between the links of a node through the neighbor table of it. Initially

	a	
LET(i; j)=	a2 + c2
(3)
all these fields are set as a default value of —1.
FCMQR follows the same procedure of Ad hoc On demand

Note that a = i coshi — j coshj, b = xi — xj, c = i sinhi — j sinhj,
and d = yi — yj. Note also that the Eq. (3) cannot be applied when i = j and hi = hj and when LET is ∞ [16]. In order to get and utilize the information from Geographical Positioning
System (GPS), the packets must include extra fields. When a source node sends a request packet, the packet appends its location, direction and speed. The next hop neighbor of the source node receives the request packet to predict the duration of time between itself and the source node. If node B is the next hop of the packet for node A, node A will insert its location information in the packet so node B will be able to compute the duration of time between node A and node B.
Assume that l is a routing path and (l1, l2,..., lk) is the set of all the links along each hop l. The path stability (Pst) is the minimum of the LETs along the path and can be written as the following
Pst = mini∈(1;2;...k)(LET(li))	(4)
6. Selection of cost effective stable path

FCMQR is intended to select a more stable path with lower communication cost to achieve reduction in packet loss and prolonged lifetime of the network along with QoS support.
Distance Vector (AODV) for route discovery. As shown in
Figure 5, whenever a source wants to send any packet, it first checks its routing table for the destination. If it has a route to the destination, it reserves the resource and starts packet trans- mission using that route. If it does not have a route, it broad- casts a RREQ packet to its neighbors through all eligible links using AODV routing policy. It starts a timer for the route selection time window as soon as it sends this RREQ. This is the time till which it will receive the route replies sent back from the destination node. When any intermediate node having an eligible route receives the RREQ, checks and compares its available bandwidth and link expiration time with the band- width and LET field of the RREQ message and puts the mini- mum of these two values in the RREQ and forwards to its neighbors. The delay field accumulates the sum of delays be- tween the nodes. So the minimum available bandwidth and LET of the source destination pair along with the sum of end-to-end delay is stored in the routing table. Every node in MANET acts as both a terminal and a router. Each node can become a destination for data traffic, thus, FLS is embedded in every mobile node. When the RREQ packets arrive at the destination node, it accepts all RREQ packets and the FLS available in the destination node calculates the fuzzy cost based on the gathered information of network resources using the Eq.
(1). It sends back a RREP to the source node, through the route


Figure 4	Request packet header format.

Fuzzy-Cost based Multiconstrained QoS	23

































Figure 5	Route request/reply process.


which has maximum ‘d’ value using the Eq. (5), i.e., the route with minimum fuzzy cot and maximum stability is selected for data transmission. On receiving the RREP, the source starts sending data following the new route. The fuzzy cost based mechanism makes sure that data packets are always sent by the route with the least cost and maximum expiration time.


Simulation results

The proposed scheme has been simulated in various network scenarios using NS-2 simulator. A mobile ad hoc network con- sisting of ‘n’ nodes is generated by using a random placement of the nodes and allowed for the free movement within the area of ‘1000 · 1000’ m2. Each node starts from a random location and moves in all directions. All nodes are considered to be non-malicious and are included in the clustering scheme (see Table 2).
The performance of proposed FCMQR has been evaluated through extensive simulations and compared with that of FLWMR and FLWLAMR. To measure the performance of FCMQR the following four QoS parameters are used.
Packet delivery ratio: The ratio of the average number of data packets received by the destination node to the number
of data packets transmitted by the multicast source.
Pn  number of data packets delivered









where ‘n’ is number of nodes in the network. Packet deliv- ery ratio is an important metric to the performance of routing protocols. It represents the packet loss rate which in turn af- fects the maximum throughput that the network can support.
End-to-end delay: It is defined as the average of the time taken by all the multicast packets to reach its destination.
First, for each source–destination pair, average delay for packet delivery is computed. Then the whole average delay is computed from each paired average delay. End-to-end delay includes the delay in the send buffer, the delay in the interface queue, the bandwidth contention delay at the

Packet delivery ratio =
i=1 n
number of data packets sent
(6)
MAC, and the propagation delay.
Control overhead: The number of control packets transmit- ted for every data packet sent.




Figure 6 illustrates the performance of the average packet delivery rate under various mobility speeds which ranged from 0 m/s to 30 m/s. The packet delivery rate is reduced with increasing mobility due to more link breaks. This resulted in more multicast tree partitions for FCMQR, FLWMR and FLWLAMR. When the mobility is low, the multicast tree structure was mostly static and therefore the packet delivery ratio is high. When the speed increases, the links between two nodes more often break, then there are more packet losses and thus, fewer packets delivered to the destination. In FLWMR hop count is considered as the only QoS metric for routing decision and FLWLAMR takes the routing decision according to the load at each node’s interface. The availability of other resources is not taken into account in both the proto- cols. Whereas in FCMQR the required resources such as threshold bandwidth, and the minimum end to end delay are taken into account and the most stable path is also identified with maximum Pst which in turn increases the packet delivery ratio 5–10% compared to FLWMR and FLWLAMR.


















Figure 6 Effect of packet delivery ratio on various mobility speeds.
Figure 7b	Effect of end-to-end delay on varying group sizes.


End-to-end delay

Figure 7a depicts the performance of the end-to-end delay under various mobility speeds. As the mobility speed increases average end to end delay also increases. Packet delivery latency is significantly less than that for fuzzy-cost based system compared to FLWMR and FLWLAMR even at higher node mobility for constant group size. The decrease of delay is mainly introduced by route updating predicted in FCMQR. Both FLWMR and FLWLAMR suffers frequent link breaks and needs route reconstruction fre- quently which results in increasing average end-to-end delay. The advantage of FCMQR is resulted from choosing the right routing path by the virtue of the suitable route lifetime estimation.
Figure 7b shows that the average end to end delay raises gradually as the number of node increases. The reason is that with increasing number of nodes, the total traffic load in- creases and the network becomes congested. So more packets are kept waiting in the queues for long time which causes the delay to increase. However FCMQR outperforms FLWMR and FLWLAMR in reducing the end to end delay in the range of 10–15%.

Success ratio

Figure 8 shows the effect of success ratio on varying multicast group sizes. With increasing number of nodes, the number of calls generated by different nodes increases and the network becomes congested. So more number of calls is not admitted and thus the average success ratio is reduced for all three pro- tocols. Compared to other protocols the success ratio of FCMQR is little bit high, which is due to its ability to select a set of stable and least congested routes thus having the low- est amount of congestion loss and very few route failures.

Fuzzy-Cost based Multiconstrained QoS	25
link stability and cost which will ensure a disruption free communication for transmission. The proposed protocol can be further investigated based on other QoS parameters such as delay jitter, buffer length and power consumption rate in order to design better adaptive mechanism for mobile ad hoc networks.
References



Figure 8	Effect of success ratio on various group sizes.














Figure 9	Effect of control overhead on various mobility speeds.


Control overhead

It is observed from Figure 9 that FCMQR has fewer control bytes than FLWMR and FLWLAMR. The reason is that the most stable path is selected by FCMQR and thus the number of route setup reduces, therefore the control overhead decreases. As speed increases, link connectivity changes more often and more update messages are generated, the total con- trol bytes increase. While FLWMR needs update continu- ously, its overhead is bigger. Both FLWMR and LWLAMR needs more time and more control overhead than FCMQR to recover broken paths and to discover new paths.

Conclusion

In the proposed system the QoS aware routing problem is formulated as maximizing the link stability and lifetime of the routing path while minimizing the cost. Fuzzy rule base is developed to combine the various metrics such as band- width, end-to-end delay and number of nodes to generate a single cost value, which is used for route selection. Our pro- posed protocol outperforms than the existing FLWMR and FLWLAMR protocol. The simulation results have shown that the proposed FCMQR enhances packet delivery ratio, incurs less end-to-end delay and increases the path success ra- tio. The proposed FCMQR formulates a tradeoff between

Penttinen Aleksi. Research on ad hoc networking: current activity and future directions. Finland: Networking Laboratory, Helsinki University of Technology; 2006.
Junhai Luo, Liu Xue, Danxia Ye. Research on multicast routing protocols for mobile ad-hoc networks. Comput Networks 2008;52:988–97.
Becker Philipp. Qos routing protocols for mobile ad-hoc networks – a survey’’ TU KLTechnical report 368/08; 2007.
Lin CR, Liu JS. QoS routing in ad hoc wireless networks. IEEE J Select Areas Commun 2008;17:1426–38.
Sun BL, Li LY. A distributed QoS multicast routing protocol in ad hoc networks. J Syst Eng Electron 2006;17(3):692–8.
Lian Lin, Li Layuan. A multi-constraint QoS routing with route- request selection based on mobile predicting in MANET. In: International conference on computational intelligence and secu- rity workshop; 2007.
Royer EM, Perkins CE. Multicast operation of the ad hoc on demand distance vector routing protocol. In: Proc ACM MOBI- COM; August 1999. p. 207-18.
Natsheh E, Khatun S, Jantan AB, Subramaniam S. Fuzzy metric approach for route lifetime determination in wireless ad hoc networks. Int J Ad Hoc Ubiquit Comput 2008;3(1):1–9.
Alandjani Gasim, Johnson Eric E. In: Fuzzy routing in ad hoc networks, performance, computing, and communications confer- ence, 2003. IEEE international volume, issue, and 9–11 April 2003. p. 525–30.
Alandjani Gasim, Johnson Eric E. In: Fuzzy routing in ad hoc networks, performance, computing, and communications confer- ence; 2003.
Rea Susan, Pesch Dirk. Multi-metric routing decisions for ad hoc networks using fuzzy logic. In: The proceedings of wireless communication and mobile computing conference; 2006.
Tarique Mohammed, Tepe Kernal E, et al. Survey of multipath routing protocols for mobile ad hoc networks. J Network Comput Appl 2009;32:1125–43.
Sun BL, LI H, Zeng Y, QIN QQ. Fuzzy QoS controllers in mobile ad hoc networks using genetic algorithms. J Comput Inform Syst 2007;3(6):2255–60.
Chiang Tzu-Chiang, Tai Cheng-Feng, et al. A knowledge-based inference multicast protocol using adaptive fuzzy Petri nets. Exp Syst 2009;122(36):8115–23.
Mie Mie Thaw. Fuzzy-based multi-constrained quality of service distance vector routing protocol in mobile ad hoc networks. doi: 978-1-4244-5586-7/10/.
Natsheh Essam, Khatun Sabira. Fuzzy metric approach for route lifetime determination in wireless ad hoc networks. Int J Ad Hoc Ubiquit Comput 2008;3(1).
