Electronic Notes in Theoretical Computer Science 174 (2007) 35–48	
www.elsevier.com/locate/entcs

GeoThms — a Web System for Euclidean Constructive Geometry
Pedro Quaresma1 ,2
CISUC/Department of Mathematics University of Coimbra
3001-454 Coimbra, Portugal
Predrag Janiˇci´c3 ,4
Faculty of Mathematics, University of Belgrade Studentski trg 16, 11000 Belgrade, Serbia & Montenegro

Abstract
GeoThms is a web-based framework for exploring geometrical knowledge that integrates Dynamic Geometry Software (DGS), Automatic Theorem Provers (ATP), and a repository of geometrical constructions, figures and proofs. The GeoThms users can easily use/browse through existing geometrical content and build new contents. In this paper we describe GeoThms functionalities, focusing on the interface solutions required for a system aimed at supporting studying and teaching geometry via Internet. GeoThms is a publicly accessible
system with a growing body of geometrical constructions and formally proven geometrical theorems. We believe that, with the help of all its users it will become an important Internet resource for geometry.
Keywords: Web interfaces for proof systems, automated geometry theorem proving, dynamic geometry software.


Introduction
Our motivation is to build and maintain a publicly accessible and widely used Inter- net based framework for constructive geometry. It should be used for teaching and studying geometry, but also as a major Internet repository for geometrical construc- tions. We have built a system, GeoThms, that links Dynamic Geometry Software

1 This work was partially supported by programme POSC.
2 Email: pedro@mat.uc.pt
3 This work was partially supported by Serbian Ministry of Science and Technology grant 144030. Also, partially supported by the programme POSC, by the Centro International de Matemtica (CIM), under the programme “Research in Pairs”, while visiting Coimbra University under the Coimbra Group Hospitality Scheme.
4 Email: janicic@matf.bg.ac.yu

1571-0661 © 2007 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2006.09.020

(DGS), Automatic Theorem Provers (ATP), and GeoDB, a database of geometri- cal constructions, figures and proofs. The DGSs currently used within GeoThms are GCLC [7,12] and Eukleides [16,18], two widely used dynamic geometry pack- ages. The ATP used, GCLCprover [13,17], is based on the area method [4,6,15,17], and it produces human readable, synthetic geometrical proofs. GeoThms provides a web workbench that tightly integrates mentioned tools into a single framework for constructive geometry. The web interface is a server-side solution written in PHP, designed to enable GeoThms users to easily browse through the list of ge- ometric problems, their statements, illustrations and proofs, and also to inter- actively use the drawing and automatic proof tools. GeoThms is accessible at http://hilbert.mat.uc.pt/∼geothms.
There are several systems related to GeoThms. Some of them combine features of DGS and automated theorem provers, some of them have web interfaces, and some of them provide repositories of geometrical theorems. We are not aware of any system that, like GeoThms, gives full, web-based access to DGS, use theorem proving with human-readable proofs generated and provides open repository of geometrical constructions and conjectures. Section 6 gives more details about related work.

Paper overview.
Section 2 describe GeoThms components; Section 3 presents the structure of the web interface; Section 4 is about communication and representation issues; Section 5 presents GeoThms through some illustrated examples. Section 6 discuss related work. Section 7 discusses further work, and Section 8 draws final conclusions.

Framework Components
GeoThms, is a framework that links dynamic geometry software, geometry auto- matic theorem provers, and a repository of geometry problems providing a common web interface for all these tools (see Figure 1). In this section, we give a brief description of the tools that are currently integrated in GeoThms:

GCLC and Eukleides
GCLC 5 [7,12] and Eukleides 6 [16,18] are two DGSs. They both use declar- ative languages to specify geometrical constructions. Hence, in using these tools, producing mathematical illustrations is based on “describing figures” rather than on “drawing figures”. These descriptions directly reflect meaning of mathematical objects to be presented, and are easily understandable to mathematicians. Both tools have graphical user interfaces and produce, in LATEX form, illustrations that correspond to geometric constructions.

5 GCLC package is freely available from www.matf.bg.ac.yu/~janicic/gclc/. The mirrored version is available from emis (The European Mathematical Information Service) www.emis.de/misc/index.html . There are versions of GCLC for Windows and for Linux.
6 Eukleides is available from http://www.eukleides.org , There are versions for a number of languages. The first author of this paper is responsible for the Portuguese version of Eukleides: EukleidesPT is available from http://gentzen.mat.uc.pt/∼ EukleidesPT/











W
e b

I
n t e r f a c e







Fig. 1. The GeoThms Framework

GCLCprover
GCLCprover is an ATP based on the area method [4,6,15]. It allows formal deductive reasoning about objects constructed within DGSs. It produces proofs that are human-readable (in LATEX and XML formats), and with an explicit justification for every proof step. GCLCprover is tightly integrated with GCLC, so one can use
the prover to reason about a GCLC construction, without changing and adapting it for the deductive process, the users only need to add a conclusion they want to prove. The geometrical constructions made within GCLC are internally transformed into primitive constructions of the area method, and in some cases, some auxiliary points are introduced. We have developed a tool euktogclcprover, that converts Eukleides files to GCLCprover files, allowing the prover to be used with geometric constructions described within Eukleides.

The geoDB database
geoDB keeps geometric constructions, illustrations, conjectures, and proofs. Fig- ure 2 shows the structure of the database. The main entities of the database are: ﬁgures, descriptions of geometrical constructions; theorems, statements of theorems, written in LATEX form; proofs, geometrical constructions with conjectures.
Geometrical constructions are described and stored in the database in declar- ative languages of dynamic geometry tools such as GCLC and Eukleides, and in a common XML format. Figures are generated directly on the basis of geometric specifications, by GCLC and Eukleides and stored as JPEG files and SVG files. Conjectures are described and stored in a form that extends descriptions of geo- metrical constructions. The specifications of conjectures are used (directly or via



















Fig. 2. geoDB — Entity-relationship Diagram


a converter) by GCLCprover. Proofs are generated by GCLCprover and stored as XML files (rendered by XSLT, using a layout specified by GeoCons proof.xsl) and as PDF files (produced by LATEX, using a layout specified by gclc proof.sty). A geometric theorem can have more than one figure and/or more than one proof,
made by different tools and made by different users.
The database also has the following auxiliary entities: bibrefs, bibliographic ref- erences, in BibTEX format; drawers & provers, information about the available pro- grams; authors, information about the authors; users, information about registered users; computer, information about computers used as the test benches. The tables codeTmp and codeTmpProver are used to store temporary information, deleted after each session, for the interactive section of GeoThms.


The Web Interface General Structure
The structure of the web interface has two main levels (see Figure 3).
The entry level (see Figure 4), accessible to all web-users, has some basic infor- mation about GeoThms, including documents about the GCLCprover and the area method. There is also an entry point to the GeoThms forums. This level offers registering options, and it gives access to other levels of the system. Regular users have access to the second level, where they can browse the data from the database (in a formatted, or in a plain textual form) and use the drawing/proving programs for interactive work. Regular users can apply for the contributor status with which they can also insert new data and can update the data inserted previously in the database. There is also an administration level, invisible to the user. It is used to change the status of the users, and other administrative tasks.






Help
Entry Level




Regular User	Contributers


Workbench
2nd Level


Listings of:	Interaction with	Insert/Update info

Geometric Theorems
Drawing tools
Geometric Theorems

Statements Figures Proofs
all the info together Provers
Drawers Authors BibRefs
Provers	Statements
Figures Proofs
Provers
Drawers Authors BibRefs

Fig. 3. GeoThms — Web Interface

Communication and Representation Issues
GeoThms is a server side web system with integrated DGSs and ATPs tools. It is not oriented to some particular browser and/or operating system. As a web service GeoThms emphasise:
a simple interface, based on using geometrical specification languages of the un- derlying geometrical tools;
a low communication burden.
To achieve these goals we decided to use a server side Apache/PHP/MySQL solu- tions, and standard features of HTML language to deal with input/output.
A basic communication, concerning describing geometrical constructions and conjectures, is based on formal languages of the underlying geometrical tools. De- spite some good features of point-and-click-based descriptions of constructions, we

Fig. 4. GeoThms — Home Page

believe that in this context, communication based on textual descriptions is a better solution. For instance, this approach enables full access to the underlying systems, different geometrical tools can be uniformly integrated, stresses the fact that ge- ometrical constructions are formal procedures, etc. Notice that both DGSs tools currently supported (GCLC and Eukleides) provide also graphical interfaces, so it is possible for a user to use these tools’ rich graphical interfaces locally and then transfer the results to GeoThms.
Concerning internal representation of data, within GeoThms, descriptions of constructions and conjecture are stored as GCLC code, as Eukleides code, or in XML form. There are tools for converting between these formats, while XML format has the central position, as an interchange format. When adding new geometrical tools, it will be sufficient to develop converters from its format to XML and vice versa. This enables converting from any format to any other, and consequently makes usable the whole of the repository to any geometrical tool. Figures are stored in JPEG format, but also in SVG format.
Within GeoThms, data are presented in:
textual form with the following choices: as GCLC code, as Eukleides code, as XML rendered (by appropriate XSLT) as HTML, as XML rendered (by appro- priate XSLT) in natural-language (English) form.
graphical form: with the following choices: as JPEG image, or as SVG image.
The bibliographic references are kept in BibTEX format and it is possible to get a BibTEX file with a list of selected references.

GeoThms Tours
In this section we will describe GeoThms framework through a series of GeoThms Tours, a series of paths that can be used by GeoThms users in theirs interaction with GeoThms.

Login/Registration
At the entry level (apart from the “Help” section) is the “Login” section where GeoThms users can login, or where new users can register to GeoThms. This is a standard registration form with obligatory and optional data fields and with the option to choose between a regular user, or a contributor. If a regular user wants to be a contributor, his/her request is sent to the administrator, and it is the administrator’s responsibility to change the status of the user. There is also an anonymous account for a quick preliminary usage of GeoThms.
Only registered users have access to the second level. Regular users can browse the data from the database and use the drawing/proof programs in an interactive way. A contributor also has privileges to insert new data and/or update the existing ones.

Browsing
Registered users have access to the “Reports” section (see Figure 5). In this section, a user can browse through the data in the database, figures, theorems, and proofs. For each of these groups a list of available items with related details is shown (see Figure 6).
It is also possible to see the information related to the provers, the drawers, the authors of those programs and the bibliographic references.

Fig. 5. GeoThms – Reports Page

Fig. 6. GeoThms – Figures Listing


Adding New Data
Contributors have access to the “Add/Update” section where they can add new data and/or update existing constructions, conjectures, and proofs. Constructions and conjectures are entered by users. Only proofs generated by the built-in provers can be added to the database. The relations between entities enforce that each figure and/or proof must be linked to a geometric conjecture., i.e., a contributor



Fig. 7. GeoThms – Theorem Report
must first add a geometric conjecture and only after that, proceed adding a figure and/or proof to that conjecture.
A contributor can add a geometrical conjecture, its statement, corresponding figure and proof, in a single step or in separate steps. The statement must come first, and for a given conjecture more than one figure and/or proof can be added. Contributors can also update the data related to the conjectures, figures, and proofs.

Fig. 8. Insertion Form

It is also possible to insert/update the information about provers, drawers, au- thors and bibliographic references.

Interactive Work
In the “Interactive Work” section, GeoThms offers its users the possibility to use the DGSs and the ATP in a interactive way. The GeoThms user can submit the code, call for its evaluation and, if there are no errors, see the resulting figure or

proof. If some syntactic, semantic or deductive error occurs an error message will be displayed and the user is given the opportunity to correct and re-evaluate the code. Syntactic errors are errors made in description steps that are not regular with respect to syntax of the underlying geometrical language. Semantic errors occur in situation when some construction is not possible for given points (for points given by their Cartesian coordinates). Deductive errors occur in situation when some construction is always impossible (these errors require invoking the prover).
Figures 9 and 10 illustrate the possibilities to add code (within a textarea field), to submit it to evaluation, and to see the result graphically along with the code submitted. If there are errors, they are displayed and the user can correct them. We are planning to incorporate a syntax highlighting text editor (e.g., Helena 7 ) as a substitute to the textarea field, providing in this way line numbering and syntax highlight.
The “Interactive Work” section can be used to work on a new result before adding it to the database. In the following text, we will illustrate an interaction of a user with GeoThms in adding, for example, the Midpoint Theorem to the database.
Theorem 1 (Midpoint Theorem) Let ABC be a triangle, and let A' and B' be the midpoints of AC and BC respectively. Then the line A'B' is parallel to the line AB.
Using the interactive part of GeoThms, a user can begin by describing the con- struction, proceed attempting to prove the conjecture and, if all went as expected, insert all this data, along with the new conjecture statement to the database.

Describing the Construction

Fig. 9. Midpoint Theorem — Interaction with the DGS

The constructive specification of the figure has to define: three (fixed) points A, B, C (the vertices of the triangle); two (constructed) points A' and B', the two midpoints of AC and BC respectively, and all the “drawing” commands. Note that drawing commands are irrelevant for the theorem prover, but are relevant for
producing figures (see Figure 9). The construction was made using GCLC, but the

7 http://helene.muze.nl/

user can also use Eukleides for describing the construction, by instructions very similar to the given ones.

Testing the Conjecture

Fig. 10. Midpoint Theorem — Interaction with the ATP

After eliminating all errors from the code, the user can add a conjecture. The property to be proved can be expressed (using the area method) in the following way SA'B' A = SA'B'B , i.e., the signed area of ΔA'B'A is equal to the signed area of ΔA'B'B.
By clicking in the appropriate button, the user goes from the “Geometric Drawer
Workbench” to the “Geometric Prover Workbench” with the DGS’s code already in the textarea window. The GCLC’s code can be submitted to GCLCprover without modifications, while the Eukleides’ code needs to be converted with the euktogclcprover tool.
The user can now add the conjecture in the ATP’s code:
prove {equal {signed_area3 A_l B_l A} {signed_area3 A_l B_l B} }
After that, a new cycle of writing and evaluation starts (the drawers commands are already correct, but the conjecture may be incorrectly written). After that, the user gets the output of the prover in the form of a proof status, a PDF file (generated by GCLCprover) containing the proof (if the conjecture is valid), and some measures of efficiency.
As shown in figure 10, the proof status and the measures of efficiency are acces- sible, and the proof is given as a PDF file. Figure 11 shows the last steps of the proof made by GCLCprover.

Adding the Midpoint Theorem to the Database
With a new click, the contributor can select the “Forms” section in order to add a statement for the new construction and the corresponding figure and proof (see Figure 8).

„ 1 · SACB « = (SBAB + SBCB )	, by algebraic simplifications

„ 1 · SACB « = „„SBAB + „ 1 · (SBAC + (−1 · SBAB ))«« + SBCB «	, by Lemma 29 (point Bl eliminated)

„ 1 · SACB « = „„0+ „ 1 · (SACB + (−1 · 0))«« + SBCB «	, by geometric simplifications

0= SBCBl	, by algebraic simplifications
0 = „SBCB + „ 1 · (SBCC + (−1 · SBCB ))««	, by Lemma 29 (point Bl eliminated)

0 = „0+ „ 1 · (0 + (−1 · 0))««	, by geometric simplifications

0 = 0	, by algebraic simplifications
Fig. 11. Last steps of the Proof of the Midpoint Theorem
Searching the Database
GeoThms’ users can search the database over figures, conjectures, or proofs for a particular string.

Related work
There are several system related to GeoThms. The following ones in some degree link DGSs with ATPs or with repositories of theorems (Table 1 shows comparison between features of these tools):
Geometry Explorer combines features of DGS with a theorem prover based on the full-angle method which produces human-readable proofs (in LATEX form) [22].
MMP/Geometer combines features of DGS and ATP, and uses different proving methods [10,11].
Geometry Expert (GEX) (new version, currently under development) is a DGS with a client-side web interface [9]; the GEX prover is based on algebraic proof methods, and the user can only select one from a limited number of conclusions (e.g., “are three selected point collinear?”). The GEX tool does not have an accessible database of problems, and does not provide a formatted output for images and proofs.
GEOTHER is an environment for manipulating and proving geometric theorems implemented in Maple, with drawing routines and the interface in Java. GEOTHER can work with a menu-driven graphic user interface and contains a collection of theorems in both elementary and differential geometry, with sample specifications that have been proved. [21,20].
Cinderella uses randomised theorem checking of the geometrical properties; it does not provide proofs in any form [5,14,19].
Discover is a DGS that can communicate with Mathematica 8 , using the symbolic capabilities of the latter to implement the Gro¨ebner bases method [2]. It is necessary to translate the geometric construction to an algebraic form and back,

8 http://www.wolfram.com


Table 1
Comparison between tools that combine DGS, ATP and repository of geometry theorems

from the conclusion in algebraic form to its geometric counterpart. No proofs in any form are provided.
geometriagon has a vast repository of problems in the area of classical construc- tive (ruler and compass only) Euclidean geometry 9 . A registered user can ac- cess/edit all problems and solutions. It does not provide an ATP. The user can perform only valid steps in the construction, using only a limited set of tools, and in this way the system is capable to recognise whenever a user has reach a solution of a problem. No formal proofs are provided.
GeoView combines the Coq ATP and the GeoplanJ DGS into a framework in which it is possible to edit statements of geometrical theorems, and to visualise the statement using the DGS [1]. The proofs are not accessible.
GeoGebra is a DGS with an internationalised graphical interface allowing graph- ical and textual input. Figures can be exported to various formats, including a dynamic version for Web. It does not have an ATP tool, neither it keeps a repository of problems [8].
Theorema system integrates a number of different mathematical tools and rea- soners, including several geometry theorem provers — provers based on Gr¨oebner bases method, Wu’s methods, the area method. The system is built on top of Mathematica 8 system and uses its visualisation tools [3].

Future Work
We are planning to augment the framework by other dynamic geometry tools, and other geometry theorem provers. We are considering theorem provers based on the full-area method (which also produces synthetic proofs), Wu’s method and Gro¨ebner bases method. We are planning to enable exchanging data with other tools

9 geometriagon: http://www.polarprof.net/geometriagon/

(internally, within GeoThms, and externally) via our XML format for geometrical constructions and proofs.
We are planning to incorporate a syntax highlighting text editor as a substitute to the textarea field, providing in this way line numbering and syntax highlight. We are planning to use Math-ML for rendering theorems’ statements and proofs stored in XML.
The search mechanism will be improved to provide options for advanced search.
We are planning to internationalise GeoThms, in order to make it wider usable in education.
The “Help” system will be improved, by adding more detailed information to the various help pages already provided.

Conclusions
GeoThms gives the user a complex web-based framework suitable for new ways of communicating geometric knowledge, it provides an open system where one can learn from the existing knowledge base and seek for new results. GeoThms also provides a system for storing geometric knowledge (in a strict, declarative form)
— not only theorem statements, but also their (automatically generated) proofs and corresponding figures, i.e., visualisations. We are planning to further develop GeoThms by improving its functionalities and incorporating more geometrical tools. We also hope that GeoThms’ growing body of geometrical constructions and for- mally proven geometrical theorems will become a major Internet resource for geo- metrical constructions and conjectures.

References
Yves Bertot, Frdric Guilhot, and Loc¨ı Pottier. Visualizing geometrical statements with geoview.
http://www-sop.inria.fr/lemme/geoview/geoview.ps , 2004.
Francisco Botana and Jos L. Valcarce. A dynamic-symbolic interface for geometric theorem discovery.
Computers and Education, 38:21–35, 2002.
Bruno et.al. Buchberger.	Theorema: Towards computer-aided mathematical theory exploration.
Journal of Applied Logic, 2006.
Shang-Ching Chou, Xiao-Shan Gao, and Jing-Zhong Zhang. Automated production of traditional proofs for constructive geometry theorems. In Moshe Vardi, editor, Proceedings of the Eighth Annual IEEE Symposium on Logic in Computer Science LICS, pages 48–56. IEEE Computer Society Press, June 1993.
Cinderella site. http://www.cinderella.de .
Shang-Ching Chou, Xiao-Shan Gao, and Jing-Zhong Zhang. Automated generation of readable proofs with geometric invariants, I. multiple and shortest proof generation. Journal of Automated Reasoning, 17:325–347, 1996.
Mirjana Djori´c and Predrag Janiˇci´c. Constructions, instructions, interactions. Teaching Mathematics and its Applications, 23(2):69–88, 2004.
Karl Fuchs and Markus Hohenwarter. Combination of dynamic geometry, algebra and calculus in the software system geogebra. In Computer Algebra Systems and Dynamic Geometry Systems in Mathematics Teaching Conference 2004, Pecs, Hungary, 2004.
Xiao-Shan Gao. Gex. http://www.mmrc.iss.ac.cn/∼ xgao/software.html.

Xiao-Shan Gao and Qiang Lin. Mmp/geometer - a software package for automated geometric reasoning. In Franz Winkler, editor, Automated Deduction in Geometry: 4th International Workshop, (ADG 2002), number 2930 in LNCS, pages 44–66. Springer-Verlag, 2004.
X.S. Gao and Q. Lin. Mmp/geometer. http://www.mmrc.iss.ac.cn/∼ xgao/software.html.
Predrag Janiˇci´c and Ivan Trajkovi´c. Wingclc — a workbench for formally describing figures. In Proceedings of the 18th Spring Conference on Computer Graphics (SCCG 2003), pages 251–256. ACM Press, New York, USA, April, 24-26 2003.
Predrag Janiˇci´c and Pedro Quaresma. System description: Gclcprover + geothms. In Ulrich Furbach and Natarajan Shankar, editors, IJCAR 2006, LNAI. Springer-Verlag, 2006.
Ulrich Kortenkamp and Jrgen Richter-Gebert. Using automatic theorem proving to improve the usability of geometry software. In Procedings of the Mathematical User-Interfaces Workshop 2004, 2004.
Julien Narboux. A decision procedure for geometry in coq. In Proceedings TPHOLS 2004, volume 3223 of Lecture Notes in Computer Science. Springer, 2004.
Christian Obrecht. Eukleides. http://www.eukleides.org/ .
Pedro Quaresma and Predrag Janicic. Framework for constructive geometry (based on the area method). Technical Report 2006/001, Centre for Informatics and Systems of the University of Coimbra, 2006.
Pedro Quaresma and Ana Pereira. Visualizao de construes geomtricas. Gazeta de Matemtica, (151), Junho 2006.
Jrgen Richter-Gebert and Ulrich Kortenkamp. The Interactive Geometry Software Cinderella. Springer, 1999.
Dongming Wang. Geother. http://www-calfor.lip6.fr/∼ wang/GEOTHER/.
Dongming Wang. Geother 1.1: Handling and proving geometric theorems automatically. In F. Winkler, editor, Automated Deduction in Geometry, number 2930 in LNAI, pages 194–215, Berlin Heidelberg, 2004. Springer-Verlag.
Sean Wilson and Jacques Fleuriot. Combining dynamic geometry, automated geometry theorem proving and diagrammatic proofs. In Proceedings of UITP 2005, 2005.
