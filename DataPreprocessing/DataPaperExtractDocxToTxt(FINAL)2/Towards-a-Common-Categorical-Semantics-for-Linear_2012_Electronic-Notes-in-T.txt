Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 286 (2012) 229–242
www.elsevier.com/locate/entcs

Towards a Common Categorical Semantics for Linear-Time Temporal Logic
and Functional Reactive Programming
Wolfgang Jeltsch1,2
TTU¨ Ku¨berneetika Instituut Tallinn, Estonia

Abstract
Linear-time temporal logic (LTL) and functional reactive programming (FRP) are related via a Curry–Howard correspondence. Based on this observation, we develop a common categorical semantics for a subset of LTL and its corresponding flavor of FRP. We devise a class of categorical models, called fan categories, that explicitly reflect the notion of time-dependent trueness of temporal propositions and a corresponding notion of time-dependent type inhabitance in FRP. Afterwards, we define the more abstract concept of temporal category by extending categorical models of intuitionistic S4. We show that fan categories are a special form of temporal categories.
Keywords: temporal logic, modal logic, functional reactive programming, categorical semantics


Introduction
It was shown recently that there is a Curry–Howard correspondence between linear- time temporal logic (LTL) and functional reactive programming (FRP) [6,7,5]. This suggests that LTL and FRP can be given a common semantics. Category theory has been proven useful for modeling logics and programming calculi. So our goal is to define a class of categorical structures that can serve as models for LTL and for a corresponding FRP dialect. This paper describes our first results in this direction. We present the following contributions:
In Section 2, we develop a class of categorical models for an intuitionistic temporal logic with a “globally” and a “finally” modality. We call these categorical models

1 This work was partly supported by the ERDF through the Estonian Center of Excellence in Computer Science (EXCS).
2 Email: wolfgang@cs.ioc.ee

1571-0661 © 2012 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2012.08.015

fan categories. Fan categories directly reflect the fact that trueness of temporal formulas depends on the time.
In Section 3, we demonstrate that fan categories are also models of FRP. We show that the time-dependent notion of trueness in temporal logic is related to time-dependent type inhabitance in FRP. We use our categorical semantics to explain the correspondence between the temporal modalities and the type constructors for behaviors and events, which are the key concepts of FRP.
	In Section 4, we define the notion of intuitionistic S4 category based on earlier work by Kobayashi [8] and Bierman and de Paiva [3]. We prove that fan categories are a special form of S4 categories.
In Section 5, we introduce variants of the temporal modalities that refer only to the future. To reflect this in the semantics, we define ideal intuitionistic S4 categories. We prove a relationship between fan categories and ideal intuitionistic S4 categories that is analog to the result from Section 4.
In Section 6, we extend ideal intuitionistic S4 categories with additional structure that captures the notion of linear time. We call the resulting structures temporal categories and prove that temporal categories cover fan categories as a special case.
We discuss related work in Section 7 and give conclusions and an outlook on further work in Section 8.
Throughout this paper, we will use certain notation when working with categorical products and coproducts. Let us define this notation, before starting with the payload of this paper.
Definition 1.1 (Operations on products and coproducts) For working with products and coproducts, we introduce notation as follows:
Let I be an index set, {Ai}i∈I be a family of objects for which a product exists, and {fi}i∈I be a family of morphisms fi : B → Ai. Then
⟨{fi}i∈I⟩ : B →	Ai
i∈I
denotes the generalization of the binary product operation ⟨·, ·⟩ applied to the fi. Furthermore for any i ∈ I, πi denotes the projection that corresponds to i.
Expressions of the form [{fi}i∈I ] and ιi for appropriate {fi} and i denote the dual operations on coproducts.
If we work in a bicartesian closed category (BCCC), then
σ : B × a Ai → a(B × Ai)

denotes the natural transformation whose existence follows from the fact that BCCCs are distributive with respect to all coproducts. In the case of a binary coproduct, we add indices to σ that denote the objects involved, so that we have

the following definition:
σA,B,C : A × (B + C) → A × B + A × C σA,B,C := [idA × ι1, idA × ι2]—1

Temporal Logic and Fan Categories
We consider a temporal logic with a linear notion of time and with 2 (“globally”) and 3 (“finally”) as its only temporal operators. Since we want to have a Curry–Howard correspondence with FRP, our logic is intuitionistic instead of classical. Let P denote a set of atomic propositions. Then the syntax of formulas is given by the following BNF rule:
F ::= P |T|⊥| F ∧ F | F ∨ F | F → F | 2F | 3F
In temporal logic, it depends on the time whether a formula is true or not. So intuitively, we can identify a formula ϕ of intuitionistic temporal logic with a function from times to formulas of intuitionistic propositional logic. We devise a class of categorical models that reflect this intuition. We call these models fan categories.
The standard categorical models of intuitionistic propositional logic are bicarte- sian closed categories (BCCCs). So we say that a fan category must be a product category CT where C is a BCCC, and T is a set of times. An object of such a category is a function from T to Obj C, and a morphism f : A → B is a function that maps each time t to a morphism f (t): A(t) → B(t). The latter means that for any temporal formulas ϕ and ψ, a proof of ϕ ▶ ψ shows that ϕ(t) ▶ ψ(t) holds for all times t.
The bicartesian closed structure of C gives rise to a bicartesian closed structure of CT , where operations of the latter are just pointwise applications of the respective operations of C. For example, the product-related operations of CT are defined as follows:
(A × B)(t) := A(t) × B(t)	π1(t) := π1
⟨f, g⟩(t) := ⟨f (t), g(t)⟩	π2(t) := π2

Clearly, the bicartesian closed structure of CT reflects the usual meanings of finite conjunctions, finite disjunctions, and implications in temporal logic.
For modeling the temporal modalities 2 and 3, we equip our set T of times with a total order ≤, from which we derive orders <, ≥, and > in the usual way. The intuition is that t < tj holds if at time t, tj lies in the future. A formula 2ϕ states that ϕ holds now and at every future time, while 3ϕ states that ϕ holds now or at some future time. So a proposition (2ϕ)(t) corresponds to a (possibly infinite) conjunction of all ϕ(tj) with tj ≥ t, while a proposition (3ϕ)(t) corresponds to a disjunction of all such ϕ(tj).
Therefore, we model the modalities 2 and 3 by two functions 2 and 3 that

turn objects into objects such that for any object A, the following holds: (2A)(t)= Y A(tj)	(3A)(t)= a A(tj)

For this to work, we have to require that every family of objects of C that is indexed by a set {tj | tj ≥ t} admits a product and a coproduct. We actually demand a slightly stronger property, using index sets of the form {tj | tj > t}, because we will need this stronger property in Section 5. We are now ready to give the definition of a fan category.
Definition 2.1 (Fan category) Let (T, ≤) be a totally ordered set, and let C be a BCCC where every family of objects indexed by a set {tj | tj > t} has a product and a coproduct. The product category CT is then called a fan category.
The object mappings 2 and 3 can be turned into functors by defining the lifting of morphisms in the natural way.
Definition 2.2 (Temporal functors of a fan category) For each fan cate- gory CT , the temporal functors 2 and 3 are defined such that for every morphism f and every t ∈ T , the following equations hold:
(2f )(t)= Y f (tj)	(3f )(t)= a f (tj)


Connection to Functional Reactive Programming
The temporal logic we have defined in Section 2 corresponds to a type system for FRP [6,7,5]. Thereby, an FRP type corresponds to a temporal formula. Since such a formula can be seen as a function from times to formulas of intuitionistic propositional logic, an FRP type can be seen as a function from times to types of a simply typed λ-calculus with finite products and sums. So it depends on the time what values an FRP type inhabits.
Since fan categories are models of temporal logic, they are also models of FRP. If A is an object of a fan category that models an FRP type τ , and t is a time, A(t) is the meaning of τ (t), that is, the simple type that corresponds to τ at t. If A and B model FRP types τ1 and τ2, a morphism from A to B models a family of functions from τ1 to τ2, one for each time.
The key constructs of FRP are behaviors and events, which are used to describe temporal phenomena. A behavior is a time-varying value, while an event is an occurrence time with an attached value. The temporal modality 2 corresponds to a type constructor 2 for behaviors, while the modality 3 corresponds to a type constructor 3 for events. This can be seen by looking at the endofunctors 2 and 3, which model the temporal modalities and hence also the type constructors that correspond to them. Remember that for any object A, we defined 2A and 3A as

follows:

(2A)(t) := Y A(tj)	(3A)(t) := a A(tj)

	

So an FRP type (2τ )(t) corresponds to a (possibly infinite) product of all types τ (tj) with tj ≥ t. This means that an inhabitant of (2τ )(t) assigns a value of type τ (tj) to every time tj ≥ t and thus characterizes a time-varying value of type τ . Likewise, a type (3τ )(t) corresponds to a sum of all types τ (tj) with tj ≥ t. So an inhabitant of (3τ )(t) is a pair of a time tj ≥ t and a value of type τ (tj) and thus characterizes an occurrence time with an attached value of type τ .
Connection to Models of Intuitionistic S4
The classical modal logic S4 corresponds to the class of Kripke frames whose accessibility relation is a preorder. Classical temporal logics with a linear notion of time use totally ordered sets of times as Kripke frames. So a Kripke model for such a logic is also a Kripke model for S4. It is reasonable to assume that a similar connection exists in the case of intuitionistic logics and categorical models. In this section, we show that this is in fact the case.
Categorical models for intuitionistic S4 variants are studied by Kobayashi [8] as well as by Bierman and de Paiva [3]. We define the notion of intuitionistic S4 category based on their work and show that fan categories give rise to intuitionistic S4 categories.
Definition 4.1 (Cartesian comonad) Let C be a category with finite products. A tuple (U, ε, δ, m, n) is a cartesian comonad on C if (U, ε, δ) isa comonad on C, and (U, m, n) is a cartesian endofunctor on C, that is, a strong monoidal functor from the monoidal category (C, ×, 1) to itself.
Definition 4.2 (U -strong monad) Let C be a category with finite products and U = (U, ε, δ, m, n) be a cartesian comonad on C. A tuple (T, η, μ, s) is a U -strong monad if (T, η, μ) is a monad on C, s is a natural transformation with sA,B : UA × TB → T (UA × B), and the diagrams in Figures 1 and 2 commute. The transformation s is called tensorial strength.
Definition 4.3 (Intuitionistic S4 category) An intuitionistic S4 category is a tuple (C, 2, ε, δ, m, n, 3, η, μ, s) where C is a BCCC, U = (2, ε, δ, m, n) is a cartesian comonad on C, and (3, η, μ, s) is a U -strong monad.
Kobayashi [8] defines the notion of CS4 structure, which is very similar to our notion of intuitionistic S4 category. The difference is that a CS4 structure may only have weak coproducts instead of proper coproducts, and that the functor 3 must preserve weak initial objects. Kobayashi probably needs this, because his logic has 3⊥ → ⊥ as a theorem. In FRP terms, this would mean that there is a function of type 30 → 0, that is, a function that can yield a non-existing value of type 0 now, although such a value is only promised to be available at some time that may


−1
−1	UA,UB,TC
TA 
TA	1 × TA	UA × (UB × TC)	(UA × UB) × TC 

n×idTA 
idUA×sB,C
mA,B×idTC 





Tλ−1
U 1 × TA	UA × T (UB × C)	U (A × B) × TC 
sA,UB×C



s1,A
T (UA × (UB × C))
−1
UA,UB,C
sA×B,C

T (1 × A)	T (U 1 × A)	T ((UA × UB) × C)	T (U (A × B) × C)


T (n×idA)
T (mA,B×idC )

Fig. 1. Compatibility of tensorial strength with a cartesian endofunctor


δA×idTB 
idUA×ηB
idUA×μB

		
UA × TB	UUA × TB	UA × B	UA × TB	UA × TTB 
sA,TB


sA,B
sUA,B

ηUA×B
sA,B
T (UA × TB)
T sA,B

T (UA × B)	T (UUA × B)	T (UA × B)	TT (UA × B)
	

T (δA×idB)
μUA×B


Fig. 2. Compatibility of tensorial strength with a comonad and a monad
not have been reached yet. Clearly, such a function cannot exist. Since we want to maintain a Curry–Howard correspondence between temporal logic and FRP, we reject 3⊥→ ⊥.
Bierman and de Paiva [3] define categorical models for the intuitionistic modal logic IS4. In contrast to us, they do not require the monoidal endofunctor (2, m, n) to be strong. However, they enforce certain coherence conditions between the monoidal functor structure and the comonad structure, which hold automatically for a strong monoidal functor. In Section 10 of their paper, they discuss some possible extra conditions related to the maps !2A : 2A → 1 and Δ2A : 2A → 2A × 2A. These conditions also hold automatically if (2, m, n) is strong, as is the case in our intuitionistic S4 categories. Furthermore, their coherence conditions for tensorial strength differ from what we have depicted in Figures 1 and 2.
We will now state and prove the relationship between fan categories and intu- itionistic S4 categories that we mentioned at the beginning of this section.

ε(t) : Y A(tj) → A(t)	δ(t) : Y A(tj) → Y Y A(tjj)
ε(t) := πt	δ(t) := ⟨{⟨{πt′′ }t′′≥t′ ⟩}t′≥t⟩
Fig. 3. Comonad structure of a fan category
m(t) : Y A(tj) × Y B(tj) → Y(A(tj) × B(tj))	n(t) : 1 → Y 1
m(t) := ⟨{πt′ × πt′ }t′≥t⟩	n(t) := ⟨{id1}t′≥t⟩
Fig. 4. Cartesian endofunctor structure of a fan category
η(t) : A(t) → a A(tj)	μ(t) : a a A(tjj) → a A(tj)
η(t) := ιt	μ(t) := [{[{ιt′′ }t′′≥t′ ]}t′≥t]
Fig. 5. Monad structure of a fan category

s(t) : Y A(tj) × a B(tj) → a  Y A(tjj) × B(tj) 
s(t) :=  a ⟨{πt′′ }t′′≥t′ ⟩× idB(t′)  σ

Fig. 6. Tensorial strength of a fan category

Theorem 4.4 If CT is a fan category, and 2 and 3 are its temporal func- tors, then there are natural transformations ε, δ, m, n, η, μ, and s such that (C, 2, ε, δ, m, n, 3, η, μ, s) is an intuitionistic S4 category.
Proof. We construct the abovementioned natural transformations as shown in Fig- ures 3 through 6. Proving that these transformations fulfill the necessary conditions is straightforward and therefore left out here.	2

Future Only
A proposition 2ϕ of our temporal logic forces ϕ to hold also at the current time. Likewise, a proposition 3ϕ allows ϕ to hold at the current time instead of in the future. However, there are cases where modalities that only refer to the future are desired. In LTL, where we have a discrete notion of time and a “next” modality , we can define future-only variants of 2 and 3 as follows:
2jϕ := 2ϕ	3jϕ := 3ϕ

In our logic, where time is not necessarily discrete, it is not possible to derive
2j and 3j from 2 and 3. So it is worthwhile to introduce 2j and 3j as the

fundamental modalities and define 2 and 3 in terms of them as follows:
2ϕ := ϕ ∧ 2jϕ	3ϕ := ϕ ∨ 3jϕ
This increases the expressiveness of our logic. Expressiveness of FRP can be increased in an analog way. In the next section, we will use the additional expressiveness that 3j gives us.
We define a variant of intuitionistic S4 categories that also models the future-only modalities. We introduce two new endofunctors 2j and 3j, and derive 2 and 3 from them as follows:
2A := A × 2jA	3A := A + 3jA
According to Definition 4.3, we need a comonad structure for 2 and a monad structure for 3. The natural way to get these is to add an ideal comonad structure for 2j and an ideal monad structure for 3j.
Definition 5.1 (Ideal comonad) A pair (Uj, δj) is an ideal comonad on a cate- gory C with binary products if Uj is an endofunctor on C, δj is a natural transformation from Uj to Uj(Id × Uj), and (Id × Uj, π1, ⟨id, δjπ2⟩) is a comonad.
Definition 5.2 (Ideal monad) A pair (T j, μj) is an ideal monad on a category C with binary coproducts if T j is an endofunctor on C, μj is a natural transformation from T j(Id + T j) to T j, and (Id + T j, ι1, [id, ι2μj]) is a monad.
From an ideal comonad (2j, δj) and an ideal monad (3j, μj), we can derive the comonad (2, ε, δ) and the monad (3, η, μ) that we need for an intuitionistic S4 category. We also want to derive the natural transformations m, n, and s from more basic transformations that work with 2j and 3j. For this, we introduce the two new concepts of ideal cartesian comonad (Definition 5.3) and Uj-strong ideal monad (Definition 5.5).
Definition 5.3 (Ideal cartesian comonad) Let C be a category with finite prod- ucts. A tuple (Uj, δj, mj, nj) is an ideal cartesian comonad on C if (Uj, δj) is an ideal comonad on C, and (Uj, mj, nj) is a cartesian endofunctor on C.
Lemma 5.4 If (Uj, δj, mj, nj) is an ideal cartesian comonad on a category C with ﬁnite products, then
(Id × Uj, π1, ⟨id, δjπ2⟩, ⟨π1 × π1, mj(π2 × π2)⟩, ⟨id1, nj⟩)
is a cartesian comonad on C.
Proof. (Id ×Uj, π1, ⟨id, δjπ2⟩) isa comonad on C according to Definition 5.1. Check- ing that (Id × Uj, ⟨π1 × π1, mj(π2 × π2)⟩, ⟨id1, nj⟩) is a cartesian endofunctor is straightforward.	2
Definition 5.5 (Uj-strong ideal monad) Let C be a distributive category, Uj = (Uj, δj, mj, nj) be an ideal cartesian comonad on C and U = (U, ε, δ, m, n) be the

cartesian comonad induced by Uj according to Lemma 5.4. A tuple (T j, μj, sj) is a 
Uj-strong ideal monad if the following conditions hold:
(T j, μj) is an ideal monad on C.
sj is a natural transformation with sj	: UjA × T jB → T j(UA × B).
If (T, η, μ) is the monad induced by (T j, μj) according to Definition 5.2, and the natural transformation s is defined by
sA,B  : UA × TB → T (UA × B)
sA,B := idUA×B + sj	(π2 × idT′B ) σUA,B,T′B  ,
then (T, η, μ, s) is a U -strong monad.
Definition 5.6 (Ideal intuitionistic S4 category) An ideal intuitionistic S4 category is a tuple (C, 2j, δj, mj, nj, 3j, μj, sj) where C is a BCCC, Uj = (2j, δj, mj, nj) is an ideal cartesian comonad on C, and (3j, μj, sj) is a Uj-strong ideal monad.
From Lemma 5.4 and Definition 5.5, it is immediately clear that every ideal intu- itionistic S4 category gives rise to an intuitionistic S4 category. Another important property is that fan categories give rise to ideal intuitionistic S4 categories. We define the ideal temporal functors of a fan category analogously to Definition 2.2 and obtain a fact similar to the one of Theorem 4.4.
Definition 5.7 (Ideal Temporal Functors of a Fan Category) Let CT be a fan category. The ideal temporal functors 2j and 3j of CT are defined such that for every morphism f and every t ∈ T , the following equations hold:
(2jf )(t)= Y f (tj)	(3jf )(t)= a f (tj)

Theorem 5.8 If CT is a fan category, and 2j and 3j are its ideal temporal functors, then there are natural transformations δj, mj, nj, μj, and sj such that (C, 2j, δj, mj, nj, 3j, μj, sj) is an ideal intuitionistic S4 category.
Proof. We define the natural transformations δj, mj, nj, μj, and sj by taking the definitions of δ, m, n, μ, and s from the proof of Theorem 4.4 and replacing ≥ by > wherever we now deal with 2j and 3j instead of 2 and 3. In the following, we show that these definitions lead in fact to an ideal intuitionistic S4 category.
We derive functors 2 and 3 and natural transformations ε, δ, m, n, η, μ, and s from 2j, 3j, δj, mj, nj, μj, and sj according to Lemma 5.4 and Definitions 5.2 and 5.5. The functors 2 and 3 are isomorphic to the temporal functors from Definition 2.2, and the natural transformations are the ones defined in the proof of Theorem 4.4 up to isomorphism. So they form an intuitionistic S4 category. This means that U = (2, ε, δ, m, n) is a cartesian comonad, and (3, η, μ, s) is a U -strong monad. As a result, Uj = (2j, δj, mj, nj) is an ideal cartesian comonad, and (3j, μj, sj) is a Uj-strong ideal monad. This proves the claim.	2

Linear Time
Fan categories are rather concrete. In this section, we develop a much more abstract notion of categorical model for temporal logic and FRP. Ideal intuitionistic S4 categories are a good starting point for this undertaking. Their problem is that they do not capture the notion of linear time. This is analog to Kripke models of classical logics, where S4 permits arbitrary preorders as Kripke frames, while linear-time temporal logics only permit total orders. In this section, we enrich ideal intuitionistic S4 categories with further structure that reflects the linearity of time. We call the resulting constructs temporal categories.
In order to see how we can encode linearity of time in our categorical models, let us first look at FRP. Linearity of time is ensured if there is a function race of type
3τ1 × 3τ2 → 3(τ1 × τ2 + τ1 × 3jτ2 + 3jτ1 × τ2) .
In the following, we will explain why this is the case.
Let e1 and e2 be events of types 3τ1 and 3τ2, and let t1, t2, and t be the times at which e1, e2, and race(e1, e2) fire. If race(e1, e2) contains a value of type τ1 × τ2, the components of this pair must come from e1 and e2, because the values that e1 and e2 carry are the only values of types τ1 and τ2 that are available to race. Since our FRP dialect generally does not allow us to shift values to different times, we have t = t1 = t2. If race(e1, e2) contains a value of type τ1 × 3jτ2 or 3jτ1 × τ2, we get a remainder event of a type 3jτi, which fires after t. Since it contains a value of type τi, it fires at ti. So the second and the third alternative correspond to the conditions t = t1 < t2 and t = t2 < t1, respectively. All in all, we now that one of the three alternatives t1 = t2, t1 < t2, and t1 > t2 holds, which ensures that time is linear. We furthermore know that race(e1, e2) fires at time min(t1, t2).
Let us now turn to category theory again. Say we have an ideal intuitionistic S4 category (C, 2j, δj, mj, nj, 3j, μj, sj), which induces an intuitionistic S4 category (C, 2, ε, δ, m, n, 3, η, μ, s). We define a binary operation ⊙ on objects as follows:
A ⊙ B := A × B + A × 3jB + 3jA × B

To give a meaning to race, we require that for any morphisms f : C → 3A and g : C → 3B, there is a morphism ⟨⟨f, g⟩⟩ : C → 3(A ⊙ B). We realize this by requiring that for any objects A and B, A⊙ B is a product of A and B in the Kleisli category of the monad (3, η, μ).
For a proper product structure, we also need projections, which we call a1 and a2 in order to not confuse them with the projections π1 and π2 of the original category C. The projections ai have the types C1 ⊙ C2 → Ci in the Kleisli category. So they have the types C1 ⊙ C2 → 3Ci in the original category, which are the same as
C1 × C2 + C1 × 3jC2 + 3jC1 × C2 → Ci + 3jCi .
The straightforward definition of the ai is ai := [ι1πi, ιiπi, ι1—iπi].

For ⊙, ⟨⟨·, ·⟩⟩, a1, and a2 to form a product, the following equations must hold in the Kleisli category for all suitable h1, h2, and h:
ai⟨⟨h1, h2⟩⟩ = hi	⟨⟨a1h, a2h⟩⟩ = h
This means that the following equations must hold in the original category C:
μ(3ai)⟨⟨h1, h2⟩⟩ = hi	⟨⟨μ(3a1)h, μ(3a2)h⟩⟩ = h
Looking at FRP, the first equation tells us that we can recover the events ei from a value race(e1, e2) using functions recoveri that correspond to the transformations μ(3ai). The second equation states that every value e from the codomain of race can be constructed by applying race to (recover1 e, recover2 e).
We now define temporal categories by extending ideal intuitionistic S4 categories as described above.
Definition 6.1 (Temporal category) Say M = (C, 2j, δj, mj, nj, 3j, μj, sj) is an ideal intuitionistic S4 category, and (C, 2, ε, δ, m, n, 3, η, μ, s) is the intuitionistic S4 category induced by it. For all objects A and B, let A ⊙ B be defined by
A ⊙ B := A × B + A × 3jB + 3jA × B ,
and for all objects C1 and C2 and all i ∈ {1, 2}, let ai be defined as follows:
ai : C1 ⊙ C2 → 3Ci
ai := [ι1πi, ιiπi, ι1—iπi]
M is a temporal category if each A ⊙ B is a product of A and B with projections
a1 and a2 in the Kleisli category of (3, η, μ).
Definition 4.2 enforces certain relationships between a strength transformation s and other natural transformations, which are depicted in Figures 1 and 2. The reader might wonder why we did not specify similar relationships between ⟨⟨·, ·⟩⟩ and the transformations μj and sj in Definition 6.1. We did not do so, since we strongly conjecture that any such coherence conditions that are sensible already follow from Definition 6.1 as it is. Making this claim precise and proving it is a possible goal for the future.
Our final result is that temporal categories are indeed a generalization of fan categories.
Theorem 6.2 If CT is a fan category, and 2j and 3j are its ideal temporal functors, then there are natural transformations δj, mj, nj, μj, and sj such that (C, 2j, δj, mj, nj, 3j, μj, sj) is a temporal category.
Proof. We construct the abovementioned natural transformations like we did in the proof of Theorem 5.8. So we know that (C, 2j, δj, mj, nj, 3j, μj, sj) is an ideal intuitionistic S4 category.

We now define the operation ⟨⟨·, ·⟩⟩. We first introduce a helper morphism θt for every time t:
θt :	a A(t1) × a B(t2) → a a(A(t1) × B(t2))

θt :=	σ⟨π2, π1⟩ σ⟨π2, π1⟩
t1≥t
We furthermore define transformations κt,t1,t2 for times t, t1, and t2 with t ≤ t1 and
t ≤ t2:


κt,t1,t2
: A(t1) × B(t2) →	(A ⊙ B)(tj)
t′≥t

⎧⎪⎨ιt1 ι1 
if t1 = t2

⎪ιt2 ι3 ιt1 × idB(t2)	if t1 > t2
Finally, we define ⟨⟨f, g⟩⟩ for any morphisms f : C → 3A and g : C → 3B as follows:
⟨⟨f, g⟩⟩(t) : C(t) →	(A ⊙ B)(tj)
t′≥t
⟨⟨f, g⟩⟩(t) := [{[{κt,t1,t2 }t2≥t]}t1≥t]θt⟨f (t), g(t)⟩
We leave it as an exercise to the reader to show that in the Kleisli category, ai⟨⟨h1, h2⟩⟩ = hi and ⟨⟨a1h, a2h⟩⟩ = h hold for all suitable h1, h2, and h. This then completes the proof.	2
Related Work
Jeffrey [5] presents an implementation of FRP in the dependently typed programming language Agda. Based on this, he develops a category RSet, which expresses the notion of time-dependent type inhabitance and is thus strongly related to our fan categories. Jeffrey also uses FRP analogs of advanced temporal operators to develop variants of RSet that enforce causality of FRP operations.
In Section 4, we discussed the relationships between our intuitionistic S4 categories and the categorical models by Kobayashi [8] and by Bierman and de Paiva [3]. Alechina et. al. [1] show how the latter are related to algebraic models and Kripke models. 3
Bellin et. al. [2] study an intuitionistic version IK of the basic modal logic K. They also define categorical models of IK. These models lack the comonadic and monadic structure that intuitionistic S4 categories possess, and use a tensorial
3 Note that there is a slight confusion in terminology. Kobayashi calls his S4 variant CS4, Bierman and de Paiva call theirs IS4, but Alechina et. al. use the name CS4 for the logic of Bierman and de Paiva.

strength transformation t with
tA,B : 2A × 3B → 3(A × B)
instead of the strength transformation s with
sA,B : 2A × 3B → 3(2A × B) .
In intuitionistic S4 categories, we can derive t from s by t := (3(εA × idB))s. As a result, every model of IK is also an intuitionistic S4 category. The lack of structure in IK models corresponds to a lack of axioms in logic. Classically, this lack of axioms corresponds to the fact that K corresponds to the class of all Kripke frames, while S4 corresponds to the class of Kripke frames where the accessibility relation is a preorder. 4
Krishnaswami and Benton [9] give an FRP semantics based on the category of 1-bounded ultrametric spaces, and Birkedal et. al [4] study the related category of presheaves over the natural numbers. Both approaches use a discrete notion of time, while our work is compatible with any totally ordered set of times. Studying the connections between our developments and the ones of Krishnaswami and Benton as well as the ones of Birkedal et. al. remains a task for the future.
8	Conclusions and Further Work
We have defined fan categories, which are categorical models of a subset of an intuitionistic LTL variant and a corresponding flavor of FRP. Fan categories directly express the notion of time-dependent trueness in LTL and the related notion of time-dependent type inhabitance of our FRP dialect. We have furthermore defined the more abstract notion of temporal category based on categorical models of intuitionistic S4 and shown that fan categories are a specialization of temporal categories.
In a future publication, we want to extend temporal categories such that they also cover other modalities of LTL and their FRP counterparts. Furthermore, we want to study how recursion can be integrated into categorical models of FRP. We also want to use concepts from temporal categories in the interface design and possibly the implementation of FRP systems. Furthermore, we are interested in combining temporal logic with other kinds of logic and studying the corresponding programming paradigms. Another task is to find out about relationships to other categorical FRP semantics, as discussed in Section 7.
Acknowledgement
I thank Tarmo Uustalu for the various discussions about the topics of this work. Furthermore, I thank Alan Jeffrey and the anonymous reviewers for giving me helpful

4 Note that the axiom 2ϕ → ϕ ensures reflexivity, and the axiom 2ϕ → 22ϕ ensures transitivity. Analogously, ϕ → ϕ ensures reflexivity, and  ϕ → ϕ ensures transitivity.

feedback on earlier versions of this paper.

References
	Alechina, N., M. Mendler, V. de Paiva and E. Ritter, Categorical and Kripke semantics for constructive S4 modal logic, in: L. Fribourg, editor, Computer Science Logic, Lecture Notes in Computer Science 2142, Springer, Berlin/Heidelberg, Germany, 2001 pp. 292–307.
Bellin, G., V. de Paiva and E. Ritter, Extended Curry–Howard correspondence for a basic constructive modal logic, in: Proceedings of the 2nd Workshop on Methods for Modalities (M4M-2), 2001.
Bierman, G. and V. de Paiva, On an intuitionistic modal logic, Studia Logica 65 (2000), pp. 383–416.
Birkedal, L., R. E. Møgelberg, J. Schwinghammer and K. Støvring, First steps in synthetic guarded domain theory: Step-indexing in the topos of trees, in: Proceedings of the 26th Annual IEEE Symposium on Logic in Computer Science (LICS ’11) (2011), pp. 55–64.
	Jeffrey, A., LTL types FRP: Linear-time temporal logic propositions as types, proofs as functional reactive programs, in: Proceedings of the Sixth Workshop on Programming Languages Meets Program Verification (PLPV ’12) (2012), pp. 49–60.
Jeltsch, W., The Curry–Howard correspondence between temporal logic and functional reactive programming (2011), slides of a talk given at the Estonian Computer Science Theory Days at Nelija¨rve.
URL  http://www.cs.ut.ee/~varmo/tday-nelijarve/ettekanded.html
	Jeltsch, W., Programming in linear temporal logic (2011), slides of a talk given at the Computer Science Theory Seminar of the TTU¨ Ku¨berneetika Instituut.
URL http://cs.ioc.ee/~tarmo/tsem10/jeltsch.html
Kobayashi, S., Monad as modality, Theoretical Computer Science 175 (1997), pp. 29–74.
	Krishnaswami, N. R. and N. Benton, Ultrametric semantics of reactive programs, in: Proceedings of the 26th Annual IEEE Symposium on Logic in Computer Science (LICS ’11) (2011), pp. 257–266.
