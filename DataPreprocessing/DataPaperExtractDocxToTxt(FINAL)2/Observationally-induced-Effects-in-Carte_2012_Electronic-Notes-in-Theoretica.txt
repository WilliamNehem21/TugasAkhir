Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 286 (2012) 43–56
www.elsevier.com/locate/entcs

Observationally-induced Effects in Cartesian Closed Categories
Ingo Battenfeld1
Fakulta¨t fu¨r Informatik TU Dortmund Dortmund, Germany

Abstract
Alex Simpson has suggested an observationally-induced approach towards obtaining monads for computa- tional effects in denotational semantics. The underlying idea of this approach is to use a single observation algebra as computational prototype and to obtain a computational monad as a free algebra construction derived from this prototype. Recently, it has been shown that free observationally-induced algebras ex- ist in the category of continuous maps between topological spaces for arbitrary pre-chosen computational prototypes.
In this work we transfer these results to cartesian closed categories. In particular, we show that, provided the category under consideration satisfies suitable completeness conditions, it supports a free observationally- induced algebra construction for arbitrary computational prototypes. We also show that the free algebras are obtained as certain subobjects of double exponentials involving the computational prototype as result type. Finally, we apply these results to show that in topological domain theory an observationally-induced lower powerspace construction over a QCB-space X is given by the space of nonempty closed subsets of X topologised suitably.
Keywords: denotational semantics, computational effects, powerdomains, topological domain theory


Introduction
Computational effects occur whenever a computer program interacts with its physi- cal environment. The most common examples for computational effects are interac- tive user in- and output, reading from and writing to memory cells, nondeterministic and probabilistic features of the underlying system. Thus, when giving a denota- tional semantics to a programming language, no matter how tight this language follows an abstract calculus, one has to provide means for modelling computational effects. The first general denotational treatment of computational effects has been proposed by Moggi in the form of computational monads [9], which had significant impact on the subsequent design of functional programming languages, perhaps

1 Email: ingo.battenfeld@tu-dortmund.de

1571-0661 © 2012 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2012.08.004

most prominently in Haskell. This work has since been refined by Plotkin and Power’s proposal to obtain computational monads as free algebra constructions for suitable algebraic theories [10]. The principal idea of this approach is that com- putational effects are triggered by algebraic operations, which therefore have to be modelled on the corresponding datatypes.
In recent years, Alex Simpson has furthermore refined the Plotkin and Power approach by suggesting to derive a computational monad from the algebraic proper- ties of a single observation algebra instead of using a free algebra construction for a general equational algebraic theory [12]. The observation algebra that induces this construction can be thought of as computational prototype, giving rise to compu- tational observations. Therefore, one may call this construction an observationally- induced approach to computational effects. Simpson and Schr¨oder have used the observationally-induced approach to recover a probabilistic powerspace construction as space of probability valuations in Top, the category of continuous maps between topological spaces [12,13]. In recent work, Schr¨oder and the author have shown that in Top, free observationally-induced algebras exist for arbitrary pre-chosen compu- tational prototypes, and how to derive and characterise lower and upper powerspace constructions [2].
In the work at hand we investigate free observationally-induced algebra con- structions in cartesian closed categories. Cartesian closure is essential when it comes to model function types in denotational semantics. Hence this work aims at answering some naturally arising questions concerning existence and characteri- sation of observationally-induced effect types in such frameworks. It turns out that under suitable completeness requirements on the category under investigation, free observationally-induced algebras exist for arbitrary computational prototypes. A particularly interesting result is that the free algebras are obtained as subobjects of a double exponential, reminiscent of continuation types where the result type of the continuation is the respective computational prototype. Furthermore, we show that under this construction one obtains a lower powerspace construction in the category QCB, of continuous maps between quotients of countably-based spaces, which is one of the central categories in topological domain theory [3]. This observationally- induced lower powerspace over a QCB-space X is given by the set of nonempty closed subsets of X topologised suitably. This shows that in topological domain theory one can recover a classical intrinsic lower powerspace construction via free observationally-induced algebras, which is known not to be the case for the upper or probabilistic powerspaces.
The paper is organised as follows. In section 2, we recall the basic definitions of free observationally-induced algebras. In section 3, we show that under suit- able completeness conditions free observationally-induced algebras exist in carte- sian closed categories for arbitrary pre-chosen computational prototypes. Section 4 applies these results to investigate a lower powerspace construction in topological domain theory. The paper is concluded in section 5.

Observationally-induced algebras
Throughout the paper, we assume Σ to be an algebraic signature, i.e. a set of operation symbols {σ ∈ Σ} each of which has an arity |σ| ∈ N. Then in any category C with finite products we can apply the usual definition of Σ-algebras and Σ-homomorphisms and get a corresponding category CΣ. This holds in particular for cartesian closed categories and for the purpose of this paper we assume all our categories to be such.
Remark 2.1 For simplicity we assume the arity of an operation to be a natural number, i.e. we consider ﬁnitary signatures. However, the results below can easily be adjusted to more general settings, such as arities given by cardinals up to some ﬁxed κ, objects of the ambient category or parameterised operations as in [1] (which correspond to operations with co-arities). The important point is that a category of Σ-algebras in C has to be well-deﬁned.
In section 4.6 of [1], it has been shown that:

Lemma 2.2 If (A, {σA}) is a CΣ-algebra and X any object of C, then there ex- ists a canonical Σ-algebra structure on the exponential AX, giving the CΣ-algebra (AX, {σAX }).
Proof. The operations σAX are given by σX ◦ ι|σ| where ι|σ| : (A|σ|)X ∼= (AX )|σ| is the canonical isomorphism.	2

This allows us to define the notion of left and right homomorphisms.

Definition 2.3 Suppose (A, {σA}) and (B, {σB}) are CΣ-algebras and Z is any object of C. Then a right Σ-homomorphism is a map h : Z × A → B for which the exponential transpose h : (A, {σA}) → (BZ, {σBZ }) is a Σ-homomorphism. We usually write h : Z × (A, {σA}) → (B, {σB}) for such a right Σ-homomorphism.

Notice that for every canonical exponential algebra (AX, {σAX }), the evaluation map eval : X × (AX, {σAX }) → (A, {σA}) becomes a right homomorphism, since it is the exponential transpose of the identity map AX → AX .
Following Schr¨oder and Simpson [12], we define observationally-induced algebras in a parameterised setting.

Definition 2.4 Suppose (O, {σO}) isa fixed CΣ-algebra, serving as computational prototype (or observational prototype).
An abstract (O, {σO})-structure over an object X is a tuple (A, {σA}, η) where (A, {σA}) is a CΣ-algebra and η : X → A a C-morphism such that for every C-object Z, every C-morphism f : Z × X → O extends to a unique right Σ-



homomorphism f : Z × (A, {σA}) → (O, {σO}) along Z × η, as in:

Z ×,A,_ _f_ _/ O¸,
cccc

Z×η
cccc

ccc f
c
Z × X
A complete (O, {σO})-algebra is a CΣ-algebra (B, {σB}) such that for every C-object X and every abstract (O, {σO})-structure (A, {σA}, η) over X, ev- ery morphism f : Z × X → B extends to a unique right Σ-homomorphism f : Z × (A, {σA}) → (B, {σB}) along Z × η, as in:

Z ×,A,_ _f_ _/ B¸,
cccc

Z×η
cccc

ccc f
c
Z × X
The category of complete (O, {σO})-algebras and Σ-homomorphisms between them is denoted by C(O,{σO}).
Provided it exists, the free complete (O, {σO})-algebra over an object X is called the free observationally-induced (O, {σO})-algebra over X. It is uniquely deter- mined (up to isomorphism) and given by a complete (O, {σO})-algebra (A, {σA}) such that there exists a map η : X → A making (A, {σA}, η) an abstract (O, {σO})-structure (A, {σA}, η) over X.
It should be mentioned that this definition is strongly influenced by the work of Hyland [7] and Taylor [14].
To motivate the use of observationally-induced algebras for modelling effect types consider the following. According to Plotkin and Power [10] most computa- tional effects are algebraic, i.e. triggered by algebraic operations. These operations define a signature Σ and, in principle, every Σ-algebra is a potential denotation of an effect type. However, as pointed out by Plotkin and Power, some coherence conditions are needed in order to define a well-behaved effect type. In op. cit. they formulate these coherence conditions in form of algebraic equations, e.g. expressing that a binary nondeterministic choice operation should be commutative, associative and idempotent. Thus, they propose effect types to be modelled by algebras for the corresponding equational theory. The observationally-induced approach differs in the respect that the coherence conditions are completely determined by the proper- ties of the observational prototype. Indeed, the following results show that it suffices that complete (O, {σO})-algebras behave like the prototype (O, {σO}) with respect to abstract (O, {σO})-structures, in order to inherit many properties of the proto- type, including but not limited to equational laws. Therefore, one might consider the observationally-induced approach towards modelling computational effects as a

refinement of the work of Plotkin and Power.
Let us start by observing the important fact that complete (O, {σO})-algebras are closed under exponentiation and taking limits in C.
Lemma 2.5 If (B, {σB}) is a complete (O, {σO})-algebra, then for every C-object
Y , the canonical CΣ-algebra (BY , {σBY }) is a complete (O, {σO})-algebra, as well.
Proof. Suppose (A, {σA}, η) is an abstract (O, {σO})-structure over X, and f : Z × X → AY a C-morphism. The exponential transpose yields a morphism Y × Z × X → A which has a unique right Σ-homomorphism extension Y × Z × (A, {σA}) → (B, {σB}) whose exponential transpose is the required unique right Σ-homomorphism extension f : Z × (A, {σA}) → (BY , {σBY }).	2
Lemma 2.6 The forgetful functor C(O,{σO}) → C creates limits.
Proof. It is well-known that the forgetful functor CΣ → C creates limits. Essen- tially the argument is that whenever D is a diagram consisting of CΣ-algebras and Σ-homomorphisms for which a limit exists in C, then for any σ ∈ Σ, the diagram D|σ| also has a limit in C, namely Lim(D)|σ|. Moreover, for every σ ∈ Σ the uni- versal property of a limit yields a C-morphism Lim(D)|σ| ∼= Lim(D|σ|) → Lim(D) which gives the required operation σLim(D).
If (A, {σA}, η) is an abstract (O, {σO})-structure over X, every C-morphism f : Z × X → Lim(D) induces a family of morphisms Z × X → D which have unique right homomorphism extensions Z × (A, {σA}) → D. Again by the universal property of a limit, these induce a unique right homomorphism f : Z × (A, {σA}) → Lim(D) extending f along η, as required.	2
With these observations in hand, we can show that complete (O, {σO})-algebras satisfy all Σ-equations which hold in (O, {σO}), provided the category under con- sideration supports a free algebra construction for equational theories.
Let us recall that a Σ-equation e is given by a pair of Σ-terms (t, tj) of the same

arity, say |e|. These Σ-terms give rise to families of maps t(—), tj
: (−)|e| → (−)

indexed by CΣ-algebras which commute with Σ-homomorphisms. A CΣ-algebra

(A, {σA}) is said to satisfy the equation if tA = tj
as maps in C.

Lemma 2.7 Let E be a set of Σ-equations and assume that (O, {σO}) satisﬁes all equations in E and that C supports a free (Σ, E )-algebra construction. Then every complete (O, {σO})-algebra (A, {σA}) satisﬁes the equations in E.
Proof. Let (A, {σA}) be a complete (O, {σO})-algebra, and (FA, {σFA}) be the free (Σ, E )-algebra over A with free algebra inclusion η. Furthermore, let e := (t, tj) be an equation in E with arity |e|. Since (O, {σO}) satisfies all equations in E , we get that (FA, {σFA}, η) is an abstract (O, {σO})-structure over A. Moreover, the previous lemmas prove that this also holds for the corresponding |e|-powers, and that (A|e|, {σA|e| }) is a complete (O, {σO})-algebra.

Hence, we obtain the following commutative diagram:

FA	id	/A¸
,,	,,


tFA	′
FA 

′
tA	A



F A|e| _ _ _id_|e|_ _ _/A¸|e|




η|e|
,,	ccccccc
cccccc
ccccccc id|e|

A|e|
cccccc

Thus, the equality of tFA and tj	implies the equality of tA and tj , and so (A, {σA})
satisfies the equation e.	2
Finally we observe that complete (O, {σO})-algebras deserve the term complete by showing that their underlying C-objects belong to any full reflective subcategory to which O belongs, again provided that C supports a free algebra construction.
Lemma 2.8 Suppose C supports a free Σ-algebra construction. Let D be a full reflective subcategory of C, for which the reflection functor R : C → D preserves (ﬁnite) products. If O is an object of D, then so is the underlying space A of every complete (O, {σO})-algebra (A, {σA}).
Proof. Let F denote the free Σ-algebra functor. In [1, Chapter 5] it is shown that a product-preserving reflection functor lifts to the categories of algebras and that F ◦ R ∼= R ◦ F . This can be used to show that for an arbitrary C-object X, we obtain an abstract (O, {σO})-structure (FRX, {σF RX}, β) over X, where β is the composition of the units of the reflection and the free Σ-algebra construction. In particular this yields a one-to-one correspondence between maps X → A and RX → A along the unit of the reflection. Instantiating X with A yields the required result.	2
These results show our claim that the category C(O,{σO}) of complete (O, {σO})- algebras inherits many desired properties from the computational prototype. Hence, a free observationally-induced algebra construction can indeed be considered as a refinement of Plotkin and Power’s algebraic approach to computational effects.
3	Existence and characterisation in cartesian closed cat- egories
In this section we show that under fairly mild conditions on the ambient carte- sian closed category C, free observationally-induced algebras exist for arbitrary computational prototypes, and that they can be obtained as subobjects of certain double-exponentials.
Let us again assume the computational prototype (O, {σO}) to be given. The mild conditions on C we impose are the following two requirements.

Requirement 1 The category C supports a free Σ-algebra construction, i.e. the forgetful functor CΣ → C has a left adjoint.
Observe that by Lemma 2.2, the free Σ-algebras are automatically parametrically free, i.e. for every CΣ-algebra (A, {σA}) and every morphism f : Z × X → A there exists a unique right Σ-homomorphism extension f : Z × (FX, {σFX}) → (A, {σA}) along the free algebra unit X → FX.
Requirement 2 The category C has equalizers, inﬁma of regular subobjects, i.e. every family {mi : Xi → Y } of regular monos with the same codomain has a limit in C, and regular monos are closed under composition.
These two requirements are closely related to completeness of the category C. Indeed, Requirement 2 holds in every complete category and completeness can be of great help when applying the Adjoint Functor Theorem to establish Requirement 1. However, in the next section we apply our results in QCB, the central category of topological domain theory, and QCB does satisfy Requirements 1 and 2 although it fails to be complete in general.
As mentioned in the introduction, the double-exponential of which the free observationally-induced algebra is carved out is a continuation-like type with the computational prototype as result type. For a given object X it is the object OOX , which by Lemma 2.5 carries a canonical Σ-algebra structure making it a complete (O, {σO})-algebra. We make the following straightforward observation.
Proposition 3.1 For every C-object X, let γ : X → OOX denote the map given by λx.λt.tx, i.e. the exponential transpose of the evaluation map X × OX → O. Then every morphism f : Z × X → O has a (not necessarily unique) right Σ-

homomorphism extension f : Z × (OOX , {σ
}) → (O, {σO
}) along γX.



Proof. Consider the exponential transpose required map to be the composite:
f^ : Z → OX of f , and define the



Z × OOX
^	OX
/O¸X × OO
eval	/O¸

In λ-terms this map is given by λz.λg.g(f z). It is a routine verification via manip- ulations of λ-terms to show that this map is a right Σ-homomorphism and that it extends f along γX .	2
Since (OOX , {σ	}) is a complete (O, {σ })-algebra, the map γ	: X →
OOX	O	X
OOX  from the proposition above has a unique homomorphism extension γ	:
(FX, {σ	}) → (OOX , {σ	}), where the domain is the free Σ-algebra over X.
OOX
Definition 3.2 For a CΣ-algebra (B, {σB}) we define a Σ-subalgebra to be a CΣ- algebra (A, {σA}) for which there exists a regular mono A → B in C which becomes a Σ-homomorphism on the corresponding algebra structures.
If (A, {σA}) is a Σ-subalgebra of (B, {σB}) and both are complete (O, {σO})- algebras, we call (A, {σA}) a complete (O, {σO})-subalgebra of (B, {σB}).

Under Requirement 2, Lemma 2.6 shows that C(O,{σO}) has infima of complete (O, {σO})-subalgebras. In particular this yields that (up to isomorphism) there ex-
X
ists a smallest complete (O, {σO})-subalgebra (A, {σA}) of (OO  , {σ	X }) through
OO
X
which γX : (FX, {σ	}) → (OO , {σ	X }) factors via homomorphisms as in:
OO

A ,,/¸ /O¸OX
ccc ,
cccc
ccc γX
cc
FX 
We show that this yields the free complete (O, {σO})-algebra over X.
Theorem 3.3 For every C-object X, the free complete (O, {σO})-algebra over X
exists and is given by the smallest complete (O, {σO})-subalgebra (A, {σA}) of

(OOX , {σ
OOX
}) through which γX
factors.

Proof. Clearly, (A, {σA}) isa complete (O, {σO})-algebra. Thus it suffices to show that one can obtain it as part of an abstract (O, {σO})-structure (A, {σA}, η) over X.
The morphism η : X → A is given by the free algebra inclusion X → FX followed by the mediating morphism of the factorization of γX . Now suppose f : Z × X → O is a C-morphism. We obtain the following diagram which consists of right Σ-homomorphisms where appropriate and commutes in all possible directions:
 Z,× A /¸	/Z¸× OOX

,,	 
ccc 




Z×η
Z×γXccccc
cccccc
λz.λg.g(f^z)
J 

Z ×,F ,X	/ O,¸
ccccc
ccccc
ccc f
cc
Z × X
Thus we get a right Σ-homomorphism extension of f along Z × η. It remains to show that this extension is unique.
Assume that h, hj : Z × (A, {σA}) → (O, {σO}) are right Σ-homomorphism ex- tensions of f along Z ×η. Consider their exponential transposes h, hj : (A, {σA}) → (OZ, {σOZ }) and the corresponding equalizer e : Aj → A which, by Lemma 2.6, carries a complete (O, {σO})-algebra structure. Thus, it is a complete (O, {σO})-
subalgebra of (OOX , {σ	}) through which γ	factors. Since (A, {σ }) was the
OOX	X	A
smallest such subalgebra, it follows that e must be an isomorphism, hence h = hj.2
Obviously, this construction yields a left adjoint to the forgetful functor C(O,{σO}) → C, hence it induces a monad on C. Using the argument of Lemma 4.5.7 in [1], one can show that this monad is strong.

Corollary 3.4 The free complete (O, {σO})-algebra construction induces a strong monad on the underlying cartesian closed category C.
Thus, given a cartesian closed category C and an observational prototype (O, {σO}), C supports a free complete (O, {σO})-algebra construction whenever it satisfies Re- quirements 1 and 2. More specifically, in that case the free complete (O, {σO})- algebra over X is given by a subobject (or subalgebra) of OOX . This result is not limited to ordinary finitary algebraic signatures, but applies to signatures with in- finitary operations, parameterised operations as in [1] or operations whose arity is given by an object of the ambient category. Of course, care has to be taken with respect to Requirement 1.
The lower powerspace construction in QCB
In this section we investigate an observationally-induced lower powerspace con- struction in the category QCB of continuous maps between topological quotients of countably-based topological spaces. This category lies at the core of topological domain theory [3], an extension of classical domain theory with excellent closure properties. The results in [1] show that QCB satisfies Requirements 1 and 2, provided that the signature Σ consists of operations with finite or countable arity which are allowed to be parameterised. For the paper at hand it suffices to consider ordinary finitary operations.
Corollary 4.1 Let Σ be a signature consisting of ﬁnitary operations and (O, {σO}) be a QCBΣ-algebra. Then the forgetful functor QCB(O,{σO}) → QCB has a left adjoint giving a free observationally-induced (O, {σO})-algebra construction. More- over, for a given QCB-space X, the free (O, {σO})-algebra over X is given by a
subalgebra of the canonical (OOX , {σ	}).
OOX
In [4] it has been shown that QCB supports a free observationally-induced probabilistic powerspace construction by taking (I, ⊕) as observational prototype, where I is the unit interval equipped with the Scott-topology for the usual ordering and ⊕ the average sum operation. The proof in op.cit. differs from the method in the previous section, in that it uses an Adjoint Functor Theorem applied internally inside a realizability topos into which QCB embeds. Results from [12] could be used to show that for countably-based spaces X, the free observationally-induced probabilistic powerspace over X in QCB is given by a space whose underlying set consists precisely of the probability valuations of X, resembling the classical domain-theoretic construction. However, an example of Gruenhage and Streicher
[6] was used to show that this classical intrinsic construction cannot be recovered by the observationally-induced approach on all QCB-spaces. The same example can easily be adapted to show that the classical intrinsic upper powerspace construction, which for a topological space X is given by a space whose underlying set consists precisely of the (proper) Scott-open filters of the topology of X, cannot be recovered in QCB as an observationally-induced free algebra construction. In fact, neither can the intrinsic upper powerspace construction be recovered via observationally-

induced algebras in the category of continuous maps between topological spaces, as an example in [2] shows. In contrast to these results we show that there is a free observationally-induced algebra construction which for all QCB-spaces X yields a space whose underlying set is given precisely by the nonempty closed subsets of X, hence resembles the classical intrinsic lower powerdomain construction.
As in [2], the observational prototype for the observationally-induced lower pow- erspace construction in QCB is given by (S, ∨), the Sierpinski space S with a binary operation (representing a nondeterministic choice) given by join. The results of the previous section show that we obtain the observationally-induced lower powerspace
over a QCB-space X as a complete (S, ∨)-subalgebra of (SSX , ∨	). In the follow-
SSX
ing we identify the elements of SSX with collections of open subsets of X (which are Scott-open with respect to the inclusion order). It is then an easy observation that the canonical ∨SSX is precisely given by set-union ∪ on these collections.
Observe that the nonempty closed subsets of X embed into SSX by the mapping:
B '→ B˘ := {U ∈ SX| U ∩ B /= ∅}.

We equip the nonempty closed subsets of X with the sequential (or equivalently

compactly-generated) subspace topology for this embedding
(−˘ ) and obtain the

space C(X). Notice that (−˘ ) preserves all unions/joins although in general it fails
to preserve intersections/meets. Let us identify the image of (−˘ ) in SSX .
Lemma 4.2 An element T ∈ SSX is in the image of (−˘ ): C(X) → SSX if and only if it satisﬁes the following two conditions:
X ∈T ,
if U ∪ V ∈T , then U ∈T or V ∈T .
Proof. It is a straightforward observation that for all B ∈ C(X), B˘ satisfies (i) and (ii).
Conversely suppose T satisfies (i) and (ii). Then it is easy to see that


BT := X \   {V ∈ SX| V

∈/ T }

is a nonempty closed subset of X such that T ≡ B˘T .	2
Next, observe that for every U ∈ SX the corresponding evaluation map evalU :
SSX  → S, given by eval (T ) =	if and only if U ∈ T , is a continuous ∨-
homomorphism. This observation is a key to the next result which shows that
(C(X), ∪) forms a complete (S, ∨)-algebra.
Proposition 4.3 For every QCB-space X, (C(X), ∪) is a complete (S, ∨)-algebra.
Proof. Suppose (A, ⊕, η) is an abstract (S, ∨)-structure over Y and f : Z × Y →

C(X) a continuous map. We obtain the following commuting diagram:




,
Z ×,A,

Z×η
h≡(—˘ )◦f
, , ,	¸ ¸ ¸ ¸
(—˘ )
C(X)
  ,
     

z 
/S ¸

     
Z × Y
where h is the unique right homomorphism extension of (−˘ ) ◦ f obtained from the

fact that (SSX , ∨

SSX
) isa complete (S, ∨)-algebra by Lemma 2.5. It suffices to show

that the elements in the image of h satisfy conditions (i) and (ii) of Lemma 4.2.
For (i) observe that X ∈ f (z˘, y) for all (z, y) ∈ Z × Y , hence by the unique extension property we must have X ∈ h(z, a) for all (z, a) ∈ Z × A. This is the case, because the map evalX ◦ h is a continuous right homomorphism extension of

the constant map
: Z × X → S along Z × η. Thus, if there exists (z0, a0) ∈ Z × A

with X
∈/ h(z0, a0), then
: Z × X → S had at least two right homomorphism

extensions along Z × η.
For (ii) assume U ∪ V ∈ h(z0, a0). This yields that evalU∪V ◦ h(z0, a0) =	.
Moreover, we have that evalU∪V ◦ (−˘ ) ◦ f ≡ (evalU ◦ (−˘ ) ◦ f ) ∨ (evalV ◦ (−˘ ) ◦ f ),
since every f (z˘, y) satisfies (ii). Thus these two maps have the same continuous
right homomorphism extension along Z × η. But ∨ composes continuous right homomorphisms, hence we get that:
(evalU ◦ h)(z0, a0) ∨ (evalV ◦ h)(z0, a0)= (evalU∪V ◦ h)(z0, a0)=	,
and thus it holds that U ∈ h(z0, a0) or V ∈ h(z0, a0), as required.	2
Notice that in particular it follows from this proof, that the observationally- induced lower powerspace over a QCB-space X is a complete (S, ∨)-subalgebra of (C(X), ∪), for the following reason. Consider the diagram:

F X,,_ _γX_ _/SS¸X
cc
η	cccc
ccc γX
ccc
X
where γX is the canonical embedding, FX denotes the underlying space of the absolutely-free Σ-algebra over X (for a signature Σ consisting of a binary operation symbol) with the free algebra inclusion map ηX and γX is the unique homomorphism extension of γX along ηX . Then, since (FX, , ηX ) is an abstract (S, ∨)-structure over X, the argument of the proof above shows that it factors via homomorphisms
through (−˘ ): C(X) → SSX . Of course, Theorem 3.3 applies.

We want to show that there exists no proper complete (S, ∨)-subalgebra of (C(X), ∪) through which this inclusion factors.
Proposition 4.4 The only complete (S, ∨)-subalgebra of (C(X), ∪) that contains

the image of γX
: FX → SSX  is (C(X), ∪) itself.

Proof. By Theorem 2.8 we know that the underlying set of any complete (S, ∨)- subalgebra of (C(X), ∪) belongs to any full reflective subcategory that S belongs to. In particular, that means it must be a monotone convergence space, i.e. under the specialization order it forms a dcpo.
Moreover, the image of γ  : FX → SSX in C(X) consists exactly of the closures of nonempty finite subsets of C(X). Notice that every closed set can be obtained as a directed supremum of the closures of finite subsets it contains. Suppose we find a complete (S, ∨)-subalgebra of (C(X), ∪) that contains all closures of nonempty finite subsets of X. We denote it by (A, ∪). Since the embedding j : (A, ∪) ‹→ (C(X), ∪) must be a continuous homomorphism, it must preserve directed (continuous) and binary (homomorphism) joins. Thus, it preserves all joins and we get:

j( 
F⊆finB
cl(F )) =	 
F⊆finB
j(cl(F )) = B.

where cl(F ) denotes the closure of the finite subset F , the first join is taken in A, the second join is taken in C(X).
As mentioned, every nonempty closed subset can be obtained in this way. Hence,
j is surjective and the claim follows.	2

Of course the corresponding abstract (S, ∨)-structure (C(X), ∪, (−)) is obtained from the point closure map (−): X → C(X).
Theorem 4.5 The observationally-induced lower powerspace over a QCB-space X
is given by (C(X), ∪).
In Section 4.4.2 of [11], Schr¨oder has shown that on C(X), the subspace topology of SSX coincides with the sequentialisation of the lower Vietoris topology, which is generated by sets of the form:
⟨U⟩ := {B ∈ C(X)| B ∩ U /= ∅},
for U ranging over the open subsets of X. This relates the observationally-induced lower powerspace construction in QCB to the one in the category of continuous maps between topological spaces given in [2]. There it was shown that for every topological space X, the free complete (S, ∨)-algebra over X is given by the set of nonempty closed subsets of X under the lower Vietoris topology with set-union as operation. We do not know whether there exists a QCB-space X for which the lower Vietoris topology on the nonempty closed subsets is not sequential. Also Schr¨oder’s work does not give any insights for this question.
On the other hand, we also do not know exactly for which QCB-spaces the topology on C(X) coincides with the Scott-topology for the inclusion order. Despite

the fact that as a complete lattice C(X) has a rich structure and the embedding into SSX , which carries the Scott-topology, preserves all suprema, we can do no better than concluding that our construction at least coincides with the classical domain-theoretic construction for continuous dcpos.
Corollary 4.6 For a countably-based continuous dcpo X the observationally-induced lower powerspace (C(X), ∪) in QCB carries the Scott-topology.
Conclusions
We have shown that free observationally-induced algebras exist in cartesian closed categories for arbitrary computational prototypes, provided the category under consideration satisfies certain closure requirements. Moreover, in this case free observationally-induced algebras can be characterised as subalgebras of a double exponential corresponding to a type of continuations with the prototype as result type. The closure requirements we have identified are that the category needs to have infima of regular subobjects and support an ordinary free algebra construction for the signature defining the algebra structure of the prototype. These requirements are fairly mild and satisfied in most complete categories, such as the categories of monotone maps between preordered sets, continuous maps between compactly gen- erated spaces, or QCB, the central category in topological domain theory. Thus, the observationally-induced approach to modelling computational effects extends the toolbox of denotational semantics for functional programming languages nicely. Unfortunately, the requirements are not satisfied in any cartesian closed category of continuous or algebraic dcpos, since these categories do not have infima of regular subobjects in general. Hence, this work does not give any insights into the well- known problem of modelling computational effects in cartesian closed categories of domains. On the other hand, our results can be applied in the category of Scott- continuous maps between general dcpos by embedding them appropriately into one of the mentioned categories.
Furthermore, we have shown that in QCB one has an observationally-induced lower powerspace construction which for a QCB-space X is characterised as the space of nonempty closed subsets of X equipped with the subspace topology of the double exponential SSX which itself carries the Scott-topology. This confirms the well-behavedness of the lower powerspace construction in contrast to the upper pow- erspace construction, for which the observationally-induced approach does not have such a neat characterisation as the counterexample in [2] shows. Also Gruenhage and Streicher’s counterexample [6] is easily seen to adapt to the upper powerspace construction.
The characterisation of free observationally-induced algebras as subobjects of double exponentials is a very interesting result. Although one finds hints at it in the literature [5,8], it appears that the work at hand gives the most concrete account of this connection between algebraic effects and continuation types. However, deeper investigations are necessary for determining the benefits of this characterisation of observationally-induced algebras.

The construction of observationally-induced powerspaces as subobjects of dou- ble exponentials of Sierpinski space also bears resemblance to the work of Vickers and Townsend [15] on powerlocales. They show that lower and upper powerlocale constructions are both obtained as subobjects of a double exponential of Sierpin- ski space, and moreover their composition commutes and yields the full double exponential. It should be investigated under which conditions free observationally- induced algebra constructions commute and in how far it is possible to obtain full double exponentials with the observationally-induced approach. It should be men- tioned that the category of locales is not cartesian closed, hence it is not covered by the present paper. However, certain exponentials do exist in locales and there are certainly strong connections to the work on free observationally-induced algebras over topological spaces [2], which should be investigated further.
Acknowledgement
The author wishes to thank Ernst-Erich Doberkat, Matthias Schroder, Alex Simpson and Thomas Streicher for helpful discussions and encouragement.
References
Ingo Battenfeld. Topological Domain Theory. PhD thesis, LFCS, University of Edinburgh, 2008.
Ingo Battenfeld and Matthias Schr¨oder. Observationally-induced effect monads: Upper and lower powerspace constructions. Proc. of MFPS 27, 2011.
Ingo Battenfeld, Matthias Schr¨oder, and Alex Simpson. A convenient category of domains. Electr. Notes Theor. Comput. Sci., 172:69–100, 2007.
Ingo Battenfeld and Alex Simpson. Two probabilistic powerdomains in topological domain theory. Manuscript, available at: http://homepages.inf.ed.ac.uk/als/Research/topological-domain-theory.html, 2006.
Andrzej Filinski. Controlling Effects. PhD thesis, Controlling Effects, Carnegie Mellon University, 1996.
Gary Gruenhage and Thomas Streicher. Quotients of countably based spaces are not closed under sobrification. Math. Struct. in Comp. Science, 16(2):223–229–161, 2006.
Martin Hyland. First steps in synthetic domain theory. Category Theory, Proc. Como 1990, pages 131–156, 1991.
Martin Hyland, Paul Blain Levy, Gordon D. Plotkin, and John Power. Combining algebraic effects with continuations. Theor. Comput. Sci., 375(1-3):20–40, 2007.
Eugenio Moggi. Notions of computation and monads. Inf. Comput., 93(1):55–92, 1991.
Gordon D. Plotkin and John Power. Computational effects and operations: An overview. Electr. Notes Theor. Comput. Sci., 73:149–163, 2004.
Matthias Schroder. Admissible Representations for Continuous Computations. PhD thesis, Fachbereich Informatik, FernUniversit¨at Hagen, 2002.
Matthias Schroder and Alex Simpson. Probabilistic observations and valuations: (extended abstract).
Electr. Notes Theor. Comput. Sci., 155:605–615, 2006.
Alex Simpson. Spaces of valuations revisited. Talk given at: New Interactions Between Analysis, Topology and Computation, 2009. Slides: http://homepages.inf.ed.ac.uk/als/.
Paul Taylor. The fixed point property in synthetic domain theory. In Proceedings, Sixth Annual IEEE Symposium on Logic in Computer Science, 15-18 July, 1991, Amsterdam, The Netherlands, pages 152–160. IEEE Computer Society, 1991.
Steven J. Vickers and Christopher F. Townsend. A universal characterization of the double powerlocale.
Theor. Comput. Sci., 316(1):297–321, 2004.
