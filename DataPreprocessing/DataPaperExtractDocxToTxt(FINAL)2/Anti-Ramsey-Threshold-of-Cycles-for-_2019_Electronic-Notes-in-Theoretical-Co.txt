Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 346 (2019) 89–98
www.elsevier.com/locate/entcs

Anti-Ramsey Threshold of Cycles for Sparse Graphs 1,2
G. F. Barros B. P. Cavalar
Institute of Mathematics and Statistics, University of Sa˜o Paulo, S˜ao Paulo, Brazil
G. O. Mota
Center for Mathematics, Computing and Cognition, Federal University of ABC, Santo Andr´e, S˜ao Paulo, Brazil
O. Parczyk
Institut fu¨r Mathematik, Technische Universit¨at Ilmenau, Ilmenau, Germany

Abstract
For graphs t and H, let t −r→b H denote the property that for every proper edge colouring of t there is a rainbow copy of H in t. Extending a result of Nenadov, Person, Sˇkori´c and Steger (2017), we prove

that n−1/m2 (&l ) is the threshold for t(n, p) −r→b C
when l ≥ 5. Thus our result together with a result of

the third author which says that the threshold for t −r→b C4 is n−3/4 settles the problem of determining the

threshold for t −r→b C
for all values of l.

Keywords: anti-Ramsey, proper colouring, random graphs, threshold.


Introduction
For a positive integer r and graphs G and H, let G → (H)r denote the following Ramsey property: for every edge colouring of G with at most r colours, there is a

1 G. F. Barros was supported by CAPES. B. P. Cavalar was supported by FAPESP (Proc. 2018/05557-7).
G. O. Mota was supported by FAPESP (Proc. 2018/04876-1) and CNPq (Proc. 304733/2017-2). O. Parczyk was partially supported by the Carl Zeiss Foundation. The collaboration of the authors was supported by CAPES/DAAD PROBRAL (Proc. 430/15). This study was financed in part by the Coordenac¸a˜o de Aperfeicoamento de Pessoal de N´ıvel Superior, Brasil (CAPES), Finance Code 001.
2 Emails: gbarros@ime.usp.br, brunopc@ime.usp.br, g.mota@ufabc.edu.br, olaf.parczyk@tu-ilmenau.de

https://doi.org/10.1016/j.entcs.2019.08.009
1571-0661/© 2019 The Author(s). Published by Elsevier B.V.
This is an open access article under the CC BY license (http://creativecommons.org/licenses/by/4.0/).

monochromatic copy of H in G. In random graph theory, we are interested in a function pˆ: N → [0, 1] such that with p  pˆ the probability that G(n, p) satisfies some graph property tends to 1 as n tends to infinity. We then say that G(n, p) satisfies this property asymptotically almost surely (a.a.s.) and if additionally we have that for p  pˆ we a.a.s. do not have this property, then we call pˆ the threshold for this property. Note that often there are more precise statements known, but for simplicity we will only discuss this kind of threshold.
A classical result in extremal combinatorics by R¨odl and Rucin´ski [9] determines the threshold for G(n, p) → (H)r, where G(n, p) is the binomial random graph. In particular, when H contains a cycle, the threshold is expressed in terms of the maximum 2-density m2(H)= max {(e(J ) − 1)/(v(J ) − 2) : J ⊆ H, v(J ) ≥ 3}.
Theorem 1.1 ([9]) Let H be a graph which contains a cycle. Then the thresh- old function pH = pH (n) for the property G(n, p) → (H)r is given by pH (n) = n−1/m2(H).
In this paper we investigate an anti-Ramsey property of sparse random graphs.

Given graphs G and H, we denote by G −r→b
H the following anti-Ramsey property:

every proper edge colouring of G contains a rainbow copy of H in G, i.e. a subgraph

of G isomorphic to H in which all edges have distinct colours. Since G −r→b
H is

an increasing property, there exists a threshold prb = prb(n) for any fixed graph H
H	H
(see [1]).
Rodl and Tuza [10] already studied anti-Ramsey properties of random graphs
in the early 90’s, obtaining an upper bound for the threshold prb for G(n, p) −r→b C,
C	p
where C is a fixed cycle. In [4], an upper bound for the threshold prb for any fixed
graph H was obtained.
Theorem 1.2 ([4]) Let H be a ﬁxed graph. Then there exists a constant C > 0
such that a.a.s. G(n, p) −r→b H whenever p = p(n) ≥ Cn−1/m2(H).	In particu-
lar, prb ≤ n−1/m2(H).

The threshold for a graph H is not always given by n−1/m2(H), as in [5] it was proved that there are infinitely many graphs H for which the threshold prb is asymptotically smaller than n−1/m2(H). However, Nenadov, Person, Sˇkori´c and Steger [8] proved that at least for sufficiently large cycles and complete graphs H the lower bound for prb matches the upper bound n−1/m2(H) of Theorem 1.2.
Theorem 1.3 ([8]) If H is a cycle on at least 7 vertices or a complete graph on at least 19 vertices, then prb = n−1/m2(H).
In [6], extending Theorem 1.3, it was proved that for complete graphs Kk
with k ≥ 5 the threshold prb is in fact n−1/m2(Kk ) and that for K4 we have prb =

n−7/15   n−1/m2(K4). Our result determines the threshold prb
Æ
for every cycle Cl

on l ≥ 5 vertices.
Theorem 1.4 If H is a cycle on at least 5 vertices, then prb = n−1/m2(H).

In Section 2 we prove Theorem 1.4. Similarly to what happens for complete graphs, the situation for C4 is different. In a short abstract of the third author [7], it

is proved that prb
4
= n—3/4   n—1/m2(C4). For completeness, we exhibit in Section 3

the proof of threshold prb obtained in [7]. We use standard notation and terminology
4
(see e.g. [2] and [3]). In particular, Cl denotes a cycle on l vertices, v(G) and e(G)
denote the number of vertices and edges of G, respectively, and we write G − H
for G − V (H).
Cycles on at least five vertices
The	maximum	density	of	a	graph	G	is	denoted	by	m(G)	=

max {e(J )/v(J ): J ⊆ G, v(J ) ≥ 1}.	The results of Nenadov, Person,
Sˇkori´c,

and Steger [8] provide a general framework that allows for a transference of random Ramsey problems into questions for deterministic graphs with bounded density. The proof of Theorem 1.3 for cycles relies on the following lemma.
Lemma 2.1 ([8]) Let l ≥ 7 be an integer and G be a graph such that m(G) <
m (C ). Then G —zr→b C .
2	l	p	l
Note that in fact they prove a slightly stronger statement for which they need a non-strict inequality for the density [8, Corollary 13]. The condition l ≥ 7 above is simply a consequence of the proof of the lemma, as observed by the authors [8]. We extend Lemma 2.1, proving the following result, which we state in words for clarity. It is easy to see that m2(Cl)= (l − 1)/(l − 2).
Lemma 2.2 Let l ≥ 5 be an integer and G be a graph such that m(G) < (l − 1)/(l − 2). Then there exists a proper edge colouring of G such that every l-cycle has two non-adjacent edges with the same colour.
Theorem 1.4 thus follows by replacing Lemma 2.1 with our Lemma 2.2 in the proof of Nenadov et al. [8]. We remark that the proof of Lemma 2.2 considers all the cycle lengths in the range l ≥ 5; it is not a proof only for the cases l = 5 and l = 6. Throughout this section let l ≥ 5 be an integer and G be a graph with m(G) <
(l − 1)/(l − 2). For the proof of our lemma, we shall define a partial proper edge colouring of G such that every l-cycle has two non-adjacent edges with the same colour. Clearly, having defined such a partial edge colouring, we can extend it to a proper edge colouring (for instance, the uncoloured edges may be assigned distinct colours).
Let Cl(G) be the set of all l-cycles of G.  The edge intersection graph of Cl(G) is the graph whose vertex set is Cl(G) and whose edges correspond to pairs {C, Cj}, C /= Cj, such that E(C) ∩ E(Cj) /= ∅. A subgraph H ⊆ G is a Cl- component of G if it is the union of all the l-cycles corresponding to the vertices of some component of the edge intersection graph of Cl(G). Clearly H can be con- structed from an l-cycle H1 in G as follows. Suppose we have defined H1 ⊆ · · ·⊆ Hi, i ≥ 1. If there is an l-cycle C in G such that C /⊆ Hi and E(C) ∩ E(Cj) /= ∅ for some l-cycle Cj ⊆ Hi then we put Hi+1 = Hi ∪ C; otherwise we terminate the

construction and set H = Hi. Note that H can be reconstructed by this proce- dure starting from any l-cycle H1 ⊆ H. Also note that two l-cycles belonging to distinct Cl-components may share vertices (obviously they do not share edges).
We start the colouring procedure in some Cl-component H of G. Once we have the partial colouring of H, we proceed to assign colours different from those used in H to edges of a Cl-component of G−E(H), according to the same steps as those taken for the colouring of H. We continue in this manner (taking an uncoloured Cl- component, colouring it and removing its edges), until we have considered all the l-cycles of G. So our aim is to describe the colouring procedure of an arbitrary Cl- component H of G.
Let t be such that H = Ht, i.e. t is the number of steps taken for the con- struction of H starting from some l-cycle H1 in G. We may assume t ≥ 2, since the case t = 1 is trivial. The following proposition describes the possibilities for a step of construction of H. Some configurations are impossible because they imply that e(H)/v(H) ≥ (l − 1)/(l − 2), which contradicts m(G) < (l − 1)/(l − 2).
Proposition 2.3 Let 1 ≤ i ≤ t − 1. Let C be an l-cycle which is added to Hi to form Hi+1. There exists a labelling C = u1u2 ··· ulu1 such that exactly one of the following conﬁgurations of Hi+1 (with respect to C) occurs, where 2 ≤ k ≤ l and 3 ≤ j ≤ l:
(Ak) u1u2 ··· uk is a k-path in Hi and uk+1,..., ul ∈/ V (Hi);
(Bj) u1u2 ∈ E(Hi), u2u3 ∈/ E(Hi), {u3,..., ul}\ {uj} ⊆ V (Hi+1) \ V (Hi), uj ∈
V (Hi).
With this proposition at hand the proof of Lemma 2.2 proceeds as follows: For configurations (Ak) with 2 ≤ k ≤ l − 2 we assign a new colour to two non-adjacent new edges. All other configurations appear at most twice and in these cases we will colour all previous configurations more carefully so that we are able to proceed.
To prove Proposition 2.3 and that bad configurations are rare, we heavily use m(G) < (l − 1)/(l − 2). For each 1 ≤ j ≤ i, let rj be the number of edges in E(Hj+1) \ E(Hj), sj be the number of vertices in V (Hj+1) \ V (Hj), and cj be the number of components of Hj+1 − Hj. We have that rj ≥ sj + 1. In fact, if sj =0 then rj ≥ 1, and if sj ≥ 1 then the components of Hj+1 − Hj are paths and the number of edges of Hj+1 with at least one end in Hj+1 −Hj is rj = sj + cj ≥ sj + 1. We have that sj ≤ l − 2, because an l-cycle is added to Hj with at least one edge in E(Hj). By an adequate number of applications of the inequality a/b >
(a + 1)/(b + 1) (which is equivalent to a > b), we obtain

l − 1
e(H	)
e(H )+ r
l + ri + Σi—1 (sj + 1)
l + r

+ (i − 1)(l − 1)

> 	i+1  = 	i	i ≥ 	j=1	 ≥ 	i	,



l − 2
v(Hi+1)
v(Hi)+ si
l + si + Σi—1 sj
l + si + (i − 1)(l − 2)
(1)

which is equivalent to ri < ((l − 1)si + l)/(l − 2).
Proof of Proposition 2.3 Using this last inequality, one can easily check that si =

l − 3 implies ri ≤ l − 1. We get that for si = l − 3 exactly one of the following three alternatives holds: Hi+1 − Hi has one component and no edge with both ends in V (Hi) is added to Hi, or Hi+1 − Hi has one component and one edge with both ends in V (Hi) is added to Hi, or Hi+1 − Hi has two components and no edge with both ends in V (Hi) is added to Hi. These alternatives correspond to Configurations (A3) and (Bj) with 3 ≤ j ≤ l, respectively. The inequality also gives us that 0 ≤ si ≤ l − 4 implies ri ≤ si + 1; we have thus Configurations (Ak) with 4 ≤ k ≤ l. Configuration (A2) is clearly the only possibility for si = l − 2. 2
For arguments involving similar calculations to (1) we will refer to this as the density argument. For example, when Hi+1 has Configuration (Al), then si = 0 and ri = 1, which with (1) immediately implies that there cannot be another occurrence of (Al). Similarly, we can show that Configuration (Al—1), where si = 1 and ri = 2, appears at most twice and any (Bj), where si = l − 3 and ri = l − 1, at most once. Furthermore, when one of the configurations appears, the occurrence of the other (Ak) with 3 ≤ k ≤ l − 2 is restricted, while only (A2) can appear arbitrarily often.
Proof of Lemma 2.2 Choose an arbitrary l-cycle H1 and assign a colour c1 to some pair of non-adjacent edges of H1. Let H = Ht, t ≥ 2, be the Cl-component of G constructed from H1.
Next we consider the cases according to which configurations given by Proposi- tion 2.3 occur during the construction of H. For each 1 ≤ i ≤ t− 1 and each l-cycle which is added to Hi to get Hi+1, we shall choose two non-adjacent edges of the cycle and a colour c, and assign c to the chosen edges.
The l-cycles added to Hi are the ones of Hi+1 which pass through edges of components of Hi+1 −Hi (recall that these components are paths) or through edges in E(Hi+1) \ E(Hi) with both ends in V (Hi). Thus, if all the edges in E(Hi+1) \ E(Hi) belong to components of Hi+1 −Hi and each of these components has at least two vertices, then the task is easy: for each component we choose two non-adjacent edges of it and assign a new colour to them, and this guarantees that Hi+1 contains no rainbow copy of Cl. If nothing else is explicitly stated we will always do this when Hi+1 has Configuration (Ak) with 2 ≤ k ≤ l− 2. Hence the effort in the proof consists in dealing with the other configurations. These will receive colours first. By the density argument Configuration (Al) appears at most once, (Al—1) at most twice, and any (Bj) at most once.
Case 1 For all 1 ≤ i ≤ t − 1, Hi+1 has Conﬁguration (Ak) with 2 ≤ k ≤ l − 2.
For 1 ≤ i ≤ t−1, assign a new colour ci+1 to two non-adjacent edges in E(Hi+1)\ E(Hi).
Case 2 There is 1 ≤ i1 ≤ t− 1 such that Hi1+1 has Conﬁguration (Al) with respect to some C.
In this case, for all i /= i1, Hi+1 has Configuration (Ak) with 2 ≤ k ≤ l − 2, by the density argument. Moreover, for at most one 1 ≤ i2 ≤ t − 1, Hi2+1 has Configuration (A3) with respect to some Cj.

Let C = u1u2 ··· ulu1, where P = u1u2 ··· ul is an l-path in Hi1 and ulu1 ∈/ E(Hi1 ). The number of l-cycles in Hi1+1 which are not in Hi1 equals that of l- paths in Hi1 with ends u1 and ul. First, we consider the case in which the number of such paths is greater than one, and, for this case, we define the colouring of H in such a way that each of these paths contains two non-adjacent edges with the same colour.

Suppose that Hi1
contains some Pj = u1x2 ··· xl—1ul, Pj /= P . We have that P ∪

Pj contains an even cycle with length at most 2l− 2, and in Hi
the only such cycles

are l-cycles (when l is even), or (2l − 4)-cycles, or (2l − 2)-cycles. A (2l − 2)-cycle appears during the construction only if, for some i, Hi has two l-cycles C and Cj such that C ∩ Cj is a 2-path. Similarly a (2l − 4)-cycle appears during the construction only if, for some i, Hi has two l-cycles C and Cj such that C ∩ Cj is a 3-path.
First consider that P ∪ Pj is a (2l − 2)-cycle in Hi (P j and P are internally disjoint). So we may assume without loss of generality that i1 = 2, H2 has Configu- ration (A2) and P ∪ Pj ⊆ H2. Assign a colour c1 to the edges of P ∪ Pj alternately. Note that, if l is even then there may be a third l-path in H2 between u1 and ul, and one can easily check that such a path will have two edges with the same colour. Consider that P ∪ Pj contains a (2l − 4)-cycle. We may assume that there is
no l-path P jj in Hi  between u1 and ul such that P jj ∪P or P jj ∪Pj is a (2l−2)-cycle.
Without loss of generality x2 = u2, H2 has Configuration (A3) and (P ∪ Pj) − u1 ⊆ H2. Alternately colour the edges of (P ∪ Pj) − u1 with two colours c1 and c2. If l is even then there may be a third (l − 1)-path in H2 between u2 and u5, and one can easily check that such a path will have two edges with the same colour.
Now consider that P ∪Pj contains an l-cycle, l even. We may assume that there is no l-path P jj in Hi1 between u1 and ul such that P jj ∪ P or P jj ∪ Pj contains a cycle with length at least 2l − 4. Without loss of generality H1 is an l-cycle contained in P ∪ Pj. and we alternately colour the edges of H1 with two colours c1 and c2.
Finally, assume that Hi1 contains no l-path linking u1 and ul other than P . Suppose that P has two consecutive edges in some l-cycle Cj. Obviously, Cj can- not contain both u1u2 and ul—1ul. Assign a colour c1 to two non-adjacent edges in E(Cj) in such a way that, if {u1u2, u2u3} ⊆ E(Cj), then c1 is not assigned to u2u3, and, if {ul—2ul—1, ul—1ul} ⊆ E(Cj), then c1 is not assigned to ul—2ul—1. Without loss of generality H1 = Cj. For 1 ≤ i ≤ t − 1, i /= i1, assign a new colour ci+1 to two non-adjacent edges in E(Hi+1) \ E(Hi). We have that some edge in E(P ) \ {u2u3, ul—2ul—1} is uncoloured. Assign a new colour ci1+1 to ulu1 and to an uncoloured edge in E(P ) \ {u2u3, ul—2ul—1}.
Suppose now that no two consecutive edges of P lie in the same l-cycle in Hi1 . We have that P cannot have two non-consecutive edges in same l-cycle, otherwise P would have length greater than l − 1. So any l-cycle in Hi1 has at most one edge of P . For 1 ≤ i ≤ t− 1, i /= i1, i2, assign a new colour ci+1 to two non-adjacent edges in E(Hi+1) \ (E(Hi) ∪ E(P )). Colour two non-adjacent edges in E(Hi2+1) \ E(Hi2 ) (when l = 5 there are exactly two such edges) with a new colour ci2+1. Again some edge in E(P ) \ {u2u3, ul—2ul—1} is uncoloured. Assign a new colour ci1+1 to ulu1

and to an uncoloured edge in E(P ) \ {u2u3, ul—2ul—1}.
Case 3 There are 1 ≤ i1 < i2 ≤ t — 1 such that Hi1+1 and Hi2+1 have Conﬁgura- tion (Al—1) with respect to some C and to some Cj, respectively.
By the density argument, this case occurs only if l = 5 and we have that Hi+1
has Configuration (A2) for all i /= i1, i2. Let C = u1u2u3u4u5u1, and let Cj =
v1v2v3v4v5v1, where P = u1u2u3u4 and Pj = v1v2v3v4 are 4-paths in Hi , u5 ∈/
V (Hi1 ) and v5 ∈/ V (Hi2 ). We see that P is the only 4-path between u1 and u4

in Hi1
and thus C is the only 5-cycle added to Hi1
to form Hi +1. As for Pj, there

may be a 4-path P jj in Hi  between v1 and v4 other than Pj. If such is the case
then we have that Pj ∪ P jj contains a 4-cycle or a 6-cycle.
One of the following three alternatives holds for P in Hi1 : the three edges of P lie in the same 5-cycle, or two consecutive edges of P lie in the same 5-cycle but the third one does not, or any 5-cycle in Hi1 contains at most one edge of P .
Consider that the first alternative holds for P . Without loss of generality all the edges of P lie in H1 and i1 = 1. Hence H1 is of the form H1 = u1u2u3u4x5u1 for some x5. Note that Cjj = u1x5u4u5u1 is a 4-cycle in H2. Suppose that all the edges of Pj lie in H2. Therefore, without loss of generality i2 = 2. If the ends of Pj are two adjacent vertices in V (Cjj) then we colour u1u2 and u3u4 with c1 and we colour two non-adjacent edges of Cj with a new colour c2. If the ends of Pj are u1 and u4 then we colour u1u2 and u3u4 with c1. If the ends of Pj are x5 and a vertex in {u2, u3} then we assign c1 to u1u2 and u3u4 and we assign a new colour c2 to v5x5 and u2u3. The case in which the ends of Pj are u5 and a vertex in {u2, u3} is symmetric. Suppose that the ends of Pj are u1 and u3. Note that there are two 4- paths between u1 and u3 (and thus two possibilities for Pj): u1u5u4u3 or u1x5u4u3. We assign c1 to u4x5, u1u2 and u3v5, and assign c2 to u2u3, u4u5 and v5u1. The case in which the ends of Pj are u4 and u2 is symmetric.
Now suppose that Pj has at most two edges in H2. If Pj has two edges in H2 then these must be consecutive. Hence we may assume without loss of generality that v3v4 ∈/ E(H2). Since there is no 6-cycle in Hi2 and the unique 4-cycle in Hi2 has its edges in H2, a 4-path P jj /= Pj between v1 and v4 must pass through v3v4. Colour u1u2 and u3u4 with c1, and v3v4 and v5v1 with a new colour ci2 .
Let us consider the second alternative for P . Without loss of generality H1 contains the edges u1u2 and u2u3 but does not contain u3u4. Thus H1 is of the form H1 = u1u2u3x4x5u1 for some x4 and x5. Note that Cjj = u1x5x4u3u4u5u1 is a 6-cycle in Hi1+1. We see that Cjj is the unique 6-cycle in Hi2 , and that Hi2 contains no 4-cycle. Hence, the number of 4-paths linking v1 and v4 is at most two. If there are two such paths, these correspond to two internally disjoint paths along Cjj. Suppose that E(Pj) ⊆ E(Cjj). Alternately colour the edges of Cjj with two colours c1 and c2 and, for 1 ≤ i ≤ t— 1, i /= i1, i2, assign a new colour ci+2 to two non-adjacent edges in E(Hi+1) \ (E(Hi) ∪ {u3u4}). Assume that E(Pj) /⊆ E(Cjj). Thus Pj is the unique 4-path between v1 and v4. If E(Pj) ⊆ E(H1) then E(Pj) ∩ {u1u2, u2u3} /= ∅ (by assumption Pj cannot be u1x5x4u3), and we colour u4u5 and the two non- adjacent edges in E(Pj) with c1. Assign a new colour ci+1 to two non-adjacent edges

in E(Hi+1) \ E(Hi), for 1 ≤ i ≤ t — 1, i /= i1, i2. Thus assume that E(Pj) /⊆ E(H1) (possibly Pj = P ). Therefore Pj has an edge vjvj+1 which does not belong to E(H1). Colour u2u3, x4x5 and an edge in {u5u1, u5u4}\ {vjvj+1} with c1, and give a new colour ci2+1 to vjvj+1 and to some edge in {v5v1, v5v4} not incident with vj nor with vj+1.
Finally, consider the third alternative for P . In Hi2 there are neither 4-cycles nor 6-cycles, and therefore Pj is the unique 4-path between v1 and v4. We may assume without loss of generality that H1 contains u2u3 and that u2u3 is uncoloured. Suppose that Pj = P . Colour u2u3, u5u1 and v5u4 with a new colour ci +1, and assign a new colour ci+1 to two non-adjacent edges in E(Hi+1) \ E(Hi), for 1 ≤ i ≤ t — 1, i /= i1, i2. Now suppose that Pj /= P . Since Pj is the unique 4-path in Hi
2
linking v1 and v4, Pj and P cannot have both ends in common. Without loss of generality v1 /= u1. Colour u2u3 and u5u1 with a new colour ci1+1. If v2v3 = u2u3 then colour v5v1 with ci1+1; otherwise colour v2v3 and v5v1 with a new colour ci2+1.
Case 4 There is exactly one 1 ≤ i1 ≤ t—1 such that Hi1+1 has Conﬁguration (Al—1)
with respect to some C.
By the density argument, Hi+1 has Configuration (Ak) with 2 ≤ k ≤ 4 for all i /= i1. Let C = u1u2 ··· ulu1, where P = u1 ··· ul—1 is an (l — 1)-path in Hi1 and ul ∈/ V (Hi1 ). The number of l-cycles in Hi1+1 which are not in Hi1 equals that of (l — 1)-paths with ends u1 and ul—1. Next we consider the case in which the number of such paths is greater than one, and, for this case, we define the colouring of H in such a way that each of these paths contains two non-adjacent edges with the same colour.

Suppose that Hi1
contains some Pj = u1x2 ··· xl—2ul—1, Pj /= P . We see that P ∪

Pj contains an even cycle with length at most 2l— 4, and in Hi
the only such cycles

are l-cycles (when l is even), or (2l — 6)-cycles, or (2l — 4)-cycles. A (2l — 4)-cycle appears during the construction only if, for some i, Hi has two l-cycles C and Cj such that C ∩ Cj is a 3-path. Similarly a (2l — 6)-cycle appears during the construction only if, for some i, Hi has two l-cycles C and Cj such that C ∩ Cj is a 4-path.
First, consider that P ∪ Pj is a (2l — 4)-cycle in Hi1 (P j and P are internally disjoint). So we may assume without loss of generality that i1 = 2, H2 has Con- figuration (A3) and P ∪ Pj ⊆ H2. Alternately colour the edges of P ∪ Pj with two colours c1 and c2. Note that if l is even then there may be a third (l — 1)-path in H2 between u1 and ul—1, and one can easily check that such a path will have two edges with the same colour.
Consider that P ∪ Pj contains a (2l — 6)-cycle. We may assume that there is no (l — 1)-path P jj in Hi1 between u1 and ul—1 such that P jj ∪ P or P jj ∪ Pj is a (2l — 4)-cycle. Without loss of generality x2 = u2, H2 has Configuration (A4) and (P ∪ Pj) — u1 ⊆ H2. Alternately colour the edges of (P ∪ Pj) — u1 with two colours c1 and c2, and colour the two non-adjacent edges of Cj ∩ H1 with a new colour c3. If l is even then there may be a third (l — 2)-path in H2 between u2 and ul—1. Such a path passes through the edges of Cj ∩ H1, and therefore will have two edges with the same colour.

Now consider that P ∪ Pj contains an l-cycle, l even. We may assume that there is no (l — 1)-path P jj in Hi between u1 and ul such that P jj ∪ P or P jj ∪ Pj contains a cycle with length at least 2l — 6. Without loss of generality H1 is an l- cycle contained in P ∪ Pj. Alternately colour the edges of H1 with two colours c1 and c2, and assign a new colour ci+2 to two non-adjacent edges in E(Hi+1) \ E(Hi) for 1 ≤ i ≤ t — 1, i /= i1.
Finally, assume that P is the only (l—1)-path in Hi between u1 and ul—1. Let Cj be an l-cycle containing the edge u2u3. Assign a colour c1 to two non-adjacent edges in E(Cj) \ {u2u3}. Without loss of generality H1 = Cj. For 1 ≤ i ≤ i1 — 1, assign a new colour ci+1 to two non-adjacent edges in E(Hi+1) \ E(Hi). We have that u2u3 is uncoloured. Assign a new colour ci1+1 to ulu1 and u2u3.
Case 5 There is 1 ≤ i1 ≤ t — 1 such that Hi1+1 has Conﬁguration  (Bj) with
≤ j ≤ l with respect to some C.
By the density argument, Hi+1 has Configuration (A2) for all i /= i1. Let C = u1u2 ··· ulu1, where uj ∈ V (Hi) for some 3 ≤ j ≤ l, {u3,..., ul}\ {uj}⊆ V (Hi+1) \ V (Hi). If there is a path P in Hi1 between u1 and uj such that V (P )∪{uj+1,..., ul}

induces an l-cycle in Hi +1 or there is a path Pj in Hi
between u2 and uj such

that V (P j) ∪ {u3,..., uj—1} induces an l-cycle in Hi +1, then Hi +1 can be con-
1	1
structed in such a way that each of the last two steps has Configuration (Al—j+3)
and (Aj), respectively, and therefore Case 1, 2, 3, or 4 happens. So we may suppose that Hi1 contains none of these paths and colour u2u3 and ulu1 with colour ci1+1.
2


3	Cycle on four vertices
In this section we give a sketch of the proof that prb

= n—3/4. By a classical result

of Bollob´as (see [3]), we know that if p  n—3/4, then a.a.s. G(n, p) containsa copy of K2,4. It is not hard to see that in any proper colouring of the edges of K2,4 there

is a rainbow copy of C4, which implies that prb
≤ n—3/4.

For the lower bound, define a sequence F = C1,..., Cl of copies of C4 in G as

i	 4 i—1	4 i
—3/4

a C4-chain if for any 2 ≤ i ≤ l we have E(C4) ∩	j=1 E(C4)
/= ∅. Let p  n

and G = G(n, p). We want to show that a.a.s. there exists a proper colouring of G
that contains no rainbow copy of C4. It is enough to consider C4-chains that are maximal with respect to the number of C4’s. The first step is to properly colour some edges in all maximal C4-chains so that all C4’s in G will be non-rainbow. Then, since all C4’s are coloured we can just give a new colour for each one of the remaining uncoloured edges. For the first step, we use Markov’s inequality and a union bound to obtain that a.a.s. G does not contain any graph H with m(H) ≥ 4/3 and |V (H)|≤ 12.
Let F = C1,..., Cl be an arbitrary C4-chain in G with m(F ) ≥ 4/3. Let 2 ≤ i ≤
4	4
l be the smallest index such that Fj = C1,..., Ci has density m(Fj) ≥ 4/3. Then,
4	4
since F jj = C1,..., Ci—1 has density m(Fjj) < 4/3, we can explore the structure
4	4
of G to conclude that |V (F jj)| ≤ 10, which implies |V (Fj)| ≤ 12, a contradiction.

Therefore, a.a.s. G contains no copies of C4-chains F with m(F ) ≥ 4/3. Since F is not too dense, a careful analysis of such chains shows that it is possible to obtain

the desired colouring, which proves that prb
≥ n—3/4.

References
Bollob´as, B. and A. Thomason, Threshold functions, Combinatorica 7 (1987), pp. 35–38.
Diestel, R., “Graph theory,” Graduate Texts in Mathematics 173, Springer, Heidelberg, 2010, fourth edition, xviii+437 pp.
URL  http://dx.doi.org/10.1007/978-3-642-14279-6

Janson, S., T. L- uczak and A. Rucin´ski, “Random graphs,” Wiley-Interscience, New York, 2000, xii+333 pp.
Kohayakawa, Y., P. B. Konstadinidis and G. O. Mota, On an anti-Ramsey threshold for random graphs, European Journal of Combinatorics 40 (2014), pp. 26–41.
Kohayakawa, Y., P. B. Konstadinidis and G. O. Mota, On an anti-Ramsey threshold for sparse graphs with one triangle, Journal of Graph Theory 87 (2017), pp. 176–187.
Kohayakawa, Y., G. O. Mota, O. Parczyk and J. Schnitzer, Anti-Ramsey threshold of complete graphs,
arXiv:1902.00306, 2019 .
URL http://arxiv.org/abs/1902.00306

Mota, G. O., Advances in anti-Ramsey theory for random graphs, Encontro de Teoria da Computa¸c˜ao (ETC–CSBC) 2 (2017).
Nenadov, R., Y. Person, N. Sˇkori´c and A. Steger, An algorithmic framework for obtaining lower bounds for random Ramsey problems, J. Combin. Theory Ser. B (2017), http://dx.doi.org/10.1016/j.jctb. 2016.12.007.
R¨odl, V. and A. Rucin´ski, Threshold functions for Ramsey properties, J. Amer. Math. Soc. 8 (1995),
pp. 917–942.
URL http://dx.doi.org/10.2307/2152833

R¨odl, V. and Z. Tuza, Rainbow subgraphs in properly edge-colored graphs, Random Structures Algorithms 3 (1992), pp. 175–182.
