Available online at www.sciencedirect.com


Electronic Notes in Theoretical Computer Science 341 (2018) 5–22
www.elsevier.com/locate/entcs

Finiteness Spaces and Generalized Power Series
Richard Blutea,1 Robin Cockettb,2 Pierre-Alain Jacqmina,3 Philip Scott a,4
a Department of Mathematics and Statistics, University of Ottawa, Ottawa, Ontario, Canada
b Department of Computer Science, University of Calgary, Calgary, Alberta, Canada

Abstract
We consider Ribenboim’s construction of rings of generalized power series. Ribenboim’s construction makes use of a special class of partially ordered monoids and a special class of their subsets. While the restrictions he imposes might seem conceptually unclear, we demonstrate that they are precisely the appropriate conditions to represent such monoids as internal monoids in an appropriate category of Ehrhard’s finiteness spaces. Ehrhard introduced finiteness spaces as the objects of a categorical model of classical linear logic, where a set is equipped with a class of subsets to be thought of as finitary. Morphisms are relations preserving the finitary structure. The notion of finitary subset allows for a sharper analysis of computational structure than is available in the relational model. For example, fixed point operators fail to be finitary.
In the present work, we take morphisms to be partial functions preserving the finitary structure rather than relations. The resulting category is symmetric monoidal closed, complete and cocomplete. Any pair of an internal monoid in this category and a ring induces a ring of generalized power series by an extension of the Ribenboim construction based on Ehrhard’s notion of linearization of a finiteness space. We thus further generalize Ribenboim’s constructions. We give several examples of rings which arise from this construction, including the ring of Puiseux series and the ring of formal power series generated by a free monoid.
Keywords: Power series, finiteness space, linearization, poset, artinian poset, narrow poset, partially ordered monoid, Puiseux series, partial function.


Introduction
Rings of power series are objects of fundamental importance in any number of set- tings in mathematics and theoretical computer science. The applications to algebra and analysis are numerous and well-known. In theoretical computer science, power series arise for example in the coinductive analysis of streams [22], as well as in the

1 Email: rblute@uottawa.ca, Research partially supported by an NSERC Discovery Grant.
2 Email: robin@ucalgary.ca, Research partially supported by an NSERC Discovery Grant.
3 Email: pjacqmin@uottawa.ca, Research partially supported by NSERC Discovery Grants of Blute & Scott.
4 Email: phil@site.uottawa.ca, Research partially supported by an NSERC Discovery Grant.

https://doi.org/10.1016/j.entcs.2018.11.002 1571-0661/© 2018 Published by Elsevier B.V.
This is an open access article under the CC BY-NC-ND license (http://creativecommons.org/licenses/by-nc-nd/4.0/).

study of automata and formal language theory [3,7]. Thus any framework which generalizes and provides a conceptual basis for understanding such rings is of great interest.
Ribenboim introduced his notion of generalized power series [19,20,21] in order to study rings of arithmetic functions. But the construction is quite general and gives a great many examples, some of which are discussed below. The construction is functorial in nature and thus can be analyzed via category theory. Ribenboim begins with a special class of partially ordered monoids (pomonoids), which he calls strict pomonoids. He considers those functions from the pomonoid to a ring such that the support (the inverse image of the complement of 0) is artinian and narrow (defined below). He demonstrates that the Dirichlet convolution formula lifts to this setting and thus one obtains a ring which can sensibly be thought of as a ring of power series.
Finiteness spaces were introduced by Ehrhard [5] as an enrichment of the usual relational model of linear logic [8]. A finiteness space is a set equipped with a class of subsets, which are to be thought of as finitary. A morphism between finiteness spaces is a relation preserving the finitary structure. Ehrhard’s model provides for a much finer analysis of the computational structure of linear logic. Fixed point operators in particular fail to be finitary, as one would expect. While Ehrhard was interested in constructing a model of linear logic and hence chose relations as his morphisms, in our study of monoids it seems more appropriate to consider (partial) functions preserving the finitary structure instead. We call such (partial) functions ﬁnitary (partial) functions. It turns out that the category with functions is symmetric monoidal but not closed, complete or cocomplete, while the category with partial functions is complete, cocomplete and symmetric monoidal closed.
While the conditions that Ribenboim requires in his construction (the assump- tion that supports must be artinian and narrow and that the pomonoid must be strict) seem conceptually unclear, they are precisely the assumptions one needs to view these objects as finiteness spaces. In particular, we show that for any poset, if one defines the finitary subsets to be the artinian and narrow subsets, then the result is a finiteness space. If one considers the category StrPos of posets and strict homomorphisms (i.e., those morphisms that preserve strict inequality), then this category is (symmetric) monoidal and the internal monoids are precisely the strict pomonoids of Ribenboim. Furthermore if one again defines the finitary subsets to be the artinian and narrow subsets, then one obtains an internal monoid in the ap- propriate category of finiteness spaces. We do so by showing that the constructions described above are functorial and monoidal, thus take monoids to monoids.
The final piece of the puzzle is Ehrhard’s linearization of a finiteness space. For a chosen ring, one assigns to a finiteness space the set of all functions from the space to the ring whose support is finitary. We show that the linearization of an internal monoid is a ring and in particular the linearization of the finiteness space associated to a strict pomonoid is precisely Ribenboim’s construction. Ehrhard’s linearization of finiteness spaces provided one of the first examples of differential categories [6,2] and in future work, we intend to study these rings from that perspective.

Terminology: our rings are supposed to be unitary, but not necessarily commu- tative.

Ribenboim’s generalized power series
We now review the structure that Ribenboim called generalized power series, which we will call Ribenboim power series. 5 The presentation is based on those in [19,20,21].
Let (M, ·, ≤) be a partially ordered monoid (or pomonoid), i.e., a monoid in the category Pos of posets and order-preserving maps. We say that M is strictly ordered (or is a strict pomonoid) if
s < sj ⇒ s · t < sj · t and t · s < t · sj ∀s, sj,t ∈ M . 

A poset is artinian if all strictly descending lists (m1 > m2 > ··· ) are finite. It is narrow if all discrete subsets are finite; that is, if any subset of elements mutually unrelated by ≤ is finite. It is noetherian if every strictly ascending list (m1 < m2 < ··· ) is finite. We will use the following result. It was crucial in [19] in proving Proposition 2.4.
Lemma 2.1 Let (P, ≤) be an artinian and noetherian poset. Then P is narrow if and only if P is ﬁnite.
Since Lemma 2.1 is frequently cited in this field, but a proof is typically not given, we include a proof as an almost immediate corollary of Ramsey’s Theorem for infinite posets.
Proof. (⇐) is obvious. As for (⇒), suppose P is narrow and infinite (as well as artinian and noetherian). By Grillet [9], Proposition B.2.3, the artinian and noetherian conditions are equivalent to saying “every chain of P is finite” (this uses the Axiom of Choice). By Hodges [13], Corollary 11.1.5, as a consequence of Ramsey’s Theorem, we obtain: an infinite poset P either contains an infinite chain or it contains an infinite antichain (i.e., an infinite discrete subset whose elements are pairwise incomparable). Since P is narrow, the latter is impossible. Hence P must contain an infinite chain, which contradicts Grillet’s theorem.	2
Definition 2.2 [Ribenboim,[19]] Let A be an abelian group and (P, ≤) a poset. Recall that the support of a function f : P   /A¸is defined by supp(f ) = {p ∈ P | f (p) /= 0}. Define the space of Ribenboim power series from P with coefficients in A, denoted G(P, A), to be the abelian group of functions f : P   /A¸whose support is artinian and narrow, with pointwise addition.
We have now established all of the necessary structure to define Ribenboim’s generalized power series.
5 Note that Ribenboim assumes commutativity of both the underlying ring and the pomonoid. In fact, neither assumption is necessary and we have modified the definitions accordingly.

Theorem 2.3 (Ribenboim,[19]) If (M, ·, ≤) is a strict pomonoid and R a ring, then G(M, R) is also a ring with

(f · g)(m)= 
(m1,m2)∈Xm(f,g)
f (m1) · g(m2)

where
Xm(f, g) := {(m1, m2) ∈ M × M | m1 · m2 = m and f (m1) /= 0, g(m2) /= 0}.

The unit is given by the function e : M → R where e(m) = 1R if m = 1M and 0 otherwise.
The fact that the multiplication is well-defined follows from:
Proposition 2.4 (Ribenboim,[19]) The set Xm(f, g) is ﬁnite for f, g ∈ G(M, R).
There are many examples. See the Ribenboim papers for further discussion.
Let M = N with the standard order. The result is the usual ring of power series with coefficients in R.
Let M = Z with the standard order. The result is the ring of Laurent series with coefficients in R.
Let M = N with the discrete order. The result is the usual ring of polynomials in R.
Let M = Z with the discrete order. The result is the usual ring of Laurent polynomials in R.
Let M = N\{0} with the operation of multiplication, equipped with the usual ordering. Then G(M, R) is the ring of arithmetic functions with values in R, and multiplication is Dirichlet’s convolution.
Let M = N\{0} with the operation of multiplication as above, but now equipped with the divisibility ordering; that is, m1 ≤ m2 ⇐⇒ m1|m2. Then G(M, R) isa proper subring of the ring of arithmetic functions with values in R.

Finiteness spaces
Basic constructions
We now introduce Ehrhard’s notion of ﬁniteness space [5].
Definition 3.1 • Let X be a set and let U be a set of subsets of X, i.e., U ⊆ P(X).
Define U⊥ by:
U⊥ = {uj ⊆ X | the set uj ∩ u is finite for all u ∈ U}
It is immediate to check that one has U ⊆ U⊥⊥ and U⊥⊥⊥ = U⊥.

A ﬁniteness space is a pair X = (X, U ) with X a set and U ⊆ P(X) such that
U⊥⊥ = U . We will sometimes denote X by |X| and U by F(X).
A morphism of finiteness spaces R : X → Y is a relation R : |X| → |Y| such that the following two conditions hold:
For all u ∈ F(X), we have uR ∈ F(Y), where uR = {y ∈ |Y|| ∃x ∈ u, xRy}.
For all vj ∈ F(Y)⊥, we have Rvj ∈ F(X)⊥, where Rvj = {x ∈ |X|| ∃y ∈ vj, xRy}. It is straightforward to verify that this is a category. We denote it FinRel.
Lemma 3.2 (Ehrhard,[5]) In the deﬁnition of morphism of ﬁniteness spaces, condition (2) can be replaced with:
(2j) For all b ∈ |Y|, we have R{b}∈ F(X)⊥.
Theorem 3.3 (Ehrhard,[5]) FinRel is a ∗-autonomous category. The tensor
X ⊗ Y = (|X ⊗ Y|, F(X ⊗ Y))
is given by setting |X ⊗ Y| = |X|× |Y| and
F(X ⊗ Y)= {u × v | u ∈ F(X),v ∈ F(Y)}⊥⊥
= {w | ∃u ∈ F(X), ∃v ∈ F(Y),w ⊆ u × v}.

The unit for the tensor is I = ({∗}, P({∗})) and the duality is given by (|X|, F(X))⊥ = (|X|, F(X)⊥).

Other choices of morphisms
The choice of morphisms for finiteness spaces was motivated by the desire to have a ∗-autonomous category. For examining internal monoids, relations as morphisms seem not to be the right choice. One has two other sensible options which we consider now.
We first define the category FinF. Objects are finiteness spaces and a morphism f : (X, U ) → (Y, V) is a function satisfying the same conditions as in Definition 3.1. We define FinPf in the same way except now morphisms are partial functions sat- isfying the same conditions as in Definition 3.1.
We note that a partial function f : X  /Y ¸satisfying (2) of Definition 3.1 auto- matically satisfies (1). Indeed, given u ∈U and vj ∈ V⊥, if u∩f—1(vj) is finite, then so is f (u) ∩ vj in view of the surjective restriction of f : (u ∩ f—1(vj)) → (f (u) ∩ vj). Thus the category FinPf (respectively FinF) is equivalent to the category hav- ing finiteness spaces as objects and partial functions (respectively total functions) f : X  /Y¸satisfying f—1(v) ∈ U for each v ∈ V as morphisms (X, U )   /(Y¸, V). The equivalence is obtained by mapping the finiteness space (X, U ) to (X, U⊥) and f : (X, U ) /(Y¸, V) to f : (X, U⊥) /(Y¸, V⊥). This is a ‘topological’ way of viewing these categories, but in order to develop the ‘classical theory’, we are going to work in FinPf and FinF.

It is easy to see that FinF and FinPf are symmetric monoidal categories and the inclusions
FinF ‹→ FinPf ‹→ FinRel
are bijective on objects, (strict) symmetric monoidal functors.
The category FinF does have one significant problem, it is not monoidal closed.
Indeed the functor
−⊗ (∅, P(∅)): FinF → FinF
does not have a right adjoint (because FinF does not have a terminal object).
On the other hand, we do have:
Proposition 3.4 The category FinPf is a symmetric monoidal closed category.
Proof. Let (X, U ) and (Y, V) be two finiteness spaces. We define the finiteness space [(X, U ), (Y, V)] as follows. Let A be the set
A = {f ∈ FinPf((X, U ), (Y, V)) | f is not the empty partial function} and let W be the set
W = {w ⊆ A | w satisfies (4)}
= {w ⊆ A | w satisfies (3) and (4j)}⊆ P(A)
where conditions (3), (4) and (4j) are defined as follows:
for each u ∈ U , the union	f∈w f (u) is in V,
for each u ∈U and each vj ∈ V⊥, the set {f ∈ w | f (u) ∩ vj /= ∅} is finite, (4j) for each u ∈U and each y ∈ Y , the set {f ∈ w | y ∈ f (u)} is finite.
It is easy to see that condition (4) implies condition (4j). It also implies condi- tion (3): Given u ∈U and vj ∈ V⊥, let us denote by ⟨u, vj⟩ the set
 u, vj = {f ∈ A | f (u) ∩ vj /= ∅}.
Then, the set
⎛⎝  f (u)⎞⎠ ∩ vj =  (f (u) ∩ vj)=		(f (u) ∩ vj)

is finite since w ∩ ⟨u, vj⟩ is and all f (u) ∩ vj are. Conversely, the conjunction of conditions (3) and (4j) implies condition (4). Indeed, for u ∈ U and vj ∈ V⊥, the set

{f ∈ w | f (u) ∩ vj /= ∅} =  {f ∈ w | y ∈ f (u)} =	 


{f ∈ w | y ∈ f (u)}


is finite, being a finite union of finite sets.

Let us now prove that (A, W) is a finiteness space. We need to show that W⊥⊥ ⊆ W. In view of condition (4), given u ∈U and vj ∈ V⊥, the set ⟨u, vj⟩ belongs to W⊥. This means that for w ∈ W⊥⊥, the set w ∩ ⟨u, vj⟩ = {f ∈ w | f (u) ∩ vj /= ∅} is finite and w ∈ W. We can thus define [(X, U ), (Y, V)] as the finiteness space (A, W).
We now define the partial function
ev : [(X, U ), (Y, V)] ⊗ (X, U ) → (Y, V)
by
ev(f, x)=	f (x)	if f (x) is defined
undefined	if f (x) is undefined.
Let us show that this is a morphism in FinPf. For any vj ∈ V⊥, w ∈W and u ∈ U , we must show that ev—1(vj) ∩ (w × u) is finite. But this set is

  {(f, x) | x ∈ u ∩ f—1(vj)} =	 

{(f, x) | x ∈ u ∩ f—1(vj)}

which is finite since w ∩ ⟨u, vj⟩ is and all u ∩ f—1(vj) are.
Now let (Z, T ) be a finiteness space and g : (Z, T )⊗(X, U )	/(Y¸, V) a morphism in FinPf. The unique morphism h : (Z, T ) 	/[(X¸, U ), (Y, V)] making the diagram
(Z, T ) ⊗ (X, U )
¸¸¸¸¸¸g

h⊗(X,C )
¸¸¸¸
¸z˛

[(X, U ), (Y, V)] ⊗ (X, U ) ev  /(Y¸, V)
commutative has to be defined via
h(z)=	g(z, −)	if g(z, −) is not the empty partial function undefined	 if g(z, −) is the empty partial function.
It remains to prove h is a well-defined morphism in FinPf. First, let us show that for z ∈ Z, the partial function g(z, −) is a morphism (X, U )   /(Y¸, V). For u ∈ U , g(z, −)(u) = g({z} × u) which is in V. So g(z, −) satisfies condition (1). For condition (2j), let y ∈ Y and u ∈ U and notice that the set u ∩ g(z, −)—1(y) is in bijection with the set ({z}× u) ∩ g—1(y) which is finite. To conclude the proof, we still have to show that h : (Z, T )  /[(X¸, U ), (Y, V)] is also a morphism in FinPf. For condition (1), we must show that, given t ∈ T , h(t) satisfies (3) and (4j). Given u ∈ U , the set


f ∈ h(t)
f (u)=	g(z, −)(u)= g(t × u)
z∈t

is in V, showing condition (3). For condition (4j), let u ∈ U and y ∈ Y . The first projection
g—1(y) ∩ (t × u) → {z ∈ t | y ∈ g(z, −)(u)}

is a surjection and the assignment z '→ g(z, −) is a surjection
{z ∈ t | y ∈ g(z, −)(u)} → {f ∈ h(t) | y ∈ f (u)}.
Since the set g—1(y) ∩ (t × u) is finite, this demonstrates condition (4j). It remains now to prove that h satisfies condition (2j). Let f ∈ A and t ∈T . We need to show that h—1(f ) ∩ t is finite. Since f is not the empty partial function, we can choose x ∈ X such that f (x) is defined. Now, we have an injection
h—1(f )∩t = {z ∈ t | g(z, −)= f}	{/(z¸, x) | z ∈ t, g(z, x)= f (x)} = g—1(f (x))∩(t×{x})
sending z to (z, x). But since g—1(f (x)) ∩ (t × {x}) is finite, this concludes the proof.	2
Notice that the finiteness space (∅, P(∅)) is a zero object in FinPf (and in FinRel). So the empty partial function X   /Y¸is actually the zero morphism (X, U )   /(Y¸, V). The category FinPf also has the following additional advantage.
Proposition 3.5 The pointed category FinPf is complete and cocomplete.
Proof. Let us start showing that FinPf has equalisers. Given two parallel mor- phisms


in FinPf, let us consider the set
f
(X, U )	g
/(Y¸, V)

E = {x ∈ X | f ({x})= g({x})}
= {x ∈ X | either both f (x) and g(x) are undefined
or they are both defined and f (x)= g(x)}.
Let also W ⊆ P(E) be W = {u ∈U | u ⊆ E}. Then it is routine to show that
W⊥ = {uj ∈ U⊥ | uj ⊆ E},
(E, W) is a finiteness space and the inclusion (E, W) ‹→ (X, U ) is the equalizer of
f and g in FinPf.
Now let I be a set and (Xi, Ui) a finiteness space for each i ∈ I. Let us construct

the product 

i∈I
(Xi, Ui). For each i ∈ I, we denote by Xj
the disjoint union


Xi  { i}. We consider the product

P =   Xj  \ {( i)i∈I}
i∈I


and
Wj =  ⎧⎨
Xj × uj | uj ∈ U⊥⎫⎬ ⊆ P(P ).

Then, (P, Wj⊥) is a finiteness space and for each i ∈ I, we have a morphism
πi : (P, Wj⊥) 	/(X¸, U ) given by

i	i

 xj

if xj ∈ Xi

j	undefined	if xj = i.
This forms the desired product in FinPf. Indeed, let (Z, T ) be a finiteness space and, for each i ∈ I, fi be a morphism (Z, T ) 	/(X¸, U ). Then, the unique morphism
g : (Z, T ) 	/(P¸, Wj⊥) such that πig = fi for each i ∈ I is given by
 (fj(z))i∈I	if there exists i ∈ I such that z ∈ Dom(fi)

where fj : Z 	/X¸j is the function defined by
i	i

fj(z)=  fi(z)	if z ∈ Dom(fi)

Let us demonstate that this g indeed satisfies conditions (1) and (2j) for being a morphism in FinPf. For (1), let t ∈T , i ∈ I and uj ∈ U⊥. The set
i	i
g(t) ∩ ⎛⎝   Xj × uj⎞⎠ = g(z) | z ∈ t ∩ fj—1(uj), = g(z) | z ∈ t ∩ f—1(uj)}

is finite since t ∩ f—1(uj) is. This proves that g(t) ∈ Wj⊥. For condition (2j), let
i	i
(xj )j∈I be an element of P . By construction of P , there exists i ∈ I such that
xj ∈ Xi. Therefore,
g—1((xj )j∈I ) ⊆ f—1(xj) ∈T ⊥
j	i	i
since fi satisfies (2j). Thus g is indeed a morphism in FinPf. This shows that FinPf
is complete.
We now prove that FinPf has coequalisers. Let f, g : (X, U ) ⇒ (Y, V) be two morphisms. We first consider the (set-theoretical) quotient
Q1 = Y /R
and q1 : Y → Q1 the corresponding quotient map where R is the smallest equivalence relation on Y such that f (x)Rg(x) for all x ∈ Dom(f ) ∩Dom(g). Then, we consider Q2, the subset of Q1 defined by
Q2 = Q1\	q1(f (x)) | x ∈ Dom(f ) ∩ Dom(g)C  ∪  q1(g(x)) | x ∈ Dom(f )C ∩ Dom(g)
where Dom(f )C and Dom(g)C denote as usual the complements in X of Dom(f ) and Dom(g) respectively. Finally, we consider Q3, the subset of Q2 defined by
Q3 =  a ∈ Q2 | q—1(a) ∈ V⊥,

together with the partial (surjective) function q3 : Y → Q3 given by
q (y)=  q1(y)	if q1(y) ∈ Q3
undefined	if q1(y) ∈/ Q3.
Suppose also that
W = {q3(v) | v ∈ V}⊆ P(Q3)
which induces the finiteness space (Q3, W⊥⊥). By construction, we know that q3 gives rise to a morphism q3 : (Y, V)   /(Q¸ , W⊥⊥) since it obviously satisfies conditions (1) and (2j). This morphism satisfies q3f = q3g. Given a morphism
h : (Y, V)	(/Z¸, T ) such that hf = hg, we can construct a partial function k : Q3	Z/¸
via
k(q (y)) =  h(y)	if y ∈ Dom(h)
undefined	if y ∈/ Dom(h).
This partial function is well-defined since R ⊆ Rh where Rh is the equivalence relation on Y defined by
yRhyj ⇔ h({y})= h({yj})
⇔ h(y)= h(yj) (both being defined) or both h(y) and h(yj) are undefined.
To prove that kq3 = h, the only non-trivial part is to show that for y ∈ Dom(h), q3(y) is defined, i.e., q1(y) ∈ Q3. If q1(y) = q1(f (x)) for some x ∈ Dom(f ) ∩ Dom(g)C, then
yRf (x) ⇒ yRhf (x) ⇒ f (x) ∈ Dom(h)
which is a contradiction. A similar conclusion holds if q1(y) = q1(g(x)) for some
x ∈ Dom(f )C ∩ Dom(g). Thus q1(y) ∈ Q2. Now, we know that
q—1(q1(y)) ⊆ h—1(h(y)) ∈ V⊥
where the first inclusion holds since
q1(yj)= q1(y) ⇒ yjRy ⇒ yjRhy ⇒ h(yj)= h(y).
This proves q1(y) ∈ Q3 and kq3 = h. Moreover, k is the only partial function Q3   /Z¸satisfying this equation. It remains to prove it satisfies condition (2) for being a morphism (Q3, W⊥⊥)   /(Z¸, T ). So let tj ∈T ⊥. We have to show that
k—1(tj)= {a ∈ Q3 | k(a) ∈ tj} = {q3(y) | h(y) ∈ tj} = q3(h—1(tj))
is in W⊥. Let v ∈ V. We obviously have q3(h—1(tj) ∩ v) ⊆ q3(h—1(tj)) ∩ q3(v). Conversely, suppose q3(y1) = q3(y2) with y1 ∈ h—1(tj) and y2 ∈ v. This implies k(q3(y1)) = h(y1) ∈ tj and so k(q3(y2)) is defined and belongs to tj. Hence h(y2) ∈ tj and y2 ∈ h—1(tj). This proves
q3(h—1(tj)) ∩ q3(v)= q3(h—1(tj) ∩ v).

Since h—1(tj) ∩ v is finite, this shows that q3(h—1(tj)) ∈ W⊥.
It now remains to prove the existence of small coproducts in FinPf. Let I be a set and (Xi, Ui) be a finiteness space for each i ∈ I. We consider the disjoint union
i∈I Xi and

W = {ui1 M ··· M uin | i1,..., in ∈ I and uik ∈ Uik for each 1 ≤ k ≤ n}⊆P	Xi	.
i∈I
It is easy to prove that

W⊥ =   uj | uj ∈ U⊥ for each i ∈ I 

and W⊥⊥ = W. So   i∈I Xi, W  is a finiteness space. For each i ∈ I, let
si : (Xi, Ui)	/⎛¸  Xj, W⎞
j∈I
be the canonical injection, which is obviously a morphism in FinPf. Given a finite- ness space (Z, T ) with, for each i ∈ I, a morphism fi : (Xi, Ui)  /(Z¸, T ), we define the partial function g :  i∈I Xi  /Z¸by
g(x )=  fi(xi)	if xi ∈ Dom(fi)
undefined	if xi ∈/ Dom(fi)
for each xi ∈ Xi. This gives a morphism g :	i∈I Xi, W	/(Z¸, T ) since, for each
tj ∈T ⊥,
g—1(tj)=  f—1(tj) ∈ W⊥.
i∈I
Moreover, we have gsi = fi for each i ∈ I and g is the unique such morphism, proving that  i∈I Xi, W is the expected coproduct. So FinPf is cocomplete.  2

Posets as finiteness spaces, pomonoids as finiteness monoids
The goal of this section is to explain how we can see a strict pomonoid as a monoid in FinF, and why this is not the case for a general pomonoid. We then generalize Ribenboim’s construction to the case of monoids in FinF, and even in FinPf. This will give us a better understanding why Ribenboim needs this strictness assumption when defining the ring G(M, R) of Theorem 2.3.
Posets as ﬁniteness spaces
Theorem 4.1 Let (P, ≤) be a poset. Let U be the set of artinian and narrow subsets. Then (P, U ) is a ﬁniteness space.

Proof. This follows from Lemmas 4.2 and 4.3 below.	2
Lemma 4.2 Under the above assumptions, U⊥ is the set of noetherian subsets of
P.
Proof. Let uj ∈ U⊥. Suppose uj is not noetherian. So it has an infinite ascending list m1 < m2 < ··· . Denote the chain {m1, m2,... } by C ⊆ uj. It is evidently artinian and narrow. So C ∈ U . But C ∩ uj = C which is infinite.
Conversely, suppose that uj ⊆ P is noetherian. We must show that for all u ∈ U , we have that u ∩ uj is finite. This will follow from Lemma 2.1:
u ∩ uj is narrow and artinian since it is contained in u.
u ∩ uj is noetherian since it is contained in uj.
2
Lemma 4.3 Under the above assumptions, if V is the set of noetherian subsets of
P, then V⊥ = U.
Proof. Let vj ∈ V⊥. Suppose vj is not narrow. So vj has an infinite discrete subset, call it D. Note that a discrete subset is noetherian and then argue as above. Suppose vj is not artinian. Then it has an infinite descending list m1 > m2 > ··· , which forms a noetherian subset of vj. Again argue as above. This proves V⊥ ⊆ U . Conversely, notice that U ⊆ U⊥⊥ = V⊥.	2

Finiteness monoids
We now want to show that the construction
(P, ≤) '→ (P, U )
of Theorem 4.1 is functorial. Unfortunately, if we consider it from the usual category Pos of posets to any of the categories of finiteness spaces we have considered, this is not the case. Indeed, the inverse image under an order-preserving map of a noetherian subset may be not noetherian. However, the problem disappears if we consider strict maps.
Definition 4.4 If (P, ≤) and (Q, ≤) are two posets, a map f : P   /Q¸is said to be strict if p < pj implies f (p) < f (pj). In particular, it is a morphism of posets. We denote the category of posets and strict maps by StrPos.
It is now easy to check the following result.
Proposition 4.5 There is a functor E : StrPos → FinF deﬁned on objects via the construction of Theorem 4.1 and on arrows via E(f )= f.
Definition 4.6 A ﬁniteness monoid (respectively a partial ﬁniteness monoid) is an internal monoid in FinF (respectively in FinPf), where we consider the monoidal structures of FinF and FinPf described in the beginning of Section 3.2.

We wish to prove that every strict pomonoid induces a finiteness monoid. There is a direct proof of this result, but it is quite grisly. We prefer to use the functorial construction E : StrPos → FinF of Proposition 4.5. For that, we need a further step: We consider in StrPos the symmetric monoidal structure where the tensor product is given by the cartesian product in Pos. Therefore, the inclusion
StrPos ‹→ Pos
is a bijective on objects, (strict) symmetric monoidal functor. With that monoidal structure, we can now say that a strict pomonoid is just an internal monoid in StrPos. Moreover, we have:
Lemma 4.7 The functor E : StrPos → FinF is a strict symmetric monoidal functor.
Proof. It is obvious that the singleton poset {∗} is sent to I = ({∗}, P({∗})). Given two posets (P, ≤) and (Q, ≤), we must show that E(P ) ⊗ E(Q)= E(P ⊗ Q). Both of these finiteness spaces have P × Q as underlying set. The finiteness structure of the former is given by
F(E(P ) ⊗ E(Q)) = {w ⊆ u × v | u, v artinian, narrow subsets of P, Q respectively} while the finiteness structure on the latter is given by
F(E(P ⊗ Q)) = {w ⊆ P × Q | w is artinian and narrow}.
The equality between these two finiteness structures can be proved using the fact that a poset S is artinian and narrow if and only if for each sequence (si)i∈N in S, there exists an infinite sequence n1 < n2 < n3 < ··· such that sn1 ≤ sn2 ≤ sn3 ≤ · · · . This has been stated without proof in [12], but can be easily proved via Lemma 2.1.	2
We thus have the following diagram made of strict symmetric monoidal functors:
StrPos ,˛	/Po¸s
E

  ˛	
˛	/¸

FinF,
/Fi¸nPf ,	FinRel

Denoting Mon(C) for the category of monoids and their morphisms in a monoidal category C, we then get the following theorem.
Theorem 4.8 The functor E induces a functor Mon(E): Mon(StrPos) → Mon(FinF)
from the category of strict pomonoids to the category of ﬁniteness monoids.
Proof. This is an immediate consequence of the general fact that (lax-)monoidal functors take monoids to monoids.	2

Linearizing ﬁniteness spaces and generalizing the Ribenboim construction
Let A be an abelian group and X = (X, U ) a finiteness space. Ehrhard defined in [5] the abelian group A⟨X⟩ as the set
A⟨X⟩ = {f : X → A | supp(f ) ∈ U}

together with pointwise addition. Evidently in the case of a poset (P, ≤) with its finiteness structure as determined by Theorem 4.1, we recover G(P, A). With this in mind, Ribenboim’s construction can now be generalized further. We use in the following theorem a partial finiteness monoid and not a finiteness monoid for two reasons. Firstly, this is more general, bringing in Example 5.3. But the main reason is that the category FinPf, as opposed to FinF, is symmetric monoidal closed, complete and cocomplete, which will turn out to be important properties for the study of Morita theory in future work.
Theorem 4.9 If (M,μ : M ⊗ M → M,η : I → M) is a partial ﬁniteness monoid and R a ring (not necessarily commutative, but with unit), then R⟨M⟩ canonically has the structure of a ring.
Proof. Let us denote M by (M, U ). First, notice that either M is the empty set or
η(∗) is defined. The multiplication in R⟨M⟩ is given by


(f · g)(m)= 
(m1,m2)∈Xm(f,g)
f (m1) · g(m2)

where
Xm(f, g) := {(m1, m2) ∈ M × M | μ(m1, m2)= m and f (m1) /= 0, g(m2) /= 0}.

The fact that Xm(f, g) is finite simply comes from the fact that the multiplication
μ : M ⊗ M → M
satisfies condition (2j) of Lemma 3.2. Moreover, f · g ∈ R⟨M⟩ since
supp(f · g) ⊆ μ(supp(f ) × supp(g)) ∈U 
using the fact that μ satisfies condition (1) of Definition 3.1. The unit of R⟨M⟩ is given by the function e : M → R where e(m) = 1R if m = η(∗) and 0 otherwise. The calculation of the ring axioms is straightforward.	2
In the case where M is Mon(E)(M ) for a strict pomonoid M , we recover the ring G(M, R). Thus we can view the ring associated to an arbitrary partial finiteness monoid as a generalized Ribenboim power series ring.

Examples
This new approach to generalizing the Ribenboim construction gives many addi- tional interesting examples.
Example 5.1 [Puiseux series] A Puiseux series [17,18] with coefficients in the ring
R is a series (with indeterminate T ) of the form
+∞
riT i/n
i≥a
for some integer a ∈ Z, some positive integer n ∈ N \ {0} and where ri ∈ R. With the usual sum and product law, they form the ring of Puiseux series with coefficients in R. We can see this ring as an example of the above construction as follows. For a ∈ Z and n ∈ N \ {0}, we consider the following subset of rational numbers


ua,n
=   i | i ∈ Z,i ≥ a  ⊂ Q.


Then we define U as the down-closure of {ua,n | a ∈ Z,n ∈ N \ {0}} in P(Q), i.e.,
U = ↓ {ua,n | a ∈ Z,n ∈ N \ {0}} ⊂ P(Q).
Let us prove (Q, U ) forms a finiteness space. Let u ∈ U⊥⊥. Suppose there exists an infinite sequence of rational numbers (written in irreducible form) in u
a1 , a2 , a3 ,... 
b1 b2 b3
such that 0 < b1 < b2 < b3 < ··· . Then, using Proposition 1 in [5], there exists an infinite subsequence of this sequence whose elements belong to some common ua,n. But this is clearly impossible. So there exists n ∈ N \ {0} such that any element in u

can be written as  i
for some i ∈ Z. Now, suppose there exists an infinite sequence

of elements in u
i1 , i2 , i3 ,... 

n  n  n
such that i1 > i2 > i3 > ··· . Then, using again Proposition 1 in [5], we can deduce
the existence of an infinite subsequence of this sequence whose elements belong to some common ua,m. Since this is impossible, such a sequence does not exist and we know there exists an a ∈ Z such that u ⊆ ua,n, proving that U⊥⊥ ⊆ U and so (Q, U ) is a finiteness space.
Next, we want to show that (Q, U ) equipped with the classical + and 0 is a monoid in FinPf (actually, even in FinF). The only non-trivial fact is that
+: (Q, U ) ⊗ (Q, U ) 	/(Q¸, U )
satisfies conditions (1) and (2j). Let a, b ∈ Z and n, m ∈ N \ {0}. It is easy to see that
+(ua,n × ub,m) ⊆ uam+bn,nm

proving condition (1). For condition (2j), let c
be a rational number with c ∈ Z

and p ∈ N \ {0}. We need to show that
+—1 ! c " ∩ (u	× u	)=  !  i ,  j " | i ≥ a, j ≥ b and imp + jnp = nmc 


nmc − bnp and so
n  m

a ≤ i ≤ nmc − bnp.
mp

So, i can only take a finite number of values. But for each such i, there is at most
one corresponding j, proving there are only finitely many such	 i ,  j  .
Since ((Q, U ), +, 0) is a monoid in FinPf, we can consider the ring R⟨(Q, U )⟩, which is nothing but the ring of Puiseux series with coefficients in R.
Example 5.2 [Formal power series] Let A bea set (called in this case the alphabet ). Then, let M be the free monoid generated by A. The finiteness space (M, P(M )) has a monoid structure in FinPf (and actually even in FinF) given by the classical monoid structure of M . The only non-trivial part here, is to check that the multiplication
· : (M, P(M )) ⊗ (M, P(M )) 	/(M¸, P(M ))
satisfies condition (2j). This is due to the fact that, since M is freely generated by A, for each m ∈ M , there are only finitely many (m1, m2) ∈ M 2 such that m1 · m2 = m. Then the ring R⟨(M, P(M ))⟩ is called the ring of formal power series with exponents in M and coefficients in R and is constructed as the set of all maps M   /R¸, together with the classical sum and product of formal power series. This example can be generalized to all graded monoids M , i.e., monoids for which every element has only a finite number of distinct factorizations, see [23].
Example 5.3 [Polynomials of degree at most n] Let n be a natural number and X = {0,..., n}. The finiteness space (X, P(X)) has a monoid structure ((X, P(X)), μ, η) in FinPf:
η : ({∗}, P({∗})) 	/(X¸, P(X))
maps ∗ to 0 and
μ : (X, P(X)) ⊗ (X, P(X)) = (X × X, P(X × X)) 	/(X¸, P(X))
is defined by
a + b	if a + b ≤ n
μ(a, b)= 
undefined	if a + b > n.
The corresponding ring R⟨(X, P(X))⟩ is then nothing else than R≤n[T ], the ring of polynomials of degree at most n and coefficients in R. The multiplication is

generated by


(r1T



a) · (r2Tb


 r1r2Ta+b	if a + b ≤ n

0	if a + b > n.
Future work
Differentiation provides important operators on power series rings and a natural question is whether one can differentiate the generalized power series that arise in this paper. Indeed, in the commutative case, the category of linearized finiteness spaces provided one of the first examples of differential categories [2], used in the study of models of differential linear logic [6]. It will be of interest to study dif- ferentiation of these generalized series and the extent to which they fit into the differential category framework.
Laurent series are of great interest for any number of reasons, but one place they arise is in renormalization in quantum field theory [16]. This ring has a Rota-Baxter operator [10] which is used in the Connes-Kreimer approach to renormalization [4]. Guo and Liu [11] subsequently studied when a projection operator on Ribenboim power series is in fact a Rota-Baxter operator. A similar characterization of this operator and its functorial properties in the context of finiteness monoids is an ongoing project.
Finally we mention Morita theory [1]. Two rings are Morita equivalent if their categories of representations are equivalent. This theory generalizes to any number of settings. For example, the Morita theory of pomonoids [14,15] is a well-established field. It is of great interest to determine the extent to which the functorial con- structions presented here relate Morita theory for pomonoids and partial finiteness monoids to Morita theory for rings.

References
F. Anderson and K. Fuller, Rings and categories of modules, Springer-Verlag, (1992).
R. Blute, J.R.B. Cockett and R.A.G. Seely, Differential categories, Math. Structures Comput. Sci. 16,
pp. 1049–1083, (2006).
M. Droste and W. Kuich, Semirings and formal power series, Handbook of Weighted Automata, Springer,
pp. 3–28, (2009).
K. Ebrahimi-Fard and L. Guo, Rota-Baxter algebras in renormalization of perturbative quantum field theory, Fields Inst. Commun. 50, pp. 47–105, (2007).
T. Ehrhard, Finiteness spaces, Math. Structures Comput. Sci. 15, pp. 615–646, (2005).
T. Ehrhard and L. Regnier, The differential lambda-calculus, Theoret. Comput. Sci. 309, pp. 1–41, (2003).
S. Eilenberg, Automata, languages, and machines, Vol. A., Academic Press, (1974).
J.-Y. Girard, Linear logic, Theoret. Comput. Sci. 50, pp. 1–102, (1987).
P.A. Grillet, Algebra, John Wiley & Sons, (1999).

Li Guo, Surveys of modern mathematics volume IV: An introduction to Rota-Baxter algebra,
International Press, (2010).
L. Guo and Z. Liu, Rota-Baxter operators on generalized power series rings, J. Algebra Appl. 8, pp. 557–564, (2009).
G. Higman, Ordering by divisibility in abstract algebras, Proc. London Math. Soc. (3) 2, pp. 326–336, (1952).
W. Hodges, Model theory, Camb. Univ. Press, (2008).
V. Laan, Morita theorems for partially ordered monoids, Proc. Est. Acad. Sci. 60, pp. 221–237, (2011).
V. Laan, On Morita equivalence of partially ordered monoids, Appl. Categ. Structures 22, pp. 137–146, (2014).
M. Marcolli, Feynman motives, World Scientific, (2009).
I. Newton, The method of fluxions and infinite series; with its application to the geometry of curve-lines, (1671), translated from Latin by J. Colson, London: Henry Woodfall, (1736).
V. Puiseux, Recherches sur les fonctions alg´ebriques, J. Math. Pures Appl. (1) 15, pp. 365–480, (1850).
P. Ribenboim, Rings of generalized power series: Nilpotent elements, Abh. Math. Semin. Univ. Hambg.
61, pp. 15–3, (1991).
P. Ribenboim, Noetherian rings of generalized power series, J. Pure Appl. Algebra 79, pp. 293–312, (1992).
P. Ribenboim, Rings of generalized power series II: Units and zero-divisors, J. Algebra 168, pp. 71–89, (1994).
J. Rutten, Behavioural differential equations: A coinductive calculus of streams, automata, and power series, Theoret. Comput. Sci. 308, pp. 1–53, (2003).
J. Sakarovitch, Kleene’s theorem revisited, Lecture Notes in Comput. Sci. 281, pp. 39–50, (1987).
