

Electronic Notes in Theoretical Computer Science 270 (2) (2011) 191–207
www.elsevier.com/locate/entcs

Symmetry and Composition in Probabilistic Theories
Alexander Wilce
Department of Mathematical Sciences Susquehanna University Selinsgrove, PA, USA

Abstract
The past decade has seen a remarkable resurgence of the old programme of finding more or less a priori axioms for the mathematical framework of quantum mechanics. The new impetus comes largely from quantum information theory; in contrast to work in the older tradition, which tended to concentrate on structural features of individual quantum systems, the newer work is marked by an emphasis on systems in interaction. Within this newer work, one can discern two distinct approaches: one is “top-down”, and attempts to capture in category-theoretic terms what is distinctive about quantum information processing. The other is “bottom up”, attempting to construct non-classical models and theories by hand, as it were, and then characterizing those features that mark out quantum-like behavior. This paper blends these approaches. We present a constructive, bottom-up recipe for building probabilistic theories having strong symmetry properties, using as data any uniform enlargement of the symmetric group S(E) of any set, to a
larger group G(E). Subject to some natural conditions, our construction leads to a monoidal category of fully symmetric test spaces, in which the monoidal product is “non-signaling”.
Keywords: Symmetry; General probabilistic theories; symmetric monoidal categories.


Introduction
After a long hiatus, there has been a recent resurgence of interest in axiomatic re- constructions or characterizations of quantum mechanics in probabilistic, or more broadly, informatic, terms. The new impetus comes largely from quantum infor- mation theory, and is marked by an emphasis, not on isolated physical systems and their properties, but on systems in interaction. Accordingly, the current focus is on characterizing (mainly, finite-dimensional) QM within a more general frame- work of abstract physical or probabilistic theories equipped with some device or devices for defining composite systems. At present, one can discern two approaches to this. The first (e.g., [1,2,3,14]) is “top-down”: one begins with a category of

1 Email: wilce@susqu.edu

1571-0661 © 2011 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2011.01.031

abstract physical systems, with arrows representing physical processes. This is gen- erally assumed to be at least a symmetric monoidal category (and more usually, compact or dagger compact closed). In other words, it is assumed that there is a single, preferred method for composing systems “in parallel”. The second approach (e.g., [5,6,7,8,4,9,10]), more explicitly probabilistic, is “bottom-up”: one first defines rather concretely what one means by an individual probabilistic model, and then introduces devices for combining and manipulating these. In place of a single, canon- ical tensor product, this approach provides a spectrum of possible “non-signaling” tensor products, bounded by a minimal product, allowing no entanglement between states, but arbitrary entanglement between effects, and a maximal product, allow- ing arbitrarily entangled states but no entangled effects. While this is adequate for discussing certain information-processing protocols (e.g., teleportation [6,7]), if we are aiming at an axiomatic reconstruction or characterization of the usual appara- tus of quantum mechanics, we need a unique tensor product, and one, moreover, that affords entanglement both between states and between effects. On the other hand, as the existence and uniqueness of such a product is presumably part of what one wants to explain, simply postulating it is ultimately unsatisfactory: one should much prefer to construct the tensor product in some natural way.
This paper makes takes a step in this direction. A conspicuous feature of both quantum and classical systems that has not been stressed in either approach is symmetry. Both classical and quantum systems are homogeneous in a strong sense: all pure states are alike, all (maximally informative) measurements are alike, and all outcomes of such a measurement are alike. There is a standard construction [16] whereby abstract probabilistic models having this same high degree of symmetry can by generated from a suitable extension of the symmetric group of a finite set E (representing the outcome-set of a basic experiment) to a larger group. Where this construction can be made uniformly (that is, functorially), it leads to a probabilistic theory having a natural product structure. Both classical and quantum theory can be recovered in this way. However, as illustrated by a pair of simple examples, the tensor product arising from this construction need not satisfy all of the desiderata for a product in the sense of [6,7,8]. In particular, there is a tension between requiring them to support arbitrary product states and arbitrary product measurements. Subject to a further condition (here unimaginatively termed “reasonableness”), we are led to a symmetric monoidal category in which composite systems admit product measurements, and in which bipartite states are non-signaling.

Probabilistic Models and Theories
There is a more or less standard mathematical framework for generalized probability theory, first sketched by Mackey [12] and later elaborated, modified, and in some instances, rediscovered, by many authors, including Ludwig, Davies and Lewis, Araki, Gudder, Foulis and Randall, Hardy, and D’Ariano among many others. The range of stylistic variation among these various formulations is just wide enough to make it prudent to spell out in a little detail the particular variant (one might say,

dialect) in which I’ll proceed. In the interest of brevity, I consider here only the discrete, finite-dimensional version of this framework.
In the language of [6,7], a finite-dimensional abstract state space is a pair (A, u) where A is a finite-dimensional ordered real vector space with positive cone A+, and u ∈ A∗ is a distinguished order unit, i.e., a functional on A that is strictly positive on A. The set ΩA := {α ∈ A|u(α)= 1} is the normalized state space. An effect on A is a positive functional a ∈ A∗ with 0 ≤ a ≤ u pointwise on Ω; we regard a(α) as the probability of a occurring when the state is α. Accordingly, we may define a discrete observable on A to be a set E ⊆ V ∗ of effects with  a∈E a = u. If A is the self-adjoint part of a finite-dimensional complex C∗-algebra, i.e., a ∗- subalgebra of the algebra Md of d × d complex matrices, ordered as usual, and with u(α)= tr(α)/d, then we may call A a (finite-dimensional) quantum state space.
For purposes of constructing such abstract models, it is often helpful (and clar- ifying) to introduce the following more operational apparatus, developed originally by Foulis and Randall in the service of quantum logic (see, e.g., [9]).
Definition 2.1 A test space is a collection A of non-empty sets, called tests, un- derstood as the outcome-sets of various “measurements”. The set X = A of all outcomes of all tests is the outcome space for A. A probability weight on A is a mapping α : X → [0, 1] with  x∈E α(x) = 1 for all E ∈ A. We write Ω(A) for the convex set of all probability weights on A.
Definition 2.2 A probabilistic model is a pair (A, Γ), where A is a test space and Γ ⊆ Ω(A) is a closed, compact, outcome-separating convex set of probability weights on A.
As a default, we can always take Γ = Ω(A). When we speak of a test space as a model, this is what we have in mind. Given a model (A, Γ), Let V = V (A, Γ) be the linear span of Γ in RX , ordered by the cone generated by Γ. Letting u ∈ V ∗ be the order unit corresponding to Ω (that is, the unique functional with u(α)=1 for all α ∈ Γ), the pair (V, u) is then an abstract state space in the sense of [5,6]. Note that every outcome x ∈ X yields an evaluation functional. Note that every outcome x ∈ X induces a positive linear functional fx ∈ V ∗, given by fx(ω) = α(x) for all α ∈ Γ. We have  x∈E fx = u for all E ∈ A, so x '→ fx is a discrete observable on V , in the sense of [5]. (Thus, one can for many purposes regard a probabilistic model as an abstract state space equipped with a distinguished family of observables.)
From this point forward, I make the standing assumptions that (i) every test space A is locally ﬁnite – that is, every test E ∈ A is a finite set, and (ii) for every model (A, Γ), the space V (A, Γ) is finite-dimensional.
Example 2.3 Classical and Quantum Models: Let A = {E} where E is a finite set: then Ω(A) is the simplex Δ(E) of probability weights on E. If H is a Hilbert space, the associated quantum test space is the set F(H) of orthonormal bases of
H. Gleason’s Theorem identifies Ω(F(H)) as the space ΩH of density operator on
H.
Grids and Graphs: Here are two further examples that will figure importantly

in the sequel. Fixing a set E, let Gri(E), the grid test space on E, be the set of rows and columns of E × E, i.e.,
Gr(E)= {{x}× E|x ∈ E}∪ {E × {y}|y ∈ E}.
Notice that a state on Gr(E) is essentially a |E|-by-|E| doubly stochastic matrix. A related test space is the space
Gr(E)∗ := {Γf : f ∈ S(E)}
of graphs Γf of bijections f : E → E. Equivalently, Gr(E)∗ is the set of transversals of Gr(E), i.e., subsets of E × E meeting each row and each column exactly once (or, if we prefer, the space of supports of permutation matrices). Note that every test Γf ∈ Gr(E)∗ induces a dispersion-free (that is, binary-valued) state on Gr(E), and that every state on Gr(E) is a convex combination of these. Similarly, each row and each column of A induces a dispersion-free on Gr(E)∗. One can show that every state on Gr(E)∗ is a convex combination of such row and column states.
Products of Test Spaces
If A and B are test spaces, let A × B = {E × F|E ∈ A,F ∈ B} be the space of
product tests. A state ω on A × B is non-signaling if its marginal states
ω1(x) := Σ ω(x, y) and ω2(y) := Σ ω(x, y)
y∈F	x∈E
are independent of E ∈ A and F ∈ B, respectively. If α ∈ Ω(A) and β ∈ Ω(B), the
product state
(α ⊗ β)(x, y) := α(x)β(y)
is obviously non-signaling, as is any mixture of product states. In general, however, there will exist entangled non-signaling states that are not mixtures of product states [11,5].
Definition 2.4 A tensor product of two test spaces A and B is a test space C plus an embedding
A × B → C
such that
the restrictions of states on C to A × B are non-signaling, and
every product state belongs to Ω(C).
Note that, by allowing C to be larger than A × B, we allow for the possibility of “entangled” measurements, as well as entangled states. By way of illustration, if H1 and H2 are complex Hilbert spaces, the test space F(H1 ⊗ H2) is a product of the test spaces F(H1) and F(H2), under the embedding (x, y) '→ x ⊗ y.
A minimal product of test spaces, introduced by Foulis and Randall [9], is defined as follows. Given a test E ∈ A and an E-indexed family of tests Fx ∈ B, the set x∈E{x} × Fx represents the outcome-set of a two-stage test, in which one first performs the test E and then, upon securing x ∈ E, performs the test Fx. Let

−→
−→AB denote the collection of all such two-stage tests, noting that A×B ⊆AB, and
also that these two test spaces have the same outcome-space, namely, X(A)×X(B).
→−	 
Now let AB denote the set of two-stage tests of the form	y∈F Ey ×{y} with F ∈ B
−→	→−
and Ey ∈ A for every y ∈ F . The Foulis-Randall product is AB :=AB ∪ AB. One
can show that the state space Ω(AB) is exactly the set of non-signaling states on A × B. This product affords us no “entangled outcomes”, as outcomes of AB are simply ordered pairs (x, y) of outcomes x ∈ X(A) and y ∈ X(B). On the other hand, the easiest way to show that states on a test space C ⊇ A × B are non- signaling is to show that C contains all two-stage tests, i.e., that AB ⊆ C. I make use of this observation in the proof of Theorem 5.7 in Section 5.
Remark 2.5 It is tempting to require, as a matter of definition, that states on a tensor product C of test spaces A and B be determined by their restrictions to A×B (a condition Barrett [8] calls the global state assumption). When this condition is satisfied, conditions (i) and (ii) above guarantee that Ω(C) will be a tensor product, in the sense of [5,6], of the state spaces of A and B, and, in particular, that V (C) will be linearly isomorphic to V (A) ⊗V (B). However, as noted by Barrett (see also [11]), this assumption is quite strong, being violated in real and quaternionic QM. For purposes of this paper, I prefer to keep to the more permissive definition above.
Maps between test spaces
One can organize test spaces into a category in several different ways (for a more complete discussion, see [17]). An event of a test space A is a subset of a test. That is, A ⊆ X :=  A is an event iff there exits some E ∈ A with A ⊆ E. We write E (A) for the set of all events of A. Note that the empty set is an event, as is each test.
we define the probability of a state A in state α ∈ Ω(A) by α(A)= Σx∈A ω(x). (Indeed, if A is irredundant, the tests are exactly the maximal events). Naturally,
Definition 2.6 Events A, B ∈ E (A are orthogonal, written A ⊥ B, if they are disjoint and their union is an event. A and B are complementary iff they partition a test, i.e., A ⊥ B and A∪B ∈ A. If A and B are both complementary to some event C, we say that A and B are perspective, with axis C, writing A ∼ B or A ∼C B. Note that perspective events have the same probability in every state. Note, too, that any two tests are perspective, with axis the empty event.
Definition 2.7 A test space morphism from a test space A to a test space B is a set-valued mapping φ : X(A) → E (B) that preserves event-hood, orthogonality and perspectivity, as follows: for all events A, B ∈ E (A),
φ(A) :=  a∈A φ(a) is an event of B,
A ⊥ B implies φ(A) ⊥ φ(B), and
A ∼ B implies φ(A) ∼ φ(B).
It is straightforward that the composition of two morphisms (defined in the obvious way) is again a morphism, so we may speak of the category of test spaces

and morphisms. Denote this category by Tesp.
Where a morphism φ : A → B has the form φ({x}) = f (x) for a function f : X(A) → X(B), we routinely conflate φ and f , speaking of the latter also as an morphism.

Connections with Quantum Logic
In the quantum-logical approach to generalized probability theory, one began with an orthocomplemented poset – usually, but not always, an orthomodular lattice or poset – of “propositions”, treating states as probability measures on this structure. Test spaces provide (indeed, were invented in order to provide) a natural semantics for this approach [FR80]. Perspectivity is obviously a symmetric and reflexive, but in general not a transitive, relation on events. On the other hand, in a quantum test space F(H), events (that is, orthonormal subsets of H) are complementary iff they span orthogonal subspaces; hence, events are perspective iff they span the same subspace. In this case, then, perspectivity is an equivalence relation, and the quotient set E/ ∼ can be identified with the lattice L(H) of projection operators on H.
Definition 2.8 A test space A is algebraic iff perspective events in E (A) have ex- actly the same set of complementary events – that is, if A ∼ B, then an event C is complementary to A iff it is complementary to B.
It follows that if A is algebraic, ∼ is an equivalence relation on E . We denote the equivalence class of A ∈ E (A) under perspectivity by p(A); this is called the proposition associated with A. One can show that the quotient set E/ ∼ hosts a well-defined, associative partial binary operation defined by
p(A) ⊕ p(B) = p(A ∪ B)
where A and B are complementary events. Equipped with this partial sum, E (A)/ ∼ is an orthoalgebra, called the logic of A, and denoted Π(A). This carries a natural partial order, given by p(A) ≤ p(B) iff ∃C with p(B) = p(A) ⊕ p(C); this order is orthocomplemented by p(A)j := p(C) where C is any event complementary to
C. Every orthoalgebra can be represented (canonically, though not uniquely) as the logic of a suitable test space. A morphism φ : A → B between algebraic test spaces induces, in an obvious way (and in an obvious sense) an orthoalgebra homomorphism Π(φ): Π(A) → Π(B), one can regard Π as a functor from AlgTesp to the category of orthoalgebras and OA-homomorphisms.
Subject to various more-or-less reasonable (or at any rate, intelligible) con- straints on the combinatorial structure of A, one can show that Π(A) is variously an orthomodular poset, an orthomodular lattice, or a complete OML. Unfortunately, it seems to be difficult to motivate algebraicity on operational grounds. Therefore, it is of interest to find other, more transparent conditions that imply algebraicity. One such condition is discussed in Section 5 below.

Models with Symmetry
Let G be a group. A G-test space is a test space A such that X = A carries a G action, with gE ∈ A for all (g, E) ∈ G×A (so G acts by symmetries of A). A is fully G-symmetric [15] iff (i) all tests have the same cardinality, and (ii) any bijection f : E → F between tests E, F ∈ A is implemented by an element of G, in the sense that f (x)= gx for all x ∈ E. Where this group element g is uniquely determined, we say that A is strongly G-symmetric.
Example 3.1 Trivially, a classical test space is strongly symmetric under S(E). The test space of frames of H is strongly, symmetric under the unitary group U (H) of H. The space FP (H) of projective frames, i.e, maximal families of rank-one projections on H, is fully but not strongly U (H)-symmetric, as a bijection f : E → F between projective frames determines a unitary only up to a choice of a phase for each x ∈ E. Both Gr(E) and Gr(E)∗ are fully symmetric: the former under the subgroup of S(E × E) generated by row shifts, column shifts and transpose; the latter under row and column shifts alone (i.e., S(E) × S(E) acting by (σ, τ )(x, y)= (σx, τy).)
As a rule, highly symmetric mathematical objects can be reconstructed from knowledge of their symmetries. Fully symmetric test spaces are no exception:
Basic Construction
Let H be a group, and let E be an H-set, that is, a set upon which H acts. One might think of E as representing a prototypical experiment, singled out for reference, and H as a preferred group of symmetries of E. Say that H acts fully on E iff the action H → S(E) is surjective, so that every permutation of E is implemented by some h ∈ H. Note that, in particular, E is a transitive H-set, so E  H/Hxo , where Hxo is the stabilizer of any chosen base-point xo ∈ E. Now, fixing xo, let G be a group extending H, in the sense that H ≤ G, and let K ≤ G with
K ∩ H = Hxo .
Let X := X(G, H, K) = G/K, understood as a G-set; let φ : E → X be given by φ(x) = hK where x = hxo ∈ E. Condition (1) guarantees that φ is a well- defined, H-equivariant injection. Henceforth, we identify E with its image under φ, understanding E as an H-invariant subset of X. Finally, let A = A(G, H, K) be the orbit of the set E ⊆ X under the action of G, i.e.,
A(G, H, K)= {gE|g ∈ G}.
Note that A = X. To see that A is fully G-symmetric, let f : gE → gjE be any bijection between two tests in A. Then (gj)—1 ◦ f ◦ g : E → E defines a permutation of E; hence, there is some h ∈ H with (gj)—1(f (gx)) = hx for every x ∈ E, whence, f (y)= gjhg—1y for every y ∈ gE.
Remark 3.2 (1) Given G, H and K as above, we can deﬁne E = H/(H ∩ K). Thus, in principle the construction depends only on purely group-theoretic

data: a group G and a pair of subgroups H, K ≤ G.
Note that, in the foregoing construction, we made no real use of the fact that H acts fully on E: any transitive action would have done as well. We will make no use here of this extra generality, but it’s worth bearing in mind its availability.
Given a fully symmetric test space A, constructed as above from G, H and K, let E ∈ A and let F (E) be the subgroup of G fixing E pointwise. It’s easy to see that H ⊆ N (F (A)), the normalizer of F (E) in G. Setting Gj = N (F (E))/F (E), Hj = H/F (E) and Kj = (N (F (E)) ∩ K)/F (E), we obtain a new test space Aj, not only fully but strongly symmetric under Gj.
We call a model (A, Γ) fully symmetric (under G) iff A is fully symmetric, Γ is invariant under G’s natural action on RX , and G acts transitively on the extreme points of Γ. Note that if A is a fully symmetric G-test space and αo is a chosen state in Ω(A), we obtain a fully symmetric model by taking Γ to be the convex hull of the orbit of αo under G. In all four cases considered above, the full state space is invariant, and extreme states are permuted transitively, so these models are already fully symmetric.

3.1	Linear Representations
That it be fully symmetric does not, by itself, guarantee that a model will be very interesting. In particular, a fully symmetric test space need not have very many states. As an example, consider the test space {{a, b}, {b, c}, {c, a}}: this is obviously fully symmetric under the group S3, but has (accordingly!) only one state, namely, α(a)= α(b)= α(c)= 1/2. On the other hand, if a fully symmetric test space is endowed with a rich state space, good things follow. Let A be a fully G-symmetric test space, G a compact group. Fixing an outcome x ∈ X, we have a surjection G '→ X =  A given by g '→ gxo, and hence an embedding
Ω(A) → C(G)
of the state space of A in the algebra of continuous real-valued functions on G, given by ω '→ ω(g) := ω(gxo). One easily verifies that the cone V+, thus embedded, is closed under convolution; hence, we may regard V as a sub-algebra of C[G]. This gives us an invariant inner product on V , which is positive in the sense that
⊆α, β⟩ ≥ 0 for all α, β ∈ V+. Using this, one can show [13] that if a fully-G- symmetric test space A has a separating, finite-dimensional state space, then V ∗ can be endowed with a G-invariant inner product, positive on the positive cone of V , and A can be represented as an invariant family of orthonormal subsets of V ∗.
Fully Symmetric Theories
If our goal is to construct and study, not individual probabilistic models, but prob- abilistic theories – classes, or better, categories, of such models – then we might consider uniformizing the construction H, K ≤ G ⇒ A(G, H, K) described above.

In this section, I consider one way of doing this. In the interest of simplicity, I consider only the case in which H is the symmetric group of a typical test.
In order to make the standard construction of Section 2 in a uniform way, we should like to associate to every finite set A a group G(A) and a fixed embedding jA : S(A) → G(A), in such a way that
A ⊆ B ⇒ G(A) ≤ G(B) and G(A) ∩ S(B)= S(A).
This suggests treating S and G as functors from an appropriate category of sets into the category of groups, and j : A '→ jA as a natural transformation from S to G. Now, the assignment A '→ S(A) of a set to its symmetric group is not the object part of any sensible functor from the category Set0 of sets and arbitrary mappings to the category Grp of groups and homomorphisms, but it is functorial in the category Sinj0 of sets and injective mappings: if f : A → B is an injection, we have a natural homomorphism S(f ): S(A) → S(B) given by
S(f )(σ)(b)= ⎧⎨ f (σ(a)) b = f (a)
⎩	b	b /∈ ran(f )
Note that where i : A ⊆ B is an inclusion, we have S(i)(σ)(a)= σa for all a ∈ A and
S(i)(σ)b = b for every b ∈ B \ A, i.e., S(i) is the standard embedding of S(A) as a subgroup of S(B). I’ll routinely identify S(A) with its image under this embedding, writing S(A) ≤ S(B).
Suppose, now, that j : S → G is a natural transformation from S to a functor G : Sinj0 → Grp, so that we have for every object A ∈ Sinj0, a homomorphism jA : S(A) → G(A), such that for every injection f : A → B, the square
(2)	S(A)   jA	 G (A)


S(f )
J 
G(f )
J 


commutes - i.e., we have
S(B)
 G (B)
jB

G(f ) ◦ jA = jB ◦ S(f ).
In order to guarantee that condition (1) is satisfied, we make the following
Definition 4.1 An extension of the functor S : Sinj0 → Grp is a pair (G, j) where G is a functor from Sinj0 to Grp, j : S → G is a natural transformation from S to G, and, for every injective mapping f : A → B,
G(f ): G(A) → G(B) is injective, and
the square (2) is a pull-back.
Where i : A ⊆ B is an inclusion mapping, we have a canonical embedding G(i): G(A) → G(B); identifying G(A) with its image under G(i), I’ll regard G(A) as a subgroup of G(B). I’ll also identify S(A) with its image under jA, writing S(A) ≤ G(A). With these conventions, we have

Lemma 4.2 Let A ⊆ B. Then G(A) ∩ S(B)= S(A).
Proof. Let i : A ⊆ B be the inclusion mapping. The left hand side above is more exactly G(A) ∩S(B)= G(i)(G(A)) ∩jB(S(B)); the right hand side is G(i)jA(S(A)). Since G(i) ◦ jA = jB ◦ S(i), the right hand side is contained in the left. Let’s verify this explicitly. If σ ∈ S(A), we have
S(A)= G(i)jA(S(A)) = jBS(i)(S(A)) ⊆ jB(S(B)).

We also have

G(i)jA(σ) ∈ G(i)jA(S(A)) = G(i)G(A)= G(A) ≤ G(B).

So S(A) ⊆ S(B) ∩ G(A). Conversely, let g ∈ S(B) ∩ G(A). Then g = jB(σ) for some σ ∈ S(B). Now g ∈ G(A), so g = G(i)(gj) for gj ∈ G(A). Since the square is a pullback, there exists σj ∈ S(A) with σ = G(i)(σj) – i.e., σj = σ – and jA(σ)= gj. So, by commutativity of the square, g = G(i)jA(σ) ∈ S(A) ≤ G(B).	2
Now fix a base point a ∈ A, and set K(A, a)= G(A\ao). The Basic Construction of section 3 yields a fully G(A)-symmetric test space
G(A) := A(G(A), S(A), K(A, a))
with outcome-space X(A, a) := G(A)/K(A, a), and a canonical, S(A)-equivariant embedding A → X(A), with G(A) the orbit of A in X(A), so that each test has the form gA for some g ∈ G(A). It is not difficult to show that every injection f : A → B induces an injective map X(f ): X(A) → X(B) given by
X(f )(ga)= G(f )(g)f (a)
with the choice of base-point a irrelevant. Thus, we can regard X as a functor from Sinj0 to Sinj0. It should be noted that, at this level of generality, X(f ) need not be a test-space morphism from G(A) to G(B) (though this will be the case if (G, j) satisfies an additional condition, discussed below in Section 6). We can nonetheless define a category, which I’ll call G − Tesp, having as its objects test spaces of the form G(A), and as its morphisms, composites of maps of the form X(f ) and symmetries g ∈ G(A) – so that, for instance, given injections f1 : A → B, f2 : B → C, and group elements g ∈ G(A),h ∈ G(B) and k ∈ G(C), k ◦ X(f2) ◦ h ◦ X(f1) ◦ g : X(A) → X(C) is a G − Tesp morphism. By the theory associated with an extension (G, j), I’ll mean this category.
Note that we already have a candidate for a canonical “tensor product” in G −
Tesp, namely,
G(A) ⊗ G(B) := G(A × B).
However, as we’ll now see, without some further restrictions on the extension (G, j), this may exhibit some rather pathological (or, depending on one’s taste, rather interesting) behavior.
Three Examples
We can regard the passage from S to G, and the associated passage from Sinj0
to G − Tesp, as a kind of abstract quantization rule. Indeed, there is a natural

functor U : Sinj0 → Grp assigning to each (finite) set A the unitary group U (A) of the finite-dimensional Hilbert space H(A) := EA, and to each injection f : E → F the obvious unitary embedding uf : H(A) → H(B) arising from the direct-sum decomposition H(B) = H(ran(f )) ⊕ H(B \ ran(f )). Now define U (f ) : U (A) → U (B) by U (f )(g) = uf gu∗ ⊕ 1B—ranf , where 1B—ranf is the identity operator on H(B \ ran(f )). It is easy to check that U extends S in the desired way (noting that a permutation matrix is a special kind of unitary). Applying the recipe above, we find that X(A) is the unit sphere and U(A)= F(H(A)), the quantum test space of frames, of H(A). Suppose now that u : H(A) → H(B) is a unitary embedding. Let Bj = u(A) ⊆ X(B), and let g ∈ U (B) be any unitary with gBj = B; then we have a map g ◦ u|A : A → B, and hence, a unitary embedding X(gu|A); since this agrees with g ◦ u on A, an orthonormal basis for H(A), these two unitary maps are the same; hence, u = g—1X(guA). Thus, the category U − Tesp is just the category of finite-dimensional complex Hilbert spaces (more exactly, but irrelevantly: such spaces with preferred orthonormal bases), and unitary embeddings. Note that the product U(E) ⊗ U(F ) := U(E × F ) is canonically isomorphic to the test space of frames of H(E) ⊗ H(F ).
We now consider the “grid” and “graph” test spaces of Section 2 in this light.
Example 4.3
Grids Let G(A) be the subgroup of S(A × A) generated by S(A) × S(A), plus transpose; and let jA(σ)= (σ, idA). For f : A → B, let G(f ): G(A) → G(B) be the homomorphism determined by G(f )(σ1, σ2) = (S(f )(σ1), σ2) and G(τ ) = τ , where τ ∈ S(A × A) is transposition. One can work out that, for this extension, X(A) = A × A (up to choice of base-point), and G(A) = Gr(A), the grid test space considered above. Thus, we have
Gr(A) ⊗ Gr(A)= Gr(A × B).
Observe that Gr(A × B) has arbitrary product states (essentially, because the cartesian product of two permutations is a permutation), but lacks arbitrary prod- uct tests: row-times-row and column-times-column tests are well-defined members of Gr(A × B), but if A is a row of Gr(A) and B, a column, then the row-times- column set E × F is neither a row nor a column of E × F (it is, rather, a block sub-grid of the latter). Moreover, states on Gr(A × B) are typically signaling (essentially, because there is a correlation between which measurements on the second factor are available, depending upon which measurement is made on the first factor.) So this is not a product, in the sense of Section 2, at all!
Graphs Let G(A) = S(A) × S(A), and embed S(A) in G(A) by jA(σ)(σ, σ). If
f : A → B is an injection, let G(f )= S(f ) × S(f ) Then G(E)= Gr(E)∗, and
Gr(E)∗ ⊗ Gr(F )∗ = Gr(E × F )∗.
Let λ : (E × F )2 → E2 × F 2 be the map λ : ((x, y), (u, v)) → ((x, u), (y, v)): one can check that λ(Γf × Γg) = Γf×g for f, g ∈ Gr(E)∗, so we have a natural mapping λ : Gr(E)∗ × Gr(F )∗ → Gr(E × F )∗. States on Gr(E × F )∗ pull back along λ to non-signaling states on Gr(E)∗ × Gr(F )∗. So this is closer to being a

product according to our previous definition. However, there is still a problem: arbitrary products of states on Gr(E)∗ need not be states on Gr(E × F )∗: the product of a row state and a column state on Gr(E)∗, for instance, will not be a convex combination of row or column states on Gr(E × F )∗, and hence, will not be a state on the latter.
The moral seems to be that, for fully symmetric theories, there is a certain ten- sion between the demand for arbitrary product states, and the demand for arbitrary product measurements.
Regular Extensions
It is easily checked that, if σ ∈ S(A), then S(σ)(τ ) = σ—1τσ for all τ ∈ S(A). Regarding S(A) ≤ G(A), taken as acting on X(A), and applying the functor X to σ|A : A → A, we have a test space morphism X(σ|A): X(A) → X(A): if k ∈ G(A) and a ∈ A, we have
X(σ|A)(ka)= G(σ|A)(k)σa.
Applying this to k = τ ∈ S(A), we have
X(σ|A)(τa)= G(σA)(τ )σa = S(σ|A)(τ )σa = στσ—1σa = στa.
Thus, X(σ|A)x = σx for all x = τa ∈ A. One would surely like to conclude that X(σ|A)= σ. In order to guarantee this, we advance the following, not unreasonable, condition on (G, j):
Definition 4.4 An extension (G, j) is regular iff for all finite sets A, and for all σ ∈ G(A) with σA = A – that is, for all σ in the stabilizer, G(A)A, of A in G(A) – we have G(σ)(g)= σgσ—1 for all g ∈ G.
It is easy to check that the unitary extension (U, j) and the “graph” extension G(A) = §(A) × S(A), jA(σ) = (σ, σ) are regular. The “grid” extension, in which G(A) is the subgroup of S(A × A) generated by G(A) × G(A) and transposition, with jA(σ)= (σ, idA), is not regular.
Lemma 4.5 Let (G, j) be a regular extension. Then, for every ﬁnite set A, X(σ|A)x = σx for every σ ∈ G(A)A and every x ∈ X(A).
Proof. We have
X(σ|A)(ka)= G(σA)(k)σa = σkσ—1σa = ka
for all k ∈ G and any a ∈ A – hence, X(σ|A)x = σx for all σ ∈ G(A)A and all
x ∈ X(A).	2
This allows us to define, for any tests Aj ∈ G(A), B ∈ G(B), and any bijection
f : Aj → Bj, a test-space morphism XA(f ): X(A) → X(B) by
XA(f ) = hX(h—1 ◦ f ◦ g)g—1
where g ∈ G(A) with gA = Aj and h ∈ G(B) with hB = Bj (and where, of course, inside the scope of X, h—1 and g represent, respectively, g|A and h—1|B′ , respec- tively). The claim is that this is well-defined, i.e., independent of the particular

choice of g and h. Indeed, suppose f : A → Bj ∈ G(B). If h1, h2 are elements of
G(B) with h1B = h2B = Bj, then h—1h1|B = σ ∈ S(B), whence, h1 = h2σ, and we

have

h1X(h—1f )= h2σX(σ—1 ◦ h—1 ◦ f )= h2σX(σ—1) ◦ X(h2 ◦ f )
= h2σ—1σX(h2 ◦ f )= h2X(h2 ◦ f ).

A similar computation shows that XA is independent of g : A → Aj.
Once we have XA well-defined, it follows that it behaves properly with respect
to composition:
Lemma 4.6 If (G, j) is regular, then for all f1 : Aj → Bj ∈ G(B), f2 : B → Cj ∈
G(C),
XB(f2) ◦ XA(f1)= XA(f2 ◦ f1).
C	B	B
Proof. Let g ∈ G(A),h ∈ G(B),k ∈ G(C) with gA = Aj, hB = Bj and kC = Cj, respectively; then we have
XB(f2) ◦ XA(f1)= kX(k—1 ◦ f2 ◦ h)h—1hX(h—1 ◦ f ◦ g)
C	B
= kX(k—1 ◦ f2 ◦ h) ◦ X(h—1 ◦ f ◦ g)gj
= kX(k—1 ◦ f2 ◦ f1 ◦ g)g—1 = XA(f2 ◦ f1).	2
Notation: Where f : Aj → Ajj with Aj, Ajj ∈ G(A), I’ll write XA(f ) for XA(f ).
Lemma 4.7 Let (G, j) be regular. Then, for all g ∈ G(A), Aj ∈ G(A) and all
x ∈ X(A),
XA(g|A′ )x = gx.
Proof. Let g|A′ : Aj → Ajj ∈ G(A). Let h, k ∈ G(A) with kA = Aj and hA = Ajj. Then h—1gh|A ∈ S(A), whence, for every x ∈ X(A),
XA(g|A′ )x = hX(h	◦ g|A′ ◦ h)h	x
= hX((h—1 ◦ g ◦ h)|A)h—1x
= h(h—1 ◦ g ◦ h)h—1x = gx.	2
Combining Lemmas 4.6 and 4.7, we see that, for a regular extension (G, j), every
G − Tesp morphisms G(A) → G(B) has the form XA(f ) for some f : Aj → Bj,
Aj ∈ G(A), Bj ∈ G(B).
Reasonable Extensions
The functor S : Sinj0 → Grp has the very nice, and very reasonable, feature that if A and B are disjoint sets, then S(A) and S(B), as embedded in S(A ∪ B), are pairwise-commuting, in the sense that if σ ∈ S(A) and τ ∈ S(B), then στ = τσ in G(A ∪ B).
Definition 5.1 An extension (G, j) of S is reasonable iff, for all disjoint sets A and
B, G(A) and G(B) commute pairwise in G(A ∪ B).

Equivalently, (G, j) is reasonable iff there exists a natural homomorphism φ :
G(A) × G(B) → G(A ∪ B) such that the diagram
G(A) × G(B)
¸¸˛
,,,,,,	¸¸¸¸¸
G(A) ¸¸¸	φ	,, G(B)
¸¸	,,
z_J 
G(A ∪ B)
commutes (where the maps G(A), G(B) → G(A)×G(B) are the canonical injections
a '→ (a, e) and b '→ (e, b)).
The theories arising from reasonable extensions are particularly well-behaved, owing to the following
Lemma 5.2 If (G, j) is a reasonable extension of S, then for any ﬁnite sets A ⊆ B, G(A) ﬁxes every point of X(B \ A).
Proof. Choosing a base-point b ∈ B \ A, we can model X(B) as G(B)/G(B \ b). As G(A) ≤ G(B \ b), we have gb = b for every g ∈ G(A). We also have X(B \ A)= G(B \ A)/G(B \ b) (as G(B \ A \ b)= G(B \ b)), so that X(B \ A) is the orbit of b ∈ B ⊆ X(B) under G(B \ A). But then, for any y ∈ X(B \ A), we have y = hb for some h ∈ G(B \ A). As G(A) and G(B \ A) commute (by reasonability of the extension), we have gy = ghb = hgb = hb = y.	2
Given two test spaces A and B, with outcome-sets X and Y , respectively, their direct sum is the test space A ⊕ B with total outcome-set X ⊕ Y , and with tests given by E ⊕ F where E ∈ A and F ∈ B. Recall from Section 1 that a test space A is algebraic iff perspective events – events having one common complementary event – are complementary to exactly the same set of events. Denote the class of all events perspective to a given event A by AA, and observe that A is algebraic iff, whenever A and B are complementary events in A, we have AA ⊕ AB ⊆ A. Note, too, that AA is itself an algebraic test space, and that B, C ∈ E (AA) are perspective in A  iff they are perspective as events in A. In particular, the inclusion mapping
  AA →  A is a morphism of test spaces.
Lemma 5.3 Let (G, j) be a reasonable extension. If A and B are ﬁnite sets with A ∩ B = ∅, then G(A) ⊕ G(B) ⊆ G(A ⊕ B). In particular, all elements of G(A) are complementary to all elements of G(B) in G(A ∪ B), and, conversely, if C is an event of G(A ∪ B) complementary to A, then C ∈ G(B).
Proof. Let gA ∈ G(A) for some g ∈ G(A), and h(B) ∈ G(B). By Lemma 5.2, hx = x for every x ∈ X(A) and gy = y for every y ∈ Y . Hence, gA = ghA = hgA and hB = hgB = ghB. Thus,
gA ∪ hB = ghA ∪ ghB = gh(A ∪ B) ∈ G(A ⊕ B).
It follows that gA and hB are complementary as events in G(A⊕B), and, therefore, that G(A) ⊕ G(B) ≤ G(A ∪ B).	2

Corollary 5.4 If (G, j) is a reasonable extension, then
G(A) is algebraic for every A;
If A ∩ B = ∅, then G(A) = G(A ∪ B)A where A is regarded as an event in
G(A ∪ B).
If f : A → B is an injective mapping, then X(f ) : X(A) → X(B) is a morphism of test spaces.
Lemma 5.5 If (G, j) is reasonable, G(A) × G(B) ⊆ G(A × B).
Proof. Let Aj ∈ G(A) and Bj ∈ G(B). Decompose Aj × Bj as	x∈A′ {x}× Bj, and apply Lemma 5.3 iteratively.		2
Theorem 5.6 If (G, j) is reasonable, then G(A × B) contains the Foulis-Randall tensor product G(A)G(B).
Proof. Express A×B as the disjoint union a∈A{a}×B. Let ha ∈ G(aB)  G(B) for every a ∈ A; then G(aB) fixes ajA for all aj /= a; we have (Πaha)(ajA) = ha′ (ajA) ∈ G(ajA). We also have  a∈A G(aB) ≤ G(A × B); but the former is the set of two-stage tests beginning with A. In the same way, two-stage tests beginning with B are also contained in G(A × B). Applying elements of G(A) or G(B) as needed, we can obtain arbitrary two-stage tests from these; thus, G(A×B) contains the Foulis-Randall tensor product G(A)G(B), as advertised.	2
It follows that G(A × B) contains G(A) × G(B), and that the restriction of of a state on G(A × B) to X(A) × X(B) is a non-signaling state on G(A) × G(B).
When the extension (G, j) is both reasonable and regular, we can combine the fact that G(A × B) contains arbitrary product tests with the representation of G − Tesp morphisms given in subsection 4.1 to obtain the following
Theorem 5.7 If (G, j) is a reasonable, regular extension of S, then the category
G − Tesp that it induces is symmetric monoidal under
G(A), G(B) '→ G(A) ⊗ G(B) := G(A × B).
Proof. It suffices to show that G(A × B) is bi-functorial in G − Tesp, since the associativity and symmetry of ⊗ are clear. By Lemma 5.5, G(A × B) contains all product tests. Thus, if φ1 := XA(f1): G(A) → G(C) and φ2 = XB(f1): G(B) →
C	D
G(D), where f : A → Cj, f2 : B → Dj, and Cj ∈ G(C) and Dj ∈ G(D), we have
Cj × Dj ∈ G(C × D) and hence, a well-defined morphism
φ1 ⊗ φ2 := XA×B(f1 × f2): G(A × B) → G(C × D).
Using Lemma 4.7 (the fact that morphisms of the form XA compose properly), we have, too, that (φ1 ⊗ φ2) ◦ (ψ1 ◦ ψ2)= (φ1 ◦ ψ1) ⊗ (φ2 ◦ ψ2).
Note first that, by reasonability, G(A) ×G(B) is canonically embedded in G(A× B), and hence, acts on X(A × B) = G(A × B)/K(A × B); so if g ∈ G(A) and h ∈ G(B), we have a natural G − Tesp morphism g ⊗ h on G(A) × G(B). Now, if f : A → Aj, we have (f × IdB) : A × B → A × B, whence, a natural map X(f × IdB) =: X(f ) ⊗ Id : X(A) ⊗ X(B) → X(Aj) ⊗ X(B).	2

Conclusions and Directions for Further Work
The foregoing considerations suggest many interesting problems for further study, of which I will mention two.
First, one would like to find categorical conditions on an extension (G, j) extending S, that are sufficient to make G(E × F ) a genuine composite in the sense of Section 2. In view of Theorem 5.7, if (G, j) is both regular and reasonable, G(E) ×G(F ) is canonically embedded in G(E ×F ), and states on the latter restrict to non-signaling states on the former. What is required, then, is that (i) states be determined by this restriction, and (ii) every product state on G(E) × G(F ) extend to a product state on G(E × F ).
There is, of course, the danger that all of these conditions could be satisfied trivially, i.e., that Ω(G(A)) be empty for all A. In order for the theory associated with (G, j) to be of real interest, it is important that G(A) host a rich state space. A test space A is sharp iff, for every outcome x ∈ X(A), there is a unique state ϵx ∈ Ω(A) with α(x) = 1. Call an extension (G, j) sharp iff, for every finite set A, the test space G(A) is sharp. If we assume both that (G, j) is sharp and that G(A× B) is a product for all A and B, and, finally, that the state spaces of the factors are finite-dimensional, then it follows that the space V (G(A) ⊗G(B)) of signed weights on V (G(A×B)) is, algebraically, the tensor product of V (G(A)) ⊗V (G(B)). Using this observation, one can show (as outlined in [18]) that, for such an extension, the category G− Tesp satisfies most of Hardy’s axioms [Hardy01] for finite-dimensional quantum mechanics.
In a different direction, in the discussion of section 4 one would like to replace the rather impoverished category Sinj0 of finite sets an injective mappings by a richer category, such as the category Set0 of finite sets and mappings or the category FRel of finite sets and relations. One can do this by replacing the category Grp of groups and homomorphisms, by the category Grel of groups and polymorphisms (that is, subgroups of product groups, regarded as relations). If if f : E → F is any mapping between sets E and F , define
S(f )= {(σ, τ ) ∈ S(E) × S(F )|fσ = τf}≤ S(E) × S(F ): 
then S(g◦f ) ⊆ S(g)S(f ) (here reversing the usual order of relational multiplication), so we can regard S as a lax functor from Set to GRel. One can similarly regard S as a functor FRel → Grel. Further work along these lines will be discussed elsewhere.

References
S. Abramsky and B. Coecke, A categorical semantics of quantum protocols, Proceedings of the 19th Annual IEEE Symposium on Logic in Computer Science (2004), 415-425 (arXiv: quant-ph/0402130).
J. Baez, Quantum quandaries: a category-theoretic perspective, in E. Rickles, S. French and J. Saatsi, (eds.), The structural foundations of quantum gravity, 240-266, Oxford, 2006 (arXiv: quant-ph/0404040)
J. Baez and Mike Stay, Physics, topology, logic and computation: a Rosetta Stone, preprint, 2009 (arXiv:0903.0340v2)


G. M. D’Ariano, Probabilistic theories: what is special about quantum mechanics? arXiv:0807.438v, 2008
H. Barnum, J. Barrett, M. Leifer and A. Wilce, Cloning and broadcasting in generic probabilistic theories, arXiv:quant-ph/0611295 (2006); A general no-broadcasting theorem, Phys. Rev. Lett. 99 (2007), 240501-240505
H. Barnum, J. Barrett, M. Leifer and A. Wilce, Teleportation in general probabilistic theories, arXiv:0805.3553 (2008)
H. Barnum and A. Wilce, Information processing in convex operational theories, Proceedings of QPLV- DCMIV, Electronic Notes in Theoretical Computer Science (2008)
J. Barrett, Information processing in generalized probabilistic theories, arXiv: quant-h/0508211 (2005)
D. J. Foulis and C. H. Randall, What are quantum logics, and what ought they to be? In E. Beltrametti and B. van Fraassen, eds., Current Issues in Quantum Logic, Plenum, 1981.
L. Hardy, Quantum theory from five reasonable axioms, arXiv:quant-ph/0101012 (2001)
M. Kl¨ay, C. H. Randall, and D. J. Foulis, Tensor products and probability weights, International Journal of Theoretical Physics 26 (1987) 199-219
Mackey, G., “The Mathematical Foundations of Quantum Mechanics”, W. A. Benjamin, New York, 1963
Quan Tran and A. Wilce, Covariance in quantum logic, Int. J. theor. Phys. 47 (2008) 15-25
P. Selinger, Finite-dimensional Hilbert spaces are complete for dagger compact closed categories (extended abstract), Proceedings of QPLV-DCMIV, Electronic Notes in Theoretical Computer Science (2008)
Wilce, A., Test Spaces, in K. Engesser, D. Gabbay and D. Lehmann, Handbook of Quantum Logic,
Elsevier, 2009, pp. 443-549
A. Wilce, Symmetry and topology in quantum logic, Int. J. Theor. Phys. 44 (2005) 2303-2316
A. Wilce, Test Spaces, in K. Engesser, D. Gabbay and D. Lehmann, Handbook of Quantum Logic,
Elsevier, 2009, pp. 443-549
A. Wilce, Four and a half axioms for finite-dimensional quantum mechanics, arXiv:0910.1527 (2009)
