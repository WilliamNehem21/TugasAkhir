 AASRI Procedia  3 ( 2012 )  546 – 552 
2212-6716 © 2012 The Authors. Published by Elsevier B.V. 
Selection and/or peer review under responsibility of American Applied Science Research Institute
doi: 10.1016/j.aasri.2012.11.086 
 
2012 AASRI Conference on Modeling, Identification and Control 
Research on dynamic Method of Liquid Level Detection based 
on the Probe Type Capacitance Sensor 
Wenchang Zhanga*,Mingli Dong a,Lianqing Zhua,Yangkuan Guoa,Haitao Changb 
aSchool of Photoelectric Information and Telecommunication,Beijing Information Science and Technology University, Beijing 100192, 
China
 
bSchool of Instrumentation Science & Opto-Electronics Engineering, Beihang University, Beijing 100191, China 
 
Abstract 
In the process of absorbing samples of automatic clinical analysis instruments, it has a lot of problems with single 
direction method, such as low accuracy, inaccurate of liquid absorbed, short sample and tip blocked. According to this 
problem, this paper applies dynamic method of level detection to capacitance sensor. In the method, the influence of the 
inertness of the motor drive and microcapillarity caused by the infiltration between probe and the liquid are reduced. At 
the same time, a grey dynamic filtering based on dynamic GM (1, 1) is used to improve the stability of capacitance sensor 
output. Finally, experiments are performed to verify the feasibility of the method. Compared with single direction method, 
the dynamic method improves the accuracy from 0.3mm to 0.1mm. 
 
© 2012 Published by Elsevier B.V. Selection and/or peer review under responsibility of American Applied 
Science Research Institute 
 
Key words
probe type capacitance sensor, dynamic method, liquid level detection, motor inertia, infiltration 
1. Introduction 
Here introduce the paper, and put a nomenclature if necessary, in a box with the same font size as the rest 
of the paper. The paragraphs continue from here and are only separated by headings, subheadings, images and 
 
 
* Corresponding author. Tel.: +86-18701108200. 
E-mail address: baomuayi007@126.com.. 
Available online at www.sciencedirect.com
© 2012 The Authors. Published by Elsevier B.V. 
Selection and/or peer review under responsibility of American Applied Science Research Institute
Open access under CC BY-NC-ND license.
Open access under CC BY-NC-ND license.
547
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
formulae. The section headings are arranged by numbers, bold and 10 pt. Here follows further instructions for 
authors. 
The probe capacitance sensor is widely used in liquid level detection system, shift from automatic clinical 
analysis of biochemical analyzer, enzyme immunoassay analyzer, to urine analyzer instrument trace, it is a 
contractive liquid level detection method. In 1970, the Greiner Elect Ronic Company of Switzerland first 
introduced capacitance method to testing equipment, the technology becoming commonly used in instrument 
manufacturers. Companies as Abbott, Hitachi, Tecan, Hamilton, Beckman, Mindray have developed different 
characteristics of the liquid level detection technology based on capacitive principle. 
Liquid level detection is the key technology in the process of automatic enzyme immunoassay analyzer 
sample, it can ensure that determine whether the sample cup or reagent bottle enough sample when the probe 
going down rapidly to touch the liquid, the location of the liquid level is detected in a timely manner to ensure 
that, the amount of liquid can be sucked accurately without getting too deep, and the minimizing of the 
hanging of the probe liquid phenomenon caused carryover contamination. Especially in the use of the original 
tube, and if the level detection is inaccurate will cause empty suck, or because all sorts of quality control 
within the liquid level and blood clots highly uncertain, causing the probe plunge into the blood clot, smoke 
less than accurate serum requirements, ultimately causing the probe to plug. 
Currently, the needle probe sensor for measuring liquid level at home and abroad mostly can be divided 
into resistive sensors and capacitive sensors. Wherein the resistive sensor commonly used in liquid level 
detection methods such as: unidirectional measurement the static tracking measurement method, measurement 
of dynamic measurement method and the recoil probe; capacitance type sensor, a liquid level detection 
method is commonly used by the charging and discharging method, according to the output signal handling 
classification, the main detection methods are: bridge method, frequency modulation method, the resonance 
method, a pulse width modulation method[1-3]. 
This paper introduces resistance sensor level detection of dynamic method into the probe type capacitance 
sensor level detection, the use of dynamic measurement method to eliminate motor motion inertia and 
capillary action the error introduced, meanwhile grey dynamic filtering algorithm is introduced to filter AD 
sampling of capacitance sensor output, so as to improve the sensor output stability. 
2. Probe type capacitance sensor level testing dynamic method and grey dynamic filtering algorithm 
principle 
2.1. Probe type capacitance sensor principle 
A capacitance is formed if insulation dielectric is filled between two metal plates, the capacitance value of 
the two parallel plates consisting of capacitance can be represented as
*
/ d
C
S
. The S for plate area, d for 
two plate insulation medium thickness,  as permittivity medium .Probe type capacitance sensor is different 
from traditional plate capacitance sensor, probe is a conductor, there is capacitance effect between it and the 
sample cup at the bottom of the metal frame, thus a capacitance sensor is formed. The filling the medium of 
electrical insulation is air, and due to the shape if probe is irregular, it is unable to establish a accurate 
mathematical model, so we just get a very rough estimation [4-7].
Because of the small area of the tip position of the probe when the probe is not touched with the liquid 
surface of the sample cup, the capacitance value is very small. When the probe is exposed to the sample cup 
of the liquid level, the sample is equivalent to a good conductor, the sample area of the bottom of the metal as 
a capacitor plate with the sample cup rack form capacitance effects; the equivalent plate area suddenly 
becomes larger, so the capacitance value suddenly becomes larger. Applications need to be liquid to be 
measured as a plate at one end, it is only be used for liquid level detection of conductive liquids. Capacitive 
548  
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
sensor principle is shown in Figure 1 [8-10]. 
Fig. 1 .Schematic of capacitive sensors 
2.2. Dynamic measurement principle 
When the probe slowly contact the surface of liquid, the needle point and liquid are not contacted with 
single point, actually the sample liquid will rise along the probe tip, the liquid level near the needle point is 
higher than other parts of the liquid level height, this is caused by the infiltration phenomenon between probe 
and sample. 
When the probe is ascend slowly, due to the liquid and probe adhesion the liquid doesn’t release probe 
immediately, even though at the end the probe is higher than the level, the probe won’t release liquid until the 
adhesion is less than the probe with the liquid gravity, the probe position has been higher than the level of a 
few millimeters height. To determine the distance that probe carries on and off the liquid from liquid surface 
is what we need to study and solve. Situations of probe contacting and leaving from liquid can be shown in 
figure 2 [1].
 
Fig. 2. Probe contacting and leaving from liquid surface 
When the probe approaches slowly to liquid surface, due to the inertia of electrical machinery and drive 
system, probe cannot stop moving immediately, the distance that caused by inertia is called inertia distance 
coefficient. Inertia distance coefficient represents the motor motion inertia to the influence degree of the 
measurement precision. 
549
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
Dynamic measurement method is characteristic of that the probe in the liquid surface dynamic tracking, 
probe downward movement and detect liquid level, when exposed to the liquid surface and capacitance sensor 
output variation is greater than the judgment standard, the probe stop moving immediately, and then upward 
movement preparation from liquid surface. When capacitance sensor output change less than judgment 
standard, it’s concluded that the probe leaves liquid surface completely. The probe goes downward movement 
again, repeat level detection process. Probe heads down in small amplitude reciprocating motion, measuring 
liquid level height dynamically. Dynamic method uses motor inertia of positive & negative fast switching to 
reduce unidirectional movement, and eliminates motor motion inertia by controlling motor movement up and 
down to the same distance, thereby eliminating motor motion inertia to the influence of liquid level detection. 
2.3. Grey dynamic filtering algorithm 
Due to the circuit operation process of electromagnetic interference and the existence of noise in motor 
movements, capacitance sensor output signal contains a lot of noise. The system noise amplitude maximum 
30mV, the noise will have a great influence in the judgment of whether or not the probe comes into contact 
with liquid surfaces. A lot of experiments show that the phenomenon of infiltration caused by capacitance 
sensor output tiny fluctuation amplitude of about 10mV, the noise of the system will flood the small 
fluctuation and could not to be used for analysis. In order to improve the accuracy of capacitance sensor 
output value that TMS320F2812 sampled, this paper uses the dynamic filtering algorithm based on the gray 
GM (1, 1) model for sampling result processing, effectively reduced the capacitance sensor output of burr, 
disturbance and invalid signals. Grey dynamic algorithm is suitable for solving poor information and 
uncertain problem, so grey dynamic filtering algorithm can guarantee capacitance sensor output change of 
real-time, and the judgment of the capacitance sensor output value changes timely. 
Figure 3 shows the waveforms of capacitance sensor output sampling value after before after the filtering.  
Fig. 3. Capacitance sensor output filter 
3. Experiment and Data analysis 
3.1. Unidirectional method of liquid level detection 
In order to test and compare dynamic measurement performance, this paper conducts a group of 
experiments, using unidirectional method. 
the use Every time, fixed change is used as standard value for liquid level detection of the measures, which 
means that when capacitance sensor output variation is equal to the set standard, they think probe have 
reached liquid level position. This paper considers synthetically motor motion inertia and infiltrating the error 
550  
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
introduced by the influence of the tiny fluctuation, and through a lot of experiments, we finally determine 
0.1V as standard in experiments. ADC module of TMS320F2812 starts sampling capacitance sensor output 
values when probe contacting liquid level or goes from liquid level, slowly. 
Conclusion: We can get the actual position from the capacitance sensor output change curve that the motor 
stopped. Compare the actual location that the motor stopped with the real liquid level position, we can come 
to the concluded of the error that motor motion inertia brings into as is shown in table 1. From the table we 
can see that when the probe starts detecting liquid level from the same height, the faster the motor running, 
the larger error that the motor inertia cause. Draw up table 1, the curve is shown in figure 4. The error that 
motor movement inertia introduced and the speed of motor does not have linear relationship. The movement 
loader is different according to different application environment, this paper can't figure out a general use 
error calculation formulation 
Table 1. Errors of unidirectional method 
Speed of  motor(mm/s) 
Error(mm) 
100 
6.76 
120 
7.74 
140 
9.01 
160 
10.27 
180 
12.49 
 
Fig. 4. Inertia error of unidirectional method 
3.2. Dynamic method liquid level detection 
As shown in figure 5, choose the same variation 0.1V as liquid level detection standard, and conduct the 
measurements with unidirectional and dynamic method respectively. In the figure of capacitance sensor 
output values, the heavy line stands for the unidirectional method while the fine solid line stands for dynamic 
method. From the unidirectional measurement curve can see, the error that motor movement inertia introduces, 
keeps motor going into liquid deeper, meanwhile capacitance sensor output values change for 0.48V. From 
dynamic measurement curve we can see that, the movement that motor goes up and down for the same 
distance can offset the error which introduced by motor motion inertia, so the depth that motor goes into the 
liquid is shallow, and the capacitance sensor output variation is 0.26V. 
551
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
Fig. 5.  Capacitance sensor output curve 
For the selection of standard value, there is a need of comprehensive consideration of the motor motion 
inertia and the error introduced by infiltrating the influence of the tiny fluctuation. Contrast to unidirectional 
method curve, dynamic method can effectively eliminate the error introduced by motor motion inertia, 
meanwhile the smaller the standard value chose, the better motor motion inertia error is eliminated, however 
if the standard value is chose too small, the errors introduced by infiltration phenomenon, will influence the 
measurement results greatly. So the selection of standard value should be in avoiding infiltration phenomenon 
influence under the condition of the maximum degree of eliminating motor motion inertia error. In this paper, 
we finally determined 0.1V as standard in the experiment. 
The measurement results of dynamic method and the true value of liquid level provided by magnetic grid 
are compared; we can get the error with dynamic method as shown in table 2. The measuring accuracy of 
magnetic grid we used is 5 um. 
Table 2 dynamic measurement error 
No 
Error(mm) 
No 
Error(mm) 
1 
0.067 
11 
0.032 
2 
0.081 
12 
0.078 
3 
-0.016 
13 
-0.064 
4 
0.017 
14 
-0.042 
5 
0.100 
15 
0.086 
6 
0.059 
16 
-0.091 
7 
-0.040 
17 
0.064 
8 
-0.097 
18 
0.072 
9 
0.039 
19 
-0.042 
10 
0.065 
20 
-0.059 
4. Conclusion 
With dynamic method of the liquid level detection, we can eliminate the error introduced motor motion 
inertia. On the basis of dynamic method the grey dynamic filtering algorithm is introduced, the accuracy of 
552  
 Wenchang Zhang et al. /  AASRI Procedia  3 ( 2012 )  546 – 552 
capacitance sensor output is improved by noise filtering of the sampling results, which ensure the stability of 
capacitance sensor output value variation to provide accurate judgment. At the same time through a lot of 
experiments to choose the best variation as liquid surface detection standard value, we can effectively 
eliminate the error introduced by phenomenon of infiltrating. Finally, we can detect liquid level accurately, in 
dynamic measurement method for probe type capacitance sensor, and minimize carry pollution caused by 
probe hang fluid.  
Acknowledgements 
A Project Supported by  Major Project of Beijing Municipal Natural Science Foundation(KZ201010772032) 
and Funding Project for Academic Human Resources Development in Institutions of Higher Learning Under 
the Jurisdiction of Beijing Municipality (PHR201106130
PHR201006235). 
References 
[1] Du Rubin, KeXiangheng. Level detection technology[M]. Beijing:   Atomic Energy Press, 2005.  
[2] Ji Guowei, Analysis on principle of liquid level detection for AU5400 biochemic alanalyzer [J]. China 
Medical Equipment, 2010,7 (7):52-55 (in chinese) 
[3] Zhu Gaozhong, Application of capacitive sensor for liquid level measurement[J]. Chinese Hydraulics & 
Pneumatics, 2012,(02) (in chinese)  
[4] QI Liang, ZHAO Maocheng, JURonghua, SONG Xiaoning, Capacitive Sensor Used for Inspecting Fill 
Level in Beverage Package[J]. Chinese Journal of Sensors and Actuators,2009,(01) (in chinese)  
[5] Design of Capacitance Type Sensor for Oil and Water Interface Liquid Level[J]. Chinese Journal of 
Scientific Instrument,2006,(05)(in chinese) 
[6] Zhang Bo, The Research of Using Sectionalized Capacitance to Liquid Level Measurement[D].Dalian 
Maritime University,2010(in chinese)  
[7] REN Kaichun, TU Yaqing. Analyzing more than 20 methods relating to liquid level 
measurement[J].Industrial Instrumentation & Automation, 2003,(05)(in chinese)  
[8] Design of Capacitance Type Sensor for Oil and Water Interface Liquid Level[J]. Chinese Journal of 
Scientific Instrument,2006,(05)(in chinese) 
[9] YANG Chaohong, LI Huan, Present Situation and Developing Trend of New Type of Measuring 
Technology for Liquid-level[J]. Industry and Mine Automation, 2009,(06)(in chinese)  
[10] FuYumei, ZhangQiaoe, ZanXinwu, Li Huawen, Feng Bin, Li Yongzhi, Utilizing differential method to 
implement a medi um-independent capacitive liquid level measurement[J], Transducer and Microsystem 
Technology, 2011,(05) (in chinese) 
[11] Wang Zhongyu, MengHao, Fu Jihua, Separation method for surface comprehensive topography based on 
grey theory[J]. Chinese Journal of Scientific Instrument, 2008,Vol.29 No.9 :1810-1815. (in Chinese) 
 
