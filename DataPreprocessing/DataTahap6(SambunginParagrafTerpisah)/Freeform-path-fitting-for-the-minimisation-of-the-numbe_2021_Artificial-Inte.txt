Within the context of in-field path planning this paper discusses freeform path fitting for the minimisation of the number of transitions between headland path and interior lanes within agricultural fields. This topic is motivated by two observations. Due to crossings of tyre traces such transitions in practice often cause an increase of compacted area. Furthermore, for very tight angles between headland path and interior lanes undesired hairpin turns may become necessary due to the limited agility of in-field operating tractors. By minimising the number of interior lanes both detrimental effects can be mitigated. The potential of minimising the number of interior lanes by freeform path fitting is evaluated on 10 non-convex real-world fields including obstacle areas, and compared to the more common technique of fitting straight interior lanes.

According to Ahumada and Villalobos (2009) there are four main functional sectors for the agri-food supply chain: production, harvest- ing, storage and distribution. Optimising logistics and routing play an important role in all of the four functional areas for improved supply chain efficiency. Furthermore, according to Sorensen and Bochtis (2010) it can be distinguished between in-field, inter-field, inter- sector and inter-regional logistics. This paper relates to the first func- tional area of the agri-food supply chain, i.e., production, and further to in-field logistics. The difficulty of in-field logistics arises from the vast variety of field shapes encountered in practice. In this perspective Oksanen (2013) presented eight indices for measuring the complexity of field shapes. For an application, see Janulevicius et al. (2019) who studied the effect of different field width-to-length ratios on tractor per- formance measures such as fuel consumption and exhaust emissions when ploughing.

For in-field logistics it can be differentiated between three hierarchi- cal planning layers: (i) the fitting of lanes within field contours, (ii) route planning for the traversal of these lanes, and (iii) trajectory plan- ning accounting for agility and actuation constraints of the in-field oper- ating vehicle to smooth out final paths. This paper focuses on the first hierachical layer and, in particular, how freeform path fitting compares to the more common method of fitting straights as interior lanes. For background, the coverage of agricultural fields growing, e.g., cereals or

Hameed et al. (1086) computed optimal driving directions for straight interior lanes based on the minimization of overlapped area using a genetic algorithm, before optimal routing is determined based on the minimization of the non-working distance. Freeform path plan- ning is not discussed. Results are evaluated on two obstacle-free test fields.

Within this context the motivation and contribution of this paper is to discuss the potential of freeform path fitting for the minimisation of the number of transitions between headland path and interior lanes within agricultural fields. As a proxy therefore, the number of interior lanes is minimised. This is achieved by optimised freeform fitting of in- terior lanes to arbitrarily non-convexly shaped field areas, that also may include obstacle areas. While freeform fitting of interior lanes is not new and sometimes in practice even performed intuitively by farmers, e.g., on wavy or curvedly shaped fields, the outcome of a quantitative comparison with respect to optimal straights fitting and explicit evalu- ation of the number of interior lanes that can be saved in real-world sce- narios is not obvious.

Problem input are location data of the field contour and all available obstacle contours. In a first step, the field contour is eroded to generate the headland path. Similarly, obstacle contours are dilated to construct obstacle headland paths. In a second step, a reference path is selected as a partial segment of the headland path. In a third step, this reference is offset to generate a grid of interior lanes fitted within field contours with inter-lane distance selected as the machinery operating width w. In this paper it is iterated over the selection of the reference path ac- cording to the criterion of minimising the total number of interior lanes denoted by Nl.

Once lanes are fitted within field contours available methods from the literature can be employed for the two other aforementioned hier- archical planning layers (routing algorithms for traversal of lanes and trajectory planning for final path smoothing) including, for example, Jensen et al., 2015, Bochtis et al., 2013, Hameed et al., 2016, Yu et al., 2015, Spekken et al., 2015, Seyyedhasani and Dvorak, 2018, Plessen, 2018, Paraforos et al., 2018 and Backman et al., 2012. Consider also Plessen, 2019 for the coupling of crop assignment and and vehicle routing.

Field data was obtained from satellite images in Google Earth (http://earth.google.com) by tracking field contours and contours of all in-field obstacle areas (such as e.g., tree islands), before exporting those raw location data points as .kml-files and feeding it to proposed algorithm. Fields were selected to emphasize effects of the compared path fitting methods on a variety of very differently shaped fields as well as with and without in-field obstacle areas. The latitude and

Second, while in some scenarios the optimised freeform path plan- ning is intuitive such as for Field 8, it is surprising in other cases such as for Field 4. There are also subtle details about the exact optimal length of reference paths. In general, it therefore seems to be difficult to devise a reliable rule of thumb to select optimal reference paths. Thus, for gen- eral field shapes it clearly is best to turn to a data-dependent numerical optimisation method such as the proposed algorithm.

Ultimately, after having fitted interior lanes within field contours one can on top (i) determine field coverage path plans, e.g., according to the methods in Plessen (2018) and Plessen (2019), before (ii) smoothing out trajectories by accounting for actuation constraints of the in-field operating vehicle, for example, according to the control methods in Backman et al. (2012) or Plessen and Bemporad (2017).

The most obvious disadvantage of freeform path fitting is the in- creased amount of steering that is needed along interior lanes. However, this is largely relevant only as long as there is a human vehicle driver. Currrently, such a driver would have to apply significantly increased ef- fort for freeform path tracking. However, for an envisioned future with fully automated robotic field coverage this disadvantage is dismissed.

This paper focused on the very clear to quantify number of interior lanes as the optimisation criterion, which served as a proxy for the minimisation of the number of transitions between headland path and interior lanes. For future work an alternative objective such as the total accumulated path length along interior lanes may be considered. Then, ideally three consecutive layers are evaluated for determining the optimal grid of interior lanes fitted within field contours. These three layers represent (i) selecting a reference path candidate as partial segment of the headland path and generating a corresponding grid of interior lanes as discussed in this paper, (ii) determining a routing solu- tion for the coverage of all lane segments, before (iii) generating smoothed out trajectories accounting for agility and actuation con- straints of the in-field operating vehicle, whereby the final detailed tra- jectory must also be planned such as to minimise spraying gaps. Similarly to as presented in this paper, it must then be iterated over ref- erence path candidates before the total path length minimising solution is returned.

