The rest of the paper is organized as follows. We discuss related works in Section 2. In Section 3, we present a novel join algorithm based on column-oriented databases and parallelism. The query performance of the proposed algorithm is compared with traditional join algorithms for sensor network in Section 4. The conclusion is given in Section 5.

the join region near the base station. One approach is the synopsis join (SNJ) algorithm [3]. The key idea is to use synopsis of sensor readings to prune those readings that are irrelevant to join results. Another technique is the record filtering using bit-vector (RFB) algorithm [4]. The RFB algorithm uses bit vectors produced after semi-join is performed to prune unnecessary data before shipping data from each node to the join region.

Important optimization techniques exist for column-oriented databases. Materialization strategies, both early and late, are important during query reconstruction [5]. The invisible join [6] extends previous work on improving star schema queries using a column-oriented layout. A join algorithm based on column-oriented database was proposed to perform join processing of data in sensor networks [7]. The algorithm, which we refer to as EM, is based on an early materialized strategy in column-oriented database.

In this paper, we assume that the sensor data are stored in a column-oriented database rather than a relational database. Column-oriented databases store data column-wise (in columns) rather than row-wise (in rows) as in relational databases. Column-oriented databases are more efficient for read-only queries since they read from disk only those attributes (or columns) accessed by the query. There are two materialization strategies, early and late, in column-oriented databases. Materialization, also known as tuple stitching or tuple construction, is a process of combining single-column projections into wider tuples and is needed to output row-style tuples to support standards-compliant relational database interface such as ODBC and JDBC. In early materialization strategy, each column is added to the intermediate query result to form tuples if the column is needed. In late materialization strategy, the accessed columns do not form tuples until after some part of the query plan has been processed.

The proposed algorithm is a distributed algorithm involving the R region, S-region, join region and the sink node. The R (S) region contains a number of sensor nodes, each storing a part of relation R (S). In addition, the join region F also contains several sensor nodes that collaborate to perform distributed join. The join algorithm, a late materialized strategy, executes in three phases, namely the selection phase, the join phase, and the result phase. In the selection phase, the join column values are sent to the join region F initially. In the join phase, a semi-join is performed between the join columns of R and S to ship only qualified column values from R region and S region to the join node F. In the result phase, the qualified column values of R and S are stitched together to construct tuples and shipped to the sink node.

The result phase of the proposed algorithm is composed of two steps. In the first step, at each node in F, the position list and the bitmap in the first step of the join phase is used to stitch together the column values of R and S to construct tuples. The tuple stitching is performed in parallel at each node in F. We assume that a metadata is present to map column values of R and S given the position list and bitmap. In the second step, the constructed tuples from each node in F are shipped to the sink node as the query result.

Since the sensor nodes in the sensor network are independent, it provides a natural platform for a shared- nothing architecture to perform parallel processing. It is straightforward to convert the distributed algorithm just described to a parallel algorithm if we assume a shared-nothing architecture for the sensor network. The hash-based distribution scheme ensures that tuples with same join attribute value are always sent and joined at the same join node. This ensures that both join and tuple stitching can be performed in parallel at each designated node.

To test the cost-effectiveness of the join algorithm proposed in this paper, a performance analysis is made with the existing SNJ, RFB and EM algorithms. SNJ and the RFB algorithms are based on relational databases while the EM algorithm uses early materialization strategy in column-oriented databases. The different algorithms were compared in terms of the communication cost which is the number of bytes transmitted to various nodes to get the join result.

In order to simplify network traffic analysis, we assumed that no failure occurs during message transmission. The size of the message and the tuple was assumed to be 40 bytes each. For the given query, the size of the resulting join tuple (i.e. query result) was assumed to be 30 bytes. For column-oriented database, the size of each column was assumed to be 10 bytes.

We did not conduct experiments on the query response time for the different join techniques for sensor networks. The reason is because we believe that the most important performance criterion for sensor networks is the total communication cost. However, it is easy to observe that the query response time using the parallel version of our proposed algorithm is faster than the other algorithms that are not based on parallel computing. Using our algorithm, the more sensor nodes are involved in query processing, the faster the query response time since the join and data shipment can be all done in parallel.

