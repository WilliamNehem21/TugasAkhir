Available online at www.sciencedirect.com
ScienceDirect

AASRI Procedia 4 (2013) 250 – 260


2013 AASRI Conference on Intelligent Systems and Control
Electric Energy Data Acquisition Communication Power Test Research
Hongliang Sun, Jun Ye, Ke Zheng
Electric Power Research Institute of Chongqing Electric Power Company, Huangshan Middle Road, Yubei District, Chongqing, 401123, China



Abstract

More and more communication is used to realize the intelligent electricity-use and the Chinese smart grid. These communication links will likely bring electromagnetic environmental pollution, affect the electric energy meter performance, induces the waste of electric energy. This paper introduces a kind of electric energy data acquisition communication module power testing method, and the development of test equipment.

© 2013 The Authors. Published by Elsevier B.V. Open access under CC BY-NC-ND license.
Selection and/or peer review under responsibility of American Applied Science Research Institute

Keywords: Electric energy data acquisition, communication, power test;


Introduction

Smart electricity application and electric energy data acquisition has become an important part of China's smart grid construction. And smart electricity application is physically based on the electricity data acquisition system. It likes an interactive bridge between power supply enterprise and the user.
In the interacting process of electric energy data acquisition system, the remote channel and local channel has to communicate many times. Especially when local channel needs repeaters for network, the communication becomes more frequently. The communication means of smart energy meters applied in power grid, includes a low voltage power line carrier, micro-power wireless communication module, RS485 bus communication, and so on. Communication modules have a variety of products, uneven quality, and different work power consumption.












2212-6716 © 2013 The Authors. Published by Elsevier B.V. Open access under CC BY-NC-ND license. Selection and/or peer review under responsibility of American Applied Science Research Institute doi:10.1016/j.aasri.2013.10.038


Author Artwork

Power user electric energy data acquire system local channel have two main implementations, including micro power wireless and power line carrier communication technology. For the two communication technology, external communication performance and the dynamic power condition of communication are closely related.
The energy communication module is powered by the meter power module. Therefore, when the power consumption of the communication module becomes too large, it will directly affect on the normal work of electric energy meter, and affect on the entire system.
When communication power consumption is too large, the impact might be interested in the electromagnetic environment, and increased space electromagnetic field or the influence of power quality.
Because of the very large communication activities, power consumption of each communication should limited under a certain value. Otherwise it will cause a large waste of electric energy.
E	ei
n
E, for the total energy communication system needed. i, for a I communication unit.
e, for a I communication unit the energy needed.
n, for the communications unit number, n  150000000.
Conversely, if the power of communication module is designed too small, the communication performance can’t produce enough power which communications needs, and ensure the reliability of communication in the physical environment.
This paper introduces the power carrier power test instrument can accurately measure the concentrator, collector and electric power carrier communication module in the current, voltage, power under different working condition data.

Communication Interface Design

Based on the analysis and the test study above, this paper only discusses the power test situation of local channel collector and electric energy meter communication unit. In the power communication module test, we must discuss the power source, voltage, current and power to for the units.

Electric Energy Meter

Electric energy meter communication module interface as shown below:
Fig. 1. Electric energy meter communication module interface


Definition of the pins as shown in the following table:
Table 1. Definition of the pins


Collector Module

Collector local communication module interface as shown below:
Fig. 2. Electric energy meter communication module interface

Definition of the pins as shown in the following table:
Table 2. Definition of the pins


Concentrator Module

Collector local communication module interface as shown below:



Fig. 3. Collector local communication module interface

Definition of the pins as shown in the following table:
Table 3. Definition of the pins
Through the analysis above, it can be seen that there are a digital power supply and an analog power source for electric energy meter and collector communication modules, but for concentrator, only one power source.

Design of the Test System

To test the power of measured power line carrier module, when sending data, receiving data and static state power, a MCU and carrier module UART interface communication have been designed , for exchange the carrier module state. The measuring device is divided into 4 parts, respectively is control and storage section, measurement section, testing section, power system.




Fig. 4. Power Tester System Block Diagram
Testing section

Testing section provides 3 module testing positions, each for the concentrator carrier module, three-phase meter carrier module, single-phase meter or collector carrier module. In order to reflect the real measured carrier module power characteristics, this system needs a high speed, and high precision sampling. The voltage and current signal can be considered as a continuous signal f (t) . The sampling process can be

regarded as the original signal
f (t) with a sampling pulse sequence s(t) . So, it comes to the result of the

multiplication, the sampling signal fs (t) .

fs (t) 
f (t)s(t) 
fs (t) 
f (t)s(t) 

Sampling function s(t) identified as a unit impulse sequence.
s(t)   (t  nTs )
n
From the Nyquist sampling theorem, we know that



T	1
s	2 f

( fm is the maximum value of f (t) )	 1 

When electric energy data acquisition exchange data in the local interaction, every way of communication must followed by the communication protocol DL/T 645. Communication time is about several hundred milliseconds, considering the communication data frame length, relay data and communication in the process of error correcting code and other factors.



Type, t communication time length.
t1 , As required, data communication time.
t2 , To relay the required communication time.
t3 , PN code required for communication time.
t  t1  t2
 t3  t4	 2 

t4 , As the lead character, other factors such as the time length of communication.
From formula (1) and (2), 1 kHz sampling frequency is sufficient to ensure the signal without distortion.

Measuring Section

The measurement section is controlled by a microcontroller, which measures the current and voltage in real-time. This part is the key part of the measurement apparatus. With the control of the microcontroller chip CS5550, ADR431 and an analog switch 74HC4052, measuring section collects the current, voltage real-time acquisition.
CS5550 Cirrus Logic chip contains two  -  A/D converter (ADC) and a highly integrated serial interface  -  A/D converter. One ADC interface of CS5550 for measuring carrier module current, is connected to the output of 74HC4052. Another ADC interface for measuring carrier module voltage, through the divider resistance means, is connected to power supply of the carrier module. CS5550 serial interface is connected to the SPI of the MCU.
ADR431BR is a high accuracy 2.5V voltage reference source, produced by ANALOG DEVICE company. It has high accuracy, low noise and low temperature drift properties. While CS5550 has a 2.5V benchmark itself, but its accuracy and temperature drift can’t meet the requirements. The ADR431 outputs a 2.5V benchmark for CS5550 precision measurement.
74HC4052D is a 4 anthology 1 an analog switch, powered by ± 5V supply, with low to 60 ohm resistance. 74HC4052D is controlled by MCU, a time-division switching 3 ways power carrier wave module current signal (converted to voltage) to CS5550.

Control and Storage Section

Control and storage section is the measuring device controlling center. The center is responsible for CS5550 measurement control, data storage, power line carrier communication module and communication with PC. The segment also includes LPC2378 and IS63WV1288.
LPC2378 uses the ARM7TDMI nucleus, with 4 UART, two SSP interface, two 64K address space, the width of the data bus is 8 bits of asynchronous memory interface, USB, Ethernet interface, two 64K space to the external memory interface can access a 128KByte external memory.
4 UART interface are respectively connected with the 3 electric power carrier communication module and PC. Connected to the concentrator carrier module UART is used to simulate the concentrator communication


protocol. Connected to the three-phase ammeter carrier module UART is used to simulate of three-phase electricity meter communication protocol. Connected to the collector of the carrier communication module is used to simulate collector acquisition communication protocol. The UART connected to the PC completes the instruction interaction with PC, which control the measurement and reading of the measured data.
LPC2378 is a SSP interface which connected to the CS5550, controls measurement of timing and reading of the measured results.
IS63WV1288 is a SRAM with 128Kbyte. LPC2378 is connected to the 8 bit asynchronous interface, for the preservation of measurement data in the testing process.

Power supply section

Power section is responsible for producing the different voltage which required, such as 8~18V, 5V, 3.3V,
-5V voltage, and ensure that there is enough power for needs.
In order to measure the electric power carrier wave module in its normal voltage range of the working state and power, the potentiometer circuit is designed for regulating carrier module working voltage. And the adjusting range is 8~18V.

Software Implementation

A reliable and stable operating system is essential, in order to ensure the measurement device for the operation in a good order and well arranged.
The measuring device of MCU uses UC/OS-II system. UC/OS II (Micro Control Operation System Two) is a based on the ROM operation, which can be trimmed, preemptive real-time kernel, with a high degree of portability, particularly suited to the microprocessor and a controller. It has an nice operating system performance for the real-time operating system (RTOS).
In order to realize its function, this system sets 5 tasks, such as the CS5550 control task, PC interaction task, three-phase electricity meter simulation task, the concentrator simulation task and collector / single- phase meter task.

CS5550 Control Task

In consideration of the real-time accurate to obtain the voltage and current transient data, the sampling rate required to achieve the 1 kHz, and consecutive sampling 15S, the software must be used by way of interruption. At the same time, the software will complete the 1 kHz sampling and ensure the serial work properly, so the software should be designed read the sampling data in the interrupt.
The CS5550 control uses a task under the interrupt mode, shown in flow chart 2.
The CS5550 task is first configured for a second sampled only 1 time. This can guarantee the updated every second voltage data, but also can give the MCU burden.When high speed sampling, the CS5550 is configured for a second sampled 1000 times, and start the sampling and interrupt. Then, the process goes to interrupt. In the interrupt, data is read and stored in the external memory. When the sampling number specified number, it will stop the interrupt, send a measurement end signal. At the start of high speed sampling, CS5550 task have to wait for the end signal. After getting the signal, it will notify the PC, and CS5550 will be reconfigured as a second sampling time again. After receiving the corrected signal, it will stop the interrupt, and start the calibration. After being read from interrupt, calibration data will be stored in the flash (that is not lost after power off).





























































Fig. 5. CS5550 Controlling Flow Chart


PC interaction Tasks

This part of task completes instruction interaction between MCU and PC UART, and read the data. This part is to take the way of combining tasks and interrupt, seeing in figure 3.
PC interaction tasks in serial initialization, by blocking the way for collection of data receive mailbox. In the interrupt, when receiving data, it will judge whether it has a frame header and a tail sign, for combination a complete data packet. After receipt of a complete data packet, it will be sent to a data receive mailbox. When PC interaction task receives a data mail, PC will make a CRC trading, and then parses the command word, finally give the response, sent to PC.


Fig. 6. Flow Chart of PC Interaction Tasks

Concentrator Simulation Task

The task simulation concentrator sends the data to concentrator carrier module, and triggers the carrier module in the transmit state, to measure the power characteristics. The way using tasks with interrupt mode is similar and PC interaction task. Collector and meter simulation task is using a similar way to simulation.

Intelligent Electric Energy Meter Typical Carrier Communication Scheme Module Power Test

4 typical domestic carrier communication scheme of power carrier communication module have been tested in this instrument.



Table.4 the intelligent electric energy meter power measurement of carrier communication module


Fig. 7. A Scheme for Intelligent Power Meter Module Static Power Curve

Fig.8. For a Scheme of Intelligent Electric Energy Meter Module Dynamic Power Curve


Conclusion

The tester achieves to the continuous measurement for the various carrier communication modules at running status and standby status power consumption, and accurately obtain the power consumption curve data of various module. This test covers single-phase carrier energy meter, three-phase carrier energy meter, I type collector, and concentrator communication module.
This paper introduced in detail hardware and software of the power carrier power testing principle and realization. The device has shown an accurate data on the power line carrier power characteristics.


Acknowledgements

This work was supported by Chongqing municipal electric power company.


References
Deng G. P., Li F., Xia S. B., Problems of Performance Testing of Low Voltage Power Line Carrier Communication, Hubei Electric Power, 2010, Vol. 34(3), pp. 8-9
Xiao Y., Fang Y., Zhang J., Dang S. L., Research on Characteristics of Low Voltage Power Line Carrier Communication Channel, Relay, 2012, Vol. 40(20): 75-79
THOMAS B, STEFANO G. A novel approach to the modeling of the indoor power line channel, part 1: circuit analysis and companion model, IEEE Trans. on Power Delivery, 2005, Vol. 20(2): 655–662.
Zheng T. N., Research and Simulation of Power Line Carrier Communication Channel Characteristics,
Telecommunications for Electric Power System, 2010, 31(216): 39-42
Shao H. J., Wan S. L., Wei W. Z., et al. Attenuation Analysis of Distribution Line Carrier Channels in Distribution Net work, Automation of Electric Power Systems, 2000, 24(8)
Li B. W., Yu X. W., et al. Analysis of the Main Factors Affecting the Low-voltage Power line Carrier Communication, Distribution & Utilization, 2010, 27(3): 27-29
