

Electronic Notes in Theoretical Computer Science 218 (2008) 171–192
www.elsevier.com/locate/entcs

Term Equational Systems and Logics
(Extended Abstract)

Marcelo Fiore1 Chung-Kil Hur2 ,3
Computer Laboratory University of Cambridge Cambridge, UK

Abstract
We introduce an abstract general notion of system of equations between terms, called Term Equational Sys- tem, and develop a sound logical deduction system, called Term Equational Logic, for equational reasoning. Further, we give an analysis of algebraic free constructions that together with an internal completeness result may be used to synthesise complete equational logics. Indeed, as an application, we synthesise a sound and complete nominal equational logic, called Synthetic Nominal Equational Logic, based on the category of Nominal Sets.
Keywords: Equational systems, algebraic theories, free algebras, equational logic, soundness, completeness, Nominal Sets, Schanuel topos.


Introduction
Formal reasoning is fundamental in computer science, and frameworks for support- ing it abound. Those that are most relevant to this work are equational logic [10] and algebraic theories [16] together with their extensions, e.g. to rewriting [18], higher-order [15,19], and nominal [8,4] settings. The common conceptual core of these frameworks consists of syntactic structure providing a notion of term together with a logical system of equational judgements. Ideally, this is further equipped with a model theory for which soundness and completeness hold. A main general aim of the paper is to formally articulate this scenario by means of a general and practical mathematical theory. Indeed, we provide a mathematical theory for the development of term equational systems and logics.

1 Email: Marcelo.Fiore@cl.cam.ac.uk
2 Email: Chung-Kil.Hur@cl.cam.ac.uk
3 Research supported by a Samsung Scholarship from the Samsung Foundation of Culture.

1571-0661 © 2008 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2008.10.011

Our Term Equational System framework is given by a semantic universe together with an abstract notion of syntax on it. From it, the following are induced.
A notion of term in context, and therefore notions of equation and equational theory.
A model theory, providing a satisfaction relation between models and equa- tional judgements.
A sound logical deduction system, called Term Equational Logic, for equational reasoning.
A construction of free algebras that, in certain important and common scenar- ios, provides a sound and complete system of equations that aids the develop- ment of a complete logic.
We outline the technical development of the paper introducing it here in re- stricted form so as to more easily convey the basic ideas and intuitions. The more general enriched universes of discourse considered in the paper (Definition 2.2) are indispensable to accommodate multi-sorted theories.
For the purpose of this introduction, thus, we consider a symmetric monoidal closed category (C ,I, ⊗, [−, =]) as universe of discourse and a monad T = (T, η, μ) on it, equipped with a strength τ , as notion of syntax.	For C ∈ C , the ob- ject TC ∈ C intuitively represents terms with variables in C. A global term corre- sponds thus to a map I  zT,C. More generally, however, as it is well-known from categorical logic (see e.g. [17]), one should consider generalised terms of the form A  zT,C. For these, the pair (A, C) provides a notion of arity, with C being the co- variant arity of the term and A the contravariant arity. Intuitively, one may think of generalised terms of arity (A, C) as an A-parameterised family of terms with variables in C. A notion of generalised equation between terms of the same arity, denoted as t ≡ t', and hence of generalised theory, is thus induced. (See Section 2.) A natural model theory arises. As expected, models for the monad are given by Eilenberg-Moore algebras. The interpretation of a generalised term t : A   zT,C in
such a model (X, s : TX   zX,) is a map
 t)(X,s) : [C, X] ⊗ A   zX,, 
intuitively evaluating the A-parameterised family of terms t according to the algebra structure (X, s) with respect to assignments in X for the variables in C. Formally, the interpretation map t)(X,s) is given by the composite
[C, X] ⊗ A  [C,X]⊗t z[C,, X] ⊗ TC  τ[C,X],C zT ,[C, X] ⊗ C  Tє zT X,  s zX,. 
Consequently, a model (X, s) is said to satisfy the equation t ≡ t' : A  zT,C when- ever t)(X,s) = t')(X,s) : [C, X] ⊗ A   zX,. (Again see Section 2.)
Based on the model theory, a sound equational logic, called Term Equational
Logic, is introduced. The logic has the rules Ref, Sym, Trans of equivalence relations; the rule Axiom stating that the equations of a theory are derivable; the rule Subst stating that substitution is a congruence; the rule Ext stating that an operation

of context extension is a congruence; and the rule LocChar expressing the local character of entailment (see e.g. [17]). (See Section 3.)
In the presence of free models for a given generalised theory, we show an internal soundness and completeness result: A generalised equation is satisfied by all models of a generalised theory iff it is satisfied in a particular free model (see Section 4). This, in view of an explicit construction of free models (see [6,7] and Section 1), may be used to synthesise a sound and complete deduction system which, in turn, may suggest how to extend the aforementioned equational logic to make it complete, and allow the use of equational term rewriting as an alternative for establishing equational judgements.
Overall, thus, we advocate the following general methodology for developing term equational systems and logics.
Select a universe of discourse C and consider within it a notion of signature such that every signature Σ gives rise to a strong monad TΣ = (TΣ, τ, η, μ) on C .
We do not insist on an a priori prescription for the definition of signature, but rather consider it as being domain specific. Of course, standard notions of sig- nature (e.g., as they arise in the context of (enriched) algebraic theories [14,20]) may be considered. However, one may also need to go beyond them—see [5].
Select a class of arities (A, C) and give a syntactic description of the generalised terms A  zTΣ,C. This yields a syntactic notion of equational theory with an associated model theory arising from that of Term Equational Systems.
We are ultimately interested in the existence of free algebras for the signature Σ satisfying the equations of a theory. In cocomplete universes of discourse, these may be constructed according to the theory of free constructions of [6], e.g. by considering functors TΣ that preserve colimits of λ-chains and equations with λ-compact arities (see Definition 2.13) for some limit ordinal λ.
For applications to finitary theories, however, one need only examine the case λ = ω; even under the further conditions that TΣ preserves epimorphisms and the arities of equations are projective (see Definition 2.13). This guarantees a simple inductive construction of free algebras, well-suited to the extraction of explicit descriptions.
Synthesise a deduction system for equational reasoning on syntactic terms with rules arising as syntactic counterparts of the rules from the Term Equational Logic associated to the underlying Term Equational System. By construction, thus, soundness will be guaranteed.
The analysis of the rule Subst will typically involve the consideration of a syntactic substitution operation corresponding to the Kleisli composition of generalised terms.
In view of the internal completeness result, analyse the construction of free algebras so as to either establish the completeness of the synthesised equational logic, or get insight into how to extend it to make it complete.

This methodology in the universe of Sets with Σ a finitary signature, TΣ the in- duced term monad, and theories with equations of arity (1,C), for C a finite set of variables, leads to equational logic. In fact, the instantiation of our framework for Term Equational Systems and Logics in universes of Sorted Sets (see Examples 2.6, 2.11, and 3.2) essentially yields the framework of equational theories and logics for monads on categories of Sorted Sets of Climent and Soliveres [3].
In Section 5, as a substantial case study providing evidence for the practicality of the mathematical theory, the above methodology is applied within the universe of Nominal Sets (which is equivalent to the Schanuel topos). In this development, terms are generated from signatures of nominal sets of finitary operators together with meta-variables carrying nominal-variables; the context of meta-variables arises as the covariant arity of a term, whilst the context of nominal-variables as its con- travariant arity. The equational theories thus arising naturally specify nominal algebraic structures (as e.g. that of αβη-equivalence of λ-terms). For these, a sound deduction system for equational reasoning is synthesised and, furthermore, shown to be complete. Our nominal equational logic is logically equivalent to those re- cently introduced by Gabbay and Mathijssen [8], and Clouston and Pitts [4]. (We note that a similar development can be carried out in the universe Set I, for I the category of finite sets of names and injections between them, and that this leads to the Binding Equational Logic of Hamana [11, Section 4].)
In a subsequent paper, we will also apply the methodology in the context of second-order abstract syntax as developed in [5] to synthesise an equational logic for second-order algebraic theories.
Our mathematical theory generalises to incorporate rewriting modulo equations.
However, we do not dwell on this here.

Equational systems and free algebras

Equational systems.  We recall the notion of equational system introduced by the authors [6].
Definition 1.1 (Algebra) A Σ-algebra (X, s) for an endofunctor Σ on a cate- gory C is given by an object X ∈ C , called the carrier, together with a morphism s : ΣX  zX,in C , called the structure map. Homomorphisms from a Σ-algebra (X, s) to another one (Y, t) are morphisms h : X   zY,such that h ◦ s = t ◦ Σh.
The category Σ-Alg has objects given by Σ-algebras and morphisms given by homomorphisms. The forgetful functor UΣ : Σ-Alg  zC,maps Σ-algebras to their carrier objects.
Definition 1.2 (Functorial term) A functorial signature Σ on a category C is an endofunctor on it. A functorial term T in a functorial context Γ for the functorial signature Σ on C , denoted C :Σ D Γ ▶ T , is given by an endofunctor Γ on C and a functor T : Σ-Alg   zΓ-,Alg such that UΓ ◦ T = UΣ.

Definition 1.3 (Equational system) An Equational System (ES)
S = (C :Σ D Γ ▶ L ≡ R)
consists of a category C together with a pair of functorial terms C :Σ D Γ ▶ L and
C :Σ D Γ ▶ R, referred to as a functorial equation.
Definition 1.4 (ES algebra) For an ES S = (C :Σ D Γ ▶ L ≡ R), an S-algebra (X, s) is a Σ-algebra satisfying the equation; that is, such that L(X, s)= R(X, s): ΓX   zX,.
The category S-Alg is the full subcategory of Σ-Alg consisting of S-algebras, and the forgetful functor US : S-Alg   zC,maps S-algebras to their carrier objects.
Example 1.5 Every monad T = (T, η, μ) on a category C with binary coproducts has an associated ES defined as T = (C : T D Γ ▶ L ≡ R) where ΓX = X + T 2X and L(X, s) = [idX ,s ◦ Ts], R(X, s)= [s ◦ ηX ,s ◦ μX]. The category T-Alg is (iso- morphic to) the category of Eilenberg-Moore algebras C T.
For more examples of ESs and their categories of algebras see Sections 2 and 5.

Free algebras. We outline a basic theory for the inductive construction of free algebras, see [6,7].
Definition 1.6 An ES S = (C :Σ D Γ ▶ L ≡ R) is said to be λ-ﬁnitary, for λ a limit ordinal, if the category C is cocomplete, and both the functors Σ and Γ preserve colimits of λ-chains. Such an ES is said to be λ-inductive if furthermore both functors Σ and Γ preserve epimorphisms.
As it is customary, we refer to the above notions in the case of the ordinal ω simply as finitary and inductive.
Theorem 1.7 ([6,7]) Let S be an ES. If S is λ-ﬁnitary then the forgetful func- tor S-Alg   zC,has a left adjoint.
Consider an inductive ES S = (C :Σ D Γ ▶ L ≡ R). Since the forgetful functor
S	,˛  z,	 	z,
U  decomposes as S-Alg  JS	Σ-Alg UΣ  C , its left adjoint can be described in
two stages as the composition of a left adjoint to UΣ followed by a left adjoint to
JS.
The inductive construction of a left adjoint to UΣ, or equivalently that of free Σ-algebras, is well-known (see e.g. [1,2]). The free Σ-algebra (TX, τX ) on an ob- ject X ∈ C and the universal map ηX : X  zT,X are constructed as follows. The object TX is a colimit of the ω-chain { fn : Xn  zX,n+1 }n≥0 inductively defined by setting X0 = 0 to be initial and Xn+1 = X + Σ(Xn), for all for n ≥ 0; and letting f0 = u be the unique map and fn+1 = X + Σ(fn), for all n ≥ 0. Since the functor X + Σ(−) preserves colimits of ω-chains, the object X + Σ(TX) is a colimit of the ω-chain { fn : Xn  zX,n+1 }n≥1. The map [ηX , τX] is the unique mediating map as

follows:


X + Σ0  X+Σu zX,+ Σ(X + Σ0)	X + Σ(TX)
 
∃! [ηX ,τX ] ∼=



(1)

0 	u	zX,+ Σ0  X+Σu zX,+ Σ(X + Σ0)  ······
, 
TX  colim

The intuition behind this construction of TX, in which Σ represents a signature and X an object of variables, is that of taking the union of the sequence of objects Xn of terms of depth at most n built from the operators in Σ and the variables in X.
To give a left adjoint to JS, we construct a free S-algebra (X˜, s˜) on a Σ-algebra (X, s) and a universal homomorphism q : (X, s)   z(X,˜, s) as in the diagram (2)
below. The intuition behind the construction of X1 in there is that of quotienting
X according to the equation L ≡ R. For n ≥ 1, the construction of Xn+1 from Xn is intuitively quotienting the object Xn by congruence rules. Therefore, the construction of free ES algebras formalises that of quotienting by equations and congruence rules.


ΣX	Σq0 zzΣ,X,
Σq1 zzΣ,X,
Σq2 zzΣ,X,
······	˜

¸¸¸¸
1 ¸¸¸
2 ¸¸¸
3	ΣX 

s	¸s¸0¸¸ po
¸¸s¸1¸¸ po
¸¸s¸2¸¸
 ∃! se

 L(X,s) z,,  q0	¸ 
q1	¸ 
q2	¸ 
,	(2)

ΓX
R(X,s)
zX,
coeq zzX,,1
zzX,,2
q
zzX,,3	······
 X,,
colim


More precisely, the map q0 is the coequaliser of the parallel pair L(X, s), R(X, s). The map s0 is set to be q0 ◦ s and the maps qi and si, for i ≥ 1, are inductively defined by letting Xi+1 with qi and si be a pushout of si−1 and Σ(qi−1). The carrier object X˜ is given as a colimit of the ω-chain { qi }i≥0, and the structure map s˜ as the unique mediating map from the colimit ΣX˜, induced by the assumption that Σ preserves colimits of ω-chains. The universal homomorphism q : (X, s)  z(X,˜, s˜) is the component q : X  zX˜,of the colimiting cone. Using that Σ preserves epi- morphisms, one can inductively show that each qi and Σ(qi) are epimorphisms, and thus that so is q. Furthermore, we have q : X, L(X, s)   zX,, L(X, s) and q : X, R(X, s)   z  X,˜, R(X˜, s˜) in Γ-Alg, and since q coequalises L(X, s), R(X, s) it follows that Γq equalises L(X˜, s˜), R(X˜, s˜). Hence, as Γq is an epimorphism, L(X˜, s)= R(X˜, s) and (X˜, s) is an S-algebra. (Note that the overall argument does not rely on Γ preserving colimits of ω-chains.)
Thus we see that the requirement in inductive ESs that Σ and Γ preserve epi-
morphisms plays a central role in allowing the construction of free algebras by the simple inductive process in (2). Further interest in this preservation property resides in the results below.
Definition 1.8 For ESs Si = (C :Σ D Γi ▶ Li ≡ Ri), i = 1, 2, where C has binary coproducts, the ES S1&S2 is defined as C :Σ D (Γ1 + Γ2) ▶ [L1, L2] ≡ [R1, R2] .
Proposition 1.9 Let Si = (C : Σ D Γi ▶ Li ≡ Ri), for i = 1, 2, be λ-inductive

,˛ z,
ESs. For F E UΣ : Σ-Alg   zC,and Fi E JSi : S -Alg	Σ-Alg, for i = 1, 2, the
Σ-algebra F2F1FX is a free (S1&S2)-algebra on X.
Corollary 1.10 For a λ-inductive ES S = (C : T D Γ ▶ L ≡ R) and a monad T = (T, η, μ) on C , the free S-algebra (T X, μX ) on the T-algebra (TX, μX ) is a free (S &T)-algebra on X.
Term Equational Systems
We introduce a more concrete, yet abstract, notion of equational system, called Term Equational System (TES).
Enriched universes. The notion of TES (Definition 2.5) is given in the context of certain enriched universes of discourse (Definition 2.2). So as to place these within the theory of enriched categories, we need recall the following.
For a V -category C , with V monoidal closed, the notions of tensors V ⊗ A and powers [V, B] for V ∈ V and A, B ∈ C , also referred to in the literature as copowers and cotensors, respectively arise from isomorphisms
C (V ⊗ A, B) ∼= V [V, C (A, B)] ∼= C (A, [V, B]) in V
for which the former is V -natural in B and the latter V -natural in A, where V [−, =] denotes the internal hom-functor of V (see [13] for details). Further, in the important and quite common case in which V is symmetric monoidal closed, a V -category C with tensors and powers can be equivalently presented as an or- dinary category C0 equipped with a V -action (−) ⊗ (=) : V × C0  zC,0 such that the functors (−) ⊗ C : V   zC,0 and V ⊗ (−): C0   zC,0 have right adjoints for all C ∈ C0 and V ∈ V (see [12] for details).
Remark 2.1 For clarity, and as a notational convention, we will henceforth high- light V -enriched structures by underlining them. Corresponding structures that are not underlined will denote ordinary categorical notions. Thus, for instance, for a V -category C , its underlying ordinary category is denoted C .
Definition 2.2 (Enriched universe) An enriched universe (V , C ) is given by a sym- metric monoidal closed category V and a V -category C with tensors and powers.
As a basic example of enriched universe, note that every symmetric monoidal closed category V gives rise to the enriched universe (V , V ). Another class of examples is obtained from a family of enriched universes { (V , C i) }i∈I for a small set I when V has I-indexed products; as (V , i∈I C i) is an enriched universe. (This construction is needed for specifying I-sorted TESs.)
Term Equational Systems.  A Term Equational System (TES) consists of a theory of equations between terms.
Definition 2.3 (Generalised term) For an endofunctor T on a category C and objects A, C ∈ C , a generalised term of type T with arity (A, C) is a morphism A   zT,C in C .

Definition 2.4 (Generalised theory) A pair of generalised terms t ≡ t' : A  zT,C is called a generalised equation. A generalised theory of type T is a set of generalised equations consisting of generalised terms of type T .

Definition 2.5 (Term Equational System) A Term Equational System (TES) S = (V , C , T, A) is given by an enriched universe (V , C ), a V -monad T = (T , η, μ) on C , and a generalised theory A of type T in C .

Example 2.6 As a basic example, we show how multi-sorted equational theo- ries [10,3] arise as TESs.
Recall that an S-sorted signature Σ, for S a set of sorts, is specified by a family of sets of operators { Σ(σ, s) }σ∈S∗ ,s∈S, where the elements of Σ(s1 ... sn, s) stand for operators of arity s1,... , sn   zs.,Recall further that an S-sorted equational theory on such a signature is given by a set of tuples (Γ ▶ t ≡ t' : s) for Γ a context of S-sorted variables and t, t' terms of sort s built from the operators in Σ and variables in Γ.
Every S-sorted signature Σ induces the signature endofunctor FΣ on Set S given as follows:
(FΣX)(s)=  σ∈S∗ Σ(σ, s) ×  i∈|σ| X(σi)	(X ∈ Set S, s ∈ S) .
The forgetful functor FΣ-Alg   zS,et S is monadic, and the induced monad TΣ on Set S abstractly embodies the notions of terms, variables, and substitution for the signature Σ.
Moreover, multi-sorted equational theories on an S-sorted signature Σ are in bijective correspondence with TESs (Set , Set S, TΣ, A) for which the equations in A have arity (As, CΓ), for s an S-sort and Γ an S-sorted context, where As(t) = 
{ () | s = t } and CΓ(t)= { x | (x : t) ∈ Γ }.

The V -monad T = (T, η, μ) of a TES is typically given, and henceforth considered, in the equivalent form of a strong monad (T, τ, η, μ) on C with strength
τV,C : V ⊗ TC  . zT,(V ⊗ C): V × C   zC,.
Strong monads for TESs commonly arise as free monads on strong endofunctors as in the proposition below.

Proposition 2.7 For V symmetric monoidal closed, let C be a V -category with tensors and powers. Further, for an endofunctor F on C with strength τV,C : V ⊗ FC  . zF,(V ⊗ C), assume that the forgetful functor F-Alg  zC,has a left adjoint and let T = (T, η, μ) be the induced monad on C .
Then, T becomes a strong monad, with the components of the strength τ given by the unique maps such that



 τV,TC 	 Fτ V,C 
V ⊗ FTC	zF,(V ⊗ TC)	zF,T (V ⊗ C)

V ⊗ϕC
, _ _ _
ϕV ⊗C
_ _ _∃!_τ V_,C _ _ _ _ _ _zT (,V , 

V ⊗ TC 
 ¸
V ⊗ηC
      ¸

	V ⊗C
⊗ C)

V ⊗ C 
where (TX, ϕX ) is a free F-algebra on X.
Model  theory.	The model theory of TESs is developed.
Let S = (V , C , T, A) be a TES. Every generalised term t : A  zT,C in C induces a functorial term t) : T -Alg  z(C,(C, −) ⊗ A)0-Alg over C , mapping s : TX  zX, to the composite

C (C, X) ⊗ A C (C,X)⊗t zC,(C, X) ⊗ TC τC (C,X),C zT ,C (C, X) ⊗ C Tє zT X,
TC,X 	C (t,s)
which is the transpose of (C, X)	z,(T C, TX)	z,(A, X).
s zX,, 

The functorial interpretation of terms induces a model-theoretic notion of equal- ity between generalised terms for algebras. We formalise it by introducing a satis- faction relation: for a T -algebra (X, s),
(X, s) |= u ≡ v : A   zT,C iff  u)(X, s)= v)(X, s): C (C, X) ⊗ A   zX,. 
More generally, for a set of T -algebras A , we set A |= u ≡ v iff (X, s) |= u ≡ v for all (X, s) ∈ A .
It is an important fact that the algebras satisfying an equation are closed under powers. Indeed, every algebra structure s : TX  zX,induces an algebra structure sV on [V, X] given by the transpose of the composite

V ⊗ T [V, X] τV,[V,X] zT (,V ⊗ [V, X]) Tє zT X,
and we have the following result.
s  zX,

Lemma 2.8  For (X, s) a T-algebra, (X, s) |= u ≡ v iff ([V, X], sV ) |= u ≡ v for all V ∈ V .
Definition 2.9 (TES algebra) An S-algebra for a TES S = (V , C , T, A) is an Eilenberg-Moore algebra (X, s) for the monad T satisfying the equations in A; that is, such that (X, s) |= u ≡ v for all (u ≡ v) ∈ A.
The category S-Alg is the full subcategory of the category of Eilenberg-Moore algebras C T consisting of the S-algebras. We thus have the following situation
S-Alg ,˛	zC,T ,˛	zT -,Alg
¸¸¸¸¸¸	UT
US ¸¸ C, ¸ rU T
The following remark indicates why, in general, a single equation is not sufficient for the specification of categories of TES algebras.

Proposition 2.10 Assume that C has I-indexed coproducts for a small set I. For
(X, s) a T-algebra, if (X, s) |= ti ≡ t' : Ai   zT,Ci for all i ∈ I then (X, s) |= t ≡ t'

for

 i∈I Ai


'	,
i∈I,,t ,,,,







s 
 ,





i∈I Ci

,,	
i∈I	i
On the other hand, the converse need not hold.
Example 2.11 Let S(Σ,A) be the TES associated to an equational theory A on an
S-sorted signature Σ as in Example 2.6.
The functorial term induced by a map As  zT,Σ(CΓ) in Set S, or equivalently a term t of sort s in context Γ, maps a TΣ-algebra (X, s), or equivalently an FΣ-algebra (X, s∗), to a map
 Γ ▶ t : s)(X,s∗) : Set S(CΓ,X) ⊗ As   zX, in Set S	(3)
where, for S ∈ Set and P ∈ Set S, the tensor S ⊗ P ∈ Set S is given pointwise by setting (S ⊗ P )(t)= S × P (t) for all t ∈ S. Thus, to give (3) is equivalent to give a single function
 Γ ▶ t : s)(X,s∗) :  t∈S Set CΓ(t),X(t)   zX,(s) . 
The explicit description of this function is given by the following inductive definition.
For (x : s) ∈ Γ,
 Γ ▶ x : s)(X,s∗)(ρ)= ρs(x) .
For f : s1,... , sn   zs ,in Σ,

 Γ ▶ f(t1,... , tn): s)	∗ (ρ)= s∗  Γ ▶ t1 : s1)
∗ (ρ),... , Γ ▶ tn : sn)
∗ (ρ) 

(X,s )	f
(X,s )
(X,s )

where s∗ denotes the f-component of the structure map s∗.
It follows that S(Σ,A)-Alg is (isomorphic to) the category of (Σ, A)-algebras.
Remark 2.12 We note that the model theory of TESs can be easily recast in the framework of ESs. Indeed, for C with small coproducts, every TES S = (V , C , T, A) induces an ES S = C : T D ΓA ▶ L ≡ R such that (S &T)-Alg ∼= S-Alg, where
ΓA(X)=  (t ≡ t':A→TC)∈A C (C, X) ⊗ A

L(X, s)=  t)(X, s)	'	,	R(X, s)=  t')(X, s)	'
Furthermore, when the strong monad T arises as the free monad on a strong
endofunctor F (as in Propos ition 2.7), the TES S induces a simpler ES ^S with
^S-Alg ∼= S-Alg. Indeed, ^S = C : F D ΓA ▶ L^ ≡ R^ , where

L^(X, s∗)=  t)(X, s)	'	,	R^(X, s∗)=  t')(X, s)	'
for (X, s) the T-algebra corresponding to the F -algebra (X, s∗).
Definition 2.13 Let (V , C ) be an enriched universe. A pair of objects (A, C) in C is respectively said to be λ-compact, for λ a limit ordinal, and projective if the endofunctor (C (C, −) ⊗ A)0 on C respectively preserves colimits of λ-chains and epimorphisms.
Proposition 2.14 Let S = (V , C , T, A) be a TES. If the category C is cocomplete, the endofunctor T on C preserves colimits of λ-chains (and epimorphisms), and every arity of an equation in A is λ-compact (and projective), then the ES S &T is λ-ﬁnitary (λ-inductive).
Thus, the theory of Section 1 may be applied to TESs.

Term Equational Logic
We introduce a sound deduction system for reasoning about equality between gen- eralised terms in the context of TESs.
For a TES S = (V , C , T, A), we consider equality judgements of the form
A▶ u ≡ v : A   zT,C 
where u, v are generalised terms of arity (A, C) in C . The associated Term Equa- tional Logic (TEL) consists of the following rules.
Equality rules.

Ref A▶ u ≡ u
Sym  A▶ u ≡ v 
A▶ v ≡ u
Trans  A▶ u ≡ v	A▶ v ≡ w 
A▶ u ≡ w



Axioms.


Congruence of substitution.

(u ≡ v) ∈A 
Axiom	A▶ u ≡ v


Subst
A▶ u1 ≡ v1 : A   zT,B	A▶ u2 ≡ v2 : B   zT,C 
A▶ u1[u2] ≡ v1[v2]: A   zT,C 

where w [w ] denotes the Kleisli composite A  w1 zT B, Tw2 zT (,TC)  μC zT C,.
Congruence of tensor extension.

Ext
A▶ u ≡ v : A   zT,C 
A▶ ⟨V ⟩u ≡ ⟨V ⟩v : V ⊗ A   zT,(V ⊗ C)
(V ∈ V )

where ⟨V ⟩w denotes the composite V ⊗ A  V ⊗w zV ,⊗ TC τV,C zT (,V ⊗ C). 
Local character.

LocChar
A▶ u ◦ ei ≡ v ◦ ei : Ai   zT,C	(i ∈ I)
A▶ u ≡ v : A   zT,C 

 { ei

}i∈I
jointly epi 


Remark 3.1 One can also consider the following theory-dependent rule:
A▶ T (e) ◦ u ≡ T (e) ◦ v : A   zT,D 

A▶ u ≡ v : A   zT,C 
(e : C   zD,S-extendable)

where e : C  zD,in C is S-extendable iff C (e, X): C (D, X)  zC,(C, X) in V is an epimorphism for all S-algebra carriers X.
However, we know of no concrete example where this rule is of real significance.

Example 3.2 The TEL associated to the TES of a multi-sorted equational the- ory (see Example 2.6) conservatively extends its multi-sorted equational logic [10]. Note for instance that the usual congruence rule for substitution is derivable from the TEL rules Subst and LocChar. Details are left to the interested reader (see also [3]).

The soundness of TEL is the following result.

Theorem 3.3 (External soundness) For a TES S = (V , C , T, A),
A▶ u ≡ v	implies	S-Alg |= u ≡ v. 

Interestingly, the soundness of the congruence rule for tensor extension essentially amounts to Lemma 2.8.


Internal completeness
One cannot expect to obtain an external completeness result at the level of gen- erality of the previous section. However, in the presence of free constructions, an internal completeness result does hold. Its importance in relationship to external completeness is illustrated in the application of the following section.
Let S = (V , C , T, A) be a TES for which the forgetful functor S-Alg   zC,has
a left adjoint C  zS-,Alg : X   z(T,X, σ : T T X  zT,X), and let T = (T , η, μ) be the associated monad on C . Then, the embedding S-Alg ,˛ zC,T induces a strict monad morphism q : T  . zT˜,, with each component qX : TX  zT˜,X given by the unique homomorphism (TX, μX )   z(T˜,X, σX ) extending ηX : X   zT˜,X along
ηX : X  zT,X.
Lemma 4.1 The monad T˜ has a strength τ induced from τ, with components τV,X
given by the unique map such that

τV,TeX 
˜	z,
˜	 T (τeV,X ) z,˜

V ⊗ TTX 
V ⊗σX
T (V ⊗ TX)
TT (V ⊗ X)
σV ⊗X

, _
_ _ _ _
_ _∃!_τeV_,X _
_ _ _
, 
_ _ _zT˜(,V

V ⊗ T˜X ,¸¸,¸ ¸
¸¸¸¸¸¸¸¸
,,, ,
,,,,
⊗ X)

V ⊗ηeX
¸	,,
V ⊗ X
ηeV ⊗X

and making q : T  . zT˜,a map of strengths in the sense that
V ⊗ TX   V ⊗qX	zV ,⊗ T˜X 

τV,X
, 
τV,X
, 

T (V ⊗ X)	qV ⊗X  zT˜(,V ⊗ X)
The equivalence of the first two statements below is a form of strong complete- ness; it states that an equation is satisfied by all models iff it is satisfied in a freely generated, hence somewhat syntactic, one.
Theorem 4.2 (Internal soundness and completeness)	For a TES S such that the forgetful functor S-Alg   zC,has a left adjoint, the following are equivalent:
S-Alg |= u ≡ v : A   zT,C 
(T˜C, σC ) |= u ≡ v : A  zT,C 
qC ◦ u = qC ◦ v : A   zT˜,C 
Proof. (i)  z(i i) Vacuously.
 z(i ii) Because, for u : A  zT,C in C and n˜C : I  zC,(C, T˜C) in V the
transpose of I ⊗ C ∼= C  ηeC zT˜C, in C , we have that
A ∼= I ⊗ A  neC ⊗A zC,(C, T˜C) ⊗ A
u	 u)(TeC,σC )
,	 , 
TC	qC	zT˜C,
 z(i ) Because, for all (X, s) ∈ S-Alg, we have

C (C, X) ⊗ TC 
τC (C,X),C
C (C,X)⊗qC	zC,(C, X) ⊗ T˜C 
τeC (C,X),C

,	 	z˜ , 	, 

T C (C, X) ⊗ C
Tє 
, 
TX ¸¸¸¸
qC (C,X)⊗C


qX
T C (C, X) ⊗ C
T є 
, 
,,,zT˜X,

¸¸¸¸¸¸	,,,,,,

s	¸¸¸
,,, s'

tX  t,
where s' denotes the unique homomorphism (T˜X, σX )   z(X,, s) extending idX along
η˜X : X  zT˜,X.	□

Importantly for applications, we remark that when a TES is represented by an inductive ES, the strong-monad morphism q : T  . zT,has an inductive descrip- tion. For instance, for a TES S = (V , C , T, A) with C cocomplete, T arising as a free monad on a strong endofunctor F that preserves colimits of ω-chains and epimorphisms, and A with equations of compact and projective arity, the ES ^S (see Remark 2.12) is inductive and the quotient map qX : TX  zzT˜,,X is inductively con-
structed as follows:


FTX 
Fq0 zzF,,Y 
Fq1 zzF,,Y 
	zz· ·,,· 	zzF,,(T˜X)

¸¸¸¸
1 ¸¸¸	2

μ∗	¸¸¸
po	¸¸¸
∃! σ∗

X	¸¸
¸¸¸
X	(4)

,	¸	, 

TX	q0	zzY,1,
q1	zzY,2,
zz· ·,,· 	zzT˜,X,
colim

	 ¸¸
X

where (TX, μ∗ ) and (T˜X, σ∗ ) are the F -algebras respectively corresponding to
the T-algebras (TX, μX ) and (T˜X, σX ), and where q0 is the universal map that
coequalises every pair  u)(TX, μX ) and  v)(TX, μX ) with (u ≡ v) ∈ A.

Synthetic Nominal Equational Logic
We recall the basic structure of the category Nom of Nominal Sets [9, Section 6] (which is equivalent to the Schanuel topos [17, Section III.9]) and present it as an enriched universe.
On Nom we consider a class of TESs which we call NESs (Nominal Equational Systems). A syntactic notion of nominal theory arises, and its model theory is derived from that of NESs. An equational logic, called SNEL (Synthetic Nominal Equational Logic), for nominal theories is synthesised from the TEL associated to NESs. The logic SNEL is sound by construction, and we establish its completeness by means of the internal completeness result through an analysis of the inductive construction of free algebras.
Gabbay and Mathijssen [8], on the one hand, and Clouston and Pitts [4], on the other, have recently introduced sound and complete equational deduction systems for nominal algebraic structures. These logics are logically equivalent to our SNEL. However, our novel top-down development—from general mathematical theory to concrete application—leads to new syntax and proof of completeness.

Nominal sets.  For a fixed countably infinite set A of atoms, the group S0(A) of finite permutations of atoms consists of the bijections on A that fix all but finitely many elements of A. A S0(A)-action X = ( |X|, ·) consists of a set |X| equipped with an action (−) · (=) : S0(A) × |X|   z|X,| satisfying idA · x = x and π' · (π · x)= (π'π) · x for all x ∈ |X| and π, π' ∈ S0(A). S0(A)-actions form a cat- egory with morphisms X  zY,given by equivariant functions; that is, functions f : |X|   z|Y,| such that f (π · x)= π · (f x) for all π ∈ S0(A) and x ∈ |X|.
For a S0(A)-action X, a finite subset S of A is said to support x ∈ X if for all atoms a, a' /∈ S, we have that (a a') · x = x, where the transposition (a a') is

the bijection that swaps a and a', and fixes all other atoms. A nominal set is a S0(A)-action in which every element has finite support. As an example, the set of atoms A becomes the nominal set of atoms A when equipped with the evaluation action π · a = π(a). The category Nom is the full subcategory of the category of S0(A)-actions consisting of nominal sets.
The supports of an element of a nominal set are closed under intersection, and we write suppX (x), or simply supp(x), for the intersection of the supports of x in the nominal set X. For elements x and y of two, possibly distinct, nominal sets X and Y , we write x # y whenever suppX (x) and suppY (y) are disjoint. Thus, for a ∈ A and x ∈ X, a # x stands for a /∈ suppX (x); that is, a is fresh for x.
The category Nom is complete and cocomplete. In particular, for a family of nominal sets { Xi }i∈I , the coproduct  i∈I Xi is given by | i∈I Xi| =  i∈I |Xi| with action π · ιi(x)= ιi(π · x); whilst the product  i∈I Xi, for finite I, is given by
| i∈I Xi| =  i∈I |Xi| with action π · (xi)i∈I = (π · xi)i∈I . Further, Nom carries a
symmetric monoidal structure (I, #). The unit I is the singleton set consisting of the empty tuple equipped with the unique action. The separating tensor X # Y is the nominal subset of X × Y with underlying set given by { (x, y) ∈ |X|× |Y | | x # y }. As usual, we write X# n for X # ... # X (n times). For instance, A# n consists of n-tuples of distinct atoms equipped with the pointwise action. Note that X#0 is I. Henceforth, we write an, or simply a when n is clear from the context, as a short- hand for a tuple a1,... , an of distinct atoms. A multi transposition (an bn) denotes a fixed bijection on A satisfying (an bn)(ai)= bi, for i = 1,... , n, and (an bn)(c)= c
for c /∈ {an}∪ {bn}.
The separating tensor # is closed and the corresponding internal-hom functor is denoted [−, =]. In particular, the functor [A# n, −] provides a notion of atom multi abstraction. For a nominal set X, the nominal set [A# n,X] has underlying set given by the quotient set |A# n × X|/≈ determined by the α-equivalence relation
≈ defined as (a, x) ≈ (b, x') iff there exists a fresh c ∈ A# n (i.e., a tuple satisfying
c # a, x, b, x') such that (a c) · x = (b c) · x'. We write ⟨a⟩ x for the equivalence class [(a, x)]≈. Note that supp(⟨an⟩ x) is supp(x)\{an}.
Thus, the structure (Nom,I, #), Nom ) is an enriched universe.

We now urge the reader to read the remaining of the section in the context of the methodology for developing term equational systems and logics presented in the Introduction.

Nominal Equational Systems.	A nominal signature Σ is given by a family of nominal sets { Σ(n) }n∈N, each of which consists of operators of arity n. To each such signature, we associate the endofunctor FΣ on Nom defined by FΣ(X) = n∈N Σ(n) × Xn with strength τX,Y : FΣ(X)# Y   zF,Σ(X # Y ) for X, Y ∈ Nom
given by
τX,Y ιn(o, x1,... , xn), y = ιn o, (x1, y),... , (xn, y) 
for n ∈ N, o ∈ Σ(n), x1,... , xn ∈ X, y ∈ Y .

Nominal Equational Systems (NESs) are of the form (Nom, Nom, TΣ, A) where
TΣ is the free monad on FΣ (with strength defined as in Proposition 2.7) and where
every term in A has an arity of the form (A# n,  l	A# ni ) for n, l, n1,... , nl ∈ N.
It follows that NESs satisfy all the conditions in Proposition 2.14 and hence induce
inductive ESs.
Nominal syntax.  We proceed to analyse the syntactic structure underlying NESs. To this end, first note that, since the functor FΣ preserves colimits of ω-chains and the category Nom is cocomplete, the free monad TΣ on FΣ is constructed as in (1). Thus, we have the following inductive definition of TΣX:
t ∈ TΣX ::= x	( x ∈ X )
|  o t1 ... tk	( o ∈ Σ(k), t1,.., tk ∈ TΣX )
with action given by π · x = π ·X x and π · (o t1 ... tk)= (π · o) (π · t1) ... (π · tk).
More generally, we need to consider generalised terms A# n      z ,l	A# ni . From

the bijections

{ t : A# n   zTΣ,  l

A# ni }

∼= { t : I   z[A,# n, TΣ  l	A# ni ] }
∼= { t ∈ [A# n, TΣ  l	A# ni ] | supp(t)= ∅} 
= { ⟨a⟩ t ∈ [A# n, TΣ  l	A# ni ] | supp(t) ⊆ {a}} 
it follows that every such generalised term can be described by pairs

(a, t) ∈ A# n × TΣ(  l
A# ni ) with supp(t) ⊆ { a }	(5)

via the abstraction quotient map A# n × TΣ(  l
A# ni ) 	zz[A,,# n, TΣ(  l
A# ni )]

and the above bijections.
We thus obtain a representation of generalised terms of arity (A# n,  l

A# ni )

as syntactic open terms built up from l variables respectively of valence n1,... , nl
in the context of n atoms. It is therefore convenient to introduce a syntactic notion of context that reflects this structure. To this end, fix a countably infinite set V of variables and define a context [a]V as consisting of an atom context given by a tuple of distinct atoms a and a variable context given by a valence function V
from a finite subset |V | ⊆ V of variables to N. Every context [a]V determines the

arity (A# |a|, V˜) with V˜ = 

x∈|V |
A# V (x).

The open terms t in context [a]V , for which we use the notation [a]V ▶ t, cor- responding to the descriptions (5) are thus given by the following rules:


[a]V ▶ x(b)
 x(b) ∈ V˜ and {b}⊆ {a} 

 [a]V ▶ ti	(1 ≤ i ≤ k)  o ∈ Σ(k) and supp(o) ⊆ {a} 
[a]V ▶ o t1 ... tk

where we write x(b) for the element ιx(b) of V˜ and, when convenient, further ab-
breviate x() as x. The generalised term of arity (A# |a|, V ) associated to the open term [a]V ▶ t is denoted T ([a]V ▶ t). Hence, T ([a]V ▶ t)(b)= (a b) · t.

Nominal theories.  A nominal theory consists of a nominal signature and a set of equations of the form [a]V ▶ t ≡ t' where [a]V ▶ t and [a]V ▶ t' are open terms. We give the canonical example.
Example 5.1 (cf. [8,4]) The nominal signature Σλ for the untyped λ-calculus is given by the nominal sets of operators Σλ(0) = {Va | a ∈ A}, Σλ(1) = {La | a ∈ A}, Σλ(2) ={A} with action π ·Va = Vπ(a), π ·La = Lπ(a), π ·A = A. The nominal theory Sλ for αβη-equivalence of untyped λ-terms consists of the following equations:
(α)	[a, b]{ x : 1 } ▶ La x(a) ≡ Lb x(b)
(βκ) [a]{ x : 0,y : 1 } ▶ A (La x) y(a) ≡ x
(βV ) [a]{ x : 1 }▶ A (La Va) x(a) ≡ x(a)
(βL) [a, b]{ x : 2,y : 1 }▶ A La (Lb x(a, b)) y(a) ≡ Lb A La x(a, b) y(a) 
(βA) [a]{ x : 1,y : 1,z : 1 }
▶ A La (A x(a) y(a)) z(a) ≡ A A (La x(a)) z(a)  A (La y(a)) z(a) 
(βε) [a, b]{ x : 1 } ▶ A La x(a) Vb ≡ x(b)
(η)	[a]{ x : 0 }▶ La (A x Va) ≡ x
where a variable context V with |V | = { x1,... , xl } and V (xi) = ni (i = 1,... , l) is denoted { x1 : n1,... , xl : nl }.
Model theory.	Every nominal theory S = (Σ, A) induces the NES ˜S = (Nom, Nom, TΣ, A˜), with
A˜ = {T ([a]V ▶ t) ≡T ([a]V ▶ t') | ([a]V ▶ t ≡ t') ∈ A } ,
that provides its model theory. This we now spell out in elementary terms.
Every open term [a]V ▶ t has an interpretation as a functorial term
 [a]V ▶ t) : FΣ-Alg   zF[,a]V -Alg ,
where F[a]V (X)= A# |a| #	[A# V (y),X], given as follows.
For (X, ξ) ∈ FΣ-Alg and b, (⟨cy⟩ sy)y∈|V | ∈ F[a]V X,
 [a]V ▶ x(c))(X,ξ) b, (⟨cy⟩ sy)y = (cx (a b) · c) · sx
 [a]V ▶ o t1 ... tk)	 b, (⟨cy⟩ sy)y = ξk(o', t' ,... , t' )
(X,ξ)	1	k
where ξk : Σ(k) × Xk   zX,is the k-component of the structure map ξ and where

o' = (a b) · o ,	t' = [a]V ▶ ti)
 b, (⟨cy⟩ sy)y .

i	(X,ξ)



[a]V ▶ t
Ref [a]V ▶ t ≡ t
[a]V ▶ t ≡ t'
Sym [a]V ▶ t' ≡ t
[a]V ▶ t ≡ t'	[a]V ▶ t' ≡ t''
Trans	[a]V ▶ t ≡ t''

 [a]V ▶ t ≡ t' ∈A 
Axiom	[a]V ▶ t ≡ t'

Elim
[a, b]V ▶ t ≡ t'
[a]V ▶ t ≡ t'

 b # t, t' 


Intro
[a]V ▶ t ≡ t'


[a, b]V ⟨b⟩ ▶ t[x(cx)  zx(,cx, b)]x∈|V | ≡ t'[x(cx)  zx(,cx, b)]x∈|V |
where |V ⟨b⟩| = |V | with ∀	V ⟨b⟩(x) = V (x)+ |b| [a]U ▶ t ≡ t'	{ [bxU(x)]V ▶ sx ≡ s' }x∈|U|

Subst [a]V ▶ t[x(bx)  zsx,]	≡ t'[x(bx)  zsx,]
x∈|U |

Fig. 1. Rules of SNEL.


Then, for an FΣ-algebra (X, ξ) and a judgement [a]V ▶ t ≡ t' the satisfaction
relation (X, ξ) |= [a]V ▶ t ≡ t' holds whenever
 [a]V ▶ t)(X,ξ) =  [a]V ▶ t')(X,ξ) : F[a]V X   zX,. 
An S-algebra is an FΣ-algebra satisfying the equations in A. The category S-Alg
is the full subcategory of FΣ-Alg consisting of S-algebras.
Example 5.2 For the nominal theory of Example 5.1, an Sλ-algebra has a carrier X ∈ Nom with structure maps V ) : A   zX,, L) : A × X   zX,, A) : X × X   zX, satisfying the equations of the theory. For instance, according to the equation (α) we have that
 L) a, (c a) · x = L) b, (c b) · x	for all (a, b, ⟨c⟩ x) ∈ A # A #[A,X] and according to the equation (η) we have that
 L) a, A)(x, V )a) = x	for all (a, x) ∈ A # X .
The initial Sλ-algebra given by the construction (4) on the initial term alge- bra TΣλ 0 has as carrier the nominal set of αβη-equivalence classes of λ-terms with the appropriate action.

Synthetic Nominal Equational Logic.	We now introduce SNEL (Syn- thetic Nominal Equational Logic) for equational reasoning with nominal theories S = (Σ, A) according to the above model theory. The logic deals with judgements [a]V ▶ t ≡ t' for open terms [a]V ▶ t and [a]V ▶ t', and is described in Figure 1. The operation of substitution used therein maps open terms

[a]U ▶ t ,  [byU(y), c]V ▶ sy }	with a # c
to the open term


defined as follows:
[a, c]V ▶ t[y(by)  zsy,]y∈|U|

 x(b) [y(by)  zsy,]y∈|U | = (bx b) · sx
(o t1 ... tk)[y(by)  zsy,]y∈|U | = o (t1[y(by)  zsy,]y∈|U |) ... (tk[y(by)  zsy,]y∈|U |) .
Note that the definition of substitution models that of parameterised Kleisli composition, in that
T [a, c]V ▶ t[y(by)  zsy,]y∈|U| = T ([a]U ▶ t)⟨c⟩ [T ([byU(y), c]V ▶ sy)]y∈|U| 
where T ([a]U ▶ t)⟨c⟩ is the composite


A|a|

|c|	T ([a]U ▶t)# A|c|
Σ

τ e  |c|
zTΣ,(U˜ # A

|c|

) ∼= TΣ
 U˜⟨c⟩  .

The logic SNEL is sound because it has actually been induced from the TEL for the NES ˜S. Indeed, if the judgement [a]V ▶ t ≡ t' is derivable in SNEL then the judgement A˜ ▶T ([a]V ▶ t) ≡T ([a]V ▶ t') is derivable in TEL. More precisely, the rule Elim arises from the TEL rule LocChar with respect to the epimorphic projection map A#(|a|+|b|)  zzA,,#  |a|; the rule Intro arises from the TEL rule Ext extended with A# |b|; and the rule Subst arises from the TEL rule Subst together with the rule LocChar with respect to the jointly epi family of maps { ιx : A# U(x)   zU˜,}x∈|U |.

Remark 5.3 Since the category of sets embeds in that of nominal sets, every classi- cal equational theory is a nominal theory and for them SNEL restricted to contexts with empty atom context and variables of valence zero reduces to classical equa- tional logic.


Completeness. Consider a nominal theory S = (Σ, A). Since, for the associated NES ˜S = (Nom , Nom, TΣ, A˜), the monad TΣ is free on the endofunctor FΣ and the induced ES ^S (see Remark 2.12) is inductive, the free S-algebra monad TS exists and the quotient monad morphism qX : TΣX  . zzT,,SX is constructed as in (4).
By the internal completeness result, we have that the satisfaction relation
S-Alg |= ([a]V ▶ t ≡ t') is equivalent to qVe ◦ T ([a]V ▶ t) = qVe ◦ T ([a]V ▶ t') : A# |a|   zT,S(V˜ ). Moreover, by the equivariance of T ([a]V ▶ t) and T ([a]V ▶ t'), this is further equivalent to qVe (t)= qVe (t') in TS(V˜ ).
The construction of the nominal set TSV˜ and the map qVe as in (4) is as follows:



Refn 	
t ≈ t
Symn
t ≈n t' t' ≈n t
Transn
t ≈n t'	t' ≈n t'' t' ≈n t


Axiom1	 
 [an]U ▶ t ≡ t' ∈A 
 

where bn # ⟨cx⟩ sx ∈ [A# U(x), TΣV˜] for all x ∈ |U |


ti ≈n−1 t'
(1 ≤ i ≤ k)

Congn 	i	
o t1 ... tk ≈n o t' ... t'
n ≥ 2, o ∈ Σ(k)


Incn
1
t ≈n−1 t' t ≈n t'
k

 n ≥ 2 

Fig. 2. Rules for ≈n.



F T V˜
FΣq0 zzF,,Y
FΣq1 zzF,,Y
	zz· ·,,· 	zzF,,(T V˜)

Σ Σ ¸¸¸
Σ 1¸¸¸	Σ 2	Σ	S

Ve	¸¸¸¸¸¸
po	¸¸¸	∗
¸¸	V

,	¸	¸r	, 

Y0 =TΣV˜
q0	zzY,1,	q1	zzY,2,
zz· ·,,· 	zzT,S,V˜
colim

	
	 qVe
	 ¸¸


Since the forgetful functor |−| : Nom  zS,et creates colimits, we have the following explicit description of the above construction.
The nominal set Yn (n ≥ 1) has underlying set |Yn| = |TΣV˜|/≈n with action
π · [t]≈n = [π · t]≈n for ≈n the equivalence relation given by the rules in Figure 2. The instantiation operation used in Axiom1 is given by:
 y(c) {⟨cx⟩ sx}x = (cy c) · sy ,
 o t1 ... tk {⟨cx⟩ sx}x = o t1{⟨cx⟩ sx}x) ... tk{⟨cx⟩ sx}x) .
The map q0 sends t to [t]≈1 , and the map qn (n ≥ 1) sends [t]≈n to [t]≈n+1 .
The nominal set TSV˜, being the colimit of the ω-chain ⟨Yn⟩n≥0, is given by
|TSV˜| = |TΣV˜|/≈ω  with action π · [t]≈ω  = [π · t]≈ω  where ≈ω is the equivalence
relation generated by the relation ≈ of Figure 3.
Since the map qVe : TΣV˜  zTS,V˜ sends t to [t]≈ω , we have that the satisfac-
tion relation S-Alg |= ([a]V ▶ t ≡ t') holds iff t ≈ω t'.	Furthermore, since for
 [an]U ▶ t ≡ t' ∈A and bn # ⟨cx⟩ sx ∈ [A# U(x), TΣV˜] for all x ∈ |U |, the judge-
ment
[d]V ▶ (an bn) · t {⟨cx⟩ sx}x ≡ (an bn) · t' {⟨cx⟩ sx}x
with { d }⊇ bn ∪ x supp(sx)\{cx} is derivable in SNEL, it follows that, for all

[a]V ▶ t and [a]V ▶ t', if t ≈ω t' in TΣV˜
Hence, SNEL is complete.
then [a]V ▶ t ≡ t' is derivable in SNEL.





Axiom
 [an]U ▶ t ≡ t' ∈A 


 (an bn) · t {⟨cx⟩ sx}x ≈ (an bn) · t' {⟨cx⟩ sx}x
where bn # ⟨cx⟩ sx ∈ [A# U(x), TΣV˜] for all x ∈ |U |



Cong
ti ≈ t'	(1 ≤ i ≤ k)
o ∈ Σ(k) 

o t1 ... tk ≈ o t' ... t'
1	k
Fig. 3. Rules for ≈.

We conclude with two corollaries of completeness.
Since [a]V ▶ t ≡ t' is derivable in SNEL iff qVe (t)= qVe (t') and the map qVe is equivariant, the rule
[an]V ▶ t ≡ t'
[bn]V ▶ (an bn) · t ≡ (an bn) · t'
is admissible in SNEL.
Since [a]V ▶ t ≡ t' is derivable in SNEL iff there exist t = t0,... , ti,... , tn = t' in TΣV˜ such that ti ≈ ti+1 or ti+1 ≈ ti for all 0 ≤ i < n, one may use equational term rewriting to establish nominal equational judgements.

Acknowledgement
We are grateful to Steve Lack for advice on enriched category theory.

References
Ad´amek, J., Free algebras and automata realizations in the language of categories, Comment. Math. Univ. Carolin. 15 (1974), pp. 589–602.
Ad´amek, J. and V. Trnkov´a, “Automata and Algebras in Categories,” Kluwer Academic Publishers, 1982.
Climent Vidal, J. and J. Soliveres Tur, The completeness theorem for monads in categories of sorted sets, Houston Journal of Mathematics 31 (2005), pp. 103–129.
Clouston, R. and A. Pitts, Nominal equational logic, Electronic Notes in Theoretical Computer Science
172 (2007), pp. 223–257.
Fiore, M., Second-order and dependently-sorted abstract syntax, in: Symposium on Logic in Computer Science (LICS’08), IEEE (2008).
Fiore, M. and C.-K. Hur, Equational systems and free constructions, in: International Colloquium on Automata, Languages and Programming (ICALP’07), Lecture Notes in Computer Science 4596 (2007),
pp. 607–618.
Fiore, M. and C.-K. Hur, On the construction of free algebras for equational systems (2008), preprint.
Gabbay, M. J. and A. Mathijssen, A formal calculus for informal equality with binding, in: Workshop on Logic, Language, Information and Computation (WoLLIC’07) (2007).

Gabbay, M. J. and A. Pitts, A new approach to abstract syntax involving binders, in: Symposium on Logic in Computer Science (LICS’99) (1999), pp. 214–224.
Goguen, J. and J. Meseguer, Completeness of many-sorted equational logic, Houston Journal of Mathematics 11 (1985), pp. 307–334.
Hamana, M., Term rewriting with variable binding: An initial algebra approach, in: Symposium on Principles and Practice of Declarative Programming (PPDP’03) (2003).
Janelidze, G. and G. M. Kelly, A note on actions of a monoidal category, Theory and Applications of Categories 9 (2001), pp. 61–91.
Kelly, G. M., “Basic concepts of enriched category theory,” Cambridge University Press, 1982. (Republished in Reprints in Theory and Applications of Categories, No. 10 (2005) pp. 1–136.)
Kelly, G. M. and A. J. Power, Adjunctions whose counits are coequalizers, and presentations of finitary enriched monads, Journal of Pure and Applied Algebra 89 (1993), pp. 163–179.
Klop, J. W., “Combinatory Reduction Systems,” Ph.D. thesis, Mathematical Centre Tracts 127, CWI, Amsterdam (1980).
Lawvere, F. W., “Functorial Semantics of Algebraic Theories,” Ph.D. thesis, Columbia University (1963). (Republished in Reprints in Theory and Applications of Categories, No. 5 (2004) pp. 1–121.)
Mac Lane, S. and I. Moerdijk, “Sheaves in Geometry and Logic,” Springer-Verlag, 1992.
Mart´ı-Oliet, N. and J. Meseguer, Rewriting logic: Roadmap and bibliography, Theoretical Computer Science 285 (2002), pp. 121–154.
Nipkow, T., Higher-order critical pairs, in: Symposium on Logic in Computer Science (LICS’91), IEEE (1991).
Robinson, E., Variations on algebra: Monadicity and generalisations of equational theories, Formal Aspects of Computing 13 (2002), pp. 308–326.
