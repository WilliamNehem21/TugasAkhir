Available online at www.sciencedirect.com



Electronic Notes in Theoretical Computer Science 278 (2011) 129–143
www.elsevier.com/locate/entcs

Neighborhood-Sheaf Semantics for First-Order Modal Logic
Kohei Kishida1,2
Department of Artificial Intelligence University of Groningen
Groningen, The Netherlands

Abstract
This paper extends neighborhood semantics for propositional modal logic to the first-order case, by unifying topological-sheaf semantics (in [2]) for first-order S4 and Kripke-sheaf semantics (see [11] and [8], just for instance) for quantified K. It will be shown how to take a sheaf-like structure over a neighborhood frame, and the resulting semantics properly generalizes the two preceding sheaf semantics; it has a weaker modal logic (in which the rule N fails) sound and complete, while accommodating classical, full first-order logic with equality and function symbols.
Keywords: First-order modal logic, neighborhood semantics, sheaf semantics.


Introduction
The goal of this paper is to extend neighborhood semantics for propositional modal logic, which subsumes and unifies both Kripke and topological semantics, to first- order modal logic, and in particular to a sheaf semantics. This is achieved by extending the neighborhood subsumption on the propositional level to the sheaf level, using the notion of a neighborhood sheaf that generalizes and unifies Kripke- sheaf semantics and topological-sheaf semantics.
The semantics laid out in this paper unifies several frameworks of semantics for propositional and quantified modal logic. The relations of extension or subsumption among these frameworks can be summarized by the following diagram; the labels with alphabets indicate semantic ideas explained in the following, and the dotted

1 This work is part of the VIDI research programme with number 639.072.904, which is financed by the Netherlands Organisation for Scientific Research. The author also wishes to thank the anonymous referees for helpful comments and suggestions.
2 Email: kishidakohei@gmail.com

1571-0661 © 2011 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2011.10.011

arrows indicate the unification offered in this paper.
(b)	˛n1bhd.-sheaf ¸ (a)





Quant. Prop.
Kripke-sheaf sema,nt,ics (d)
Kripke sem. w/ (const.) ,do,main
(c)
Kripke semantics

(b)



(b)
sema,nt,ics
(d)
nbhd. sem. w/
˛c onst. d,om,ain
(c)
neighborhood semantics


¸ (a)



¸ 
(a)
top.-sheaf sema,nt,ics
(d)
(constant shea,ve,s)
(c)
topological semantics

Among frameworks of semantics for propositional modal logic—that is, on the bottom level in the diagram—neighborhood semantics generalizes Kripke semantics and topological semantics by the following ideas, respectively:
It generalizes topological semantics by considering interior operations that are more general than topological ones.
It generalizes accessibility relations in Kripke semantics with a neighborhood notion of accessibility.
We briefly review these ideas in Section 2 of this article, to prepare ourselves to extend them to the level of first-order modal logic.
To extend his semantics for propositional modal logic to the level of quantified modal logic, Kripke [12] took advantage of the following idea:
Interpret first-order vocabulary with a domain D of possible individuals; in particular, interpret the “transworld identity” of individuals with the identity of elements of D.
This idea gives rise to Kripke semantics with domains, and in particular with con- stant domains, bringing up Kripke semantics from the bottom to the middle level in the diagram above.
Neighborhood semantics with constant domains was given by Arl´o-Costa and Pacuit [1], who showed how to combine the ideas (b) and (c). Their semantics has constant domains of all possible individuals, but interprets modal operators in terms of neighborhoods rather than accessibility relations.
This extension to the quantified case via (c), however, is not general enough for treating the necessity and contingency of identity of individuals; in particular, it forces the identity and non-identity of individuals to always be necessary. By contrast, Kripke-sheaf semantics [8,9,11] can model the contingency of non-identity, by extending the idea (c) further with
Interpret first-order vocabulary, and in particular the transworld identity, with the structure of a sheaf over a set of possible worlds.
A sheaf over a set X (a Kripke frame, for instance) can be regarded as a family

of local copies of X nicely patched together, and each such copy interprets the transworld identity. The sheaf point of view subsumes constant domains as constant sheaves, bringing semantics up to the top level in the diagram above.
This idea, (d), was also employed by Awodey and Kishida’s [2] topological-sheaf semantics. They showed that sheaves over topological spaces provided semantics for modal logic S4 combined with classical first-order logic with equality and function symbols. We review these sheaf semantics in Section 3.
In Section 4, we generalize topological-sheaf semantics of [2] by applying (a). Employing the same notations and the same types of semantic structures as in [2], we identify a right formulation of the notion of a sheaf that works not just over a topological space but also over a more general neighborhood structures. The resulting semantics subsumes neighborhood semantics with constant domains as a subclass (namely, of constant sheaves), bringing it to the sheaf level via (d). 3 Moreover, it properly subsumes Kripke-sheaf semantics as well, since the Kripke sheaves are just the neighborhood sheaves with relational accessibility. Thus, on the sheaf level, neighborhood-sheaf semantics subsumes and unifies not only topological- sheaf semantics via (a) but also Kripke-sheaf semantics via (b), in just the same way that neighborhood semantics subsumes and unifies topological and Kripke semantics on the propositional level.
Reviewing the Propositional Case
This section introduces notations we use for Kripke, topological, and neighborhood semantics, and reviews how the third semantics subsumes the others.

Possible-World Semantics Basics
Fix a propositional modal language L with a unary sentential operator 2. Then, by a possible-world semantics for L, we meana class of models that consist of a set X /=∅ and a map [·]] : L → PX, among other things. We may call points in X possible worlds, and subsets of X propositions, so that we can read w ∈ [[ϕ ], for a sentence ϕ and a world w ∈ X, as meaning that ϕ is true at w. Accordingly, we define the notion of validity so that a sentence ϕ is valid in (X, [[·]]) iff [ϕ]] = X, and an inference is valid iff it preserves validity of sentences. It is also convenient for our purpose to define validity of binary sequents, so that a sequent ϕ ▶ ψ is valid in (X, [[·]]) iff [[ϕ]] ⊆ [[ψ]].
We extend [· ] to interpret sentential operators: For each n-ary operator ⊗, we have [⊗]]: (PX)n → PX and [⊗]]( [ϕ1]],..., [[ϕn]]) = [[⊗(ϕ1,..., ϕn)]]. Since we discuss modal logic with classical base, we assume [¬]] = X \− (so [¬ϕ]] = X \[[ϕ]]), [[∧]] = ∩ (so [ϕ ∧ ψ]]= [[ϕ]] ∩ [[ϕ]]), and so on.
Kripke, topological, and neighborhood semantics are all possible-world semantics in this sense; their difference consists in how they interpret 2. Kripke semantics,

3 Neighborhood-sheaf semantics fails to entirely subsume neighborhood semantics with constant domains, because the former requires certain conditions on neighborhood structures, which the latter does not.

for instance, equips X with a binary relation R, called an accessibility relation, and lets it define [2]] : PX → PX so that w ∈ [[2]](A) iff u ∈ A for all u ∈ X such that Rwu.

Topological Semantics
Topological semantics, which originated with McKinsey and Tarski’s [18] result, interprets 2 by equipping X /=∅ with a topology OX ⊆ PX. Any topology OX gives rise to an interior operation int : PX → PX, by setting
w ∈ int(A) ⇐⇒ there is U ∈ OX such that w ∈ U ⊆ A.	(1) Then 2 can be interpreted topologically with [2]] = int.
The following conditions characterize topological interior operations; any int :
PX → PX is an interior operation of some topology iff it satisfies
A0 ⊆ A1 =⇒ int(A0) ⊆ int(A1),	(Mint)
int(X)= X,	(Nint)
int(A0) ∩ int(A1) ⊆ int(A0 ∩ A1),	(Cint)
int(A) ⊆ A,	(Tint)
int(A) ⊆ int(int(A)).	(4int)
Because these correspond respectively to the following rules and axioms of modal logic, the modal logic obtained by adding them to classical propositional logic, namely S4, is sound with respect to topological semantics.
ϕ ▶ ψ / 2ϕ ▶ 2ψ	M
▶ ϕ / ▶ 2ϕ	N
2ϕ ∧ 2ψ ▶ 2(ϕ ∧ ψ)	C
2ϕ ▶ ϕ	T
2ϕ ▶ 22ϕ	4
S4 is indeed complete with respect to topological semantics, as implied by the representation theorem in [18], in the following strong form.
Theorem 2.1 (McKinsey-Tarski [18]) Every consistent theory T of proposi- tional modal logic containing S4 has a topological model (X, [[·]]) that validates all and only theorems of T.
Neighborhood Semantics
Scott [21] and Montague [20] introduced neighborhood semantics, generalizing topo- logical semantics by not assuming the constraints (Mint)–(4int) on the interior op- eration int : PX → PX. Such a general operation int is associated with the following generalization of the notion of a topological space.

Given a topological space X, we say that A is a neighborhood of w, and write
A ∈ N (w), if the equivalents of (1) hold; so we have
w ∈ int(A) ⇐⇒ A ∈ N (w).	(2) This equivalence gives us a map N : X → PPX, called a neighborhood function
on X, that is just equivalent to int : PX → PX. 4 We call a set X paired with a neighborhood function on it a neighborhood frame. Moreover, along (2), the constraints (Mint)–(4int) translate respectively to
A ⊆ B ⊆ X and A ∈ N (w) =⇒ B ∈ N (w),	(MN )
X ∈ N (w),	(NN )
A, B ∈ N (w) =⇒ A ∩ B ∈ N (w),	(CN )
A ∈ N (w) =⇒ w ∈ A,	(TN )
A ∈ N (w) =⇒ int(A) ∈ N (w).	(4N )
In other words, taking N : X → PPX instead of OX ∈ PPX gives us freedom to drop, or keep, any of the constraints (Mint)–(4int) on int : PX → PX by dropping or keeping the corresponding ones of (MN )–(4N ) on N .
This freedom is straightforwardly reflected in logic. Neighborhood semantics, which keeps the interpretation [2]] = int, validates the rule
ϕ ▶ ψ, ψ ▶ ϕ / 2ϕ ▶ 2ψ	E
since, trivially, [ϕ]]= [[ψ ] implies int([[ϕ]]) = int([[ψ]]); the semantics has sound and complete the logic E obtained by adding E to classical logic.
Theorem 2.2 (Scott [21], Montague [20], Segerberg [22]) Every consistent theory T of propositional modal logic containing E has a neighborhood model (X, N, [[·]]) that validates all and only theorems of T.
Beyond this weak logic E, however, M, N, C, T, 4 are rules and axioms that could be added by assuming the corresponding ones of (MN )–(4N ).
Theorem 2.3 (Segerberg [22]) On neighborhood semantics, M, N, C, T, 4 cor- respond respectively to (MN )–(4N ).
2.4 Neighborhood Uniﬁcation, the Propositional Case
Let us close this section with a brief observation of how neighborhood semantics subsumes Kripke and topological semantics. We just saw in Subsection 2.3 how a topology OX gives rise to a neighborhood function N on X that has the same interior operation int (and hence interprets 2 the same way), and that satisfies (MN )–(4N ). On the other hand, given any neighborhood function N on X satisfying

4 Writing Y = PX makes it obvious that N : X → (Y → 2) and int : Y → (X → 2) are just the “transposes” of the neighborhood relation : X × Y → 2.

(MN )–(4N ), we can obtain a topology OX that has the same interior operation int, by setting OX = { U ⊆ X | int(U )= U }. Thus, topological semantics is just neighborhood semantics with (MN )–(4N ).
Let us say that a neighborhood frame (X, N ) is Kripke if there is a map −→ :
−→
X → PX such that A ∈ N (w) iff R (w) ⊆ A. This equivalence implies
−→
w ∈ int(A) ⇐⇒ R (w) ⊆ A ⇐⇒ u ∈ A for all u ∈ X such that Rwu
−→	−→
by (2), where we set u ∈ R (w) iff Rwu for R : X → (X → 2) and R : X × X → 2.
Thus, Kripke semantics is just Kripke neighborhood semantics.
−→
In Kripke semantics, R (w) is the neighborhood of w such that w ∈ [[2ϕ ] means
−→
R (w) ⊆ [[ϕ]]. By contrast, in topological or neighborhood semantics, w may have no
such privileged neighborhood; with (MN ), w ∈ [[2ϕ ] only means that U ⊆ [[ϕ]] for some U ∈ N (w). This contrast between “the” and “some” turns out crucial for the purpose of this article, as we will see in Subsection 4.3. It may also be worth noting
that, as a consequence of this contrast, the infinitary version Vi 2ϕi ▶ 2 Vi ϕi of C
(though this article does not formally treat infinitary V) would be valid in Kripke
semantics but not in the others (even with (CN )); under the reading of 2 as for provability or verifiability in general, infinitary C precludes the finite character of proof or verification.
Reviewing Existent Sheaf Semantics
This section reviews Kripke- and topological-sheaf semantics. The notations and the types of semantic structures we employ are just those employed in [2]; we refer the reader to [2] for more detailed expositions of them.
Semantics for First-Order Logic
In Subsection 2.1, we reviewed the common features of Kripke, topological, and neighborhood semantics for propositional modal logic. In this subsection, we do the same for first-order logic. To interpret propositional modal logic, possible-world semantics takes a set X; we extend this, to interpret first-order modal logic, by taking instead the category Sets/X of sets over X.
The semantic ideas behind taking Sets/X can be put as follows. Consider an object of Sets/X, that is, any map π : D → X. Each w ∈ X has its inverse image Dw = π−1[{w}], called the ﬁber over w. D is then the “bundle” of all the fibers
taken over X, written D = Σw∈X Dw, meaning that D is the disjoint union of
all Dw. We can regard each w ∈ X as a possible world, and the fiber Dw as the
domain of individuals that live in w. Then D is the set of “possible individuals” that live in some world or other. Indeed, each individual a ∈ D lives in a unique world π(a) ∈ X; in this sense, we call π a residence map. 5 The n-fold product of

5 David Lewis’s [15] counterpart theory has such a domain of possible individuals, though he did not formulate it in terms of a residence map. See Sections 10 and 11 of [4].

π : D → X in Sets/X is a map πn : Dn → X, where Dn = Σ

w∈X
Dn is the n-fold

ﬁbered product of D over X, that is, the bundle of n-fold Cartesian products of Dw;
in terms of the residence idea, Dn is the set of n-tuples of individuals that live in the same world, and πn sends (a1,..., an) ∈ Dn to their residence, w. We interpret n-ary formulas by subsets of n-fold fibered, rather than Cartesian, products. An arrow in Sets/X from πD : D → X to πE : E → X is a map f : D → E over X, that is, such that πE ◦ f = πD, or equivalently, of the form  w∈X (fw : Dw → Ew), a bundle of maps from Dw to Ew. We use such a map f : Dn → D to interpret
n-ary function symbols. In this way, we regard Sets/X as the category of domains of, sets of tuples of, and functions among, possible individuals, over the set X of possible worlds. Each such structure, restricted to fibers over a world w ∈ X, is a usual structure for first-order logic: a domain of, sets of tuples of, and functions among, individuals that live in w.
Accordingly, we extend the usual semantics of first-order logic by bundling it up over X. Fix a first-order language L; then, for each w ∈ X, take a usual L-structure Mw and, given a sentence ϕ with no free variables other than x¯ = (x1,..., xn), let [[ x¯ | ϕ ]]w be the subset of Dn defined by ϕ. Now, we bundle up these (Mw, [[·]]w) over

X, by having M = Σ
w∈X
Mw and [ x¯ | ϕ ]] = Σ
w∈X
[[ x¯ | ϕ ]]w ⊆ Σ
w∈X
Dn = Dn;

that is, a¯
= (a1,..., an) ∈ Dn lies in [ x¯ | ϕ ]] iff ϕ is true of a¯, with each ai in

place of free xi, in Mπn(a¯). We can similarly interpret a term t with n variables by [[ x¯ | t ]] : Dn → D. This is intuitively how the semantics in Sets/X works; formally,
the definition goes directly, without Σ, as follows.
Definition 3.1 Given a first-order (modal) language L, we say that M is a bundle model for L if it consists of the following, among other things.
a surjection π : D → X of some domain D and codomain X; 6
for each n-ary primitive predicate F , a subset F M ⊆ Dn of the n-fold fibered product of D over X; in particular, =M = { (a, a) | a ∈ D }⊆ D2;
for each n-ary function symbol f , a map f M : Dn → D over X; and
for each constant c, a map cM : D0 → D over X, that is, a map cM : X → D
such that π ◦ cM = 1X .
By a bundle interpretation, we mean a pair of a bundle model M and a map [·]] that satisfies suitable constraints such as
[[ x¯ | F x¯ ]] = F M	for n-ary primitive predicate F ; [[ x¯ | ¬ϕ ]] = Dn \ [[ x¯ | ϕ ]	(that is, [¬]] = Dn \ −);
[[ x¯ | ϕ ∧ ψ ]]= [[ x¯ | ϕ ]] ∩ [[ x¯ | ψ ]	(that is, [∧]] = ∩);
[[ x¯ | ∃yϕ ]] = pn[[[ x¯, y | ϕ ]]],	for the projection pn; 7
[[ x¯, y | ϕ(x¯) ]] = pn−1[[[ x¯ | ϕ(x¯) ]]];
and so on. We say that, in such (M, [[·]]), ϕ is valid iff [ x¯ | ϕ ]] = Dn; ϕ ▶ ψ is valid

6 We require π to be surjective so that Dw /= ∅ for every w ∈ X.
7 For each n, the projection pn is pn : Dn+1 → Dn :: (a¯, b) '→ a¯.

iff [ x¯ | ϕ ]] ⊆ [[ x¯ | ψ ]]; and an inference is valid iff it preserves validity.
Both Kripke- and topological-sheaf semantics, as well as the semantics we offer in Section 4, are given by certain classes of bundle interpretations. They differ in what structures they add to X, D, π, etc., to interpret 2.
Topological-Sheaf Semantics
Topological semantics interprets propositional modal logic by adding a topology and [2]] = int to a set X of worlds. Extending this, topological-sheaf semantics interprets first-order modal logic by adding topologies and [2]] = int to the semantic structures we reviewed in Subsection 3.1, namely sets over X; specifically, instead of taking objects, products, and arrows in Sets/|X|, 8 it takes those in LH/X, the category of sheaves over a topological space X.
Recall that, given topological spaces X and Y ,a map f : Y → X is a homeomor- phism if it is a continuous bijection with a continuous inverse. Then the topological notion of a sheaf is defined as follows.
Definition 3.2 A continuous map π : D → X is called a local homeomorphism if every a ∈ D has some U ∈ OD such that a ∈ U , π[U ] ∈ OX, and the restriction πTU : U → π[U ] of π to U is a homeomorphism. We say that such a pair (D, π) is a sheaf over the space X, and call π its projection. 9
Given sheaves (D, πD) and (E, πE) over a space X, we say that a map f : D → E is a map of sheaves over X (from (D, πD) to (E, πE)) if f is continuous and πE ◦ f = πD (that is, over |X|). We can prove that maps of sheaves are themselves local homeomorphisms, 10 which implies that the category of sheaves and maps of sheaves is just LH/X, the category LH of topological spaces and local homeomorphisms over X.
Given a sheaf (D, π) over a space X, let us write Dn for the n-fold fibered product |D|n of |D| with the following topology: Let D × · · · × D be the n-fold product space of D. Then, since |D|n is a subset of the n-fold Cartesian product
|D × ··· × D| of |D|, we let Dn simply be the subspace on |D|n of D × · · · × D. Then (Dn, πn) is a sheaf over X, and is the n-fold product of (D, π) in LH/X. Moreover, any projection p : Dn → Dm (m ≤ n) is a map of sheaves (and hence a local homeomorphism).
Now, topological-sheaf semantics of [2] consists in equipping the bundle seman- tics of Subsection 3.1 with topologies, by using structures from LH/X rather than from Sets/|X|. We enter:
Definition 3.3 By a topological-sheaf model for a given first-order modal language
L, we mean a bundle model M = (π, F M,f M, cM ) for L such that π : D → X is a

8 We write |X| for the underlying set of a topological space X.
9 The notion of a sheaf is often defined in terms of the notion of a functor, in which case the version used here is called an ´etale space. The functorial notion is equivalent (in the category-theoretical sense) to the version here. See, for instance, [16].
10 Exercise II.10(b) in [16], 105.

local homeomorphism and f M : Dn → D, cM : X → D are all maps of sheaves. By a topological-sheaf interpretation for L, we mean a bundle interpretation (M, [[·]]) for L such that M is a topological-sheaf model and [2]] : P(Dn) → P(Dn) :: [[ x¯ | ϕ ]] '→ [[ x¯ | 2ϕ ]] is intDn .
It has to be emphasized that 2 is interpreted by not just intX but by the family of intDn , corresponding to the arity of [ x¯ | ϕ ]] to which [2 ] is applied.
Topological-sheaf semantics unifies the semantics in Sets/X (for first-order logic) and topological semantics (for propositional S4) naturally, in the sense that it gives rise to a logic that is a simple union of classical first-order logic and S4. Let FOS4 be the first-order modal logic that consists of
all the rules and axioms of classical, full first-order logic, “full” meaning that it has equality and function symbols, and
the rules and axioms of propositional modal logic S4.
In this logic, schemes of first-order rules and axioms do not distinguish sentences containing 2 from ones not. In the axiom x = y ▶ [x/z]ϕ → [y/z]ϕ of identity, for instance, ϕ may contain modal operators. Also, modal rules and axioms are insensitive to the first-order structure of sentences. Hence we call FOS4 a simple union of first-order logic and S4. It can be checked straightforwardly that FOS4 is sound with respect to topological-sheaf semantics. It is moreover complete, in the strong form that exactly extends Theorem 2.1.
Theorem 3.4 (Awodey-Kishida [3]) Every consistent theory T of ﬁrst-order modal logic containing FOS4 has a topological-sheaf interpretation (π, [[·]]) that val- idates all and only theorems of T. 11
To give examples of theorems of FOS4, x = y ▶ 2(x = y) is provable, because x = y ▶ 2(x = x) → 2(x = y) is an instance of the above-mentioned axiom of identity (with 2(x = z) for ϕ), while ▶ x = x implies ▶ 2(x = x) by N. Also, ϕ ▶ ∃xϕ implies 2ϕ ▶ 2∃xϕ by M, from which ∃x 2ϕ ▶ 2∃xϕ follows (because x is not free in 2ϕ); similarly, FOS4 proves 2∀xϕ ▶ ∀x 2ϕ. By contrast, FOS4 proves neither x /=y ▶ 2(x /=y), 2∃xϕ ▶ ∃x 2ϕ, nor ∀x 2ϕ ▶ 2∀xϕ. (The same goes for the logic FOK of Kripke-sheaf semantics.)
Kripke-Sheaf Semantics
Kripke semantics interprets propositional modal logic by adding an accessibility relation to a set X of worlds. Extending this, Kripke-sheaf semantics interprets first-order modal logic by adding accessibility relations to structures in Sets/X; that is, instead of sets, it takes Kripke frames.
Let us say that, given Kripke frames (D, RD) and (X, RX ), a map f : D → X
is a p-morphism if it satisfies the following conditions.
f is monotone, that is, if RDab then RXf (a)f (b).

11 Awodey and Kishida’s [3] completeness proof is inspired by those of McKinsey and Tarski [18], Segerberg [22], and Butz and Moerdijk [5,6,19].

If RXf (a)w then there is b ∈ D such that RDab and w = f (b).
Then, among various (mostly equivalent) versions of definition of Kripke sheaves, one goes as follows. 12
Definition 3.5 A p-morphism π : D → X is called a Kripke sheaf over (X, RX ) if such b ∈ D as in the definition of p-morphism above is unique—that is, if every pair u, w ∈ X such that RXuw has a map Cuw : Du → Dw such that, for any pair of a ∈ Du and b ∈ Dw, RDab iff Cuw(a)= b.
Then, analogously to the case of topological sheaves, given Kripke sheaves πD : D → X and πE : E → X, we call a map f : D → E a map of (Kripke) sheaves over X (from πD to πE) if f is monotone and over X. We can prove that maps of sheaves are themselves Kripke sheaves; hence, writing KrSh for the category of Kripke frames (as objects) and Kripke sheaves (as arrows), the category of Kripke sheaves and maps of sheaves over a Kripke frame (X, RX ) is just KrSh/(X, RX ).
Moreover, the n-fold product in KrSh/(X, RX ) of a Kripke sheaf π over (X, RX ) is πn : Dn → X, where Dn has the accessibility relation RDn such that RDn (a¯, ¯b) iff RDaibi for every i ≤ n.
Then Kripke-sheaf semantics adds accessibility relations to the bundle semantics
by using structures from KrSh/(X, RX ) rather than from Sets/|X|.
Definition 3.6 By a Kripke-sheaf model for a given first-order modal language L, we mean a bundle model M = (π, F M,f M, cM ) for L such that π : D → X is a Kripke-sheaf and f M : Dn → D, cM : X → D are all maps of sheaves. By a Kripke-sheaf interpretation for L, we mean a bundle interpretation (M, [[·]]) for L such that M is a Kripke-sheaf model and
a¯ ∈ [[ x¯ | 2ϕ ]] ⇐⇒ ¯b ∈ [[ x¯ | ϕ ]] for all ¯b ∈ Dn such that RDn (a¯, ¯b).

Again, 2 is interpreted by not just RX but by the family of RDn . This semantics unifies the semantics in Sets/X and Kripke semantics naturally by having sound and complete the simple union FOK of first-order logic and K (which is given by M, N, and C).
Neighborhood-Sheaf Semantics
This section, finally, generalizes and unifies topological- and Kripke-sheaf semantics, by providing a notion of a sheaf over a neighborhood frame.

Why Sheaves are Needed
Let us analyze topological and Kripke sheaves and identify an aspect of them that is essential for unifying first-order and modal logics, so that we can preserve it as we move to a more general notion of sheaves. In Subsection 3.2, we reviewed a

12 See, for instance, [23].

standard definition of local homeomorphisms; yet it is helpful for our purpose to rewrite it in terms more closely connected to logic. Recall that a continuous map f : Y → X is said to be open if f [V ] ∈ OX for every V ∈ OY . Then topological sheaves can be characterized in terms of openness of maps, by the following fact.
Fact 4.1 For any topological spaces X and D and any map π : D → X, the following are equivalent: 13
π is a local homeomorphism (as deﬁned in Subsection 3.2).
π satisﬁes (i) and (ii) below.
π satisﬁes (i) and (iii) below.
π is an open map.
For every a ∈ D there is U ∈ OD such that a ∈ U and πTU : U → π[U ] is bijective.
The diagonal map Δ: D → D2 :: a '→ (a, a) is an open map.
An analogous fact holds for Kripke sheaves.
Fact 4.2 For any Kripke frames (X, RX ) and (D, RD) and any map π : D → X, the following are equivalent:
π is a Kripke sheaf (as deﬁned in Subsection 3.3).
π satisﬁes (iv) and (v) below.
π satisﬁes (iv) and (vi) below.
π is a p-morphism.

For every a ∈
D, πT
−→
RD(a)
is bijective.

The diagonal map Δ is a p-morphism.
Recall the facts that maps of sheaves are local homeomorphisms or Kripke sheaves. Therefore we can summarize the facts above by saying that, in sheaf semantics, all the maps we use to interpret the first-order part of first-order modal logic—projections π and pn, interpretations [ y¯ | t ] of terms, and the diagonal map Δ—are open maps or p-morphisms, and indeed that, in order for this to be the case, we must take a sheaf.
The logical reason we need all the relevant maps to be open maps or p-morphisms is the following. Any map f : Y → X is continuous or monotone iff f−1[intX (B)] ⊆ intY (f−1[B]) for all B ⊆ X, and moreover it is an open map or a p-morphism iff f−1[intX (B)] = intY (f−1[B]) for all B ⊆ X (in the Kripke case, we take Kripke neighborhood frames and their interior operations). This equality, in case f = Δ 





13 The equivalence between the first and third clauses is Exercise II.10(a) in [16], 104.

for instance, amounts to commutativity of
[[ y, z | ϕ(y, z) ]]   intD2	 [[ y , z | 2ϕ(y, z) ]]

_
Δ−1
J 
[[ y |


	 [[ y |
_
Δ−1
J 

ϕ(y, y) ]]
intD
2ϕ(y, y) ]]

In other words, as long as we identify the two sentences
2([y/z]ϕ), obtained by first substituting y for z in ϕ and then applying 2,
[y/z](2ϕ), obtained by first applying 2 to ϕ and then substituting t for z,
the well-definedness of [ y | 2ϕ(y, y) ] requires Δ be an open map. Similar argu- ments go with other relevant maps; 14 therefore, on certain assumptions regarding the syntax, the well-definedness of the semantics requires that all relevant maps, including π and Δ, be open maps, and hence, by Facts 4.1 and 4.2, that π (and other relevant maps) be sheaves.
Sheaves over a Neighborhood Frame
Our analysis in Subsection 4.1 points to the idea of generalization that we should define a sheaf over a neighborhood frame in terms of f−1[intX (B)] = intY (f−1[B]) being satisfied by all the relevant maps f .
Let us say that a map f : Y → X between neighborhood frames is continuous iff f−1[intX (B)] ⊆ intY (f−1[B]) for all B ⊆ X, and moreover that f is an open map iff f−1[intX (B)] = intY (f−1[B]) for all B ⊆ X—so this definition subsumes the topological case, as well as the Kripke case of monotone maps and p-morphisms. Also, let us say that a neighborhood frame is MC if it satisfies (MN ) and (CN ); topological spaces and Kripke frames are MC neighborhood frames. Then we enter
Definition 4.3 Given MC neighborhood frames X and D, we say that a map
π : D → X is a local isomorphism if
π is an open map, and
for every a ∈ D such that ND(a) /=∅, there is U ∈ ND(a) such that πTU :
U → π[U ] is bijective.
We call such a pair (D, π) a neighborhood sheaf over X.
While (vii) subsumes (i) and (iv), (viii) also clearly subsumes (ii) and (v); so, neighborhood sheaves generalize topological and Kripke ones. Moreover, extending the definitions for the topological and Kripke cases, we define maps of sheaves over X to be continuous maps over X. Then
Fact 4.4 Maps of sheaves are local isomorphisms. Therefore the category of neigh- borhood sheaves over a given MC neighborhood frame X is LI/X, the category of

14 See [2] for more details.

local isomorphisms over X.
In addition, we also have
Fact 4.5 For any MC neighborhood frames X and D and any open map π : D → X,
is the case iff
The diagonal map Δ is an open map.
That is, in the same way as we did with topological and Kripke sheaves, we have all the relevant maps open if and only if we take sheaves, which is the desideratum in generalizing the topological and Kripke notions of a sheaf.
LI/X has a finite product, but we should explicitly define what an n-fold product of a neighborhood sheaf is. It goes in essentially the same way as in LH/X. Let (D, π) be a neighborhood sheaf over an MC neighborhood frame X; then its n-fold product in LI/X is (Dn, πn), where Dn has the following neighborhood function NDn : For i ≤ n, write pi : Dn → D :: (a1,..., an) '→ ai. Given a¯ ∈ Dn, define B : X → PPX so that B(a¯)= {  i≤n pi−1[Ui] | Ui ∈ ND(ai) for each i ≤ n}, and
then set A ∈ NDn (a¯) iff there is B ∈ B(a¯) such that B ⊆ A. Then (Dn, πn) is a 
sheaf and each projection is a map of sheaves.
In this way, all the definitions and all the nice properties we reviewed for LH/X and KrSh/(X, R) are naturally generalized for the category LI/X of neighborhood sheaves. Indeed, the neighborhood notion of a sheaf subsumes the topological and Kripke ones, in the following strong form.
Fact 4.6 Given any topological space X, LH/X ∼= LI/X, where X is regarded as a neighborhood frame. Also, given any Kripke frame (X, R), KrSh/(X, R) ∼= LI/(X, R), where (X, R) is regarded as a neighborhood frame.

Neighborhood-Sheaf Semantics for First-Order Modal Logic
In Subsection 4.2, we saw that all the relevant facts on the category LH/X of topo- logical sheaves extended to the category LI/X of neighborhood sheaves. Therefore neighborhood-sheaf semantics is obtained by simply substituting “neighborhood” and “local isomorphism” for “topological” and “local homeomorphism” in Defi- nition 3.3. It generalizes and unifies the other two sheaf semantics, because the neighborhood notion of a sheaf subsumes and unifies the topological and Kripke notions.
The following conceptual observation is worth making on (v) and (viii): The
−→
Kripke version, (v), states that b ∈ RD(a) correspond one-to-one to their residences
−→
π(b); in other words, RD(a) is the “transworld identification” of a, so that a satisfies
−→
RD(a) satisfy ϕ(x). By contrast, the neighbor-
hood version, (viii), states that ND gives a ∈ X some transworld identification or other U ∈ ND(a). (Recall the contrast between “the” and “some” we discussed in Subsection 2.4.)
Finally, the new semantics unifies classical first-order logic and the modal logic corresponding to (MN ) and (CN ). Let FOMC be the first-order modal logic that

consists of 1) all axioms and rules of classical first-order logic, and 2) the rule M and axiom C of modal logic. This logic is obviously weaker than FOS4, but also properly weaker than the logic FOK of Kripke-sheaf semantics, since it lacks the rule N. For instance, FOK does, but FOMC does not, prove x = y ▶ 2(x = y), whose proof requires N. (We can use M in place of N to prove 2ϕ ∧ (x = y) ▶ 2(x = y), a theorem stating that “If anything is necessary, identity is necessary”, though it may be that nothing is necessary.) Again, it is straightforward that FOMC is sound with respect to neighborhood-sheaf semantics. Moreover, it is complete in the form extending Theorem 3.4. Although we do not provide it here, the proof extends that of Theorem 3.4 (sketched in [2] and fully given in [3]) rather straightforwardly.
Theorem 4.7 For any consistent theory T of ﬁrst-order modal logic containing FOMC, there exists a neighborhood-sheaf interpretation (π, [[·]]) that validates all and only theorems of T.

References
Arl´o-Costa, H. and E. Pacuit, First-order classical modal logic, Studia Logica 84 (2006), pp. 171–210.
Awodey, S. and K. Kishida, Topology and modality: the topological interpretation of first-order modal logic, Review of Symbolic Logic 1 (2008), pp. 146–66.
Awodey, S. and K. Kishida, Topological completeness of first-order modal logic (2008), manuscript.
Brau¨ner, T. and S. Ghilardi, First-order modal logic, in: P. Blackburn, J. van Benthem and F. Wolter, editors, “Handbook of Modal Logic”, Elsevier, Oxford, 2007, pp. 549–620.
Butz, C., A topological completeness theorem, Archive for Mathematical Logic 38 (1999), pp. 79–101.
Butz, C., and I. Moerdijk, An elementary definability theorem for first order logic, Journal of Symbolic Logic 64 (1999), pp. 1028–36.
Fourman, M. and D. Scott, Sheaves and logic, in: M. Fourman, C. Mulvey and D. Scott, editors, “Applications of Sheaves”, Springer, Berlin, 1979, pp. 302–401.
Gabbay, D. M., V. Shehtman and D. Skvortsov, “Quantification in Nonclassical Logic”, Volume 1, Elsevier, Oxford, 2009.
Ghilardi, S., Presheaf semantics and independence results for some non classical first order logics, Archive for Mathematical Logic 29 (1989), pp. 125–36.
Ghilardi, S. and G. Meloni, Modal and tense predicate logic: models in presheaves and categorical conceptualization, in: F. Borceux, editor, “Categorical Algebra and Its Applications”, Springer, Berlin, 1988, pp. 130–42.
Goldblatt, R., “Topoi: The Categorial Analysis of Logic”, North-Holland, Amsterdam and New York, 1979.
Kripke, S., “Semantical considerations on modal logic”, Acta Philosophica Fennica 16 (1963), pp. 83– 94; reprinted in L. Linsky, editor, “Reference and Modality”, Oxford University Press, London, 1971,
pp. 63–72.
Lawvere, W. F., Adjointness in foundations, Dialectica 23 (1969), pp. 281–95.
Lawvere, W. F., Quantifiers and sheaves, Actes du Congr`es International des Math´emathciens 1 (1970),
pp. 329–34.
Lewis, D., Counterpart theory and quantified modal logic, Journal of Philosophy 65 (1968), pp. 113–26; reprinted with postscripts in his “Philosophical Papers”, Volume I, Oxford University Press, New York and Oxford, 1983, pp. 26–46.
Mac Lane, S. and I. Moerdijk, “Sheaves in Geometry and Logic: A First Introduction to Topos Theory”, Springer, Berlin, 1992.

Makkai, M. and G. E. Reyes, Completeness results for intuitionistic and modal logic in a categorical setting, Annals of Pure and Applied Logic 72 (1995), pp. 25–101.
McKinsey, J. C. C. and A. Tarski, The algebra of topology, Annals of Mathematics 45 (1944), pp. 141–91.
Moerdijk, I., Some topological spaces which are universal for intuitionistic predicate logic, Indagationes Mathematicae 44 (1982), pp. 227–35.
Montague, R., Universal grammar, Theoria 36 (1970), pp. 373–98.
Scott, D., Advice on modal logic, in: K. Lambert, editor, “Philosophical Problems in Logic”, D. Reidel, Dordrecht, 1970, pp. 143–73.
Segerberg, K., “An Essay in Classical Modal Logic”, No. 13 in Filosofiska Studier, Uppsala University, 1971.
Shehtman, V. and D. Skvortsov, Semantics of non-classical first-order predicate logics, in: P. P. Petkov, editor, “Mathematical Logic”, Plenum Press, New York, 1990, pp. 105–16.
