Electronic Notes in Theoretical Computer Science 44 No. 1 (2001)
URL: http://www.elsevier.nl/locate/entcs/volume44.html 14 pages


Modal Languages for Coalgebras in a Topological Setting

Dirk Pattinson 1,2
Institut fu¨r Informatik, LMU Mu¨nchen


Abstract
It is well know that the solution Z of a recursive domain equation, given by an end- ofunctor T , is the final T -coalgebra. This suggests a coalgebraic approach to obtain a logical representation of the observable properties of Z. The paper considers fi- brations of frames and (modal) logics, arising through a set of predicate liftings. We discuss conditions, which ensure expressiveness of the resulting language (de- notations of formulas determine a base of the frame over the final coalgebra). The framework is then instantiated with categories of domains, and we establish these conditions for a large class of locally continuous endofunctors. This can be seen as abs1.tex
a first step towards a final perspective on Abramsky’s domain theory in logical form.


Introduction
Coalgebras have by now been recognised as models for state based systems, which are quite naturally specified using modal logic. There are several ap- proaches [9,11,15,17,18] discussing (modal) logics for coalgebras on the cate- gory of sets and functions.
The purpose of this paper is to generalise these approaches as to accommo- date coalgebras on other computationally interesting categories, and categories of domains are the prime example. The motivation of this extension is twofold. Viewing coalgebras as transition systems, we would like to work with systems, whose transition structure is (the denotational semantics) of a programme. This necessitates to consider coalgebras for endofunctors on categories of do- mains. The second motivation for the present work is the observation, that the solution Z of a recursive domain equation, given by an endofunctor T , is precisely (the carrier of) the final T -coalgebra. Taking Scott-open subsets

1 Research partially supported by the DFG Graduiertenkolleg “Logik in der Informatik”
2 Email: pattinso@informatik.uni-muenchen.de
◯c 2001 Published by Elsevier Science B. V. Open access under CC BY-NC-ND license.


o ⊆ Z as predicates on Z, we can use the methods of coalgebraic modal logic in order to obtain a syntactical representation of the underlying set of the frame O(Z) of Scott-open subsets o ⊆ Z. In order to obtain this representa- tion, we reconstruct the topology on TX from the topology on X, given any domain X. Since this can be done for a large class of domains (continuous and better), the resulting representation does not rely on the domains being bifinite (in contrast to [2]).
The interpretation of the logics discussed is based on predicate liftings. To the author’s knowledge, the connection between predicate liftings and logics for coalgebras has first been made explicit in [11]. In contrast to the exposition in loc. cit. (and the subsequent paper [10]), we do not associate predicate liftings to a functor based on its syntactic structure. Instead, an axiomatic ap- proach is taken. That is, we investigate properties of predicate liftings, which ensure expressiveness of the resulting language. This has the advantage of not restricting the class of signature functors for the coalgebras under considera- tion a priori, as well as enabling us to argue in terms of structural properties, and thus simplifying the proofs.
We work with an arbitrary base category C, which comes equipped with a fibration p : E → C of posets (or alternatively with a functor P : Cop → Poset) and consider coalgebras for an endofunctor T : C → C. Given a T -coalgebra (C, γ : C → TC), we take the elements o ∈ EC = p−1(C) (or alternatively
o ∈ P (C) under the above correspondence) as the properties of the system (C, γ).
We show that every set PL of predicate liftings for T gives rise to a logical language L(PL). The interpretation of languages arising this way is shown to be stable under coalgebra-homomorphisms, and thus adequate for coalgebras. The main issue we are concerned with is the expressive power of languages arising in this way. The notion of expressiveness we consider is inspired by Moss’ coalgebraic logic [16], where it is shown, that every element of the final T -coalgebra can be characterised by a single formula. Not having elements available, the expressivity considerations are performed in a topological set- ting, that is, we assume that the fibre EC over every element C ∈ C is a frame (the partial order on EC behaves like a topology). Viewing the carrier Z of the terminal coalgebra of a set-endofunctor T : Set → Set as a topological space via the discrete topology, the property that a logic L has characteristic formulas translates to the fact that the set of denotations of formulas (wrt.
the final coalgebra Z) is a base of the discrete topology on Z.
We investigate this concept in an abstract setting and give sufficient condi- tions for the expressiveness of a language arising via a set of predicate liftings for T . The theory is subsequently instantiated to coalgebras for endofunctors on categories of domains. We show, that the abstract requirements are met by a large class of (locally continuous) endofunctors.

Preliminaries and Notation
Given an arbitrary category C, the notion of predicates or properties of relative to C is usually expressed via a posetal fibration p : E → C, where the fibres EC support the interpretation of (a fragment of) propositional logic. If p : E → C is a fibration, we denote the fibre over an object C ∈ C by EC and the reindexing (or substitution) functor induced by f : C → D ∈ C by f∗ : ED → EC. Note that reindexing functors are determined uniquely in a posetal setting. We will be concerned with three different types of fibrations p : E → C in the sequel:
The concept of predicate liftings is considered for fibrations of posets, that is, every fibre EC is a poset and reindexing preserves order. Via the Grothendieck construction [5,8], fibrations p : E → C of posets correspond to functors P : Cop → Poset.
When looking at languages arising via a set of predicate liftings, we need additional structure in the fibres to interpret propositional connectives. We therefore consider fibrations of lattices. These are fibrations p : E → C of posets, where each fibre additionally has finite meets and joins, which are preserved by reindexing. In this setting, we interpret languages arising through a set of predicate liftings and show, that they are homomorphism-stable. Via Grothendieck, every fibration p : E → C of lattices corresponds uniquely to a functor P : Cop → Lat, with values in the category of lattices and join- and meet-preserving maps.
The third type of fibration considered are fibrations of frames. These are fibrations of lattices, where every fibre additionally has infinite meets dis- tributing over (finite) joins (ie. is a frame), which are required to be preserved under reindexing. As it can easily be seen, fibrations of frames correspond to functors P : Cop → Frm, where Frm is the category of frames and maps which preserve infinite meets and finite joins. This will be the context in which the expressivity of the logics is examined.

Modal Logics and Predicate Liftings
We consider a posetal fibration p : E → C over an arbitrary base category
C. Intuitively speaking, a predicate lifting for an endofunctor T : C → C maps predicates over C ∈ C (ie. elements of the poset EC) to predicates over TC, subject to a naturality condition. Passing from p : E → C to the corresponding functor P : Cop → Poset, we obtain the following definition:
Definition 3.1 (Predicate Lifting) Suppose T : C → C is an endofunctor and P : Cop → Poset. A P -predicate lifting for T is a natural transformation λ : P → P ◦ T op.
By passing from functors P : Cop → Poset to fibrations p : E → C of posets, we obtain the following, alternative characterisation in terms of fibred functors

(see [8], where they are called morphisms of fibrations, or [5], Section 8.2 where they figure under the name cartesian functors).
Proposition 3.2 (Predicate Liftings are Fibred Functors) Suppose T : C → C and the fibration p : E → C corresponds to P : Cop → Poset via the Grothendieck construction. Then there is a one-to-one correspondence between
P-predicate liftings for T
Functors L : E → E such that (L, T ): p → p is a fibred functor.
Proof Suppose λ : P → P ◦ T op is natural. Define L : E → E by L(E) = λ(pE)(E). Conversely, if (L, T ) : p → p is fibred, let λ(C)(E) = L(E) for C ∈ C and E ∈ EC. Both constructions translate to morphisms in a straight forward way.	✷
We give some examples for predicate liftings:
Example 3.3 (i) Suppose C has pullbacks and is well-powered, and T : C → C preserves monic arrows. Assigning the equivalence class of monos Tm : TM → TC to a subobject represented by a monic m : M → C extends to a S-predicate lifting for T (where S : Cop → Poset maps an object C ∈ C to the set of its subobjects, see eg. [8], Section 1.3).
If p : E → C is a bicartesian fibration of posets and T : C → C is polynomial, then the logical predicate liftings of T , as considered in [7], is a predicate lifting in the sense of Definition 3.1.
Suppose D ⊆ DCPO is a subcategory of the category of directed-complete partial orders and Scott-continuous functions. Consider the functor O : Dop → Poset, which maps an object D ∈ D to its Scott-topology O(D). If D is cartesian closed and TX = XD for some D ∈ D, then the assignment o ⊆ X open '→ {f ∈ XD | f (d0) ∈ o} defines an O-predicate lifting for T for all d0 ∈ D.
The next section establishes the desired connection between logics for coal- gebras and predicate liftings for endofunctors on a category endowed with a functor Cop → Lat.
Logics via Predicate Liftings
In the case of modal logic interpreted wrt. Kripke models, both the interpre- tation of the modalities and the interpretation of propositional constants can be seen to arise via predicate liftings. Since Kripke models over a set P of propositional constants are coalgebras for the functor TX = P(X) ×P(P ), we argue that a logic for coalgebras, which is interpreted wrt. predicate liftings, deserves the attribute “modal”. The relationship between modal logic and predicate liftings is the purpose of the next example, taken from [13].
Example 3.4 Suppose TX = P(X) × P(P ), modelling Kripke models with a fixed set P of propositional constants and let 2 : Setop → Poset denote

the contravariant powerset functor. The function [P ](X) : 2X → 2P(X)×P(P ) defined by [P ](X)(x)= {(y, p) ∈ P(X) ×P(P ) | y ⊆ x} is a 2-predicate lifting for T .
Given a T -coalgebra γ : C → P(C) × P(P ), the associated operator γ−1 ◦ [P ] : 2C → 2C is the ✷-operator of modal logic: Indeed, given c ⊆ C, we obtain γ−1 ◦ [P ](c) = {c ∈ C | ∀c' ∈ C.c → c' =⇒ c' ∈ c}, where we have written c → c' for γ(c)= (c, p) ∧ c' ∈ c.
Also, given a propositional constant p ∈ P , the constant function [p ∈ P ] defined by [p ∈ P ](X)(x) = {(c, p) ∈ P(X) × P(C) | p ∈ p} is a predicate lifting. Given γ : C → P(C) × P(P ), then the (constant) operator γ−1 ◦ [p ∈ P ] : 2C → 2C associated to [p ∈ P ] gives rise to the set of states, which validate p. More precisely, given any subset c ⊆ C, we have γ−1 ◦ [p ∈ P ](c)= 
{c ∈ C | c |= p}, where c |= p is a shorthand for γ(c)= (c, p) ∧ p ∈ p.
Note that predicate liftings can be used both to interpret atomic proposi- tions and modalities. This leads us to consider logics, which are interpreted wrt. a set of predicate liftings of the signature functor. In order to interpret also propositional connectives, we need joins and meets in the fibres EC of the posetal fibration p : E → C. For a richer logical language, one could also in- clude Heyting implication, if the posetal fibration supports its interpretation. We refrain from doing so, since implication is not needed to obtain the result regarding expressivity of coalgebraic modal logics.
Suppose C has a terminal object 1 ∈ C, P : Cop → Lat is a functor (giving rise to a fibration p : E → C of lattices) and T : C → C is an endofunctor. Given a set PL of P -predicate liftings for T , the language L(PL) associated to PL is the least set of formulas containing
The elements p ∈ P (1) as atomic propositions
The formulas φ ∧ ψ and φ ∨ ψ for every pair (φ, ψ) of formulas, and
The formula [λ]φ, if λ ∈ PL and φ ∈ L(PL).
We blur the distinction between syntax and semantics on the level of propo- sitional constants in order to avoid notational overhead regarding the inter- pretation of formulas. Note that since P (1) is a lattice, the language L(PL) contains true and false as atomic propositions.
Given an T -coalgebra (C, γ : C → TC), the semantics of a formula φ ∈ L(PL) wrt. (C, γ) is then given as a predicate [[φ]]γ ∈ P (C) over the carrier C ∈ C. The inductive definition is as follows:
For p ∈ P (1), we let [[p]]γ = P (!)(p), where ! denotes the unique morphism into the terminal object 1 ∈ C.
Propositional connectives are interpreted via joins and meets in P (C)
If φ ∈ L(PL) and λ ∈ PL, then [[[λ]φ]]γ = P (γ) ◦ λ(C)([[φ]]γ).
The first property which we note about logics interpreted via predicate liftings, is that the interpretation is homomorphism-stable.

Proposition 3.5 (Stability under Coalgebra-Homomorphisms) Suppose P : Cop → Lat is a functor and 1 ∈ C. If PL is a set of P-predicate liftings for T : C → C, then
[[φ]]γ = P (f )([[φ]]δ)
for all T-coalgebra morphisms f : (C, γ) → (D, δ) and all formulas φ ∈ L(PL).
Proof The claim is immediate for the propositional connectives and atomic propositions, since P (f ) preserves (finite) joins and meets. Given a natural transformation λ : P → P ◦ T op ∈ PL, we have to show that P (f )([[[λ]φ]]δ)= [[[λ]φ]]γ, given the induction hypothesis [[φ]]γ = P (f )([[φ]]δ). This is done by calculating
P (f )([[[λ]φ]]δ)= P (f ) ◦ P (δ) ◦ λ(D)([[φ]]δ)
= P (δ ◦ f ) ◦ λ(D)([[φ]]δ)
= P (Tf ◦ γ) ◦ λ(D)([[φ]]δ)
= P (γ) ◦ P (Tf ) ◦ λ(D)([[φ]]δ)
= P (γ) ◦ λ(C) ◦ P (f )([[φ]]δ)
= P (γ) ◦ λ(C)([[φ]]δ)
=[[[λ]]]γ,
using the fact that f is a homomorphism and the naturality of λ.	✷
In other words, the interpretation is invariant wrt. coalgebra-morphisms. When C = Set and P =2: Setop → Lat is the contravariant powerset functor, one derives the immediate corollary that bisimilar points (in the sense of Aczel and Mendler [3]) satisfy the same set of formulas.
Also, when considering coalgebras for endofunctors T : D → D on subcate- gories D ⊆ DCPO (as in [19,20]), this result implies that (ordered) bisimilarity implies logical equivalence.

Expressivity
This section investigates the expressive power of logics given by a set of pred- icate liftings for an endofunctor T : C → C. We have seen in the previous section, that the interpretation of a formula wrt. an arbitrary coalgebra (C, γ) can be recovered by the interpretation of φ wrt. the terminal coalgebra. The object of our study in this section is the class of predicates over the (carrier of) the terminal coalgebra, which can be denoted by modal formulas.
For cardinality reasons, we cannot expect that all predicates over the car- rier of the final coalgebra can be denoted by a formula for cardinality reasons. Consider for example the functor TX = L × X on the category of sets. It is well known (see [4]), that the carrier of the final coalgebra is Z = LN, the set of functions from the set N of natural numbers into L. If L has cardinality greater than one, LN is uncountable and hence P(LN) is uncountable. How-

ever, given a finite set of predicate liftings, we can only denote a countable set of subsets of Z.
Two approaches seem feasible in this context: We can extend the language as to accommodate conjunctions and disjunctions of larger cardinality or we can restrict attention to “basic predicates”, which can be used to “approxi- mate” all predicates available in the fibre over Z. Both approaches necessitate to move from fibrations of lattices to fibrations with “infinitary structure” in the fibres, to interpret infinitary conjunctions / disjunctions. This leads us to consider fibrations of frames in the sequel, the prime example being topolog- ical spaces, having open subsets as fibres. We do not work with fibrations of frames directly, but instead represent them as functors P : Cop → Frm, where Frm denotes the category of frames and maps preserving infinite meets and finite joins.
A subset B of (the underlying set of) a frame L is called a base, if, for all l ∈ L we have that l = {l' ∈B | l' ≤ l}. Note that every frame has a base, namely its underlying set. A subset S of L is called a subbase of L, if the set
{l1 ∧· · · ∧ lk | k ∈ N ∧ l1,..., lk ∈ S} is a base of L. Clearly every base of L
is also a subbase.
We proceed to give conditions, which ensure that the set of denotations of formulas wrt. the final coalgebra (Z, ζ) form a base of the frame of predicates over Z. This will allow us to denote “basic predicates” on the terminal coalge- bra by formulas of the logic. Extending the logic with infinitary disjunctions then yields a language, in which every predicate over Z has a denotation. In order to obtain a language with this property, two different conditions are needed: the set of predicate liftings has to be sufficiently complete (that is, we can encode enough information in the formulas of L(PL)). The second condi- tion concerns the interplay between the signature functor T : C → C and the functor P : Cop → Frm describing predicates relative to objects C ∈ C. Since we construct the final T -coalgebra by means of an inverse limit construction, we require that P maps the limiting cone (in C) to a colimit (in Frm), that is, the predicates over the limit are determined by the predicates over the approximands.
Definition 4.1 (Complete Sets of Predicate Liftings) Suppose P : Cop →
Frmop and T : C → C. We call a set PL of P-predicate liftings for T complete, if for all C ∈ C the set
  {λ(o) | o ∈ B}
λ∈PL
is a subbase of P (TC) whenever B is a base of P (C).
Logically speaking, this means that we can denote the elements of a base of P (TC) by means of a base of P (C), the set PL of predicate liftings and finite conjunctions. For examples of complete sets of predicate liftings, we refer the reader to Section 5, where the situation in categories of domains is studied in more detail.

The second requirement concerns the well-behavedness of P wrt. T . Since we construct the terminal T -coalgebra as limit of the sequence
1 ¸,!  T 1 ¸T,!  T 21 ¸,T 2! T 31 ··· ,
which we denote by (Tn1)n∈N, we need that this limit exists and is preserved by T . The fact that the predicates over the limit of (Tn1)n∈N are determined by the predicates over the approximands Tn1 means that the limit of (Tn1)n∈N is preserved by P op : C → Frmop. This is the content of
Definition 4.2 Suppose T : C → C is an endofunctor and P : Cop → Frm. We say that T satisfies the approximation requirement wrt. P, if
C has a terminal object 1 ∈ C and the limit L = Lim (Tn1)n∈N exists in C, and
Both T and P op preserve this limit.
Although these conditions are quite technical, they are present in the example motivating this study, that is for locally continuous endofunctors on categories of domains, and we establish them in the next section.
Given a complete set of predicate liftings PL for a functor satisfying the approximation requirement, we can (finally) show that every “basic” predicate on the terminal coalgebra is the denotation of a formula of L(PL).
Theorem 4.3 (Expressiveness of L(PL)) Suppose P : Cop → Frm and T : C → C satisfy the approximation requirement. If (Z, ζ) is the final T- coalgebra, then
{[[φ]]ζ | φ ∈ L(PL)}
is a base of P (Z) whenever PL is a complete set of P-predicate liftings for T .
We postpone the proof to state the auxiliary
Lemma 4.4 Suppose D = ((On)n∈N, (fnm : On → Om)n≤m∈N) is a diagram in Frm with colimiting cocone (O, (fn : On → O)n∈N). If Bn is a base of On for all n ∈ N, then  n∈N{fn(b) | b ∈ Bn} is a subbase of O.
Proof Let x ∈ O. Since O is the vertex of the colimiting cone for D in Frm, we can represent x as
x =  xi ∧· · ·∧ xk(i)

i∈I
for some index set I and xi ∈ 
{fn(o) | o ∈ On} for i ∈ I and j ≤ k(i). If

xi ∈ On, say, we can approximate xi
by elements of the base Bn of On, that

j	j
i	i	i
for n ∈ N, the distributivity law of O entails the claim.	✷
Using the above lemma, we are ready for the
Proof of Theorem 4.3 Suppose (Z, (pn : Z → Tn1)n∈N) is a limiting cone of the sequence (Tn1)n∈N. Since T preserves this limit, the induced isomorphism



ζ : Z →∼=
TZ is the final coalgebra. We define a sequence of subsets (Ln)n∈N

of subsets of L(PL) and a sequence (Dn)n∈N where Dn ⊆ P (Tn1) as follows: for n = 0 let D0 = L0 = P (1) (note that the elements of P (1) are the atomic propositions). Suppose 0 < n. We let
Ln = {[λ1]φ1 ∧· · ·∧ [λk]φk | λ1,..., λk ∈ PL, φ1,..., φk ∈ Ln−1},
and
Dn = {λ1(Tn−1)(d) ∧ ... λk(Tn−11)(dk) | λ1,..., λk ∈ PL, d1,..., dk ∈ Dn−1}

where, in the first case, we use ∧ to denote (syntactical) conjunction and in the second, to denote the meet in P (Tn1).
It follows from completeness of PL, that each set Dn is a base of P (Tn1). We think of the sets Dn as the interpretations of the formulas at the level of the approximations of Z = Lim Tn1. This intuition we make now precise by defining inductively a sequence of maps An : Ln → Dn such that for φ ∈ Ln we have
[[φ]]ζ = P (pn)(An(φ)).	(1)
The definition of An is straightforward: Let A0 : L0 → D0 = id and for 0 ≤ n
define
An([λ1]φ1 ∧· · ·∧ [λk]φk)= λ1(Tn−1)(An−1(φ1)) ∧· · ·∧ λk(Tn−1)(An−1(φk)) Equation (1) can then be proved by induction on n using the fact that T
preserves the limiting cone (Z, (pn : Z → Tn1)n∈N) and hence


Z ¸,
pn−1
J 
ζ−1
TZ 
T pn−1
J 

Tn−11 ¸, n−1
Tn1

commutes for all 0 < n. Now the approximation requirement and the previous lemma entail that
{[[φ]]ζ | φ ∈ L(PL)}⊆  {[[φ]]ζ | φ ∈ Ln}
n∈N
=	{P (pn)(An(φ)) | φ ∈ Ln}
n∈N
=	{P (pn)(d) | d ∈ Dn}
n∈N
is a base of P (Z), since Dn is a base of P (Tn1) for each n.	✷

Coalgebras in Categories of Domains
This section shows, that every locally continuous endofunctor on a subcategory D of DCPO⊥ satisfies the approximation requirement wrt. the functor O : Dop → Frm, mapping a dcpo D ∈ D to the frame of its Scott-open subsets. We then demonstrate, that a large (inductively defined) class of endofunctors on categories of domains admit a complete set of predicate liftings.
For the remainder of the section, we consider a full subcategory D ⊆ DCPO of the category of directed-complete partial orders (dcpos) and Scott- continuous mappings, which is closed under bilimits and has a terminal object 1 = {⊥} ∈ D. The full subcategory of D consisting of pointed dcpos (that is, dcpos with least element) is denoted by D⊥; the non-full subcategory of D⊥ which contains strict (least element preserving) maps only is denoted by DCPO⊥!. We assume a basic knowledge of domain theory (see eg. [1], which is also the role model for the notation used).
We begin with an auxiliary lemma, which we use in proving that every locally continuous functor on a category of dcpos satisfies the approximation requirement wrt. O : Cop → Frm.
Lemma 5.1 Suppose D = ((Dn)n∈N, (pmn : Dm → Dm)n≤m∈N) is a diagram in DCPO such that pmn is a projection for all n ≤ m ∈ N.
If L = (D, (pn : D → Dn)n∈N) is a limiting cone for D in DCPO, then
O(L) is colimiting for O(D) in Frm.
Proof Since the pmn’s are projections, the limit of D can be computed via the bilimit construction, see [1], Theorem 3.3.7. In particular, the maps pn are projections for all n ∈ N. Denote the embedding associated to pn by en : Dn → D. If (Q, (qn : O(Dn) → Q)n∈N is a cocone for O(D), we obtain a

unique mediating morphism u : O(D) → Q by u(o)= 

n∈N
qn ◦ e−1(o).	✷

We show that locally continuous endofunctors satisfy the approximation requirement in two settings: We consider functors T : D⊥ → D⊥ and functors T : D⊥! → D⊥!. This distinction is necessary for considering constructions like smash product and coalesced sum, which fail to be functorial in the non-strict case.
Theorem 5.2 Let C ∈ {D⊥, D⊥!} and T : C → C locally continuous. Then T
satisfies the approximation requirement wrt. O : Cop → Frm.
Proof Since D contains only pointed domains, it is easy to see that the con- necting morphisms pmn : Tm1 → Tn1 of the sequence (Tn1)n∈N are projec- tions. This is obvious for p10 : T 1 → 1 and follows by induction, since local continuity of T implies that T preserves projections.
By the limit-colimit coincidence, the bilimit L = (L, (pn : L → Tn1)n∈N) of the sequence (Tn1)n∈N is a limiting cone in DCPO. By construction of bilimits, L is pointed, hence L is also limiting in C in case C = D⊥. For the case C = D⊥! note that projections between pointed dcpos are automatically

strict, hence L qualifies as cone in C. In order to see that L is limiting, note that mediating morphisms, constructed in the ambient category DCPO are strict.
The preservation of this limit by T is standard, and can be proved along the lines of [1], Lemma 5.2.2. It follows from the last lemma, that Oop : C → Frmop preserves the limit L.	✷

It is worthwhile to note that the approximation property can also be estab- lished in the setting of complete metric spaces with non-expansive maps as morphisms, discussed in [19,20], justifying the generality of the approach pre- sented.
Proposition 5.3 Suppose CMS is the category of complete metric spaces with non-expansive maps. If T : CMS → CMS is locally contracting, then it satisfies the approximation property wrt. O : CMSop → Frm, where O(M ) is the set of open subsets of M.
The final coalgebra also arises as a limit in a category with embedding- projection pairs as arrows and is similar to the case of domains above.
We now show, that functors obtained via constructions like lifting, carte- sian product and function space admit a complete set PL of O-predicate lift- ings. For the same reason as above (functoriality of smash product and coa- lesced sum), we have to consider endofunctors on D⊥ and D⊥! separately. The general recipe for constructing a complete set of predicate liftings for T1 × T2, say, is to reconstruct the Scott topology on T1X × T2X by means of a repre- sentation of the Scott topology on T1X and T2X, obtained by a complete set of predicate liftings PLi for Ti (i = 1, 2). The problematic constructions in this context are cartesian product and the function space construction, since the Scott topology O(D1 ×D2) on the cartesian product D1 ×D2 of two dcpos only coincides with the product of the Scott topologies O(D1) and O(D2) in case at least one of D1 and D2 are continuous. We therefore restrict attention to the case of full subcategories D ⊆ CONT of the category of continuous dcpos (see [1]).
With the notable exception of the function space construction, it is straight- forward to construct complete sets of predicate liftings for functors obtained by various domain constructions. We therefore begin with a representation of the Scott topology on the function space [D → E] = {f : D → E | f Scott continuous}, in case both D and E are continuous and pointed. We refer to [1] for the notion of a base of a dcpo. In order to avoid confusion with bases of a topology, we explicitly speak of bases of dcpos and bases of topolo- gies, when there is danger of confusion. If D and E are dcpos and d ⊆ D, e ⊆ E are subsets, we write ⟨d, e⟩ = {f ∈ [D → E] | ∀d ∈ d.f (d) ∈ e} for the set of Scott continuous functions mapping all of d into e. The upper set generated by d ∈ D is denoted by d ↑= {d' ∈ D | d ± d'}, where ± is the order on D.

Proposition 5.4 Suppose C ⊆ CONT⊥ is a full cartesian closed subcategory and let D, E ∈ C. Then the Scott topology on [D → E] is the compact open topology. If B ⊆ D is a base of the dcpo D, and B ⊆ O(E) is a base of the Scott topology O(E) on E, then
{⟨d↑, o⟩| d ∈ B, o ∈ B}
is a subbase of the Scott topology O([D → E]) on [D → E].
Proof (Sketch) By the classification theorem of Jung [12], C is contained in the category of FS-domains or in the category of L-domains. Using the explicit representation of the objects of both, one can prove that Scott topology on [D → E] is contained in the compact open topology. The compact open topology on [D → E] is contained in the Scott topology for arbitrary dcpos D and E.
Using Lemma 5.5, Chapter XII of [6], one shows that {⟨d↑, o⟩| d ∈ B, o ⊆ E Scott open} is a base of the compact open topology on [D → E]. The passage to the representation claimed is standard.	✷
We are now in the position to show the existence of a complete set of predicate liftings for an inductively generated class of functors. We denote the constant endofunctor with value D by KD and silently assume that D⊥ is closed under the constructions mentioned below.
Proposition 5.5 Every functor T : D⊥ → D⊥ belonging to the inductive class
T ::= Id | KD | T⊥ | T1 × T2 | TD	(D ∈ D⊥)
admits a complete set of O-predicate liftings.
Proof We just treat cartesian product and function space. Suppose PLi is a complete set of predicate liftings for Ti, i = 1, 2. Denote the canonical projection T1 ×T2 → Ti by πi. Then {π−1 ◦λ | i ∈ {1, 2}, λ ∈ PLi} is complete for T1 × T2, since the Scott-topology on the product of two continuous dcpos coincides with the product topology.
If PL is complete for T and D ∈ D⊥, consider the predicate lifting λd defined by λd(X)(o ⊆ X)= {f ∈ [D, TX] | f (d) ∈ λ(X)(o)} for λ ∈ PL and d ∈ D. Naturality of λd is straightforward and Proposition 5.4 implies that
{λd | λ ∈ PL, d ∈ B} is complete for TD, if B is a base of the dcpo D.   ✷
For functors T : D⊥! → D⊥!, it can easily be see that smash product and coalesced sum can also be included:
Proposition 5.6 Every functor T : D⊥! → D⊥! belonging to the inductive class
T ::= Id | KD | T⊥ | T1 × T2 | T1 ⊗ T2 | T1 ⊕ T2 | TD	(D ∈ D⊥!)
admits a complete set of O-predicate liftings.

Conclusions, Further and Related Work
We have demonstrated that the notion of predicate lifting smoothly gener- alises to posetal fibrations and gives rise to logical languages for coalgebras, which are bisimulation invariant. The needed to obtain the expressivity result (Theorem 4.3) are rather technical, and the hard part is to actually verify them, when it comes to examples. The similarity of ordered and metric do- main equations could possibly be handled more uniformly by working in a more general, enriched framework [21].
To the author’s knowledge, logics for coalgebras on arbitrary categories have so far only been studied in [14], where a semantical framework for coal- gebraic logics is discussed. In contrast to [14], we have presented languages which arise by means of an inductive definition, and are thus “more syntactic” in nature.
Regarding the main example (coalgebras on categories of domains), logics describing observable properties on the solution TX ∼= X of recursive domain equations have been discussed in some detail in [2]. Since the solution of a recursive domain equation given by a locally continuous endofunctor T is precisely the final coalgebra, Abramsky’s domain logic can also be used to formulate predicates on the final coalgebra. The work of Abramsky differs form the results presented here in that we view the logical language presented as modal logic, which is used to specify predicates on the final coalgebra.
In view of the connection with Abramsky’s domain logic, the next step which has to be taken is to formalise a syntactical consequence relation and to investigate, under which conditions logics for coalgebras also serve as means to characterise solutions of recursive domain equations logically.

References
S. Abramsky and A. Jung. Domain Theory. In S. Abramsky, D. Gabbay, and
T. S. E. Maibaum, editors, Handbook of Logic in Computer Science, volume 3. Clarendon Press, 1994.
Samson Abramsky. Domain Theory in Logical Form. Annals of Pure and Applied Logic, 51:1–77, 1991.
P. Aczel and N. Mendler. A Final Coalgebra Theorem. In D. H. Pitt et al, editor, Category Theory and Computer Science, volume 389 of LNCS, pages 357–365. Springer, 1989.
Michael Barr. Terminal coalgebras in well-founded set theory. Theor. Comp. Sci., 114:229–315, 1993. Korrigendum in Theor. Comp. Sci., 124:189-192, 1993.
Francis Borceux. Handbook of Categorical Algebra, volume 2. Cambridge University Press, 1994.
James Dugundji. Topology. Allyn and Bacon, 1966.


B. Jacobs and C. Hermida. Structural Induction and Coinduction in a Fibrational Setting. Information and Computation, 145:107–152, 1998.
Bart Jacobs. Categorical Logic and Type Theory. Elsevier, 1998.
Bart Jacobs. The temporal logic of coalgebras via Galois algebras. Technical Report CSI-R9906, Computing Science Institute, University of Nijmegen, 1999.
Bart Jacobs. Many-Sorted Coalgebraic Modal Logic: a Model-theoretic Study. Technical Report CSI-R0020, Computing Science Institute, University of Nijmegen, 2000.
Bart Jacobs. Towards a Duality Result in the Modal Logic of Coalgebras. In Horst Reichel, editor, Coalgebraic Methods in Computer Science (CMCS’2000), volume 33 of Electr. Notes in Theoret. Comp. Sci., 2000.
Achim Jung. The Classification of Continous Domains. In Logic in Computer Science, pages 35 – 40. IEEE Computer Society Press, 1990.
A. Kurz and D. Pattinson. Coalgebras and Modal Logics for Parameterised Endofunctors. Technical report, CWI, 2000.
Alexander Kurz. Coalgebras and Applications to Computer Science. PhD thesis, Universit¨at Mu¨nchen, April 2000.
Alexander Kurz. Specifying Coalgebras with Modal Logic. Theor. Comp. Sci., 260, 2000.
Lawrence Moss. Coalgebraic Logic. Annals of Pure and Applied Logic, 96:277– 317, 1999.
Martin Ro¨ßiger. Coalgebras and Modal Logic. In Horst Reichel, editor, Coalgebraic Methods in Computer Science (CMCS’2000), volume 33 of Electr. Notes in Theoret. Comp. Sci., 2000.
Martin Ro¨ßiger. From Modal Logic to Terminal Coalgebras. Theor. Comp. Sci., 260, 2000.
J. Rutten and D. Turi. On the foundations of final coalgebra semantics: non- well-founded sets, partial orders, metric spaces. In J. W. de Bakker, W. P. de Roever, and G. Rozenberg, editors, Sematics: Foundations and Applications, number 666 in Lect. Notes in Comp. Sci., pages 477 – 530. Springer, 1992.
J. Rutten and D. Turi. On the foundations of final coalgebra semantics: non- well-founded sets, partial orders, metric spaces. Math. Struct. in Comp. Sci., 8:481 – 540, 1998.
Kim Ritter Wagner. Solving Recursive Domain Equations with Enriched Categories. PhD thesis, School of Computer Science, Carnegie Mellon University, July 1994.
