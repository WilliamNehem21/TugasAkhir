Electronic Notes in Theoretical Computer Science 45 (2001)
URL: http://www.elsevier.nl/locate/entcs/volume45.html 15 pages


Distance and Measurement in Domain Theory

Pawel- Waszkiewicz
School of Computer Science The University of Birmingham Birmingham, United Kingdom


Abstract
We investigate the notion of distance on domains. In particular, we show that measurement is a fundamental concept underlying partial metrics by proving that a domain in its Scott topology is partially metrizable only if it admits a measurement. Conversely, the natural notion of a distance associated with a measurement not only yields meaningful partial metrics on domains of essential importance in computa-
tion, such as IR, Σ∞ and Pω, it also serves as a useful theoretical device by allowing
one to establish the existence of partial metrics on arbitrary ω-continuous dcpo’s.


Introduction
The theory by Keye Martin, introduced in [5], investigates domains equipped not only with order but also with a quantitative notion of measurement. The theory is easy to understand, being based on the “informatic” intuition be- hind domain theory. It is widely applicable. Most of the domains arising in applications of domain theory have measurements, including the class of all countably based domains. Two central notions of the theory are a mea- surement and the µ-topology called here the Martin topology. The last one is Hausdorff on a domain and finer than both Scott and Lawson topologies. It is well-suited for computation: both continuity and completeness of a domain can be described in terms of the Martin topology.
The main theme of this paper is the study of the notion of distance on domains. Our work in this direction is very much inspired by questions posed by Reinhold Heckmann in [4] and Keye Martin in [5]. One obvious candidate for a distance on domains is a partial metric such that the partial metric topology agrees with the Scott topology of the induced order (see Section 2.2 for definitions). Another one is a symmetric map dµ built from a measurement µ by a standard construction.

1 Email: P.Waszkiewicz@cs.bham.ac.uk
◯c 2001 Published by Elsevier Science B. V. Open access under CC BY-NC-ND license.


The first problem of Heckmann’s is to characterize partial metric spaces which are continuous dcpo’s with respect to the induced order and such that the Scott topology and the partial metric topology agree. The other challenge is to show which continuous dcpo’s are partially metrizable.
We show that answers to both questions can be achieved by introducing methods of measurement theory into the study of partial metric spaces. In Section 3 we show that a continuous poset, which is partially metrizable in its Scott topology must admit a measurement. Under some additional, mild restrictions, the converse also holds: if the self-distance mapping for the partial metric is a measurement, then as a consequence, the partial metric topology agrees with the Scott topology.
Our thesis is that dµ, called here the distance function associated with a measurement µ, deserves its name. We study its basic properties in Section
4. It is well-known [5] that dµ induces the Scott topology. We prove that it also encodes the underlying order, in the same fashion as partial metrics do. Therefore, it is natural to ask if dµ is a partial metric. We demonstrate
(see Section 5) that for arbitrary measurements the answer is positive for
a restricted class of domains, which is, however, large enough to advance O’Neill’s construction from [7]. Our final argument in favour of dµ being a distance between elements of a domain is presented in the last section. We
show that every ω-continuous dcpo is partially metrizable and the partial metric is the distance function dµ associated with some measurement µ on the domain. This result solves the second problem of Heckmann’s for the class of all countably based domains.

Convention
In the paper we adopt the following convention: original results are the num- bered ones unless they are acknowledged explicitly. For instance, all the ex- amples of measurements on domains from Section 2.5 are taken from [5].

Background
Domain theory
We review some basic notions from domain theory, mainly to fix the language and notation. See [1] for more information. Let P be a poset. A pair of elements x, y ∈ P is consistent (bounded) if there exists an element z ∈ P such that z ± x, y. We say that a poset is bounded-complete if each bounded pair of elements has a supremum. A subset A ⊆ P of P is directed if it is nonempty and any pair of elements of A has an upper bound in A. If a directed
set A has a supremum, it is denoted ↑A. A poset P in which every directed set has a supremum is called a dcpo.
Let x and y be elements of a poset P . We say that x approximates (is way-below) y if for all directed subsets A of P , y ±  ↑A implies x ± a for


some a ∈ A. We denote it as x  y. Now, ↓x is the set of all approximants of x below it. ↑x is defined dually. We say that a subset B of a dcpo P is a (domain-theoretic) basis for P if for every element x of P , the set ↓x ∩ B is directed with supremum x. A poset is called continuous if it has a basis. It
can be shown that a poset P is continuous iff ↓x is directed with supremum
x, for all x ∈ P . A poset is called a domain if it is a continuous dcpo.
A subset U ⊆ P of a poset P is upper if x ± y ∈ U ⇒ x ∈ U . Upper sets inaccessible by directed suprema form a topology called the Scott topology; it is denoted σP . A domain admits a countable domain-theoretic basis iff the Scott topology is second countable. In this case the domain is called an ω- continuous domain. The Scott topology encodes the underlying order: x ± y in P iff ∀U ∈ σ. (x ∈ U ⇒ y ∈ U ). This is the general definition of the so- called specialisation order for a topology. The collection {↑x | x ∈ D} forms a basis for the Scott topology on a continuous poset D. The Scott topology
satisfies only weak separation axioms: it is always T0 on a poset but T1 only if the order is trivial. The topology is sober on a domain (a topological space is sober iff it is T0 and every nonempty closed subset which is not the union of two closed proper subsets is the closure of a point). Sobriety of a space implies
that the underlying specialisation order is a dcpo. For continuous posets, being a dcpo and sobriety of the Scott topology are equivalent conditions.
The poset [0, ∞)op figures prominently in Martin’s work and also in this note. It is a domain without least element. We use ± to refer to its order which is dual to the natural one, ≤, and try to avoid the latter entirely. (≤ is used in this paper whenever we work with [0, ∞).)

Partial metrics
We will briefly review basic definitions and facts about partial metric spaces from Heckmann’s [4] and Matthew’s articles [6].
A partial metric on a set X is a map p : X × X → [0, ∞) which satisfies for all x, y, z ∈ X,
p(x, y) = p(y, x) (symmetry),

p(x, y) = p(x, x) = p(y, y) implies x = y (T0 separation axiom),

p(x, y) ≤ p(x, z)+ p(z, y) − p(z, z) (∆ ),

p(x, x) ≤ p(x, y) (SSD - “small self-distances”).
If we abandon Axiom 4, p is called a weak partial metric. From the topological point of view, weak partial metrics and partial metrics are equivalent since for every weak partial metric p there is a corresponding one which satisfies SSD [4], given by p (x, y) := max{p(x, y), p(x, x), p(y, y)}.
The topology τp induced by the partial metric p is the topology which has


a basis consisting of open balls of the form

Bε(x) := {y ∈ X | p(x, y) < p(x, x)+ ε}

for an x ∈ X and a radius ε > 0. The definition is well-formed since the collection of open balls indeed forms a basis for a topology on X.
The name “T0 separation axiom” is justified by the fact that it is a nec- essary and sufficient condition for X to be a T0 space w.r.t. τp. It is not Hausdorff in general, as the example of the formal ball model shows. There- fore, the specialisation order ±τP of τp will be non-trivial in general.
All of the τp-open sets, the open balls among them, are upper sets with respect to the order.
We have that the following are equivalent for all x, y ∈ X:
x ±τP y,
p(x, y) = p(x, x),
∀ε > 0	y ∈ Bε(x).
We will say x ±p y if one of the above conditions holds.
A weighted quasi-metric on a set X is a pair of maps (q, w) consisting of a quasi-metric q: X2 → [0, ∞) (satisfies all metric axioms but symmetry) and a weight function w: X → [0, ∞) where for all x, y ∈ X, q(x, y) + w(x) = q(y, x) + w(y). q induces order and topology in the usual manner: for all x, y ∈ X, x ±q y iff q(x, y) = 0 and Bq(x) = {y ∈ X | q(x, y) < ε} is a basis for the induced topology τq. Matthews [6] proves that there is an algebraic equivalence between a partial metric p on X and a weighted quasi-metric (q, w) given by p(x, y) := q(x, y)+ w(x) and conversely q(x, y) := p(x, y) − w(x) and, moreover, p and q induce the same order and topology. We will exploit this in the last theorem of the paper.
Finally, for every partial metric space (X, p), if X is equipped with the topology τp induced by p and [0, ∞)op with the Scott topology, then the map- ping p : X × X → [0, ∞)op is continuous. Since every continuous map is monotone with respect to the specialisation orders of its domain and codomain, p : X ×X → [0, ∞)op and the corresponding weight function w : X → [0, ∞)op are monotone. This is one of the reasons why one can hope for the weight (self-distance) function to be a measurement.

Martin’s theory
We give a summary of the main elements of Keye Martin’s theory of measure- ments on domains. Our main reference is [5].
Let P be a poset and E a domain. For a monotone mapping µ: P → E
and any x ∈ P , ε ∈ E we define
µε(x) := {y ∈ P | y ± x ∧ ε  µy} = µ−1(↑ε) ∩ ↓x.


We say that µε(x) is the set of elements of P which are ε-close to x ∈ P . Since in most cases we assume E = [0, ∞)op, we read ε  µ(y) as µ(y) < ε in the natural order, which matches the intuition behind the name of µε(x). The map µ can be thought of as a quantitative measure of a relative “distance” between elements in P . Immediately we have that µε(x) /= ∅ iff x ∈ µε(x) and for any y ∈ P , if y ∈ µε(x), then y ∈ µε(y) ⊆ µε(x).
We say that a monotone mapping µ: P → E induces the Scott topology on a subset X of a poset P if ∀U ∈ σP ∀x ∈ X. x ∈ U ⇒ (∃ε ∈ E) x ∈ µε(x) ⊆ U . We denote it as µ −→X σP . If X = P , we write µ −→ σP , which reads: µ induces the Scott topology everywhere (on P).
In the paper, the following observation will often be referred to as the measurement property: for a map µ: P → [0, ∞)op on a continuous poset P and for any X ⊆ P , the following are equivalent:
µ is Scott-continuous and induces the Scott topology everywhere on X,
for all x ∈ X and all subsets S ⊆ ↓x, S is directed with supremum x iff
{µs | s ∈ S} = µx.
It is not hard to show that the identity mapping on a domain P induces the Scott topology everywhere on P . Moreover, the property is preserved by the composition of maps. A measurement on a continuous poset D is a Scott- continuous mapping µ: D → [0, ∞)op which induces the Scott topology on its kernel kerµ := {x ∈ D | µ(x) = 0}.
Martin’s theory has a rich topological dimension. The Martin topology (also called the µ topology) arises naturally in the consideration of measure- ments. For any monotone mapping µ: D → E between domains, the collection
{µε(x) | x ∈ D, ε ∈ E} forms a basis for a topology on D. In particular, if
µ is taken to be the identity map on D, we obtain a topology with a basis
{↑x ∩ ↓y | x, y ∈ D}. We call this topology the Martin topology on D. The fol- lowing important Invariance Theorem holds: if µ: D → E is Scott-continuous, then µ induces the Scott topology on D iff {µε(x) | x ∈ D, ε ∈ E} is a basis for the Martin topology on D. That is, no matter how we measure a domain, all measurements give rise to the same µ topology on the domain. The Martin topology is always Hausdorff on a domain. The study of its properties is the subject of a chapter in Martin’s thesis [5].
In our paper we work on posets equipped with a particularly pleasant class of measurements which induce the Scott topology everywhere on their domains. We are able to characterize both the order (see Sections 4) and completeness of a domain strictly in terms of the measurement.

Completeness
For any topology τ , the collection of intersections C ∩ O of a closed set C and an open set O of τ forms a basis of a topology, the so-called b-topology for τ . Su¨nderhauf [8] shows that τ is sober iff every observative net converges in
the b-topology for τ . (A net (xi)i∈I is observative if for all i ∈ I and for all


U ∈ τ , xi ∈ U implies that the net is eventually in U .) In the case of posets with measurements, we can confine our attention to observative sequences:
Lemma 2.1 Let P be a continuous poset with a measurement µ: P → [0, ∞)op
such that µ −→ σP . The Scott topology on P is ﬁrst-countable.
Proof. P is first countable since {↑µµx+  1 (x) | n ∈ N} is a countable neigh- bourhood base at x ∈ P .	✷
It comes as no surprise that:
Proposition 2.2 The Martin topology is the b-topology for the Scott topology on a continuous poset P.
Proof. The collection {↑x ∩ ↓y | x, y ∈ P } is a basis for the Martin topology on P . Thus, the Martin topology is always coarser than the b-topology. To prove the converse, denote the b-topology for the Scott topology by τ and let x ∈ U ∈ τ . We can assume U is a basic-open set in τ and hence U = O ∩ C, where O is a Scott-open set and C is Scott-closed. Let us choose an element y ∈ U way-below x such that y ∈ O. Also, y ∈ C, since C is downward closed. Consequently, y ∈ U . We claim that the set A := ↑y ∩ ↓x is a subset of U . Indeed, if z ∈ A, then z ∈ ↑y ⊆ O. Also, z ∈ ↓x ⊆ C. Therefore, z ∈ U . Since A is basic-Martin open, we are done.	✷
Therefore, Martin’s Invariance Theorem states that the b-topology for the Scott topology on P can be constructed from a measurement with µ −→ σP (the proof of the Theorem holds verbatim, even if P is not a dcpo). Now,
Su¨nderhauf’s result gives that a continuous poset is sober (equivalently: is a dcpo) iff every observative sequence in P Martin-converges in P . However, it happens that with much simpler reasoning we can prove a stronger result. We need to know a few simple facts about convergence in the Martin topology, all proved in [5]. Firstly, given a measurement µ: P → [0, ∞)op on a continuous poset P , a sequence (xn) converges to an x ∈ P in the Martin topology on P iff lim µxn = µx and (xn) is eventually in ↓x. Secondly, a sequence (xn) Martin-converges to an x iff it Scott-converges and (xn) is eventually in ↓x.
Lemma 2.3 A continuous poset P with a measurement µ: P → [0, ∞)op with µ −→ σP is a dcpo iff every increasing sequence (xn) Martin-converges in P. Proof. Let (xn) be a sequence with x = . ↑xn. Since µ is Scott-continuous,

µx = µ(	↑xn) =	{µxn | n ∈ N} = lim µxn.
n→∞
Since xn ± x for every n ∈ N, (xn) Martin-converges. The proof of the converse is essentially the content of Corollary 3.1.3 of [5] and we give it only for the sake of completeness: Martin-convergence of (xn) to x implies that the sequence is eventually below x. Since the sequence is increasing, all xn are


below x. Let u be another upper bound for the sequence. For every Scott- open set U around x, there exists k such that xk ∈ U , by Scott-convergence. Now, since U is upper, xk ± u ∈ U . This proves x ± u.	✷
We conclude this section with a summary of results:
Theorem 2.4 Let P be a continuous poset with a measurement µ: P → [0, ∞)op
with µ −→ σP . The following are equivalent:
the Scott topology on P is sober,
P isa dcpo,
all increasing sequences converge in the Scott topology on P,
all increasing sequences converge in the Martin topology on P,
all observative sequences converge in the Martin topology on P.	✷
Examples of domains with measurements
Cantor set model Σ∞. Let Σ∞ denote the set of all finite and infinite words over a finite alphabet Σ, with the prefix ordering. This is an ω-algebraic domain. For all x, y ∈ Σ∞, x  y holds iff x ± y and x is finite. The mapping

1
2|·|
: Σ∞ → [0, ∞)op

where |·| : Σ∞ → N ∪ {∞} takes a string to its length is a measurement on Σ∞. Moreover, it induces the Scott topology everywhere on Σ∞.

The interval domain IR. The collection IR of compact intervals of the real line ordered under reverse inclusion is an ω-continuous domain. The supremum of a directed set S ⊆ IR is  S and for all intervals x, y ∈ IR we have x  y iff x is contained in the interior of y. The length function
|·| : IR → [0, ∞)op given by |x| = x − x, where x = [x, x] ∈ IR, is a measure- ment on IR. It induces the Scott topology everywhere on IR.

The powerset of naturals Pω. The collection of all subsets of N ordered by inclusion is an ω-algebraic domain. The supremum of a directed set S ⊆ Pω is  S and for all elements x, y of Pω the approximation relation is given by x  y iff x ⊆ y and x finite. The mapping |·| : Pω → [0, ∞)op given by

|x| = 1 − Σ
n∈x
1


2n+1

is a measurement on Pω. It induces the Scott topology everywhere on Pω.

The formal ball model BX, introduced in [2]. The mapping µ : BX → [0, ∞)op given by µ(x, r) = r is a measurement on BX. It induces the Scott topology everywhere on BX.


The domain of finite lists [S] over a set S. A list x over a set S is a map x: {1, 2, ..., n} → S for n ≥ 0. Informally, for x, y ∈ [S], y is a sublist of x if y matches some convex subset of x, e.g. [a, b] is a sublist of [c, a, b, d], while [a, d] is not. We define a partial order on [S] by x ± y iff y is a sublist of x. With this order, [S] is an algebraic dcpo, where every element is compact. [S] is ω-continuous iff S is countable. The length of the list, len: [S] → N, given by len(x) := |dom(x)| (cardinality of the domain of x) is a measurement on [S], which induces the Scott topology everywhere on [S].
In all the examples above, the kernel of the measurement is precisely the set of maximal elements. However, we do not know if for arbitrary ω-continuous dcpo, the set of maximals is the kernel of some measurement on the domain. This is already a 3-year old problem. Below, we show that it is the condition on the kernel which causes the difficulty, since it is easy to find a measurement on a domain with countable basis (with possibly empty kernel).
Example 2.5 [5] For any continuous dcpo D with a countable basis {Un |
n ∈ N} for the Scott topology, a mapping µ: D → [0, ∞)op given by

µ(x) := 1 −	Σ
{n∈N:x∈Un}
1


2n+1

is a measurement which induces the Scott topology everywhere on D.

The necessity of measurement on partially metrizable domains
In this paper, we are mainly concerned with the case when a partial metric topology is the Scott topology of the induced order, τp = σ in symbols. We demonstrate that such a class of partial metrics is intimately connected to measurements. We give a construction of a measurement from a given partial metric with τp = σX on an arbitrary set X. Precisely, for a partial metric p on a set X, the self-distance mapping µ: X → [0, ∞)op given by µ(x) := p(x, x) for all x ∈ X is Scott-continuous and induces the Scott-topology everywhere on X.
Moreover, it happens that under some mild, computationally meaningful restrictions on an underlying poset X, the converse also holds: if the self- distance map µ is a measurement which induces the Scott topology every- where, then τp = σ.
We use σX ⊆ τp to denote the fact that the partial metric topology is larger than the Scott topology of the induced order ±p. The meaning of τp ⊆ σX is analogous. Also, in this section, µ −→ σ means that the mapping µ induces the Scott topology everywhere on X.
Theorem 3.1 Let (X, p) be a partial metric space such that the Scott topology of the order ±p agrees with the partial metric topology τp. Then the self-

distance map µ: X → [0, ∞)op is Scott-continuous and has property µ −→ σ.
Proof. First, we will show that if σX ⊆ τp, then µ −→ σ. Indeed, let x ∈ U ∈ σX. Since σX ⊆ τp, there exists an ε > 0 such that x ∈ Bε(x) ⊆ U . Define δ := µ(x) + ε. Since µ(x) < δ, x ∈ µδ(x). Now, let y ∈ µδ(x). Since p(x, y) ≤ µ(y) as y ±p x and µ(y) < δ = µ(x)+ ε, we have p(x, y) < µ(x)+ ε. This means y ∈ Bε(x). Therefore µδ(x) ⊆ Bε(x).
Now, it remains to show that if τp ⊆ σX, then the self-distance map µ: X → [0, ∞)op is Scott-continuous. For, since p : X × X → [0, ∞)op is τp-continuous, also µ is τp-continuous. The Scott-continuity of µ follows immediately from the assumption.	✷
Therefore, we obtained a necessary condition for partial metrizability of the Scott topology on continuous posets.
Corollary 3.2 Every partially metrizable continuous poset admits a measure- ment which induces the Scott topology everywhere.
It happens that there is a class of partial metric spaces where inducing the Scott topology by the self-distance map is equivalent to the agreement of the Scott and partial metric topologies.
Definition 3.3 We call a partial metric space stable if
∀x, y ∈ X. p(x, y) = .{µz | z ±p x, y}.

Notice that the last condition is equivalent to

∀x, y ∈ X ∀ε > 0 ∃z ±p x, y. µ(z) < p(x, y)+ ε.

Moreover, if X is a continuous poset with respect to the induced order, then stability can be written as ∀x, y ∈ X. p(x, y) =  {µz | z  p x, y}, where  p is the way-below relation obtained from the order ±p.
Theorem 3.4 Let (X, p) be a partial metric space such that:
X is stable, and
the induced order ±p makes X a continuous poset.
Then the Scott topology of the order ±p agrees with the partial metric topology τp iff the self-distance map µ: X → [0, ∞)op is a measurement with property µ −→ σ.
Proof. The proof consists of two observations. The first one states that, if (X, p) is a stable space, then σX ⊆ τp holds iff µ −→ σ. (⇒) has already been shown in the proof of the preceding theorem. For the converse, let x ∈ U ∈ σX. By µ −→ σ, we can assume x ∈ µδ(x) ⊆ U , where δ := µ(x)+ε for some ε > 0.
Set ε' := 1 ε. We want to show Bε' (x) ⊆ ↑(µδ(x)). Let y ∈ Bε' (x). Then by


definition, p(x, y) < µ(x)+ ε'. By assumption, there exist z ±p x, y such that we have
µ(z) < p(x, y)+ ε' < µ(x)+ 2ε' = µ(x)+ ε = δ.
Hence we have shown that z ∈ µδ(x). Moreover, since z ±p y, y ∈ ↑µδ(x). Therefore the claim that Bε' (x) ⊆ ↑(µδ(x)) is now proved. Consequently, we have
x ∈ Bε' (x) ⊆ ↑µδ(x) ⊆ ↑U = U,
which gives σX ⊆ τp. The proof of the first observation is completed.
The second one states that if (X, p) is a partial metric space such that the induced order ±p makes X a continuous poset, then τp ⊆ σX iff the self- distance map µ: X → [0, ∞)op is Scott-continuous. For (⇐), let x ∈ V ∈ τp. Take any open ball around x in V , that is, choose ε > 0 such that x ∈ Bε(x) ⊆ V . It is easy to show that x ∈ µδ(x) ⊆ Bε(x) ⊆ V , where δ := µ(x)+ ε. Since Bε(x) is an upper set, x ∈ ↑µδ(x) ⊆ Bε(x) ⊆ V . Finally, by continuity of X and µ, the set ↑µδ(x) is Scott-open (see also the next section for more detailed explanation). Therefore τp ⊆ σX.
The converse has already been shown in the proof of the preceding theo- rem.	✷

The distance map associated with a measurement
In the last section we saw that whenever a partial metric induces the Scott topology on the underlying domain, the domain admits a measurement which induces the Scott topology everywhere. This result tells us we should look to measurement in defining a notion of distance on domains. We start with a standard construction from [5].
Given a continuous poset P equipped with a measurement µ: P → E with µ −→ σP one can define a mapping dµ: P 2 → E given by dµ(x, y) :=  {µ(z) | z  x, y}, providing that any two elements x, y of P are bounded from below and E is a dcpo. Martin proves that dµ is Scott-continuous on P 2. Our thesis is that dµ may serve as a distance function between elements of a domain. In this section we examine basic properties of dµ.
Definition 4.1 Let P be a continuous poset with a measurement µ: P →
[0, ∞)op. The map dµ : P 2 → [0, ∞)op defined by
dµ(x, y) := .{µ(z) | z   x, y}
is the distance function associated with µ.
Notice that for a continuous poset P with a measurement, we can always assume that dµ is defined: we simply scale the measurement to [0, 1)op by
∗	 µx 	∗
µ x := 1+µx , add bottom to P with µ ⊥ := 1 and study dµ∗ .
dµ induces a topology on P . The collection of open balls {Bε(x) | x ∈
P, ε > 0} is a basis for the topology, where Bε(x) := {y ∈ P | dµ(x, y) < ε}.


If µ: P → E is a Scott-continuous mapping on a continuous poset P with µ −→ σP , then {↑µε(x) | x ∈ P, ε ∈ E} is a basis for the Scott topology on P . Now, Martin proved that for all x ∈ P and ε > 0, Bε(x) = ↑µε(x), that is, the topology induced by dµ is always the Scott topology. Thanks to this crucial fact, from now on it is clear that dµ is a computationally important object to study.
First of all, we are going to show that whenever a continuous poset is equipped with a measurement, the induced distance dµ captures order between elements. Let us start with a well-known fact:
Lemma 4.2 ([5]) Let P be a continuous poset with a monotone map µ: P →
[0, ∞)op. The following are equivalent:
µ is Scott-continuous,
µx = dµ(x, x) for any x ∈ P,
x ± y ⇒ dµ(x, y) = µx for any x, y ∈ P.
Theorem 4.3 Let P be a continuous poset with a measurement µ: P → [0, ∞)op
with µ −→ σP . Then for all x, y ∈ P,
x ± y ⇐⇒ dµ(x, y) = µx.

Proof. (⇒) by Lemma 4.2. For (⇐) assume dµ(x, y) = µx. Let (xn) be a sequence with xn   x, y and lim µxn = dµ(x, y). Then lim µxn = µx and by the measurement property, (xn) is directed with supremum x. Therefore, x =	↑xn ± y.	✷
Observe an immediate corollary of the result and Example 2.5. We are able to characterize the order relation on arbitrary ω-continuous dcpo.
Corollary 4.4 For any continuous dcpo D with a countable basis {Un | n ∈ N} for the Scott topology, x ± y ⇐⇒ dµ(x, y) = µx, where µ: D → [0, ∞)op is given in Example 2.5.	✷
Now we have an elementary proof of some properties of dµ. The first one, below, can be treated as the T0 axiom in the case when dµ is a partial metric on D. The second property states the antisymmetry of the order.
Corollary 4.5 With assumptions of Theorem 4.3, dµ has the following prop- erties:
dµ(x, y) = µx = µy ⇐⇒ x = y,
dµ(x, y) = 0 ⇐⇒ x = y ∈ kerµ.	✷
The characterization of the order given in Theorem 4.3 reminds us of the definition of the order induced by a partial metric. Therefore one can ask when dµ is a partial metric.

When distance is a partial metric
We now try to justify the intuition that dµ provides a measure of distance be- tween elements of a domain. In particular, we start with a sufficient condition for dµ to be a partial metric.
Proposition 5.1 Let P be a continuous poset with a measurement µ: P → [0, ∞)op with µ −→ σP . If for all consistent pairs a, b ∈ P and for all upper bounds r of a and b, there exists an s ± a, b such that
µr + µs ≤ µa + µb,
then dµ: P → [0, ∞) is a partial metric on P such that its induced order agrees with the order on P and the partial metric topology τp is the Scott topology on P.
Proof. Proofs of this and next proposition are extensions of Martin’s argu- ment in Corollary 5.4.1 of [5].
It is enough to prove that dµ satisfies ∆ . Take any x, y, z ∈ P . By definition of dµ, there exists an a ± x, z and b ± y, z such that
ε	ε
dµ(x, z)+ 2 ≥ µa	∧	dµ(y, z)+ 2 ≥ µb,
for any ε > 0. Since a, b are consistent, there is s ± a, b such that
dµ(x, y) ≤ dµ(a, b) ≤ µs ≤ µa + µb − µz.
Hence,
dµ(x, y)+ µz ≤ dµ(x, y)+ dµ(y, z)+ ε,
for all ε > 0. This proves that dµ satisfies ∆ . Agreement of orders and topologies claimed in the hypothesis follows from general properties of dµ. ✷
Notice that if P is bounded-complete and µ is modular, that is, for all consistent pairs x, y ∈ P we have µ(x H y) + µ(x H y) = µx + µy, then the conditions of the proposition hold and dµ = µ(x H y) is a partial metric on
P . Hence we advanced the result by O’Neill [7] who gave a construction of a partial metric from a valuation on a so called valuation space, i.e. on a bounded-complete inf-semilattice. However, as our last result shows, the existence of suprema and infima is not necessary.
Proposition 5.1 guarantees the existence of a partial metric which induces the Scott topology on IR, Σ∞, Pω since their natural measurements are mod- ular.
The mapping pIR: IR × IR → [0, ∞) given by
pIR([x, x], [y, y]) := max{x, y}− min{x, y}
where [x, x], [y, y] ∈ IR, is a partial metric on IR.


The mapping pΣ∞ : Σ∞ × Σ∞ → [0, ∞) given by
pΣ∞ (x, y) := 2	,
where r is the largest common prefix of x and y, is a partial metric on Σ∞.
The mapping pPω: Pω × Pω → [0, ∞) given by

pPω(x, y) := 1 − Σ
n∈x∩y

2−(n+1)

is a partial metric on Pω.
In more general cases, dµ is usually no longer a partial metric. Sometimes, however, dµ still satisfies the classical triangle inequality for metrics.
Proposition 5.2 Let P be a continuous poset with a measurement µ: P →
[0, ∞)op with µ −→ σP such that
∃z ± x, y. µz ≤ µx + µy.
Then dµ: P → [0, ∞) satisﬁes the triangle inequality and induces the Scott topology on P.
Proof. The reasoning is essentially the same as in the proof of the preceding Proposition.	✷
Interestingly, in the case above, the restriction of dµ to kerµ is a metric which yields the relative Scott topology on kerµ. This fact is investigated in detail in Martin’s thesis. Further generalization is still possible, but this involves applying a valuable construction due to Frink [3] to the map dµ, and is beyond our present concern.

The existence of partial metrics on countably based domains
The results in the last section make us think that dµ may serve as a distance map on domains only in restricted cases and hence is not a useful theoretical device in establishing the existence of partial metrics. However, the following result shows that this is not true. It also provides a practical illustration of the techniques developed in sections 3 and 4.
Theorem 6.1 Let D be an ω-continuous dcpo. Then there is a Scott-continuous partial metric p : D2 → [0, ∞) such that
±p=±D,
the Scott topology on D is the partial metric topology τp. In short, all countably based domains are partially metrizable.

Note the nice analogy between this result and Urysohn’s lemma: All reg- ular, second-countable spaces are metrizable.
Proof. Let {Un | n ∈ N} be a countable base for the Scott topology on D, consisting of Scott-open filters [1]. The map

p(x, y) := 1 −	Σ
{n∈N:x,y∈Un}
1
2n+1 ,

is a Scott-continuous partial metric on D. Indeed,

p(x, y) = 1 −	Σ
{n:x,y∈Un}
= .{1 −	Σ
1


2n+1
1


2n+1



| z   x, y}

{n:z∈Un}
= .{µz | z   x, y}
= dµ(x, y),
where µ is a measurement with µ −→ σD given by Example 2.5 and dµ is the associated distance map. Note that because every Un for n ∈ N is a filter, the condition x, y ∈ Un ⇒ ∃z ∈ Un. z  x, y holds and the second equality above is indeed correct.
Now, we will check the partial metric axioms for p. The condition p(x, y) ≥ 0 for all x, y ∈ D and symmetry follow straight from the definition. T0 axiom for p holds by Corollary 4.5. For ∆ : take any x, y, z ∈ P . Notice that the inequality is equivalent to:

Σ

{n:x,z∈Un}
1


2n+1
+	Σ
{n:y,z∈Un}
1


2n+1
≤	Σ
{n:x,y∈Un}
1


2n+1
+	Σ
{n:z∈Un}
1
2n+1 .

We need to distinguish three cases where an open set Uk,k ∈ N is counted in both sums and in one of the sums on the left-hand side. But in every case every index k, which contributes to the sums on the left-hand side also contributes to the sums on the right-hand side. Hence, the inequality is proved.
Agreement of orders, ±p=±D, is established by Theorem 4.3.
The partial metric is stable by the remark following Definition 3.3. The- orem 3.4 gives that the partial metric topology is the Scott topology of the induced order ±p and so the order on D.	✷
Finally, it is easy to check that the associated quasi-metric which induces the same order and topology is given by

q(x, y) = 1 −	Σ
{n:x∈Un⇒y∈Un}
1


2n+1

and is weighted by µ.

Acknowledgement
The author wishes to thank Achim Jung and Keye Martin for their valuable criticisms and Dagmara Bogucka for her support and friendship.

References
S. Abramsky and A. Jung. Domain theory. In S. Abramsky, D. M. Gabbay, and
T. S. E. Maibaum, editors, Handbook of Logic in Computer Science, volume 3, pages 1–168. Clarendon Press, 1994.
A. Edalat and R. Heckmann.	A computational model for metric spaces.
Theoretical Computer Science, 193:53–73, 1998.
A.H. Frink. Distance functions and the metrization problem. Bulletin of the American Mathematical Society, 43:133–142, 1937.
Reinhold Heckmann. Approximation of metric spaces by partial metric spaces.
Applied Categorical Structures, 7:71–83, 1999.
Keye Martin. A Foundation for Computation. PhD thesis, Department of Mathematics, Tulane University, New Orleans, LA 70118, 2000.
Steve G. Matthews. Partial metric topology. In Proceedings of the 8th Summer Conference on Topology and Its Application, volume 728, pages 176–185, 1992.
Simon J. O’Neill. Partial metrics, valuations and domain theory. Research Report CS-RR-293, Department of Computer Science, University of Warwick, Coventry, UK, October 1995.
Philipp Su¨nderhauf. Sobriety in terms of nets. Applied Categorical Structures, 8:649–653, 2000.
