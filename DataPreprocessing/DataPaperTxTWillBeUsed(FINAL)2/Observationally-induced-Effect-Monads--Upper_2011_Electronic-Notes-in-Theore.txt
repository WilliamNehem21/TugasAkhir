Available online at www.sciencedirect.com



Electronic Notes in Theoretical Computer Science 276 (2011) 105–119
www.elsevier.com/locate/entcs

Observationally-induced Effect Monads: Upper and Lower Powerspace Constructions
Ingo Battenfeld1
Fakulta¨t fu¨r Informatik TU Dortmund Dortmund, Germany
Matthias Schr¨oder2
Fakulta¨t fu¨r Informatik Universit¨at der Bundeswehr Mu¨nchen, Germany

Abstract
Alex Simpson has suggested to use an observationally-induced approach towards modelling computational effects in denotational semantics. The principal idea is that a single observation algebra is used for defining the computational type structure. He advocates that besides giving algebraic structure this approach also allows the characterisation of the monadic types concretely. We show that free observationally-induced algebras exist in the category of continuous maps between topological spaces for arbitrary pre-chosen ob- servation algebras. Moreover, we use this approach to give a lower and an upper powerdomain construction on general topological spaces, both of which generalise the classical characterisations on continuous dcpos. Our lower powerdomain construction is for all topological spaces given by the space of non-empty closed subsets with the lower Vietoris topology. Dually, our upper powerdomain construction is for a wide class of topological spaces given by the space of proper open filters of its topology with the upper Vietoris topology. We also give a counterexample showing that this characterisation does not hold for all topological spaces.
Keywords: denotational semantics, computational effects, powerdomains, domain theory, topology


Introduction
Modelling computational effects has turned out to be an important aspect in de- notational semantics. The prevalent metatheory has been proposed by Moggi [9] in the form of computational monads and found its practical applications in the functional programming language Haskell. Moggi’s metatheory has been refined in the work of Plotkin and Power [10] who give an algebraic foundation for generating

1 Email: battenfeld@ls10.cs.tu-dortmund.de
2 Email: matthias.schroeder@unibw.de

1571-0661 © 2011 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2011.09.017

and combining effects. More recently, Simpson [13] has proposed an alternative to their approach. Instead of defining an effect monad on the basis of an equational algebraic theory, he takes a pre-chosen observation algebra, which is prototypical for the effect at hand, and constructs a monad based on properties purely depend- ing on this algebra. The benefit of this approach is that the effect types inherit many desirable properties from the pre-chosen algebra. He calls this approach an observationally-induced free algebra construction. Simpson suggests the category of continuous maps between topological spaces as a fitting ambient category for the observationally-induced approach, following the work of Smyth [15].
Simpson and Schr¨oder have used this approach to define a probabilistic power- domain construction for topological spaces [12,14]. They have shown that for all topological spaces their construction yields the space of continuous probability val- uations equipped with the weak topology. Thus, the observational approach allows the generalisation of the classical probabilistic powerdomain construction [8] beyond dcpos. At the end of his talk [13], Simpson motivates to investigate whether his approach can also be applied to the classical powerdomains for nondeterminism.
There are essentially three classical powerdomain constructions for nondeter- minism, the lower (Hoare) powerdomain, the upper (Smyth) powerdomain and the convex (Plotkin) powerdomain. On continuous dcpos, each of these has two quite distinct characterisations. One characterisation is given by means of a free algebra construction for an algebraic theory given by binary operation representing nonde- terministic choice. The second characterisation is given by more concrete means in the fashion of the set-theoretic powerset construction. Both of these character- isations have their merits: whereas the free algebra construction fits neatly into Plotkin and Power’s algebraic framework for computational effects, the concrete characterisations allow a better reasoning about the semantic constructs. The fact that those characterisations coincide may be traced back to the pleasant properties of continuous dcpos. Outside the world of continuous dcpos, it is known that the algebraic constructions and the respective concrete characterisations differ.
In this paper we follow Simpson’s suggestions [13] and show that the observationally-induced construction can be applied for arbitrary pre-chosen ob- servation algebras in the category of continuous maps between topological spaces. We also show that the corresponding free algebras inherit desirable properties from the observation algebra. Subsequently, we characterise an observationally-induced lower and upper powerspace construction on topological spaces which generalise the classical constructions beyond continuous dcpos. The lower powerspace construc- tion will yield for all topological spaces X the space of non-empty closed subsets of X with the lower Vietoris topology. The upper powerspace construction will give for a wide class of topological spaces X, namely those that satisfy the Wilker condi- tion [17], the space of proper open filters of O(X) with the upper Vietoris topology. Furthermore, we provide an example of a space which does not satisfy the Wilker condition and where this characterisation of the upper powerspace fails.
We remark that Simpson’s construction bears resemblance with the work of Heckmann [7], who investigated similar properties in powerdomain constructions

on a functorial level. However, there are some differences in Heckmann’s work which prevent a direct comparison, most severely the fact that in his constructions homomorphism extensions need not be unique.

Observationally-induced algebras
We start by giving the general definition of an observationally-induced free alge- bra construction following [12]. Our definitions are set up in the category Top of continuous maps between topological spaces. However, in principle the abstract machinery can be transferred to arbitrary categories.
Let Σ be a ﬁnitary algebraic signature, i.e. a finite set of operation symbols
{σ ∈ Σ} each of which has an arity |σ| ∈ N. Then a (topological) Σ-algebra is a tuple (A, ΣA) such that A is a topological space, ΣA := {σA}σ∈Σ and every σA : A|σ| → A is a continuous map. A homomorphism between Σ-algebras (A, ΣA) and (B, ΣB) is a continuous map h : A → B for which h ◦ σA ≡ σB ◦ h|σ| holds for all σ ∈ Σ. Topological Σ-algebras and Σ-homomorphisms between them form a category Σ-Alg and it is well-known that the forgetful functor Σ-Alg → Top has a left adjoint, the free Σ-algebra functor.
Let us fix a Σ-algebra (O, ΣO) as observation algebra. This observation algebra induces the following definition.
Definition 2.1 Let X be a topological space. An abstract (O, ΣO)-structure over X is a Σ-algebra (A, ΣA) together with a continuous map η : X → A such that every continuous map f : X → O has a unique homomorphism extension f : (A, ΣA) → (O, ΣO) along η, i.e. f is the unique homomorphism making the following diagram commute:
_ _f_ _
,,  ,
η
f
X
We write η : X → (A, ΣA) for an abstract (O, ΣO)-structure.
Notice that for every space X the free Σ-algebra construction ιX : X → (FX, ΣFX ) yields an abstract (O, ΣO)-structure. Moreover, free algebras for equa- tional theories of Σ, where the corresponding equations are satisfied by (O, ΣO), give rise to abstract (O, ΣO)-structures. So in general an abstract (O, ΣO)-structure over X will not be unique.
The essence of the observational approach is that desirable properties of the observation algebra carry over to the computational types. Abstract (O, ΣO)- structures do satisfy an initiality requirement, but they certainly do not share all desirable properties of the observation algebra. One imposes the following finality requirement to obtain them.
Definition 2.2 A Σ-algebra (B, ΣB) is called a complete (O, ΣO)-algebra if for every abstract (O, ΣO)-structure η : X → (A, ΣA), every continuous map f : X → B



extends uniquely to a homomorphism f : (A, ΣA) → (B, ΣB), as in:

_ _f_ _
,,  ,
η
f
X
In particular (O, ΣO) itself is a complete (O, ΣO)-algebra. The following results show that complete algebras do share many properties of (O, ΣO).
Lemma 2.3 Let E be a set of Σ-equations, so that (Σ, E ) is an equational algebraic theory in the sense of universal algebra. If (O, ΣO) satisﬁes all equations in E, then so does every complete (O, ΣO)-algebra (A, ΣA).
Proof (Sketch) Suppose V is a countable discrete space of ‘variables’ and let (FE V, ΣFE V ) be the free topological (Σ, E )-algebra over V . Then a topological alge- bra (A, ΣA) satisfies all equations of E if every continuous map V → A has a unique homomorphism extension (FE V, ΣFE V ) → (A, ΣA) along the free algebra inclusion ιV : V → FE V . Since ιV forms an abstract (O, ΣO)-structure, the completeness property guarantees exactly this requirement.	2
For instance if (O, ΣO) is a topological group, i.e. having a continuous binary operation and an identity element satisfying the usual axioms, and ΣO is the cor- responding signature consisting of a binary operation and a constant, then every complete (O, ΣO)-algebra is a topological group. If in addition (O, ΣO) is an abelian group, then the continuous binary operation of every complete (O, ΣO)-algebra is commutative.
Lemma 2.4 Let C be a full reflective subcategory of Top, for which the reflection functor R : Top → C preserves ﬁnite products. If O is an object of C, then so is the underlying space A of every complete (O, ΣO)-algebra (A, ΣA).
Proof (Sketch) Let (A, ΣA) bea complete (O, ΣO)-algebra and F denote the free Σ-algebra functor. In [2, Chapter 5] it is shown that a product preserving reflection functor lifts to the categories of algebras and that F ◦ R ∼= R ◦ F . This can be used to show that for an arbitrary topological space X, the composition of the units of the free algebra and reflection functors yield an abstract (O, ΣO)-structure
X → (FRX, ΣF RX ). Thus one gets a one-to-one correspondence between maps
X → A and RX → A along the unit of the reflection. Instantiating X with A
yields the required result.	2
Hence if the underlying space of (O, ΣO) isa T0-space, a monotone convergence space or sober, then so is the underlying space of every complete (O, ΣO)-algebra.
These results motivate to define observationally-induced algebras as follows.
Definition 2.5 For a topological space X, the free (O, ΣO)-algebra over X is given by an abstract (O, ΣO)-structure η : X → (A, ΣA) such that (A, ΣA) is a complete (O, ΣO)-algebra.

It is easily seen that free (O, ΣO)-algebras are (up to isomorphism) uniquely determined by this definition and that they exist for arbitrary spaces if and only if the forgetful functor Comp(O,ΣO ) → Top, from the category of complete (O, ΣO)- algebras and homomorphisms, has a left adjoint.
Notice that the sobrification is an instance of such an observationally-induced free algebra construction, namely for the observation algebra given by Sierpinski- space S with no algebraic structure [16]. Another example is the observationally- induced probabilistic powerdomain construction of Simpson and Schr¨oder [12,14]. They have shown that if one uses (I<, ⊕) as observation algebra, where I< is the unit interval under the Scott-topology for the usual ordering and ⊕ : I<2 → I< the average map, then the free (I<, ⊕)-algebra over an arbitrary topological space X is obtained as the space of probability valuations over X equipped with the weak topology.
We proceed by showing the general existence of free (O, ΣO)-algebras in Top. The following result follows essentially from the fact that the category of Σ-algebras is complete.
Lemma 2.6 The category Comp(O,ΣO ) of complete (O, ΣO)-algebras and homo- morphisms has all limits.
Given an arbitrary topological space X we define H(X, O) to be the set of continuous maps X → O. The preceding lemma yields that the pointwise opera- tions give an algebra structure on OH(X,O), the H(X, O)-fold product of O, making (OH(X,O), ΣOH(X,O) ) a complete (O, ΣO)-algebra. The following result is trivial.
Lemma 2.7 For every topological space X, the map ξX : X → OH(X,O), given by
x '→ (f (x))f∈H(X,O) is continuous.
Corollary 2.8 Let ηX : X → (FX, ΣFX ) denote the free Σ-algebra over X, then ξX : X → OH(X,O) extends to a unique homomorphism ξX : (FX, ΣFX ) → (OH(X,O), ΣOH(X,O) ).
Let a complete (O, ΣO)-subalgebra of a given complete (O, ΣO)-algebra be a subalgebra which itself satisfies the completeness property of Definition 2.2. We now characterise the free (O, ΣO)-algebra over X as the smallest complete (O, ΣO)- subalgebra of (OH(X,O), ΣOH(X,O) ) containing the image of ξX .
Proposition 2.9 The subalgebra of (OH(X,O), ΣOH(X,O) ) deﬁned by:
F^X := \{A ⊆ OH(X,O)| ξX (FX) ⊆ A, A is a complete (O, ΣO)-subalgebra}

with the restricted map ξX : X → (F X, ΣF^X ) forms the free (O, ΣO)-algebra over
X.

with the operations inherited from (OH(X,O), ΣOH(X,O) ), that ξX : X → F^X is
well-defined, by Corollary 2.8, and that for every continuous f : X → O, the
projection πf : (OH(X,O), ΣOH(X,O) ) → (O, ΣO) is a homomorphism extending f

along ξX : X → (OH(X,O), ΣOH(X,O) ), though not necessarily unique. Thus, the restriction of the projection πf |F^X : (F X, ΣF^X ) → (O, ΣO) is also a homomorphism extension of f along ξX and uniqueness remains to be shown.
For this, let g be any homomorphism extension of f along ξX : X → F^X.
of (F^X, Σ ^ ), hence also of (OH(X,O), ΣOH(X,O) ), and we can furthermore restrict
FX 
ξX to a continuous map X → E which can be extended to a homomorphism
(FX, ΣFX ) → (E, ΣE) along ηX : X → FX. But then E forms a subalgebra of (OH(X,O), ΣOH(X,O) ) containing the image ξX (FX) hence it must be equal to F X, by its definition, and we conclude g ≡ πf |FX .	2
We have thus established the following.
Theorem 2.10 For every observation algebra (O, ΣO) and every topological space X, the free (O, ΣO)-algebra over X exists and is a complete (O, ΣO)-subalgebra of (OH(X,O), ΣOH(X,O) ).
We conjecture that the line of reasoning above, with the characterisation of the free algebra as a subset of a power of O, can be adapted to prove the stronger result that Comp(O,ΣO ) is a full reflective subcategory of Σ-Alg.

2.1  Variations
Let us present some variations of the definitions of abstract (O, ΣO)-structures and complete (O, ΣO)-algebras.
The first variation transfers the setting completely into the world of algebras following ideas of Simpson. For the sake of readability we leave the algebra struc- ture implicit. Recall that for every morphism f : X → O there exists a unique homomorphism f : FX → O, where FX is the free Σ-algebra over X. Consider the functor Hom(−, A) : Σ-Algop → Set and call a homomorphism h : B → Bj an A-iso if Hom(h, A) is an isomorphism. Then we get the following redefinitions which are equivalent to the ones given above.
Definition 2.11 An abstract O-structure is given by an O-iso h : FX → A whose domain is a free Σ-algebra. A complete O-algebra is a Σ-algebra B for which every O-iso h whose domain is a free algebra is a B-iso.
One further possibility is to drop the domain-requirement, and define abstract O-structures to be O-isos and complete O-algebras to be algebras B for which O-isos are B-isos. Notice that in this (principally more general) definition, the category of complete O-algebras still has all limits, hence our construction above remains valid in this variation, so that it makes no difference in the topological setting.
A second variation is to infuse parameterization into our definitions. If Z is a topological space and (A, ΣA), (B, ΣB) are topological Σ-algebras, a continuous map h : Z × A → B is called a right homomorphism if for all z ∈ Z, the map hz : (A, ΣA) → (B, ΣB), defined as a '→ h(z, a), is a homomorphism.

Definition 2.12 An parameterized abstract (O, ΣO)-structure over X is a Σ- algebra (A, ΣA) together with a continuous map η : X → A such that for every topological space Z, every continuous map f : Z × X → O has a unique right homomorphism extension f : Z × A → O along idZ × η.
A Σ-algebra (B, ΣB) is called a complete (O, ΣO)-algebra if for every parameter- ized abstract (O, ΣO)-structure η : X → A, every continuous map f : Z × X → B extends uniquely to a right homomorphism f : Z × A → B.
This definition appears to require stronger properties on complete (O, ΣO)- algebras. In many concrete situations such as Simpson and Schr¨oder’s probabilistic setting [12] or the constructions given below, it turns out that the nonparameterized free algebras in fact allow parameterization. However, our general existence proof for topological spaces cannot easily be transferred to the parameterized setting.

The lower powerspace construction
In classical domain theory, the lower powerdomain is given by the lattice of non- empty Scott-closed sets with the inclusion order. For a continuous dcpo X this turns out to be equivalent to the free algebra for an equational theory, given by a binary operation ·, equations expressing commutativity, associativity, idempotence and the inequation a ≤ a · b [1, Section 6.2]. The prototypical space for this construction is (S, ∨), the Sierpinski space with join as operation, which will serve as observation algebra for our lower powerspace construction.
Definition 3.1 For a topological space X, the observationally-induced lower pow- erspace over X is given by the free (S, ∨)-algebra over X.
Our aim is to show that the observationally-induced lower powerspace over X is given by the set of non-empty closed subsets of X under the lower Vietoris topology with set-union ∪ as the corresponding operation.
Definition 3.2 Let X be a topological space. For a subset A ⊆ X we write cl(A) for the closure of A in X. The non-empty closed subsets of X form a lattice under the inclusion order. By C(X) we denote the set of non-empty closed subsets of X equipped with the lower Vietoris topology generated by sets of the form:
⟨U⟩ := {B ∈ C(X)| B ∩ U /= ∅},

for U ⊆ X open.
Before we proceed with studying the properties of the algebra (C(X), ∪), we present some general results on abstract (S, ∨) structures. First, observe that the homomorphism extension is monotone in the following senses.
Lemma 3.3 Suppose η : X → (A, ⊕) is an abstract (S, ∨)-structure. Then for continuous f, fj : X → S, f ≤ fj implies f ≤ fj (in the pointwise order).

Next we define an auxiliary order on a given abstract (S, ∨)-structure, and show that this order enables us to define homomorphism extensions order-theoretically.
Definition 3.4 Let η : X → (A, ⊕) be an abstract (S, ∨)-structure. Define the relation ≤η on A as a ≤η aj if and only if for all f : X → S it holds that f (a) ≤ f (aj), for the corresponding homomorphism extensions.
It is easily seen that ≤η is always a preorder on the algebra (A, ⊕). One can interpret it as a specialization preorder given by homomorphisms. The straightfor- ward proof of the following result is left to the inclined reader.
Lemma 3.5 Let η : Y → (A, ⊕) be an abstract (S, ∨)-structure. Then for ≤η the following hold:
for every a0 ∈ A, the set {a ∈ A| a ≤η a0} is closed in the corresponding topology,
for every a0 ∈ A, the sets {a ∈ A| a ≤η a0} and {a ∈ A| a0 ≤η a} are closed under ⊕,
for all a, aj ∈ A, it holds that a, aj ≤η a ⊕ aj,
for x ∈ X, one has η(x) ≤η a ⊕ aj if and only if η(x) ≤η a or η(x) ≤η aj,
for a given continuous f : Y → S and its unique homomorphism extension
f : A → S, it holds that f (a) ≡	η(x)≤ηa f (x).
Now we turn our attention again to the algebra (C(X), ∪) and show that it is an abstract (S, ∨) structure. For this we have to make the following rather simple observation.
Lemma 3.6 The specialization order on C(X) is the inclusion order and every open set ⟨U⟩ of C(X) is Scott-open with respect to it.
Proposition 3.7 For any topological space X, the algebra (C(X), ∪) with the in- clusion map {·} : X → (C(X), ∪), mapping x ∈ X to its point closure, is an abstract (S, ∨)-structure.
Proof. First observe that the inclusion map is continuous by definition of the lower Vietoris topology. So suppose f : X → S is given. We have to show that it uniquely extends to a continuous homomorphism f : C(X) → S.
Motivated by Lemma 3.5 (v), we define f (B) :=	x∈B f (x). Then clearly f
extends f along {·} and it is straightforward to show that f (B∪Bj)= f (B) ∨f (Bj),

—1
hence it is a homomorphism. Moreover, it holds that f	(
is continuous.
)= ⟨f—1(
)⟩, hence it

For uniqueness, we consider that, by Lemma 3.6, every open subset of C(X) is Scott-open, hence any continuous map C(X) → S must be Scott-continuous with respect to ⊆. But then

f (B)=  {f (cl(F ))| F ⊆ B finite} =   {  f (x)| x ∈ F ⊆ B} =   f (x)


is indeed uniquely defined, and the claim follows.	2
Finally, we show that (C(X), ∪) is a complete (S, ∨)-algebra.
Proposition 3.8 For any topological space X, the algebra (C(X), ∪) is a complete
(S, ∨)-algebra.
Proof. Let η : Y → (A, ⊕) be an abstract (S, ∨)-structure and g : Y → C(X) be a continuous map. We have to show that g uniquely extends to a homomorphism g : A → C(X), which we define as a '→ cl( {g(y)| η(y) ≤η a}).
We have to show that (i) g extends g along η, that (ii) it is continuous, that (iii) it is a homomorphism and that (iv) it is unique as such:
This follows from Lemma 3.6 and the fact that ≤η reflects the specialization preorder of Y under the inclusion map η.
We have to show that for an open set U ⊆ X, the set g—1(⟨U⟩) is open in
The map χ⟨U⟩ ◦ g : Y → S has a continuous homomorphism extension
h : A → S, and by Lemma 3.5 (v), h(a) =	{χ⟨U⟩ ◦ g(y)| η(y) ≤η a}. Thus
But this means h(a)=	if and onlyif  {g(y)| η(y) ≤η a}∩ U /= ∅ which, by
[4, Corollary 1.1.2], is equivalent to g(a) ∈ ⟨U⟩. Hence, g—1(⟨U⟩) = h—1( ),
showing the claim.
[4, Theorem 1.1.3] shows that for subsets A, B ⊆ X of a topological space, it holds that cl(A ∪ B)= cl(A) ∪ cl(B). Thus, Lemma 3.5 (iv) yields:
g(a ⊕ aj) = cl( {g(y)| η(y) ≤η a ⊕ aj})
= cl( {g(y)| η(y) ≤η a}∪	{g(y)| η(y) ≤η aj})
= g(a) ∪ g(aj).
Suppose for a contradiction that g and g∗ both extend g, but there exists some a ∈ A with g(a) /= g∗(a). Then we find some open subset U intersecting exactly one of g(a), g∗(a), hence χ⟨U⟩◦g(a) /= χ⟨U⟩◦g∗(a). But χ⟨U⟩ : (C(X), ∪) → (S, ∨) is a continuous homomorphism, hence χ⟨U⟩ ◦ g, χ⟨U⟩ ◦ g∗ are both continuous homomorphisms extending χ⟨U⟩◦g, contradicting the unique extension property of an abstract (S, ∨)-structure.
2
This yields the following characterisation of the observationally-induced lower powerdomain.
Theorem 3.9 For any topological space X, the observationally-induced lower pow- erdomain over X is given by (C(X), ∪).
In particular, this generalises the construction from classical domain theory. There the upper powerdomain over a continuous dcpo is given by the space of non- empty (Scott-)closed subsets under the Scott topology for the inclusion order which is known to coincide with the lower Vietoris topology.

Remark 3.10 One can show that the algebra (C(X), ∪) also satisﬁes the conditions of the observationally-induced lower powerdomain over X in the parameterized vari- ation given in Deﬁnition 2.12.
The upper powerspace construction
In classical domain theory the upper powerdomain construction is given by the set of non-empty compact saturated sets under the converse of the inclusion order. Over a continuous dcpo, this is equivalent to the free algebra construction for an inequational theory, similar to the one for the lower powerdomain but with the inequation replaced by a · b ≤ a [1, Section 6.2]. The prototypical space for this construction is the space (S, ∧), which serves as observation algebra.
Definition 4.1 For a topological space X, the observationally-induced upper pow- erspace over X is given by the free (S, ∧)-algebra over X.
Dually to the development in the previous section we obtain the following.
Lemma 4.2 Suppose η : X → (A, ⊕) is an abstract (S, ∧)-structure. Then for continuous f, fj : X → S, f ≤ fj implies f ≤ fj (in the pointwise order).
Definition 4.3 Let η : X → (A, ⊕) be an abstract (S, ∧)-structure. Define the relation ≤η on A as a ≤η aj if and only if for all f : X → S it holds that f (a) ≤ f (aj) for the corresponding unique homomorphism extensions.
Lemma 4.4 Let η : Y → (A, ⊕) be an abstract (S, ∧)-structure. Then for ≤η the following hold:
for every a0 ∈ A, the set {a ∈ A| a ≤η a0} is closed in the corresponding topology,
for every a0 ∈ A, the sets {a ∈ A| a ≤η a0} and {a ∈ A| a0 ≤η a} are closed under ⊕,
for all a, aj ∈ A, it holds that a ⊕ aj ≤η a, aj,
for x ∈ X, one has a ⊕ aj ≤η η(x) if and only if a ≤η η(x) or aj ≤η η(x),
Remark 4.5 Notice that we do not have an analogue to Lemma 3.5 (v). The reason is that whereas continuity and (S, ∨)-homomorphisms were in harmony above, this is not the case here.
The proof of the following lemma is straightforward.
Lemma 4.6 Suppose {fi}i∈I is a directed family of continuous homomorphisms
(A, ⊕) → (S, ∧), then also its pointwise directed supremum  †	fi is a continuous
homomorphism.
Recall that the Hofmann-Mislove Theorem [6] says that for a sober space X, there is an isomorphism between the posets of non-empty compact saturated subsets of X and the (proper) Scott-open filters of the topology O(X). This latter set is preferable when one is working with general topological spaces. Thus, also with

Theorem 2.10 in mind, our aim should be to show that the observationally-induced upper powerspace over X is given by a space of Scott-open filters of O(X) with intersection ∩ as the corresponding operation. Dually to the lower powerspace construction, the associated topology is the upper Vietoris topology here.
Definition 4.7 Let X be a topological space. A (proper) open ﬁlter of O(X) is a proper subset F ; O(X) which is open in the Scott-topology with respect to the inclusion order ⊆ and closed under intersection ∩. By F(X) we denote the set of proper open filters of O(X) equipped with the upper Vietoris topology generated by sets of the form:
[U ] := {F ∈ F(X)| U ∈ F},
for U ⊆ X open.
For every space X, there exists a continuous embedding X → F(X), mapping a point to its neighbourhood filter. However, it turns out that the neighbourhood filter map X → (F(X), ∩) does in general not satisfy the uniqueness requirement of an abstract (S, ∧)-structure, we present a counterexample below. Nevertheless, for a sufficiently large class of spaces we can show that the neighbourhood filter map does satisfy the uniqueness condition. This class contains all spaces satisfying the Wilker condition [17], whose definition we recall.
Definition 4.8 A topological space X is a Wilker space if all open filters F ∈ F(X) satisfy the Wilker condition, which is given as follows. Suppose U1 ∪ U2 ∈ F for open subsets U1, U2 ⊆ X, then there exist open filters F1, F2 ∈ F(X) such that U1 ∈ F1, U2 ∈ F2 and F1 ∩ F2 ⊆ F .
The class of Wilker spaces is indeed quite large. It contains all Hausdorff spaces and all locally compact topological spaces. Counterexamples seem to have a rather artificial flavour, such as the one presented in Section 4.1 below. Still, to the best of our knowledge it is not known whether the Wilker condition is preserved by the standard constructions of denotational semantics.
Lemma 4.9 Let X be a Wilker space, then the neighbourhood ﬁlter map η : X →
(F(X), ∩) forms an abstract (S, ∧)-structure.
Proof. Suppose f : X → S is continuous. Set the extension f : F(X) → S to be

the characteristic map of [f—1(
)], i.e. f (F )= 
if and only if f—1(
) ∈ F . Clearly

this map is well-defined, extends f along η and it is continuous. It is straightforward to show that it is a homomorphism, so we have to show that it is unique as such.
Suppose f∗ also extends f along η. By the definition of the upper Vietoris
topology we have that f∗—1( ) =  j∈J [Vj] for a collection of open subsets such
that  j∈J Vj = f—1( ), and hence  j∈J [Vj] ⊆ [f—1( )]. Whenever  j∈J Vj ∈ F
and  j∈G Fj ⊆ F . Thus, we have f∗(Fj) =	for all j ∈ G, and since f∗ is a
homomorphism, this yields f∗(  j∈G Fj)=	, and f∗(F )=	follows immediately.2


Proposition 4.10 For every topological space X, (F(X), ∩) is a complete (S, ∧)- algebra.
Proof. Let us assume that η : Y → (A, ⊕) is an abstract (S, ∧)-structure and
f : Y → F(X) a continuous map. We define f : A → F(X) by:
a '→ {U ∈ O(X)| χf−1([U ])(a)=	},
where χf−1([U ]) is the unique homomorphism extension of the characteristic map χf−1([U ]) : Y → S. We have to show that (i) f is well-defined, that (ii) it is a continuous homomorphism extension of f along η and that (iii) it is unique as such.

The nontrivial part is to show that f (a) is always Scott-open. So assume that i∈I Vi ∈ f (a) and {Vi}i∈I is directed. By Lemma 4.2, {χf−1([Vi])}i∈I forms a directed family of continuous homomorphisms and so, by Lemma 4.6, we have that	† χ −1	is a continuous homomorphism, as well. By the universal
property of an abstract (S, ∧)-structure, we get that  † χf−1([V ]) ≡ χf−1([  V ]),
with χf−1([Vi  ])(a)=	, as required.
Straightforward.
Assume that f∗ also extends f along η. Then for every U ∈ O(X), one cal- culates that the characteristic maps of f∗—1([U ]) and f—1([U ]) are continuous homomorphisms (A, ⊕) → (S, ∧). Since both of them extend the characteristic map of (f∗ ◦ η)—1([U ]) ≡ (f ◦ η)—1([U ]) along η, they must be equal by the universal property of an abstract (S, ∧)-structure.
2
Theorem 4.11 If X is a Wilker space, then the map η : X → (F(X), ∩), map- ping a point to its neighbourhood ﬁlter, forms the observationally-induced upper powerspace over X.
For sober spaces one could equivalently use the space of non-empty compact saturated sets with the inclusion mapping a point to its upwards closure in the specialization order. Since all locally-compact spaces, hence in particular continu- ous dcpos, are Wilker spaces, it follows that the observationally-induced approach genuinely extends the classical upper powerdomain construction.
Remark 4.12 Also here one can show that the above result holds for the parame- terized variation given in Deﬁnition 2.12.
Counterexample
Here we present a topological space X∗ for which η : X∗ → (F(X∗), ∩) does not satisfy the unique extension property of an abstract (S, ∧)-structure. The space under consideration will be represented as a sequential space [5,11].
We construct X∗ from the space X which is defined as follows. The underlying set is given by N. Suppose ⟨·, ·, ·, ·⟩ : N4 → N is a bijection and define a convergence

relation on X as follows. A sequence {xn}n∈N = {⟨an, bn, cn, dn⟩}n∈N converges to
x = ⟨a, b, c, d⟩ if all of the following conditions are satisfied:
for almost all n ∈ N, it holds that: xn = x or cn = x or dn = x,
if I := {n ∈ N| cn = x and xn /= x} is infinite, then the corresponding subse- quence {an}n∈I tends to ∞,
if J := {n ∈ N| dn = x, xn /= x and cn /= x} is infinite, then the corresponding subsequence {bn}n∈J tends to ∞ and the set {an}n∈J is finite.
This convergence relation satisfies the axioms of an L∗-space, see [4, Exercise 1.7.18]. We endow X with the topology of sequentially open sets for this convergence relation on the set N. By [4, Exercise 1.7.19] the convergence relation is induced by this topology.

Lemma 4.13 Any two non-empty open subsets U, V ⊆ X have a non-empty inter- section.

Proof. Assume x ∈ U and y ∈ V . We claim that there exists some a0 ∈ N such that for all b ∈ N, it holds that ⟨a0, b, x, y⟩ ∈ U. If this was not the case, then for all n ∈ N we can find bn ∈ N such that ⟨n, bn, x, y⟩ ∈/ U . But the corresponding sequence {⟨n, bn, x, y⟩}n∈N converges to x, and we have a contradiction.
On the other hand the sequence {⟨a0, n, x, y⟩}n∈N converges to y, hence there must exist some b0 ∈ N with ⟨a0, b0, x, y⟩∈ V, showing the claim.	2
It is now clear that the whole space X forms an irreducible closed subset of itself, i.e. it cannot be decomposed into two closed proper subsets. In particular, the space is not sober.
Let X∗ be the Alexandroff one-point compactification of X. One easily verifies that X∗ is a sequential L∗-space, as well, satisfies Lemma 4.13 and has {X∗} as an open filter.

Now consider the constant map
: X∗ → S. This has the obvious homomor-

phism extension following map
: (F(X∗), ∩) → (S, ∧) along η : X∗ → (F(X∗), ∩). But also the
  ⊥	if F = {X∗}


is a continuous homomorphism extension, because of the following reasoning. If F , F are filters with F ∩ F = {X∗}, then F ∪ F = X∗. Since X∗ is a sequential L∗-space, the Fi are closed subsets and the irreduciblity of X∗ yields the result. Thus, η : X∗ → (F(X∗), ∩) is not an abstract (S, ∧)-structure.

Corollary 4.14 There exists a topological space X∗ for which the map η : X∗ → (F(X∗), ∩), mapping a point to its neighbourhood ﬁlter, does not form the observationally-induced upper powerspace.

Conclusions
We have shown that observationally-induced free algebras exist over topological spaces for arbitrary pre-chosen observation algebras (O, ΣO) and characterised them in Theorem 2.10. Moreover, we have proven that the free (O, ΣO)-algebras inherit many desirable properties from (O, ΣO) such as satisfying algebraic equations or belonging to reflective subcategories in Lemmas 2.3 and 2.4.
Furthermore, we have investigated in how far the observationally-induced lower and upper powerspace construction, induced by the observation algebras (S, ∨) and (S, ∧), generalise the classical domain-theoretic constructions. It turned out that for every topological space X the observationally-induced lower powerdomain is given by the space of non-empty closed subsets under the lower Vietoris topology with set-union as operation. Furthermore, for the large class of Wilker spaces, the observationally-induced upper powerdomain over X is given by the space of Scott- open filters of O(X) under the upper Vietoris topology with set-intersection as operation. However, we have also given an example of a topological space for which this characterisation does not hold. Still, one may say that in both cases these observationally-induced powerspace constructions generalise the classical powerdo- main constructions genuinely to all topological spaces.
There are some interesting open questions on observationally-induced algebra constructions which go beyond the scope of this paper. The first question is whether there exists an observation algebra for the convex powerdomain and for other com- putational effects. Some possibilities have been suggested by Simpson [13]. The second question is how the situation looks in other categories, e.g. the categories of classical, synthetic or topological domain theory. The abstract machinery is applica- ble in these settings and the observationally-induced probabilistic powerdomain has been investigated in topological domain theory [3]. Finally, one may ask whether the above given definitions are the most suitable ones from a category-theoretic point of view, as we hinted at in Section 2.1, whether one can show that further properties are inherited from the observation algebra, and how these constructions behave in applications, i.e. if they yield methods for showing program correctness, program equivalence, and so on.
Acknowledgement
This work is strongly influenced by the work of Alex Simpson and the authors want to thank him for many helpful comments and his encouragment. The authors also wish to express their gratitude to Klaus Keimel, Christoph Schubert and Thomas Streicher for helpful discussions.

References
Abramsky, S. and A. Jung, Domain theory, Handbook of Logic in Computer Science 3, Clarendon Press, Oxford, 1994 pp. 1–168.
Battenfeld, I., “Topological Domain Theory,” Ph.D. thesis, LFCS, University of Edinburgh (2008).

Battenfeld, I. and A. Simpson, Two probabilistic powerdomains in topological domain theory (2006), manuscript, available at: http://homepages.inf.ed.ac.uk/als/Research/topological-domain-theory.html.
Engelking, R., “General topology,” Sigma Series in Pure Mathematics 6, Heldermann, Berlin, 1989.
Franklin, S. P., Spaces in which sequences suffice., Fundamenta Mathematicae 57 (1965), pp. 107–115.
Gierz, G., K. H. Hofmann, K. Keimel, J. Lawson, M. Mislove and D. S. Scott, “Continuous Lattices and Domains,” Cambridge University Press, Cambridge, 2003.
Heckmann, R., Power domains and second-order predicates, Theor. Comput. Sci. 111 (1993), pp. 59–88.
Jones, C., “Probabilistic Non-determinism,” Ph.D. thesis, LFCS, University of Edinburgh (1989).
Moggi, E., Notions of computation and monads, Inf. Comput. 93 (1991), pp. 55–92.
Plotkin, G. D. and J. Power, Computational effects and operations: An overview., Electr. Notes Theor. Comput. Sci. 73 (2004), pp. 149–163.
Schr¨oder, M., “Admissible Representations for Continuous Computations,” Ph.D. thesis, Fachbereich Informatik, FernUniversit¨at Hagen (2002).
Schroder, M. and A. Simpson, Probabilistic observations and valuations: (extended abstract)., Electr. Notes Theor. Comput. Sci. 155 (2006), pp. 605–615.
Simpson, A., Probabilistic observations and valuations, Talk given at: MFPS XXI, University of Birmingham (2005), slides: http://homepages.inf.ed.ac.uk/als/.
Simpson, A., Spaces of valuations revisited, Talk given at: New Interactions Between Analysis, Topology and Computation (2009), slides: http://homepages.inf.ed.ac.uk/als/.
Smyth, M. B., Topology, Handbook of Logic in Computer Science 1, Clarendon Press, Oxford, 1992 pp. 641–761.
Streicher, T., Inductive construction of repletion., Applied Categorical Structures 7 (1999), pp. 185–207.
Wilker, P., Adjoint product and hom functors in general topology, Pacific J. Math. 34 (1970), pp. 269– 283.
