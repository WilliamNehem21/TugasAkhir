

Electronic Notes in Theoretical Computer Science 256 (2009) 33–47
www.elsevier.com/locate/entcs

A Topos-Theoretic Approach to Counterfactual Logic
Ricardo Queiroz de Araujo Fernandes1,2 Edward Hermann Haeusler3
Departamento de Informa´tica
Pontif´ıcia Universidade Cato´lica do Rio de Janeiro Rio de Janeiro, Brasil

Abstract
Topoi are known to be categories with extra properties that make them much alike the category of Sets. In a Topoi it is possible to define adequate notions of membership, elements and subobjects, power ”sets”, and finally, every Topoi has an internal logic able to justify any reasoning carried inside it. Most of the cases, this logic is not Classical (Boolean). The general logic for the Topoi is Intuitionistic Higher-order Logic. Topoi
have their linguistic counter-part provided by Local Set Theories (LST). There is a deductive apparatus, in the style of Sequent Calculus, able to justify logical consequence inside any LST. Counterfactuals are subtle conditionals largely studied by the philosophical and logic community. Since Lewis, counterfactual have a uniform semantics provided by means of Neighborhood systems on top a possible world style semantics. In this article, taking into account the fundamental theorem on Topoi, we define, by means of the internal logic of Graphs, Lewis counterfactuals and show how to use the LST deductive apparatus to prove properties on counterfactual logic. This article can be also used as an initial step towards the definition of deductive systems for counterfactual logic, taken in an alternative way the ones already existent in the logic literature.
Keywords: Category Theory, Topos, Logic, Counterfactuals


Introduction
Counterfactual conditionals differ from indicative conditionals in a subtle way. Con- ditional propositions involve two components, namely, the antecedent and the con- sequent. Indicative conditionals, also known as material conditional, consider only the assigned truth value to both, antecedent and consequent, when attaching truth value to itself. The truth of an indicative conditional is based on the actual state- of-affairs, while a counterfactual conditional should take into account the truth of the antecedent always, even if it is not the case. The truth of the antecedent is

1 Thanks to PUC-Rio for the VRac sponsor.
2 Email: raraujo@inf.puc-rio.br
3 Email: hermann@inf.puc-rio.br

1571-0661 © 2009 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2009.11.004

mandatory in this analysis. Some approaches to counterfactuals entails belief re- vision, particularly those based on Ramsey test evaluation [7]. A possible way to circumvent belief revision mechanisms is to consider alternative (possible) state-of- affairs and choose the closest one among the worlds that satisfy the antecedent. If the consequent is true at this considered world then the counterfactual is true also. The following phrases are instances of material and counterfactual conditionals respectively.
If Irak were a democracy it would not have been invaded by USA.
If Irak were a democracy it would have had elections for president.
Both conditionals have false antecedents and false consequents in the current state- of-affairs. However, the second conditional is clearly truth, since election is a neces- sary feature in a democracy. The intuitive reasoning for attaching truth value to a counterfactual is to consider an alternative world with a minimal change generated by taking the antecedent true. Instead of producing a belief revision in the current world, Lewis [5] analyses the truth of the consequent in the closest worlds holding the antecedent truth. By defining different neighborhood systems one can define different counterfactual logics. A neighborhood system, of any kind, is central in the most traditional analysis of counterfactuals. In this article this is the case too. The approaches to counterfactuals dealing with belief revision are out of scope of this article. The symbol ю is used to denote counterfactual conditional, following Lewis.
Modal logic semantics, namely possible worlds semantics, have been widely used
in the presentation of counterfactual semantics. There, a neighborhood system for each world is meta-logically specified and a set of axioms is ruled out according the intended semantics. Precise notions of completeness and soundness for each derived counterfactual logic are stated in these cases.
Roughly speaking, a topos is a category provided with an internal logical theory that resembles Set Theory. Formally, a Topos is a finitely complete and cocomplete category with exponentials and subobject classifier. From these features it is pos- sible to define logic notions belonging to the Higher-Order (logic) setting. In [1] it
is defined a Higher-Order logic called Local Set Theory able to derive propositions
preserving truth under any topos interpretation. Local Set Theory is the linguistic counterpart of Toposes (pl. of Topos 4 ). On the other hand, any consistent set of sentences in Local Set Theory describes a topos up to equivalence of categories. Local Set Theory is complete under Topos semantics. Summarizing, by means of the Local Set Theory inference system, one can derive any Topos-theoretic property at a linguistic level. It is even possible to define a Local Truth modality inside any topos, by means of Geometric Modalities induced by formal topologies defined by covering notions provided by sets of morphism. These modalities are in fact Normal 5 .
It is quite well known that the internal logic of a topos is general enough to define set-like objects and concepts. In [2] a topos is categorically defined and thereafter

4 Topoi (Latin) is also used as the plural of Topos.
5 A Modality is Normal, iff, it satisfies the K axiom and the G¨odel rule of generalization

some set-like notions intending to define heuristics and search based problems are described by means of the language of Local Set Theory. The present article follows this very approach towards the categorical definition of a topos, and, by means of Local Set Theory, basic notions aiming to define classes of neighborhood systems are also defined. Following the framework initiated by Lewis [5], a counterfactual conditional is defined in the internal logic of the topos. For each possible neighbor- hood system, the (internal) counterfactual logic can be analyzed and the inference system of Local Set Theory may be used to derive proper counterfactual axioms and to show that certain inference rules are derived rules inside LST.
In section 2 the basic categorical notions are defined for the sake of terminology definition. Section 3 defines the class of topos used in this article. Section 4 defines the main notion of neighborhood systems and some of their instances. Section 5 defines logically the counterfactuals involved and compares them to known logical systems existing in the literature on counterfactuals. Finally the conclusion follows.
Categories
We present here an axiomatic definition of a category [6,4].
Definition 2.1 A Category C is a 6-tuple
C = ⟨C0, C1, ∂0, ∂1, ı, ◦⟩
where:
C0 is a collection of C-objects;
C1 is a collection of C-arrows;
∂0 and ∂1 are functions assigning a C-object for each C-arrow 6 ;
◦ : C2 → C1 is a partial operation assigning to a pair ⟨g, f⟩ of C-arrows, such that ∂1(f ) = ∂0(g), a C-arrow g◦f : ∂0(f ) → ∂1(g) and ◦ must be associative 7 ;
ı : C0 → C1 is a function that assigns to each C-object b a C-arrow 1b : b → b, such that, for each f : a → b and g : b → c, we have 1b ◦ f = f and g ◦ 1b = g.
We state here the fundamental concepts of Category Theory making use of the Duality Principle. Given a concept, we may build its dual concept simply by reversing all the arrows in the definition of this given concept.
Definition 2.2 An arrow f : a → b in a category C is monic 8 (dual epic) in C if
∀ h, g : c → a ((f ◦ g = f ◦ h) ⇒ g = h)
Definition 2.3 An object 0 is initial (dual terminal) in a category C if, for every object a of C, there is only one arrow from 0 to a in C.

6 ∂0 and ∂1 may be seen respectively as the domain and the codomain function for each arrow. If ∂0(f )= a
f
and ∂1(f )= b, we may represent the arrow as f : a → b or a → b.
7	f	g	h
It means that, whenever we have a → b → c → d, we have the equation f ◦ (g ◦ h)= (f ◦ g) ◦ h
8 We denote that an arrow is monic by > and epic by →

Definition 2.4 A product (dual co-product) of two objects a and b in a category C is an C-object a × b together with a pair ⟨pra : a × b → a, prb : a × b → b⟩ of C-arrows such that for any pair of C-arrows ⟨f : a × b → a, g : a × b → b⟩ there is only one arrow ⟨f, g⟩ : c → a × b making the following diagram to commute
  c ¸¸¸

f 
 ⟨f,g¸⟩¸g¸

 J  ¸¸¸
a , ¸s,pra a × b  prb	z b 
Definition 2.5 An arrow i : e → a in a category C is an equalizer (dual co- equalizer) of a pair of C-arrows f, g : a → b if:
f ◦ i = g ◦ i;
Whenever h : c → a has f ◦h = g◦h in C, there is exactly one C-arrow k : c → e
such that the following diagram commutes



  i	
,, 
  f	
 ¸a ,g	 b 

  h ccc
k  cc

c c
Definition 2.6 A pullback (dual pushout) of a pair of arrows a f

c g  b in a

category C is a pair of C-arrows	g	f	such that:
a ← d → b
f ◦ g' = g ◦ f';
Whenever a ←h e j b are such that f ◦ h = g ◦ j, then







g
zaJ  f	 cJ 
there is exactly one C-arrow k : e −−· d such that h = g' ◦ k and j = f' ◦ k.
Definition 2.7 If C is a category with a terminal object 1, then a subobject clas- sifier for C is a C-object Ω together with a C-arrow T : 1 → Ω that satisfies the following axiom:
Ω-axiom. For each monic f : a > d there is one and only one C-arrow χf : d → Ω such that:
'
a   d 

!	χf


is a pullback square.
1J T	 J 

Definition 2.8 An elementary Topos is a category S such that:
S has terminal object;
S has equalizers;
S has pullbacks;
S has subobject classifier;
Theorem 2.9 [4]
For any small category C, the functor category SetC is a topos.
The Graph Topos
A graph may be seen as functor from the category two below to the category Set. So a graph is an object of the category of functors Graph = Settwo, which is a topos.

  source	 
A	target	V
We follow the presentation of [4].
Definition 3.1 Initial object The functor 0 : two → Set that maps A and V to the empty set ∅ and maps all arrows to the empty arrow from ∅ to ∅.
Definition 3.2 Terminal object The functor 1 : two → Set that maps A and
V to the one element set {∗} and maps all arrows to the identity. To define the subobject classifier, we need
Definition 3.3 Given an object a of any category, we denote by Sa the collection
of all arrows with domain a. A sieve on a (also a-sieve) is any subset of Sa that is closed by left composition.
Definition 3.4 Subobject classifier The functor Ω : two → Set such that

Ω(a) = {S | S sieve on a }

and, for an arrow f : a → b, Ω(f ) : Ω(a) → Ω(b) is the function that takes a sieve S on a to the sieve {g | g ◦ f ∈ S} on b.

Definition 3.5 The truth value true T : 1 —→.
Ω is the natural transformation

that has components Ta : {∗} → Ω(a) given by Ta(∗) = Sa.
We represent by ω = {0, 1, 2,.. .} the set of all finite ordinals, which is a repre- sentation of the natural numbers.
Definition 3.6 Natural number object N : two → Set is the constant functor such that
N (A) = N (V ) = ω, N (f ) = idω, f any arrow of two

Local set theory
We are following [2].
Definition 3.7 A Local Language L is determined by the following components:
Symbols: The unit symbol 1, the truth-value type symbol Ω, a collection of ground type symbols A, B, C, ..., and a collection of function symbols f, g, h,
...;
Types: The set of types of L is the least set T containing 1, Ω, all ground type symbols A, B, C, ... and closed under the following operations:
For A ∈T , the power type PA is also in T ;
For A1,..., An ∈T , the product type A1 × ... × An is also in T . For n = 0, the product type is 1.
Signatures: Each function f is associated to a signature A → B, where A and
B are types. This is denoted by f : A → B;
Variables: For each type A, there is a countable set of variables VA;
Terms: For each type A, there is a set TA of terms of type A, defined as follows:
·  ∈ T1;
VA ∈ TA;
For f : A → B and τ ∈ TA, we have that f (τ ) ∈ TB;
For τi ∈ TAi (i = 1,..., n), we have that (τ1,..., τn) ∈ TA1×...×An . For n = 0, this term is ;
For τ ∈ TA1×...×An , we have that φi(τ ) ∈ TAi (i = 1,..., n);
For ϕ ∈ TΩ and x ∈ VA, we have that {x : ϕ}∈ TPA;
For terms σ and τ of type A, we have that σ = τ is a term of type TΩ;
For terms σ and τ of types A and P A, respectively, we have that σ ∈ τ is a term of type TΩ.
The terms of type TΩ are called formulas. We present now the axioms, the inference rules of the LST and the logical operations.
Definition 3.8 Basic axioms
Tautology α : α;
Unity : x1 = ;
Equality x = y, α(z/x) : α(z/y);
Products : (⟨x1,..., xn⟩)i = xi
: x = ⟨(x)1,..., (x)n⟩;
Comprehension x ∈ {x : α}⇔ α;
Definition 3.9 Inference rules
Thinning   Γ ▶ α 
β, Γ ▶ α
Γ ▶ α	α, Γ ▶ β

Cut
Γ ▶ β	( any free variables of α free in Γ or β )

Substitution 	Γ ▶ α	 ( τ free for x in Γ and α ) Γ(x/τ ) ▶ α(x/τ )
Extensionality  Γ ▶ x ∈ σ ⇔ x ∈ τ  ( x is not free in Γ, σ,τ )
Γ ▶ σ = τ
α, Γ ▶ β	β, Γ ▶ α

Equivalence
Γ ▶ α ⇔ β

Over those inference rules, [1] develop some inference relations that we will use during the deductions.
Definition 3.10 Logical Operations
L1) α ⇔ β for α = β;
L2) T for ∗ = ∗;
L3) α ∧ β for ⟨α, β⟩ = ⟨T, T⟩;
L4) α ⇒ β for (α ∧ β) ⇔ α;
L5) ∀xα for {x : α} = {x : T};
L6) ⊥ for ∀ ωω;
L7) ¬ α for α ⇒ ⊥;
L8) α ∨ β for ∀ ω[(α ⇒ ω ∧ β ⇒ ω) ⇒ ω];
L9) ∃ xα for ∀ ω[∀ x(α ⇒ ω) ⇒ ω];
Definition 3.11 A set-term is any term of power type PA for some type A.
In [1] it is shown how to define a Topos from any consistent Local Set Theory (LST). We remind the reader that a LST can be defined by a set of Sequents 9 . This topos is built on top of linguistic constructions and validated by the LST Sequent Calculus (shown previously). For example, the objects of the Category are the Type symbols freely generated from those occurring in S (a set of sequents) by the operations of type formation in a LST. A morphism (set-like function) from an object A to an object B are the provable inhabitants of BA, so f : A → B, iff,
▶S f ∈ AB. It can be proved that the category C(S) built in this way is a Topos (see [1]). On the other hand, if we provide a Topos E, we have the Higher-Order language, the local language, induced by this Topos and consequently the set of truth formulas regarded E. This forms a theory Th(E) in the local language of the E. The linguistic topos associated to Th(E), namely, C(T h(E)) is categorically equivalent to E. This reflectiveness of categories (the Topoi and their Linguistic counterparts) is important in our work. In the following section we define counterfactuals by means of the internal logic of a concrete Topos. These definitions, although linguistic, have their corresponding in the Topos itself up to a categorical equivalence. In this way we have a safe, so to say consistently safe, track to achieve a Topos-theory able to express counterfactuals.

9 Obviously, inconsistent LSTs do not have a Topos-model.

Neighborhood Systems
Definition 4.1 Given a graph G, we define the set of its subgraphs by:
sub(G) = { ⟨φ, ı⟩| ı ∈ Gφ ∧ ∀g ∈ φψ : ∀ h ∈ φψ : (g ◦ ı = h ◦ ı) ⇔ g = h } 10
Now we define a relation in sub(G):
Definition 4.2 ⟨ψ, j⟩ иG ⟨φ, i⟩⇔ ⟨ψ, j⟩∈ sub(i(φ))
Until now we admit any initial object as subgraph. To avoid them, we define
Definition 4.3
sub∗(G) = { ⟨φ, i⟩∈ sub(G) | ∃ψ : ∃σ ∈ φψ : ∃τ ∈ φψ : σ /= τ }

We will use the same symbol for иG and its restriction to sub∗(G) × sub∗(G).
We may also omit the index when no doubt is possible.
Definition 4.4 The set of vertexes of a given graph G are defined by
ν(G) = {v ∈ sub∗(G) |∀ s ∈ sub∗(G) : s иG v ⇒ v иG s}
Definition 4.5 Given a graph G, we define the set of nested neighborhoods by
ρ(G) = {S ∈ P sub∗(G) | иG ∩S × S is a total order }
Definition 4.6 A neighborhood system $ of a graph G is a function between sub- graphs and nested neighborhoods. $ ∈ ρ(G)sub(G)
Counterfactuals
Given a Kripke frame K = ⟨W, D⟩, in which W is a non-empty set and D ⊆W ×W, we may see the frame as a directed graph. Given a neighborhood system $, we may start to define our logic system for counterfactuals.
To give the notion behind the definition of the ю operator, we present the specification Lewis [5] gave:

α ю β is true at a world u (according to a neighborhood system $) iff either:
For no world w in $(u), |=w α;
Some neighborhood N in $(u) has a world w such that |=w α and |=v α ⇒ β
in every world v of N .
Definition 5.1 Given a model M = ⟨W, D,V ⟩ on a Kripke frame K and a neigh- borhood system $ of K, we define the relation |= between worlds and formulas:
For an atomic formula α, |=u α iff u ∈ V (α);

10 So ı must be a monic arrow.

|=u ч α iff |=u α;
|=u α Λ β iff |=u α and |=u β;
|=u α V β iff |=u α or |=u β;
|=u α ⇒ β iff |=u ч α or |=u β;
|=u α ю β iff
6U ∈ $(u) : 6 v ∈ ν(K) : v иK U ⇒ |=v α or
{EU ∈ $(u) : 6 v ∈ ν(K) : v иK U ⇒ (|=v α ⇒ β) and
E w ∈ ν(K) : w иK U Λ |=w α }.
The definition of the relation |= for the counterfactual ю follows the description of Lewis [5]. But here we use the accessibility relation D of the Kripke frame to make a particular account of a similarity relationship.
We do not care about closeness of intersections and of unions, because Lewis
[5] does not present them as obligatory at the final chapter of his book. Instead of using the definition of the operator ю, we adopt here the comparative possibility operator “ just to follow [5,3].
The specification for the “ operator: α “ β is true at a world u (according to a neighborhood system $) iff, for every neighborhood S in $(u), if S contains a β-world 11 , then S contains a α-world.
(vi’) |=u α “ β iff 6U ∈ $(u) : 
( E v ∈ ν(K) : v иK U Λ |=v β) ⇒ ( E w ∈ ν(K) : w иK U Λ |=w α) To simplify the reading and writing, we introduce:
Definition 5.2 The relation |= may be extended to any subgraph N ∈ sub∗(K) as follows:
|=N α iff 6 s ∈ sub∗(K) : s иK N ⇒ |=s α;
|=N α iff E s ∈ sub∗(K) : s иK N Λ |=s α;
Now the rule for the comparative possibility becomes: (vi”) |=u α “ β iff 6 N ∈ $(u) : |=N чβ ⇒ |=N чα
But we can extend |= even further:
Definition 5.3 The relation |= may be extended to any nested neighborhood N of
K as follows:
|=N α iff 6 s ∈ N : |=s α;
|=N α iff E s ∈ N : |=s α.
Now we may introduce the other operators that Lewis [5] defines in terms of the comparative possibility, presenting their specifications and using the local language. For any non-empty subgraph u of K we have the equations:
α < β =df ч (β “ α);

11 A β-world is any world v, such that |=v β holds.

α < β is true at u (according to $) iff some neighborhood in $(u) contains a
α-world but no β-world.
α < β ≡u E N ∈ $(u) : |=N ч α Λ |=N чβ.
α ≈ β =df α “ β Λ β “ α;
α ≈ β is true at u (according to $) iff all and only those neighborhoods in $(u) that contains α-worlds contains β-worlds;
α ≈ β ≡u 6 N ∈ $(u) : |=N ч α e |=N чβ.
α =df α < ⊥;
	α is true at u (according to $) iff α is true at some world in some neighborhood in $(u);
α ≡u |=$(u) ч α.
α =df ч  ч α ( or ⊥≈ч α );
α is true at u (according to $) iff α is true at every world in every sphere in
$(u);
α ≡u |=$(u) α.
α =df α ≈ T;
	α is true at u (according to $) iff α is true at some world in every neighborhood in $(u);
α ≡u 6 N ∈ $(u) : |=N чα.
α =df ч   ч α ( or T<ч α );
	α is true at u (according to $) iff α is true at every world in some neighborhood in $(u);
α ≡u E N ∈ $(u) : |=N α.
α œ β =df (α Λ β) < (α Λч β);
α œ β is true at u (according to $) iff there is some neighborhood S in $(u) such that S contains at least one α-world and α ⇒ β is true at every world in S;
α œ β	≡u	E N ∈ $(u) : |=N ч(α Λ β)	Λ	|=N ч(α Λч β)

≡u	E N ∈ $(u) : |=N ч α	Λ	|=N (α ⇒ β).
α   β =df ч (α œ ч β) ( or (α Λ β) “ (α Λч β) );
α  β is true at u (according to $) iff every neighborhood in $(u) that contains at least one α-world contains at least one α-world at which α Λ β holds;
α   β	≡u	6 N ∈ $(u) : |=N ч(α Λч β)	⇒	|=N ч(α Λ β)
≡u	6 N ∈ $(u) : |=N ч α	⇒	|=N ч(α Λ β)
α ю β =df  α ⇒ (α œ β);


α   β =df  α Λ (α   β);
α   β is true at u (according to $) iff both:
some α-world belongs to some neighborhood in $(u);
every neighborhood in $(u) that contains at least one α-world contains at least one world where α Λ β holds;
α   β	≡u	E N	∈ $(u) : |=N чα Λ
6 M	∈ $(u) : |=M чα ⇒ |=M ч(α Λ β)
We used here u as reference to an arbitrary world, but the definitions work as well for any subgraph of K. A formula α is a valid formula on the model ł iff, for every subgraph S of K, |=S α holds. An axiom also requires that under every neighborhood function $, |=S α holds. Now we investigate the axioms presented by Lewis [5] and show proofs for a given Kripke frame K, a given neighborhood function $ and a given subgraph u. Since we do not require any property of them, they are arbitrary and the deductive relation between axioms and conditions for $ will follows. We remark here that those axioms are actually schemata for formulas.
The normality condition requires that $(u) is not void: E N : N ∈ $(u). Axiom
N : T<⊥ ≡u E N ∈ $(s) : |=N ⊥Λ |=N T





E N : N ∈ $(u) ▶ E N : N ∈ $(u)
EN : N ∈ $(u) Λ |=N ⊥ ▶ E N : N ∈ $(u)

EN : N ∈ $(u) Λ |=N ⊥Λ |=N T ▶ E N : N ∈ $(u)
EN ∈ $(u) : |=N ⊥Λ |=N T ▶ E N : N ∈ $(u)
The totally reflexive condition requires that u belongs to the union of its neigh- borhoods: 6v ∈ ν(K) : v и u ⇒ EN ∈ $(u) : v и N . Axiom T :  α ⇒ α ≡u
|=$(u) α ⇒ |=u α
In the following, we need a lemma for vertex:
τ и u Λ |=τ α ▶ τ и u Λ |=τ α
τ ∈ sub(u) : |=τ α ▶ τ ∈ ν(u) : |=τ α 6s ∈ sub(u) : |=s α ▶ τ ∈ ν(u) : |=τ α 6s ∈ sub(u) : |=s α ▶ 6v ∈ ν(u) : |=v α

|=u α ▶ 6v ∈ ν(u) : |=v α
The condition follows directly from the axiom  ⊥⇒ ⊥.

Ev ∈ ν(K) : 6N ∈ $(u) : v /и N Λ v и u Λ |=v α ▶ Ev ∈ ν(K) : 6N ∈ $(u) : v /и N Λ v и u Λ |=v α
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶ Ev ∈ ν(K) : 6N ∈ $(u) : v /и N Λ v и u Λ |=v α
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶ w /и τ Λ w и u Λ |=w α Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶ w /и τ Λ w и u Λ |=w α Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶
(w /и τ Λ w и u Λ |=w α) V ( |=w α Λ w и u Λ |=w α) Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶ (w /и τ V |=w α) Λ (w и u Λ |=w α)
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶
(w и τ ⇒ |=w α) Λ (w и u Λ |=w α)
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶
τ ∈ $(u) : w ∈ ν(K) : w и τ ⇒ |=w α Λ w ∈ ν(K) : w и uΛ |=w α
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶
6M ∈ $(u) : 6t ∈ ν(K) : t и M ⇒ |=t α Λ Es ∈ ν(K) : s и uΛ |=u α
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶ 6M ∈ $(u) : |=M α Λ |=u α
Ev ∈ ν(K) : v и u Λ |=v α Λ 6N ∈ $(u) : v /и N ▶
|=$(u) α Λ |=u α
|=$(u) α ⇒ |=u α ▶
6v ∈ ν(K) : v и u ⇒ ( |=v α V EN ∈ $(u) : v и N )
 α ⇒ α ▶ 6v ∈ ν(K) : v и u ⇒ ( |=v α V EN ∈ $(u) : v и N )
The weakly centered condition requires that u belongs to each of its neighborhoods and there is at least one such neighborhoods: EN ∈ $(u) Λ 6M ∈ $(u) : u и M . Axiom W : (  α V  α) ⇒ α


6N /∈ $(u) ▶ 6N /∈ $(u)


6N /∈ $(u) ▶ τ /∈ $(u)


6N /∈ $(u) ▶ τ /∈ $(u)V |=τ α


6N /∈ $(u) ▶ 6M : M /∈ $(u)V |=M α


6N /∈ $(u) ▶ 6M : M ∈ $(u) ⇒|=M α
6N /∈ $(u) ▶ |=$(u) α
6N /∈ $(u) ▶ |=$(u) α V EN ∈ $(u) : |=N α
6N /∈ $(u) ▶ ( α V  α)


|=u α Λ 6N /∈ $(u) ▶ ( α V  α)









|=u α, 6N /∈ $(u) ▶ |=u α


|=u α Λ 6N /∈ $(u) ▶ |=u α


|=u α Λ 6N /∈ $(u) ▶ ( α V  α) Λ |=u α
( α V  α) ⇒ α ▶ α V EN ∈ $(u)


The axiom ( ⊥V ⊥) ⇒⊥ assures that $ is not void. Another proof may be given using the T axiom because ( α V  α) ⇒ α ≡ ( α ⇒ α) Λ ( α ⇒ α).


EN ∈ $(u) : u /и N ▶ EN ∈ $(u) : u /и N
EN ∈ $(u) : u /и N ▶ u /и τ

EN ∈ $(u) : u /и N ▶ τ ∈ $(u) : |=tau α Λ |=u α EN ∈ $(u) : u /и N ▶ EM ∈ $(u) : |=M α Λ |=u α EN ∈ $(u) : u /и N ▶  αΛ |=u α
 α ⇒ α ▶ 6N ∈ $(u) : u и N


We used the lemma:
false,u ∈ sub(τ )α ▶ false
|=u α, |=u α, u ∈ sub(τ ) ▶ false

Σ:  6s ∈ sub(τ ) :|=s α, |=u α, u ∈ sub(τ ) ▶ false 
6s ∈ sub(τ ) :|=s α, |=u α, u и τ ▶ false
|=τ α, |=u α, u и τ ▶ false

|=τ αΛ |=u α ▶ u /и τ
$ is centered if u ∈ $(u). Axiom C :  α ⇒ α

Here we see the first distinction we must do between worlds and classes of worlds, because |=u α ≡ |=u чα when u is a world.
6N ∈ $(u) : N /= u ▶ 6N ∈ $(u) : N /= u u /∈ $(u) ▶ τ /= u

u /∈ $(u) ▶ τ /и u
u /∈ $(u) ▶ |=u чα Λ τ ∈ $(u) : |=τ чα u /∈ $(u) ▶ |=u чα Λ 6N ∈ $(u) : |=N чα u /∈ $(u) ▶ |=u α Λ 6N ∈ $(u) : |=N чα

  α ⇒ α ▶ u ∈ $(u)
Here we used again the Σ lemma of the previous axiom.
6N ∈ $(u) : N /= u ▶ 6N ∈ $(u) : N /= u u /∈ $(u) ▶ τ /= u

u /∈ $(u) ▶ τ /и u
u /∈ $(u) ▶ |=u чα Λ τ ∈ $(u) : |=τ чα

u /∈ $(u) ▶ |=u чα Λ |=u α Λ 6N ∈ $(u) : |=N чα
|=u чα Λ u /∈ $(u) ▶ |=u α Λ 6N ∈ $(u) : |=N чα

  α ⇒ α ▶ u ∈ $(u)V |=u чα


The result follow from the axiom  T⇒ T.
We know from Lewis [5], that C implies W because α V α ⇒  α, using the fact that neighborhoods are nested and not void. We represent it by requiring that и provides a total order inside the nested neighborhoods and that nested neighborhoods are built only with non-initial objects. O ≡ 6M ∈ $(u) : 6N ∈
$(u) : N и MVM и N . We used the Σ lemma twice to achieve the contradictions.
6N ∈ $(u) : |=N α ▶ 6N ∈ $(u) : |=N α 6N ∈ $(u) : |=N α ▶ 6γ ∈ sub∗(τ ) : |=γ α 6N ∈ $(u) : |=N α ▶ γ ∈ sub∗(τ ) : |=γ α 6N ∈ $(u) : |=N α ▶ Es ∈ sub∗(τ ) : |=s α 6N ∈ $(u) : |=N α ▶ τ ∈ $(u) : |=τ чα

6N ∈ $(u) : |=N α ▶ 6N ∈ $(u) : |=N чα
 α ▶  α


false ▶ false
|=τ α, |=γ чα, γ и τ ▶ false
false ▶ false


|=τ α, |=γ чα, τ и γ ▶ false



|=τ α, |=γ чα, (τ и γ V γ и τ ) ▶ false
O,τ ∈ $(u) : |=τ α, γ ∈ $(u) : |=γ чα ▶ false O, EN ∈ $(u) : |=N α, EM ∈ $(u) : |=M чα ▶ false

O, EN ∈ $(u) : |=N α ▶ 6M ∈ $(u) : |=M чα
O,  α ▶  α
The other axioms may also deduct the respective conditions, but due to space limitation, we do not present them here.
Stalnaker assumption: S : ((α Λ β) ≈ (α Λч β)) ⇒ч  α
Uniformity: U :  α ⇒   α and  α ⇒  α
Absoluteness: A : α “ β ⇒ (α “ β) and α < β ⇒ (α < β) Three conditions need a combination of axioms:
Universality: UT ;
Weak triviality: W A;
Triviality: CA.
The Limit Assumption does not have any axiom [5].

Example for a given sentence
Given a Kripke frame K that represents the international politics, with the natural language predicates: D for democracy and E for elections. To show that the state- ment: “If Irak were a democracy it would have had elections for president.” is valid, we suppose that we have any system of neighborhoods $. We define V ≡ |=K D ⇒ E as an axiom of our representation. We take u as any world or class of worlds in our frame K.

|=$(u) чD, V ▶ |=$(u) чD
	 (|=$(u) чD)
|=$(u) чD, V ▶ |=τ ч D	Π
|=$(u) чD, V ▶ τ ∈ $(u) : |=τ ч DΛ |=τ D ⇒ E



(right Λ)
(right E)

|=$(u) чD, V  ▶ E M ∈ $(u) : |=M ч DΛ |=M D ⇒ E
V  ▶ |=$(u) чD ⇒E M ∈ $(u) : |=M ч DΛ |=M D ⇒ E
V ▶ D ю E
|=$(u) чD, |=τ D ⇒ E ▶ |=τ D ⇒ E

(right ⇒) (ю)

Π:	|=
$(u)
чD, 6s : |=s
D ⇒ E ▶ |=τ
D ⇒ E
(left 6)
(V )

|=$(u) чD, V ▶ |=τ D ⇒ E
Conclusion
In this paper we have treated the Counterfactual conditionals through logic notions belonging to the Higher-Order (logic) setting. To do so we have used a Higher- Order logic called Local Set Theory, which is able to derive propositions preserving truth under any topos interpretation. It gave us the possibility, using the Local Set Theory inference system, to derive any Topos-theoretic property at a linguistic level.
Following the framework initiated by Lewis [5], a counterfactual conditional is defined in the internal logic of the topos. For each possible neighborhood system, the (internal) counterfactual logic can be analyzed and the inference system of Local Set Theory may be used to derive proper counterfactual axioms and to show that certain inference rules are derived rules inside LST. We could also see that some linguistic definitions for the Lewis analysis could be described and employed inside the logical deductions as in the proof of C ⇒ W .
The present topos-theoretic analysis could be used, in a future work, to obtain a counterfactual definition using Groethendieck topologies instead of making those definitions inside the Graph Topos. In doing so, one may conclude that there is a counterfactual definition inside the logic of any topos.

References
Bell, J. L., “Toposes and Local Set Theories,” Dover Publications, 2008.
do Amaral, F. N. and E. H. Haeusler, Using the internal logic of a topos to model search spaces for problems, Logic Journal of IGPL (2007).
Gent, I. P., A sequent- or tableau-style system for lewis’s counterfactual logic vc, Notre Dame Journal of Formal Logic 33 (1992), pp. 369–382.
Goldblatt, R., “Topoi: The categorical analysis of logic,” Dover, 2006.
Lewis, D., “Counterfactuals,” Harvard university Press, 1973.
Menezes, P. B. and E. H. Haeusler, “Teoria das Categorias para Ciˆencia da Computa¸c˜ao,” Editora Sagra Luzatto, 2006.
Ramsey, F. P., “Philosophical papers,” Cambridge University Press, 1990.
