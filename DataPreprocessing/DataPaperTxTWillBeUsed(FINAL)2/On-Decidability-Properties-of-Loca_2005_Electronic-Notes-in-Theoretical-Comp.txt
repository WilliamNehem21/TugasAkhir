Electronic Notes in Theoretical Computer Science 123 (2005) 75–92  
www.elsevier.com/locate/entcs


On Decidability Properties of Local Sentences

Olivier Finkel1
Equipe de Logique Math´ematique
U.F.R. de Math´ematiques, Universit´e Paris 7 2 Place Jussieu, 75251 Paris cedex 05, France

Abstract
Local (first order) sentences, introduced by Ressayre, enjoy very nice decidability properties, fol- lowing from some stretching theorems stating some remarkable links between the finite and the infinite model theory of these sentences [14]. Another stretching theorem of Finkel and Ressayre implies that one can decide, for a given local sentence ϕ and an ordinal α < ωω, whether ϕ has a model of order type α. This result is very similar to Bu¨chi’s one who proved that the monadic second order theory of the structure (α, <), for a countable ordinal α, is decidable. It is in fact an extension of that result, as shown in [6] by considering the expressive power of monadic sentences and of local sentences over languages of words of length α. The aim of this paper is twofold. We wish first to attract the reader’s attention on these powerful decidability results proved using meth- ods of model theory and which should find some applications in computer science and we prove also here two additional results on local sentences.
The first one is a new decidability result in the case of local sentences whose function symbols are at most unary: one can decide, for every regular cardinal ωα (the α-th cardinal), whether a local sentence ϕ has a model of order type ωα.
Secondly we show that this result can not be extended to the general case. Assuming the consis- tency of an inaccessible cardinal we prove that the set of local sentences having a model of order type ω2 is not determined by the axiomatic system ZFC + GCH, where GCH is the generalized continuum hypothesis.
Keywords: local sentences, decidability properties, model of ordinal order type α, monadic theory of an ordinal, ω2-model, Kurepa tree, independence result.


1	Introduction
A local sentence is a first order sentence which is equivalent to a universal sentence and satisfies some semantic restrictions: closure in its models takes a

1 Email: finkel@logique.jussieu.fr



1571-0661 © 2005 Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2004.05.013


finite number of steps. Ressayre introduced local sentences in [14] and estab- lished some remarkable links between the finite and the infinite model theory of these sentences given by some stretching theorems. Assuming that a bi- nary relation symbol belongs to the signature of a local sentence ϕ and is interpreted by a linear order in every model of ϕ, the stretching theorems state that the existence of some well ordered models of ϕ is equivalent to the existence of some finite model of ϕ, generated by some particular kind of in- discernibles, like special, remarkable or monotonic ones. Another stretching theorem of Finkel and Ressayre establishes the equivalence between the exis- tence of a model of order type α (where α is an infinite ordinal < ωω) and the existence of a finite model (of another local sentence ϕα) generated by Nϕα
semi-monotonic indiscernibles (where Nϕα is a positive integer depending on
ϕα) [9].
This theorem provides some decision algorithms which show the decidabil- ity of the following problem:  (P ) “For a given local sentence ϕ and an ordinal α < ωω, has ϕ a model of order type α ?”
This last result is very similar to Bu¨chi’s one who proved that the monadic second order theory of the structure (α, <), for a countable ordinal α, is decid- able, [2] [17] [3]. Bu¨chi obtained some decision algorithms by proving firstly that, for α-languages (languages of words of length α) over a finite alphabet, definability by monadic second order sentences is equivalent to acceptance by finite automata where a transition relation is added for limit steps.
We can compare the expressive power of monadic sentences and of local sentences, considering languages defined by these sentences. For each ordinal α < ωω, an α-language is called local in [14] [9] (or also locally finite in [6] [8] [7]) iff it is defined by a second order sentence in the form ∃R1 ... ∃Rkϕ, where ϕ is local in the signature S(ϕ) = {<, R1,... Rk} and R1,... Rk are relation or function symbols.
The class LOCα of local α-languages, for ω ≤ α < ωω, is a strict extension of the class REGα of regular α-languages, defined by monadic second order sentences [6]. Moreover this extension is very large. This can be seen by con-
sidering the topological complexity of α-languages and firstly of ω-languages. It is well known that all regular ω-languages are boolean combinations of Σ0 Borel sets hence ∆0 Borel sets, [17] [13]. On the other hand the class LOCω meets all finite levels of the Borel hierarchy, contains some Borel sets of infinite
rank and even some analytic but non Borel sets, [7].
Thus the decision algorithm for local sentences provides in fact a very large extension, for α < ωω, of Bu¨chi’s result about the decidability of the monadic second order theory of (α, <). Moreover, at least for α = ω, the algorithm for local sentences is of much lower complexity than the corresponding algorithm


for monadic second order sentences [7].
We think that these powerful decidability results proved using methods of model theory should find some applications in computer science and that the study of local sentences could become an interdisciplinary subject for both model theory and computer science communities.
So the aim of this paper is twofold: firstly to attract the reader’s attention on these good properties of local sentences and their possible further applica- tions; secondly to prove two new results on local sentences, described below.
Bu¨chi showed that for every ordinal α < ω2, where ω2 is the second un- countable cardinal, the monadic theory of (α, <) is decidable. This result cannot be extended to ω2. Assuming the existence of a weakly compact car- dinal (a kind of large cardinal) Gurevich, Magidor and Shelah proved that the monadic theory of (ω2, <) is not determined by the set theory axiomatic system ZFC. They proved even much more: for any given S ⊆ ω there is a model of ZFC where the monadic theory of (ω2, <) has the Turing degree of S; in particular it can be non-recursive [10].
Ressayre asked similarly for which ordinals α it is decidable whether a given local sentence ϕ has a model of order type α. The question is solved in
[9] for α < ωω but for larger ordinals the problem was still open.
We firstly consider local sentences whose function symbols are at most unary. We show that these sentences satisfy an extension of the stretching theorem implying new decidability properties. In particular, for each regular cardinal ωα (hence in particular for each ωn where n is a positive integer), it is
decidable whether a local sentence ϕ has a model of order type ωα. To know that this restricted class LOCAL(1) of local sentences has more decidability properties is of interest because it has already a great expressive power.
Sentences in LOCAL(1) can define all regular finitary languages [14], and all the quasirational languages forming a large class of context free languages containing all linear languages [6].
If we consider their expressive power over infinite words, sentences in
LOCAL(1) can define all regular ω-languages [6], but also some Σ0-complete
and some Π0-complete Borel sets for every integer n ≥ 1, [7].
Next we show that this decidability result can not be extended to local sentences having n-ary function symbols for n ≥ 2. Assuming the consistency of an inaccessible cardinal, we prove that the local theory of ω2 (the set of local sentences having a model of order type ω2) is not determined by the system ZFC + GCH, where GCH is the generalized continuum hypothesis. This is also extended to many larger ordinals.
We could still expect, as Shelah did in [16] about the monadic theory of
ω2, that there are only finitely many possible local theories of ω2, and that


each of them is decidable. But it seems more plausible that the situation is much more complicated, as it is the case for the monadic theory of ω2 [10].
This result is obtained by showing that there is a local sentence which has a model of order type ω2 if and only if there is a Kurepa tree, i.e. a tree of height ω1 whose levels are countable and which has more than ω1 branches of length ω1. Kurepa trees have been much studied in set theory and their existence has been shown to be independent of ZFC + GCH, via the consistency of ZFC + “ there is an inaccessible cardinal”.
It is remarkable that our proof needs only the consistency of an inaccessible cardinal which is still a large cardinal but a very smaller cardinal than a weakly compact cardinal. This gives another indication of the great expressive power of local sentences with regard to that of monadic sentences.
This new result is seemingly far from problems arising in concrete ap- plications studied in computer science. However it is obtained by encoding (Kurepa) trees in models of a local sentence and methods used here for such coding might be very useful for problems arising in computer science where (finite or infinite) trees are a widely used tool.

2	Review of previous results
In this paper the (first order) signatures are finite, always contain one binary predicate symbol = for equality, and can contain both functional and relational symbols.
When M is a structure in a signature Λ and X ⊆ |M|, we define:
cl1(X, M) = X ∪ {f n−ary function of Λ } f M (Xn) ∪ {a constant of Λ } aM cln+1(X, M) = cl1(cln(X, M),M)	for an integer n ≥ 1
and cl(X, M) =  n≥1 cln(X, M) is the closure of X in M.
The signature of a first order sentence ϕ, i.e. the set of non logical symbols appearing in ϕ, is denoted S(ϕ).
Definition 2.1 A ﬁrst order sentence ϕ is local if and only if:
M |= ϕ and X ⊆ |M| imply cl(X, M) |= ϕ
∃n ∈ N such that ∀M, if M |= ϕ and X ⊆ |M|, then cl(X, M) =
cln(X, M), (closure in models of ϕ takes less than n steps).
For a local sentence ϕ, nϕ is the smallest integer n ≥ 1 satisfying (b) of the above definition. In this definition, (a) implies that a local sentence ϕ is always equivalent to a universal sentence, so we may assume that this is always the case.
Example 2.1 Let ϕ be the sentence in the signature S(ϕ) = {<, P, i, a},


where < is a binary relation symbol, P is a unary relation symbol, i is a unary function symbol, and a is a constant symbol, which is the conjunction of:
(1) ∀xyz[(x ≤ y ∨ y ≤ x) ∧ ((x ≤ y ∧ y ≤ x) ↔ x = y) ∧ ((x ≤ y ∧ y ≤ z) →
x ≤ z)],
∀xy[(P (x) ∧ ¬P (y)) → x < y],
∀xy[(P (x) → i(x) = x) ∧ (¬P (y) → P (i(y)))],
∀xy[(¬P (x) ∧ ¬P (y) ∧ x /= y) → i(x) /= i(y)],
¬P (a).
We now explain the meaning of the above sentences (1)-(5).
Assume  that  M  is  a  model  of  ϕ.   The  sentence  (1)  expresses  that  <  is interpreted in M  by a linear order; (2) expresses that P M  is an initial segment of  the  model  M;  (3)  expresses  that  the  function  iM  is  trivially  defined  by iM (x) = x on PM  and is defined  from ¬PM  into PM .  (4) says that iM  is an injection from ¬PM  into PM  and (5) ensures that the element aM  is in ¬PM .
The sentence ϕ is a conjunction of universal sentences thus it is equivalent to a universal one, and closure in its models takes at most two steps (one adds the constant a in one step then takes the closure under the function i). Thus ϕ is a local sentence.
If we consider only the order types of well ordered models of ϕ, we can easily see that ϕ has a model of order type α, for every finite ordinal α ≥ 2 and for every infinite ordinal α which is not a cardinal.
Because of lack of space for this paper we cannot give here many more examples of local sentences. Some examples will be given later in Section 4. The reader may also find many other ones in the papers [14] [9] [6] [5] [7] [8]. The set of local sentences is recursively enumerable but not recursive [6].
However there exists a “recursive presentation” up to logical equivalence of all local sentences.
Theorem 2.2 (Ressayre, see [6]) There exists a recursive set L of local sentences and a recursive function F such that:
ψ local ←→ ∃ψ' ∈ L such that ψ ≡ ψ'.
ψ' ∈ L −→ nψ' = F(ψ').
The elements of L are the ψ ∧ Cn, where ψ run over the universal formulas and Cn run over the universal formulas in the signature S(ψ) which express that closure in a model takes at most n steps.
ψ ∧ Cn is local and nψ∧Cn ≤ n. Then we can compute nψ∧Cn , considering only finite models of cardinal ≤ m, where m is an integer depending on n. And each local sentence ψ is equivalent to a universal formula θ, hence ψ ≡ θ ∧Cnψ .


From now on we shall assume that the signature of local sentences contain a binary predicate < which is interpreted by a linear ordering in all of their models.
We recall now the stretching theorem for local sentences. Below, semi- monotonic, special, and monotonic indiscernibles are particular kinds of indis- cernibles which are precisely defined in [9].
Theorem 2.3 ([9]) For each local sentence ϕ there exists a positive integer
Nϕ such that
ϕ has arbitrarily large ﬁnite models if and only if ϕ has an inﬁnite model if and only if ϕ has a ﬁnite model generated by Nϕ indiscernibles.
ϕ has an inﬁnite well ordered model if and only if ϕ has a ﬁnite model generated by Nϕ semi-monotonic indiscernibles.
ϕ has a model of order type ω if and only if ϕ has a ﬁnite model generated by Nϕ special indiscernibles.
ϕ has well ordered models of unbounded order types in the ordinals if and only if ϕ has a ﬁnite model generated by Nϕ monotonic indiscernibles.
To every local sentence ϕ and every ordinal α such that ω ≤ α < ωω one can associate by an effective procedure a local sentence ϕα, a unary predicate symbol P being in the signature S(ϕα), such that:
(Cα) ϕ has a well ordered model of order type α if and only if ϕα has a ﬁnite model M generated by Nϕα semi-monotonic indiscernibles into P M .
The integer Nϕ can be effectively computed from nϕ and q where ϕ =
∀x1 ... ∀xqθ(x1,... , xq) and θ is an open formula, i.e. a formula without quan- tifiers. If v(ϕ) is the maximum number of variables of terms of complexity
≤ nϕ + 1 (resulting by at most nϕ + 1 applications of function symbols) and v'(ϕ) is the maximum number of variables of an atomic formula involving terms of complexity ≤ nϕ +1 then Nϕ = max{3v(ϕ); v'(ϕ)+ v(ϕ); q.v'(ϕ)}.
From Theorem 2.3 we can prove the decidability of several problems about local sentences. For instance (C) states that a local sentence ϕ has an infinite well ordered model iff it has a ﬁnite model generated by Nϕ semi-monotonic
indiscernibles. Therefore in order to check the existence of an infinite well ordered model of ϕ one can only consider models whose cardinals are bounded by an integer depending on nϕ and Nϕ, because closure in models of ϕ takes at most nϕ steps. This can be done in a finite amount of time.
Notice that the set of local sentences is not recursive so the algorithms given by the following theorem are applied to local sentences in the recursive set L given by Proposition 2.2. In particular ϕ is given with the integer nϕ.


Theorem 2.4 ([9]) It is decidable, for a given local sentence ϕ, whether
ϕ has arbitrarily large ﬁnite models.
ϕ has an inﬁnite model.
ϕ has an inﬁnite well ordered model.
ϕ has well ordered models of unbounded order types in the ordinals.
ϕ has a model of order type α, where α < ωω is a given ordinal.
These decidable problems (1) − (4) and (5) (at least for α = ω) are in the class NTIME(2O(n.log(n))), (and even probably of lower complexity):
Using non determinism a Turing machine may guess a finite structure M of signature S(ϕ) generated by Nϕ elements y1,... yNϕ in at most nϕ steps. Then, assuming ϕ = ∀x1 ... ∀xqθ(x1,... , xq) where θ is an open formula, the Turing machine checks that θ(x1,... , xq) holds for all x1 ... xq in M, and that the elements y1,... yNϕ are indiscernibles (respectively, semi-monotonic, special, monotonic, indiscernibles) in M.
On the other hand Bu¨chi’s procedure to decide whether a monadic second order formula of size n of S1S is true in the structure (ω, <) might run in time
.2n

22.
, [2] [15]. Moreover Meyer proved that one cannot essentially improve this

`O˛(¸n)x
result: the monadic second order theory of (ω, <) is not elementary recursive, [12].
We know that the expressive power of local sentences is much greater than that of monadic second order sentences hence this is a remarkable fact that decision algorithms for local sentences given by Theorem 2.4 are of much lower complexity than the algorithm for decidability of the monadic second order theory S1S of one successor over the integers.

3	More decidability results
We assume in this section that the function symbols of a local sentence ϕ are at most unary. We shall prove in this case some more decidability results which rely on an extension of the stretching Theorem 2.3.
The cardinal of a set X will be denoted by card(X).
We recall that the infinite cardinals are usually denoted by ℵ0, ℵ1, ℵ2,... , ℵα,... 
We refer for instance to [4] [11] for the notion of regular cardinal.
The cardinal ℵα is also denoted by ωα, as usual when it is considered as an ordinal.
We recall now the notion of special indiscernibles, [9], in that particular case where all function symbols hence all terms of S(ϕ) are unary.


A set X included in a structure M, having a linear ordering < in its sig- nature, is a set of indiscernibles iff whenever x¯ and y¯ are order isomorphic sequences from X they satisfy in M the same atomic sentences. The indis- cernibles of X are special iff they satisfy (i) and (ii):
for all x < y in X and all terms t: t(x) < y.
for all x < y in X and all terms t: t(y) < x → t(y) = t(z) for all elements z > x of X (i.e. t is constant on {z ∈ X | z > x}).
Theorem 3.1 For each local sentence ϕ whose function symbols are at most unary, there is a positive integer Nϕ such that, for each regular cardinal ωα, the following statements are equivalent:
ϕ has an ω-model.
ϕ has a ﬁnite model generated by Nϕ special indiscernibles.
ϕ has a β-model, for all limit ordinals β.
ϕ has an ωα-model.
Proof. It is proved in [9] that for each local sentence ϕ there is a positive integer Nϕ such that (a) is equivalent to (b).
To prove (a) → (c) assume that ϕ has an ω-model M. Then it is proved in [9] that there exists an infinite set X of special indiscernibles in M. Recall that every linear order Y can be extended to a model M(Y ) of ϕ, called the stretching of M along Y , so that:
M(X) is the submodel of M generated by the set X.
Y ⊆ Z implies M(Y ) ⊆ M(Z).
Every order embedding f : Y → Z has an extension M(f ) which is an embedding of M(Y ) into M (Z).
Let then β be a limit ordinal and M(β) be the stretching of M along β. We are going to show that M(β) is of order type β. The model M(β) is generated by the set β in a finite number of steps so there is a finite set Tϕ of (unary) terms of the signature S(ϕ) such that the domain of M(β) is β ∪ ∪t∈Tϕ ∪γ<β t(γ). The indiscernibles are special thus for each term t ∈ Tϕ, either t is constant on β or for all indiscernibles x < y < z in β we have x < t(y) < z. It is then easy to see that M(β) is of order type β.
(c) → (d) is trivial so it remains to prove (d) → (a).
We assume that α is an ordinal and that M is a model of ϕ of order type ωα where ωα is a regular cardinal. We are going to show that there exists in M an infinite set of special indiscernibles. These indiscernibles have to satisfy (i) and (ii) only for terms of complexity ≤ nϕ because for each term t of complexity greater than nϕ there will be another term t' of complexity
≤ nϕ such that t(x) = t'(x) for all indiscernibles x. This finite set of terms of


complexity ≤ nϕ will be denoted by T = {t1, t2,... , tN }.
Using the fact that ωα is a regular cardinal, we can firstly construct by induction a strictly increasing sequence (xδ)δ<ωα of elements of M such that for each ordinal δ < ωα and each term t ∈ T it holds that t(xδ) < xδ+1. We denote X0 = {xδ | δ < ωα}; this set has cardinal ℵα.
We consider now the three following cases:
First case. The set {xδ ∈ X0 − {x0} | t1(xδ) = x0} has cardinal ℵα. Then we denote this set by X1.
Second case. The set {xδ ∈ X0 −{x0} | t1(xδ) < x0} has cardinal ℵα and the first case does not hold. The initial segment {x ∈ M | x < x0} of M has cardinal smaller than ℵα thus there is a subset of {xδ ∈ X0−{x0}| t1(xδ) < x0} which has cardinal ℵα and on which t1 is constant. Then we denote this set by X1.
Third case. The set {xδ ∈ X0 − {x0} | t1(xδ) > x0} has cardinal ℵα and the two first cases do not hold. Then we call this set X1.
We can repeat now this process, replacing X0 by X1 and the term t1 by the term t2, so we obtain a new set X2 ⊆ X1 having still cardinal ℵα. Next
0	0
we repeat the process replacing X1 by X2 and the term t2 by the term t3, so
0	0
we obtain a new set X3 ⊆ X2 having still cardinal ℵα.
0	0
After having considered all terms t1, t2,... , tN we have got a set XN ⊆
XN−1 ⊆ ... ⊆ X0. We denote X1 = XN .
0	0
Let xδ1 be the first element of X1. We can repeat all the above process
replacing X0 by X1 and x0 by xδ1 . This way, considering successively each of
the terms t1, t2,... , tN , we construct new sets XN ⊆ XN−1 ⊆ ... ⊆ X1 ⊆ X1,
1	1	1
each of them having cardinal ℵα, and we set X2 = XN .
Assume now that we have applied this process K times for some integer K ≥ 2. Then we have constructed successively some sets X1, X2,..., XK of cardinal ℵα. Let now xδK be the first element of XK. We can repeat the above process replacing X0 by XK and x0 by xδK . This way we construct a new set XK+1 = XN of cardinal ℵα.
Then we can construct by induction the sets XK for all integers K ≥ 1.
We set X = {xδi | 0 ≤ i < ω} where for all i, xδi is the first element of Xi.
Let now X[n] be the set of strictly increasing n-sequences of elements of
X. Let ∼ be the equivalence relation defined on X[v'(ϕ)] by: x ∼ y if and only if x and y satisfy in M the same atomic formulas of complexity ≤ nϕ +1 
(i.e. whose terms are of complexity ≤ nϕ + 1). Applying the Infinite Ramsey Theorem, we can now get an infinite set Y ⊆ X such that Y [v'(ϕ)] is contained in a single equivalence class of ∼.
Y is a set of indiscernibles in M because if z and z' are two elements of Y [n]
for n ≥ v'(ϕ), then they satisfy in M the same atomic sentences of complexity


≤ nϕ + 1 hence of any complexity by Fact 1 of [9, page 568].
By the above construction of the set X, the indiscernibles of Y are special. Thus the submodel M(Y ) of M generated by Y is a model of ϕ of order type ω.	 
Notice that one cannot omit the hypothesis of the regularity of the cardinal
ωα in the above theorem, as it will be shown in the full version of this paper.
By Theorem 2.4 it is decidable whether a local sentence ϕ has an ω-model so we have got the following decidability result.
Theorem 3.2 It is decidable, for a given local sentence ϕ whose function symbols are at most unary, and a given regular cardinal ωα, whether:
ϕ has an ωα-model
ϕ has a β-model for all limit ordinals β.
So in particular one can decide, for a given local sentence ϕ whose func- tion symbols are at most unary, whether ϕ has a model of order type ω1, (respectively, ω2, ωn where n is a positive integer).


4	The local theory of ω2
It was proved in [9] that there exists a local sentence ψ (whose signature contains binary function symbols) having well ordered models of order type α for every ordinal α in the segment [ω; 2ℵ0 ] but not any well ordered model of order type α for card(α) > 2ℵ0 . On the other hand it is well known that the continuum hypothesis CH is independent of the axiomatic system ZFC. This means that there are some models of ZFC in which 2ℵ0 = ℵ1 and some others in which 2ℵ0 ≥ ℵ2. Therefore the statement “ψ has a model of order type ω2” is independent of ZFC.
However if we assume the continuum hypothesis and even the generalized continuum hypothesis GCH saying that, for every cardinal ℵα, 2ℵα = ℵα+1, then the above result of [9] does not imply a similar independence result.
Nevertheless we are going to prove the existence of a local sentence Φ such that “Φ has a model of order type ω2” is independent of ZFC + GCH.
For that purpose we shall use results about Kurepa trees which we now recall.
A partially ordered set (T, ≺T ) is called a tree if for every t ∈ T the set
{s ∈ T | s ≺T t} is well ordered under ≺T . Then the order type of the set
{s ∈ T | s ≺T t} is called the height of t in T and is denoted by ht(t). We shall not distinguish a tree from its base set.
For every ordinal α the α-th level of T is Tα = {t ∈ T | ht(t) = α}.


The height of T , denoted by ht(T ), is the smallest ordinal α such that
Tα = ∅.
A branch of T will be a linearly ordered subset of T intersecting every non-empty level of T . The set of all branches of T will be denoted B(T ).
A tree T is called an ω1-tree if card(T ) = ℵ1 and ht(T ) = ω1. An ω1-tree T is called a Kurepa tree if card(B(T )) > ℵ1 and for every ordinal α < ω1, card(Tα) < ℵ1.
Recall now the well known results about Kurepa trees, [4]:
Theorem 4.1	(i) If ZF is consistent so too is the theory: ZFC + GCH + “ there is a Kurepa tree ”.
If the theory ZFC +“ there is an inaccessible cardinal ” is consistent so too is the theory ZFC + GCH +“ there are no Kurepa trees ”.
If the theory ZFC +“ there are no Kurepa trees ” is consistent so too is the theory ZFC +“ there is an inaccessible cardinal ”.
In order to use the above result in the context of local sentences we state now the main technical result of this section.
Theorem 4.2 There exists a local sentence Φ such that:
[Φ has an ω2-model ]	←→	[ there is a Kurepa tree ].

To prove this theorem we shall firstly state the two following lemmas.
Lemma 4.3 There exists a local sentence ϕ0 such that ϕ0 has a well ordered model of order type ω but has no well ordered model of order type > ω.
Proof.	Such a sentence is given in [9] in the signature S(ϕ0) = {<
, P, f, p1, p2}, where P is a unary predicate, f is a binary function, and p1, p2
are unary functions.	 
Lemma 4.4 There exists a local sentence ϕ1 such that ϕ1 has well ordered models of order type α, for every ordinal α ∈ [ω, ω1], but has no well ordered model of order type > ω1.
Proof. We give below the sentence ϕ1 in the signature S(ϕ1) = S(ϕ0) ∪
{Q, g} = {<, P, f, p1, p2, Q, g}, where Q is a unary predicate and g is a bi- nary function. ϕ1 is the conjunction of the following sentences (1)-(10) whose meaning is explained below:
(1) ∀xyz[(x ≤ y ∨ y ≤ x) ∧ ((x ≤ y ∧ y ≤ x) ↔ x = y) ∧ ((x ≤ y ∧ y ≤ z) →
x ≤ z)],
∀xy[(Q(x) ∧ ¬Q(y)) → x < y],
∀xy[(Q(x) ∧ Q(y)) → f (x, y) ∈ Q],









0	0
' an open formula,
∀xy[(¬Q(x) ∧ ¬Q(y) ∧ y < x) → Q(g(x, y))],
∀xyz[(¬Q(x) ∧ ¬Q(y) ∧ ¬Q(z) ∧ y < z < x) → g(x, y) /= g(x, z)],
∀xy[(Q(x) ∨ Q(y) ∨ ¬(y < x)) → g(x, y) = x].
We now explain the meaning of the above sentences (1)-(10).
Assume that M is a model of ϕ1. The sentence (1) expresses that < is interpreted in M by a linear order; (2) expresses that QM is an initial segment of the model M; (3) and (4) state that QM is closed under the functions of S(ϕ0) while (5) and (6) state that these functions are trivially defined elsewhere; (7) means that the restriction of the model M to the domain QM and to the signature of S(ϕ0) is a model of ϕ0; Finally (8) and (9) ensure that, for each x ∈ ¬Q, the binary function g realizes an injection from the segment
{y ∈ ¬Q | y < x} into Q and (10) states that the function g is trivially defined where it is not useful for that purpose.
The sentence ϕ1 is a conjunction of universal sentences thus it is equivalent to a universal one, and closure in its models takes at most nϕ + 1 steps: one applies first the function g and then the functions of S(ϕ0). Thus the sentence ϕ1 is local.
Consider now a well ordered model M of ϕ1. The restriction of M to the domain QM and to the signature of S(ϕ0) is a well ordered model of ϕ0 hence it is of order type ≤ ω. But the function g defines an injection from each initial segment of ¬Q into Q thus each initial segment of ¬Q is countable and this implies that the order type of ¬QM is smaller than or equal to ω1. Finally we have proved that the order type of M is ≤ ω1.
Conversely it is easy to see that every ordinal α ∈ [ω, ω1] is the order type of some model of ϕ1.	 
Return now to the construction of the sentence Φ given by Theorem 4.2.
We are going to explain this construction by several successive steps.
A model M of Φ will be totally ordered by < and will be the disjoint union of four successive segments. This will be expressed by the following sentence Φ1 in the signature S(Φ1) = {P0, P1, P2, P3}, where P0, P1, P2, P3, are unary predicate symbols. Φ1 is the conjunction of:
(1) ∀xyz[(x ≤ y ∨ y ≤ x) ∧ ((x ≤ y ∧ y ≤ x) ↔ x = y) ∧ ((x ≤ y ∧ y ≤ z) →
x ≤ z)],


(2) ∀xy  0≤i<j≤3[(Pi(x) ∧ Pj(y)) → x < y].
We want now to ensure that, if M is a well ordered model of Φ, then
M is of order type ≤ ω and P M is of order type ≤ ω1. For that purpose,
the signature of Φ will contain the signature S(ϕ1) = S(ϕ0) ∪ {Q, g} = {<
, P, f, p1, p2, Q, g} and Φ will express that if M is a model of Φ, then P M = QM
and the restriction of the model M to (P M ∪ PM ) and to the signature of ϕ1
0	1
is a model of ϕ1. This is expressed by the following sentence Φ2 which is the
conjunction of:
∀x[Q(x) ↔ P0(x)],
∀xy[(x ∈ P0 ∪ P1 ∧ y ∈ P0 ∪ P1) → f (x, y) ∈ P0 ∪ P1],
∀xy[(x ∈ P0 ∪ P1 ∧ y ∈ P0 ∪ P1) → g(x, y) ∈ P0 ∪ P1],
∀x[(x ∈ P0 ∪ P1) → pi(x) ∈ P0 ∪ P1], for each i ∈ [1, 2],
∀xy[(x ∈/ P0 ∪ P1 ∨ y ∈/ P0 ∪ P1) → f (x, y) = x],
∀xy[(x ∈/ P0 ∪ P1 ∨ y ∈/ P0 ∪ P1) → g(x, y) = x],
∀x[x ∈/ P0 ∪ P1 → pi(x) = x], for each i ∈ [1, 2],
∀x1 ... xk ∈ (P0 ∪ P1)[ϕ' (x1,... , xk)], where ϕ1 = ∀x1 ... xkϕ' (x1,... , xk)
1	1
with ϕ' an open formula.
Above sentences (2)-(4) state that in a model M the set (P0 ∪ P1)M is closed under the functions of S(ϕ1) while (5)-(7) state that these functions are trivially defined elsewhere; (8) means that the restriction of the model M to the domain (P0 ∪ P1)M and to the signature of S(ϕ1) is a model of ϕ1.

We want now that, in a model M of Φ, the set P M
represents the base

set of a tree (T, ≺). We shall use a binary relation symbol ≺. The following sentence Φ3 is the conjunction of:
∀xy[x ≺ y → P2(x) ∧ P2(y)],
∀xyz[((x “ y ∧ y “ x) ↔ x = y) ∧ ((x ≺ y ∧ y ≺ z) → x ≺ z)].
∀xy[x ≺ y → x < y].
Above sentences (1)-(2) express that ≺ is a partial order on P2 and the sentence (3) ensures that, in a well ordered (for < ) model M of Φ3, for every t ∈ P2, the set {s ∈ P2 | s ≺ t} is well ordered under ≺ because M itself is well ordered under <.
Moreover we want now that in an ω2-model M of Φ, the set P M represents
the base set of an ω1-tree T whose levels are countable.
We have firstly to distinguish the different levels of the tree T . We shall use for that purpose unary functions I and p and the following sentence Φ4 conjunction of:


∀xy ∈ P2[(I(y) ≤ y) ∧ (y ≤ x → I(y) ≤ I(x)) ∧ (I(y) ≤ x ≤ y → I(x) = 
I(y))].
∀xy ∈ P2[x ≺ y → I(x) < I(y)],
∀xyz ∈ P2[(x ≺ y ∧ z ≺ y ∧ I(x) = I(z)) → x = z],
∀xy ∈ P2[I(x) < I(y) → (I(p(I(x), y) = I(x) ∧ p(I(x), y) ≺ y)],
∀xy[(¬P2(x) ∨ ¬P2(y) ∨ I(x) /= x ∨ I(x) ≥ I(y)) → p(x, y) = x],
∀x[¬P2(x) → I(x) = x].
Above the sentence (1) is used to divide the segment P2 of a model of Φ4 into successive segments. The function I is constant on each of these segments and the image I(x) of an element x ∈ P2 is the first element of the segment containing x.
Sentences (2)-(3) ensure that if y ∈ P2 then every element x ∈ P2 such that x ≺ y belongs to some segment Iz = {w ∈ P2 | I(w) = I(z)} for some z < I(y). Moreover for each z < I(y), the segment Iz contains at most one element of {x ∈ P2 | x ≺ y}.
The function p is used to ensure that, for each z < I(y), the segment Iz contains in fact exactly one element x ∈ P2 such that x ≺ y: the element p(I(z), y). This is implied by the sentence (4).
Thus Φ4 will imply that each segment Iz is really a level of the tree T .
If y ∈ P2 is at level α of the tree T and if x ∈ P2 and Ix represents the β-th level Tβ of the tree T for some β < α (so I(x) < I(y)), then the element p(I(x), y) is the unique element t ∈ Tβ such that t ≺ y.
Finally sentences (5)-(6) are used to trivially define the functions p and I
where they are not useful as explained above.
The following sentence Φ5 will imply that all levels of the tree T are count- able and that ht(T ) ≤ ω1 hence also card(T ) ≤ ℵ1. The signature of Φ5 is
{<, P0, P1, P2,I, i, j}, where i and j are two new unary function symbols, and Φ5 is the conjunction of:
∀x[P2(x) → P0(i(x))],
∀xy[(P2(x) ∧ P2(y) ∧ I(x) = I(y) ∧ x /= y) → i(x) /= i(y)],
∀x[P2(x) → P1(j(x))],
∀xy[(P2(x) ∧ P2(y) ∧ x < y) → j(x) < j(y)],
∀x[¬P2(x) → i(x) = x],
∀x[¬P2(x) → j(x) = x].
Above sentences (1)-(2) say that the function i is defined from P2 into P0
and that it is an injection from any level of the tree T into P0. We have seen
that in a well ordered model M of Φ the set P M will be of order type ≤ ω


thus each level of the tree will be countable.
Sentences (3)-(4) say that the function j is strictly increasing from P2 into
P1 thus in a well ordered model M of Φ the set P M hence also PM will be of
1	2
order type ≤ ω1. So we shall have ht(T ) ≤ ω1 and card(T ) ≤ P1.
Finally sentences (5)-(6) are used to trivially define the functions i and j
on чP2 = P0 ∪ P1 ∪ P3.
In a well ordered model M of Φ of order type ω2, the set PM will be the base set of an ω1-tree T and the set PM will be identified to a set of branches
of T .
For that purpose we use two new binary function symbols h and k and the following sentence Φ6, conjunction of:
6xy[(P2(x) Λ P3(y)) → (P2(h(I(x), y)) Λ I(h(I(x), y)) = I(x))],
6xyz[(P2(x) Λ P2(y) Λ P3(z) Λ I(x) < I(y)) → h(I(x), z) < h(I(y), z)],
6xy[(чP2(x) V чP3(y) V x /= I(x)) → h(x, y) = x],
6xy[(P3(x) Λ P3(y) Λ x /= y) → (I(k(x, y)) = k(x, y) Λ P2(k(x, y)))],
6xy[(P3(x) Λ P3(y) Λ x /= y) → h(k(x, y), x) /= h(k(x, y), y))],
6xy[(чP3(x) V чP3(y) V x = y) → k(x, y) = x].
Above sentences (1)-(2) are used to associate a branch b(z) of T to an element z ∈ P3. For each level Tα of the tree which is represented by the segment of P2 whose first element is I(x), the sentence (1) says that h(I(x), z) is an element at the same level Tα and (2) says that the elements h(I(x), z), for x ∈ P2, are linearly ordered for < hence they form a branch b(z) of the tree T .
The function k is used to associate to two different elements x and y of P3 a level of the tree T , which is represented by the element k(x, y): the first element of the segment of P2 representing this level. This is expressed by the sentence (4).
The sentence (5) says that, for two distinct elements x and y of P3, the branches b(x) and b(y) differ at the level represented by k(x, y).
Finally sentences (3) and (6) are used to trivially define the functions h
and k in other cases.

We have seen that in a well ordered model M of Φ, P M
and PM
will be

of order type ≤ ω1. The following sentence Φ7 will then imply that PM is of order type ≤ ω2. Its signature is {<, P1, P3, l}, where l is a binary function symbol, and Φ7 is the conjunction of:
6xy[(P3(x) Λ P3(y) Λ y < x) → P2(l(x, y))],
6xyz[(P3(x) Λ P3(y) Λ P3(z) Λ y < z < x) → l(x, y) /= l(x, z)],


6xy[(чP3(x) V чP3(y) V ч(y < x)) → l(x, y) = x].
Above sentences (1)-(3) are in fact very similar to sentences (8)-(10) used in the construction of the sentence ϕ1.
(1) and (2) ensure that, for each x ∈ P3, the binary function l realizes an injection from the segment {y ∈ P3 | y < x} into P2 and (3) states that the function l is trivially defined where it is not useful for that purpose.
We can now define the sentence

Φ =    Φi
1≤i≤7


in the signature


S(Φ) = 
1≤i≤7



S(Φi) = {<, P0, P1, P2, P3, Q, p1, p2, f, g, <, p,I, i, j, h, k, l}.


Φ is a conjunction of universal sentences thus it is equivalent to a universal sentence and closure in its models takes at most 7 steps: one takes firstly closure under the function l then under the functions I and k, then under the functions h and p, then under i and j, then under the function g, then under the functions p1 and p2, and finally under the function f . Notice that the two last steps are due to the construction of ϕ0 and the fact that nϕ0 = 2 (see [9]). Assume now that M is a well ordered model of Φ. By construction P M

is of order type ≤ ω, P M
and PM
are of order types ≤ ω1, and PM
is the

base set of a tree T whose levels are countable. Moreover every strict initial

segment of PM
is of cardinal ≤ P1, so PM
is of order type ≤ ω2. Finally we

have got that M itself is of order type ≤ ω2.
Suppose now that M is of order type ω2. Then PM

also is of order type

ω2 and for every strict initial segment J of P M
there is an injection from J

into PM thus PM is of cardinal P1. But its order type is ≤ ω1, hence it is in
2	2
fact equal to ω1.
The tree T is then really an ω1-tree and all its levels are countable. More- over the set P M can be identified to a set of branches of T thus card(B(T )) > P1 and T is a Kurepa tree.
Conversely if there exists a Kurepa tree, we can easily see that Φ has an
ω2-model.	 
We can now infer from Theorems 4.1 and 4.2 the following result which shows that the local theory of ω2 is not determined by the axiomatic system ZFC + GCH.


Theorem 4.5 If the theory ZFC + “ there is an inaccessible cardinal ” is consistent then “ Φ has an ω2-model ” is independent of ZFC + GCH.
Notice that this result can be extended easily to ordinals larger than ω2. For instance reasoning as in the construction of the local sentence ϕ1 from the local sentence ϕ0 (see Lemma 4.4 above), we can construct by induction, for each integer n ≥ 2, a local sentence Φn such that:  for all ordinals α ∈
]ωn, ωn+1],
( Φn has an α-model ) iff ( Φ has an ω2-model ) iff ( there is a Kurepa tree
). This implies the following extension of Theorem 4.5.
Theorem 4.6 If the theory ZFC + “ there is an inaccessible cardinal ” is consistent then for each integer n ≥ 2 and each ordinal α ∈]ωn, ωn+1], “ Φn has an α-model ” is independent of ZFC + GCH.
A similar result can be obtained for larger ordinals, for example for ordinals of cofinality ωn, for an integer n ≥ 2, using some methods of [9].

References
E. Bo¨rger, E. Gr¨adel and Y. Gurevich, The Classical Decision Problem, Springer, 1997.
J.R. Bu¨chi, On a Decision Method in Restricted Second Order Arithmetic, Logic Methodology and Philosophy of Science, (Proc. 1960 Int. Congr. ), Stanford University Press, 1962, 1-11.
J.R. Bu¨chi, D. Siefkes, The Monadic Second Order Theory of All Countable ordinals, Decidable Theories 2, 1973, S.L.N.M. , number 328.
K. J. Devlin, Constructibility, Springer-Verlag, Berlin, 1984.
O. Finkel, Langages de Bu¨chi et ω-Langages Locaux, C.R.A.S. Paris, t.309, S´erie 1, p. 991-994, 1989.
O. Finkel, Locally Finite Languages, Theoretical Computer Science, Volume 255 (1-2), 2001,
p. 223-261.
O. Finkel, Topological Complexity of Locally Finite ω-Languages, Submitted. Available from http://www.logique.jussieu.fr/www.finkel
O. Finkel, Closure Properties of Locally Finite Omega Languages, Theoretical Computer Science, to appear, 19 pages.
O. Finkel and J-P. Ressayre, Stretchings, Journal of Symbolic Logic, Volume 61, number 2, 1996, p. 563-585.
Y. Gurevich, M. Magidor and S. Shelah, The Monadic Theory of ω2 , Jounal of Symbolic Logic, Volume 48, 1983, p. 387-398.
T. Jech, Set Theory, Third Edition, Springer, 2002.
A.R. Meyer, Weak Monadic Second Order Theory of Successor is not Elementary Recursive, Logic Colloquium (Boston, Mass., 1972-1973), Lecture Notes in Mathematics, Vol. 453, Springer, Berlin, 1975, p. 132-154.
D. Perrin and J.-E. Pin, Infinite Words, Automata, Semigroups, Logic and Games, Volume 141 of Pure and Applied Mathematics, Elsevier, 2004.


J-P. Ressayre, Formal Languages defined by the Underlying Structure of their Words, Journal of Symbolic Logic, Volume 53 (4), 1988, p. 1009-1026.
S. Safra, Complexity of Automata on Infinite Objects, Ph. D. Thesis, Weizmann Institute of Science, Rehovot, Israel, March 1989.
S. Shelah, The Monadic Theory of order, Ann. Math. 102, p. 379-419, 1975.
W. Thomas, Automata on Infinite Objects, in: J. Van Leeuwen, ed., Handbook of Theoretical Computer Science, Vol. B (Elsevier, Amsterdam, 1990), p. 133-191.
W. Thomas, Languages, Automata and Logic, in Handbook of Formal Languages Theory, Vol 3, Edited by G. Rozenberg and A. Salomaa, Springer Verlag, 1996.
