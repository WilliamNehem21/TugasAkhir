

Electronic Notes in Theoretical Computer Science 270 (2) (2011) 105–113
www.elsevier.com/locate/entcs

Feynman Graphs, and Nerve Theorem for Compact Symmetric Multicategories (Extended Abstract)
Andr´e Joyal1
D´epartement des math´ematiques Universit´e du Qu´ebec a` Montr´eal Canada
Joachim Kock2 ,3 ,4
Departament de matem`atiques Universitat Auto`noma de Barcelona Spain

Abstract
We describe a category of Feynman graphs and show how it relates to compact symmetric multicategories (coloured modular operads) just as linear orders relate to categories and rooted trees relate to multicate- gories. More specifically we obtain the following nerve theorem: compact symmetric multicategories can be characterised as presheaves on the category of Feynman graphs subject to a Segal condition. This text is a write-up of the second-named author’s QPL6 talk; a more detailed account of this material will appear elsewhere [9].
Keywords: Feynman graph, multicategory, modular operad, nerve theorem, monad.


Introduction
The graphical calculus of string diagrams is an important ingredient in many ab- stract approaches to quantum mechanics and quantum informatics, as well exem- plified in this volume. The objects of a category are pictured as strings, and the arrows as dots. An arrow is thought of as an operation, and in a plain category each operation has precisely one input (source) and one output (target). Arrows can be

1 Supported by the NSERC of Canada
2 Invited talk
3 Email: kock@mat.uab.cat
4 Supported by research grants MTM2006-11391 and MTM2007-63277 of Spain.

1571-0661 © 2011 Published by Elsevier B.V. Open access under CC BY-NC-ND license.
doi:10.1016/j.entcs.2011.01.025

composed if arranged in a sequence such that the output of one operation matches the input of the next. Table 1 below should illustrate the passage from categories to compact symmetric multicategories.

Table 1

Multicategories generalise categories by allowing a finite list of inputs while still insisting on exactly one output for each operation. The operations are represented as planar rooted trees with precisely one inner vertex, and composition of operations produces a single such one-vertex tree from any formal configuration of matching op- erations, i.e. turns an arbitrary tree into a one-vertex tree. (Monoidal categories are a special kind of multicategories: they are the representable ones [14].) Abandoning the linear order on the set of inputs, we arrive at the notion of symmetric multicat- egory, also known as coloured operad. Multicategories were introduced in 1969 by Lambek [12] to model sequent calculus, while operads, the one-object symmetric analogue, often enriched over vector spaces or topological spaces, were discovered at about the same time in loop space theory [3], [17].
Giving up the distinction between input and output, calling the loose edges ports, we arrive at a many-object version of what in topology is called cyclic operad [5]. Without a notion of input and output, we impose instead an involution on the set of objects: each object has a dual object. The operations are now non-rooted (non- planar) one-vertex trees, each edge of which is decorated by some object. These operations can be connected to each other by clutching a port of one operation to a matching port of another operation (i.e. the two decorating objects are required to be dual), and the configurations of formal composites are non-rooted (non-planar) trees.
Finally, by allowing also clutching of two ports of one and the same operation, we arrive at the object of study of this work: the compact symmetric multicate- gories. This is essentially a many-object version of the modular operads of Getzler and Kapranov [6], introduced to describe the algebraic structure of the moduli space of curves in algebraic geometry, and in topological and conformal field theory. The configurations of formal composites are now general connected graphs, more pre-

cisely what we call Feynman graphs: they are (non-directed) graphs, allowed to have multiple edges and loops, as well as open edges. We shall only use connected Feynman graphs.
Hence compact symmetric multicategories relate to Feynman graphs as cate- gories relate to linear orders. It is the goal of this work to make this statement precise.

Nerve theorem for categories
We start by reviewing the classical nerve theorem, following Berger [1], Leinster [13], and Weber [20]. Let Δ denote the category of finite (non-empty) linearly ordered sets and monotone maps, and recall that a simplicial set is a presheaf on Δ, i.e. a functor Δop → Set. The nerve of a small category C is the simplicial set NC whose k-simplices are the chains of k composable arrows in C. More conceptually, via the natural embedding i :Δ ‹→ Cat (interpreting an ordered set as a small category), NC is simply the presheaf
Δop −→ Set
[k] '−→ HomCat(i([k]),C).	(1)
The nerve theorem, first observed by Grothendieck, asserts that N : Cat → sSet is a fully faithful functor and that its essential image consists of those simplicial sets X that satisfy the Segal condition: for each k ≥ 1 the natural map
Xk −→ X1 ×X0 ··· ×X0 X1
is a bijection. (The fibre product expresses composability: the target of one arrow equals the source of the next.) The nerve functor plays a fundamental role to link category theory to topology, remembering that simplicial sets is the most important combinatorial model for homotopy theory.
The main result of the present work is a nerve theorem for compact symmetric multicategories which is a direct generalisation of the classical nerve theorem: we characterise compact symmetric multicategories as presheaves on a category of Feyn- man graphs satisfying a certain Segal condition. There are completely analogous nerve theorems for the other rows of Table 1. (A nerve theorem in a slightly differ- ent spirit was obtained for symmetric multicategories by Moerdijk and Weiss [18].) The proof has two ingredients: one is to identify the correct category of graphs; the second is an application of the abstract machinery developed by Berger [1], Leinster [13], and Weber [20].
A short review of the classical case will be helpful. A small category has an underlying directed graph (see [15], Ch.II). A directed graph can be seen as a
presheaf on the category G = {0 ⇒ 1}. The forgetful functor from Cat to PrSh(G) has a left adjoint, the free-category functor ([15], Ch.II.7): the free category on a
directed graph G has the vertices of G as objects, and the paths in G as arrows. A path is just a map of graphs from a linear graph into G. Let Δ0 denote the full

subcategory of PrSh(G) consisting of the linear graphs. This category can also be seen as a subcategory of Δ: it has the same objects but contains only the successor- preserving maps (i.e. those that satisfy φ(i + 1) = φ(i) + 1). In fact the category Δ can conveniently be described in terms of Δ0: it appears by factoring the composite functor Δ0 → PrSh(G) → Cat as an identity-on-objects functor j followed by a fully faithful functor i:


Δ ¸

j
i	zC,at
¸
free E forgetful
, 


(2)

G 	zΔ,0 	zP,rSh(G)
Among the maps in Δ not in Δ0 are the end-point-preserving maps; it is easy to check that every map in Δ factors uniquely as an end-point-preserving map followed by a map in Δ0 (i.e. a free map). This factorisation system, a special case of generic/free factorisation [19], is an important ingredient in the (modern) proof of the nerve theorem.
The category Δ0 has a Grothendieck topology ([16]) in which a family of maps is declared to form a cover if they are jointly surjective (on dots as well as on strings). To say that a simplicial set X : Δop → Set satisfies the Segal condition amounts to saying that its restriction to Δ0 is a sheaf for this topology.
The generic part of Δ parametrises the algebraic structure: composition and identity arrows. On the other hand, Δ0 serves to take care of source-target book- keeping, and to express the Segal condition. In the one-object situation (where X0 is singleton), there is no bookkeeping, and indeed the notion of monoid can be de- scribed solely in terms of the generic part of Δ. In fact, the opposite of the category of generic maps in Δ is the free monoidal category on a monoid, also known as the algebraist’s Delta, or the monoidal Delta, as described in [15], Ch.VII.

Feynman graphs
There are various ways to formalise the notion of graph with open edges (e.g. [4]). Most of them do not naturally lead to a sensible notion of morphism. Although the following definition is very natural, it seems to be new:
A Feynman graph is a diagram of finite sets
i	E ,rs  H   t	zV ,

such that s is injective and i is a fixpoint-free involution. For the present purposes we also need to impose a connectedness condition. The set V is the set of vertices. The set H is the set of half-edges or flags: these are pairs consisting of a vertex together with the germ of an emanating edge. Finally the set E is the set of oriented edges. The involution i reverses the orientation. The map t forgets the emanating edge. The map s returns the emanating edge in the direction pointing away from the

vertex. A port is by definition an (oriented) edge in the complement of the image of s. The set of ports of a graph is called its interface. An inner edge is an i-orbit both of whose elements are in the image of s.
From now on we just say graph for (connected) Feynman graph. We define the category Gr0 by taking its objects to be the graphs, and its morphisms to be the diagrams
Ej ,r  Hj 	zV ,j
˛,	_ 
  ,	,	, 
   ˛E,,r  H 	zV,,
the right-hand square being a pullback. The pullback condition says that each vertex must map to a vertex of the same valence. In geometric terms the morphisms are the precisely the etale maps (i.e. local isomorphisms). (The category Gr0 will play the role Δ0 plays for categories, as in §2.)
An elementary graph is a graph without inner edges. Here are the first few elementary graphs:

The first one, called the trivial graph and denoted  , is given by


˛2 ,,r 0
z0.,

The remaining ones are of the form
2˛n,,r  n 	z1,,

for each finite set n; we denote it n again. Let elGr denote the full subcategory of
Gr0 consisting of the elementary graphs. We have:
Hom( , ) = 2
Hom(m, n) =	n!	if m = n
0	if m /= n
Hom( , n) = 2n Hom(n, ) = 0.

It is easy to check that every graph G is canonically a colimit in Gr0 of its elementary subgraphs. A family of maps with codomain G is called a cover of G if it is jointly surjective on edges and vertices; this defines the etale topology on the category Gr0. The canonical colimit decomposition of a graph is also a canonical cover, and it follows readily that there is an equivalence of categories between presheaves on elGr and sheaves on Gr0:
PrSh(elGr) →~ Sh(Gr0).

(More formally, the full inclusion of categories elGr ‹→ Gr0 induces an essential geometric embedding of presheaf toposes PrSh(elGr) → PrSh(Gr0) and it is well- known (see [16], Ch.VII) that every such induces a unique topology on Gr0 giving the above equivalence.)

Graphical species
A presheaf F : elGrop → Set is called a graphical species; its value on n is denoted F [n]. Explicitly, a graphical species is given by an involutive set C = F [ ], and for each n ∈ N a set F [n] with 2n projections to C, permuted by a Sn-action on F [n] and by the involution on C. If C is singleton, the classical notion of species [8], [2] results.
Graphical species parametrise the possible ways of imposing local structure and decoration on graphs. For each graphical species F , the category of F -structured graphs is the comma category Gr0↓F (i.e. the category whose objects are graphs G equipped with a morphism NG → F in PrSh(elGr), where NG denotes the presheaf n '→ HomGr (n, G); the arrows in Gr0↓F are etale graph maps G → Gj compatible with the morphisms to F ).
As examples, there are graphical species for directed graphs, bipartite graphs, ribbon graphs, and so on. (In contrast, non-local notions like ‘graphs of genus g’ are not given by graphical species.) Every quantum field theory (see for example Itzykson-Zuber [7]) provides an example of a graphical species: F [ ] is the set of field labels, and F [n] is the set of interaction labels of valence n (multiplied by Sn/ Aut, where Aut is the symmetry group of the interaction). For example, in quantum electrodynamics, there are three field labels, F [ ] = {e, e+, γ} (with the involution interchanging e— and e+ while leaving γ fixed), and one interaction label

Each such label can be applied in 3! different ways to a given trivalent vertex, hence
F [3] = 3! (and F [n]= 0 for n /= 3).

The equivalence PrSh(elGr)  Sh(Gr0) means that every graphical species can be evaluated not only on elementary graphs but on all graphs: if F is a graphical species and G is a graph, then


F [G] =	lim
E∈elGr↓G
F [E]


where E runs over the category of elements of G, i.e. all the elementary subgraphs of G and the way they are glued together to give G.

Compact symmetric multicategories
We shall define compact symmetric multicategories as algebras for a monad defined in terms of sums over graphs. For the notions of monad and algebras for a monad we refer to Mac Lane [15], Ch.VI.
Let n be a finite set. An n-graph is a graph whose set of ports is n. A morphism of n-graphs is an isomorphism leaving the set of ports fixed. We denote this groupoid by n-Griso.
We now define the monad for compact symmetric multicategories:
PrSh(elGr) −→ PrSh(elGr)

F '−→ F, 

where F is the graphical species given by F [ ] := F [ ] and



F [n] :=	colim
G∈n-Griso
=	Σ
F [G]
  F [G] 

G∈π0(n-Griso) Autn(G)
= π0 n-Griso↓F .

Here the first equation follows since n-Griso is just a groupoid: the sum is over isomorphism classes of n-graphs, and Autn(G) denotes the automorphism group of G in n-Griso. The second equation is a lengthy computation with automorphism groups.
This definition is essentially just the coloured version of the definition of Getzler and Kapranov [6]. A formal argument why this endofunctor has a monad structure can be found in [6]. Exploiting the third characterisation we can give a heuristic argument (which can be made into a formal proof): F [n] is the set of isomorphism classed of n-F -graphs: it is the set of ways to decorate n-graphs by the graphical species F . Now F [n] is the set of n-graphs decorated by F -graphs: this means that each vertex is decorated by a graph with matching interface. We can draw each vertex as a circle with the decorating F -graph inside, and the monad structure then consists in erasing these circles, turning a graph with vertices decorated by F -graphs into a single F -graph.

Let CSM denote the category of algebras for the monad F '→ F . We call its objects compact symmetric multicategories. Hence a compact symmetric multicat- egory is a graphical species F : elGrop → Set equipped with a structure map F → F : it amounts to a rule which for any n-graph G gives a map F [G] → F [n],
i.e. a way of constructing a single operation from a whole graph of them. This rule is subject to a few easy axioms (cf. [15], Ch.VI), amounting roughly to independence of the different ways of breaking the computation into steps.

The nerve theorem for compact symmetric multi- categories


We now consider the diagram

Gr 	i	zC,SM

 ¸	 ¸
j	free E forgetful
, 

(3)

elGr 	zG,r0 	zP,rSh(elGr)
obtained by factoring Gr0 → CSM as an identity-on-objects functor j followed by a fully faithful functor i, just like in (2). In other words, Gr is the Kleisli category [15, Ch.VI.5] of the monad, restricted to Gr0. This means that a morphism in Gr from G to Gj is defined as a morphism of graphical species from G to Gj. So where the free maps (those coming from Gr0) send vertices to vertices (of the same valence), the general maps in Gr send vertices to ‘subgraphs’ — more precisely, a vertex of G is sent to an etale map to Gj, and the domain of this etale map must have the same interface as the original vertex. With this description is is easy to establish the following factorisation property in Gr: every map in Gr factors as a refinement followed by an etale map, in analogy with the factorisation system in Δ. The reﬁnements are given by taking the domain graph and refining each node,
i.e. replacing the node by a graph with the same interface. The etale maps are the
free maps, with respect to the adjunction, while the refinements are the so-called generic maps (in the weak sense of [19]), i.e. characterised by a certain universal property.
The embedding i : Gr → CSM induces the nerve functor
N : CSM −→ PrSh(Gr)
X '−→ HomCSM (i( ),X)
featured in our main theorem:
Theorem. [9] The nerve functor N : CSM → PrSh(Gr) is fully faithful, and a presheaf is in the essential image of N if and only if it satisﬁes the Segal condition,
i.e. its restriction to Gr0 is a sheaf.
The proof follows the ideas and techniques of [1], [20] and [11]. The main point is to prove that a certain left Kan extension is preserved by the monad, which in turn relies on the generic/free factorisation. The details will soon be made available [9].
One can note, exactly as in the category case, that the generic part encodes the algebraic structure, whereas the free part is essential for bookkeeping and expressing the Segal condition. In the one-object case, the category of generic maps is sufficient: its opposite category is essentially the category of graphs introduced by Getzler and Kapranov [6] to study modular operads, and widely used in the subsequent literature on the subject.

References
Clemens Berger. A cellular nerve for higher categories. Adv. Math., 169:118–175, 2002.
Franc¸ois Bergeron, Gilbert Labelle, and Pierre Leroux. Combinatorial species and tree-like structures, volume 67 of Encyclopedia of Mathematics and its Applications. Cambridge University Press, Cambridge, 1998. Translated from the 1994 French original by Margaret Readdy, with a foreword by Gian-Carlo Rota.
J. Michael Boardman and Rainer M. Vogt. Homotopy invariant algebraic structures on topological spaces. Number 347 in Lecture Notes in Mathematics. Springer-Verlag, Berlin, 1973.
Dennis V. Borisov and Yuri I. Manin. Generalized operads and their inner cohomomorphisms. In Geometry and dynamics of groups and spaces. Volume 265 of Progress in Mathematics, pages 247–308. Birkhauser, Basel, 2008.
Ezra Getzler and Mikhail M. Kapranov. Cyclic operads and cyclic homology. In Geometry, topology, & physics, Conf. Proc. Lecture Notes Geom. Topology, IV, pages 167–201. Int. Press, Cambridge, MA, 1995.
Ezra Getzler and Mikhail M. Kapranov. Modular operads. Compositio Math., 110(1):65–126, 1998.
Claude Itzykson and Jean Bernard Zuber. Quantum field theory. McGraw-Hill International Book Co., New York, 1980. International Series in Pure and Applied Physics.
Andr´e Joyal. Foncteurs analytiques et esp`eces de structures. In Combinatoire ´enum´erative (Montr´eal/Qu´ebec, 1985). Volume 1234 of Lecture Notes in Mathematics, pages 126–159. Springer- Verlag, Berlin, 1986.
Andr´e Joyal and Joachim Kock. Manuscript in preparation.
Christian Kassel. Quantum groups. Number 155 in Graduate Texts in Mathematics. Springer-Verlag, New York, 1995.
Joachim Kock. Polynomial functors and trees. Preprint, arXiv:0807.2874. To appear in Internat. Math. Res. Notices.
Joachim Lambek. Deductive systems and categories. II. Standard constructions and closed categories. In Category Theory, Homology Theory and their Applications, I (Battelle Institute Conference, Seattle, Wash., 1968, Vol. One), pages 76–122. Springer, Berlin, 1969.
Tom Leinster. Nerves of algebras. Talk at CT04, Vancouver. Slides available from http://www.maths.gla.ac.uk/˜tl/vancouver/.
Tom Leinster. Higher Operads, Higher Categories. London Mathematical Society Lecture Note Series. Cambridge University Press, Cambridge, 2004.
Saunders Mac Lane. Categories for the working mathematician, second edition. Number 5 in Graduate Texts in Mathematics. Springer-Verlag, New York, 1998.
Saunders Mac Lane and Ieke Moerdijk. Sheaves in geometry and logic. Springer-Verlag, 1995.
J. Peter May. The geometry of iterated loop spaces. Lectures Notes in Mathematics, Vol. 271. Springer- Verlag, Berlin, 1972.
Ieke Moerdijk and Ittay Weiss. Dendroidal sets. Alg. Geom. Top., (7):1441–1470, 2007.
Mark Weber. Generic morphisms, parametric representations and weakly Cartesian monads. Theory Appl. Categ., 13:191–234 (electronic), 2004.
Mark Weber. Familial 2-functors and parametric right adjoints. Theory Appl. Categ., 18:665–732 (electronic), 2007.
