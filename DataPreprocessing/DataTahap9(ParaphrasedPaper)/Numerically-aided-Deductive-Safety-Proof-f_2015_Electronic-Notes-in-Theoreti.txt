In this academic paper, we illustrate the application of a particular rule through a case study focusing on safety verification for a powertrain control system. The system under study is a simplified model of a control system responsible for regulating the air-to-fuel (a/f) ratio in a gasoline engine to maintain it near an optimal setpoint. While detailing the overall proof, our primary emphasis is on outlining the role of the forward invariant cut rule in demonstrating that the a/f ratio consistently stays within 10% of the optimal setpoint in Keymaera.

We also briefly discuss various numerical methods for obtaining forward invariants, including existing techniques for generating safe forward invariant sets. Within the hybrid systems community, barrier certificates are suggested as a Lyapunov-like analysis approach to establish that, commencing from an initial set of states x0, no system trajectory enters an unsafe set u. To identify barrier certificates, we adapt a technique from a previous study, employing concrete system executions to generate a series of candidate barrier functions. Our approach, based on this previous technique, employs concrete executions to derive a set of linear constraints, which are used to construct the series of candidates. The final candidate is verified using an Satisfiability Modulo Theories (SMT) solver capable of handling nonlinear theories over the reals, specifically DReal.

The system dynamics and parameters were derived from a published model and then simplified. The model comprises a simplified representation of the engine subsystems responsible for air intake and a/f ratio measurement, alongside a computer control system assigned with regulating the a/f ratio. The controller's objective is to maintain the a/f ratio within 10% of the nominal operating conditions. The experiment being modeled involves an engine operating at a fixed speed, with the controller having two modes of operation: a recovery mode, in which fuel is controlled in an open-loop manner for a maximum of 8ms, and a normal run mode, utilizing feedback control to regulate the a/f ratio.

The controller measures both the air flow through the air-intake manifold to estimate the air pressure in the manifold, and the oxygen content of the exhaust gas to compute the a/f ratio. The recovery mode simulates the behavior of the controller when recovering from a sensor fault, during which it has no access to oxygen sensor measurements and must operate in a feedforward manner using only the manifold air flow rate. On the other hand, the normal mode represents the typical operational mode of the system.

In conclusion, we demonstrate how domain-specific knowledge of the powertrain control system can be leveraged to propose an invariant and safe set. We then use this set to apply the forward invariant cut rule to prove a safety property for the system.