 AASRI Procedia  8 ( 2014 )  88 – 92 
Available online at www.sciencedirect.com
2212-6716 © 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license 
(http://creativecommons.org/licenses/by-nc-nd/3.0/).
Peer-review under responsibility of Scientific Committee of American Applied Science Research Institute
doi: 10.1016/j.aasri.2014.08.015 
ScienceDirect
2
Abst
In th
resea
2G/3
adeq
the m
built 
probl
cance
© 20
Sele
Keyw
1. In
O
echo
M
E
2014 AASR
tract 
his study, the a
arched. The ech
3G circuit-switc
quate. In the fut
main applicatio
into its chip, 
lem. This pape
ellation method
014. Published
ection and/or p
words:�android; ec
ntroduction 
On the Androi
o paths can be
Ming-Che Yeh. Te
E-mail address: tp
RI Conferen
Androi
Ming-C
NTUT, Electr
NCUT, Elec
NTUT, Electr
acoustic echo p
ho problem is c
ch (CS) mode, t
ture 4G/LTE en
n for personal 
the Android-ba
er presents an 
d.
d by Elsevier 
peer review un
cho cancellation; 
id platform, t
e determined. 
el.: +886-919-097
p26610@gmail.co
nce on Spor
id Hands
he Yeh*, C
rical Engineering
ctrical Engineerin
rical Engineering
problem and ca
consequential f
the acoustic ech
nvironment, all-
speech commu
ased VoIP on 
analysis of th
B.V.
nder responsib
echo suppressor;
the microphon
The first path
7744;. 
om
rts Engineer
set VoIP
Cheng-Yu 
g, #1, Sec. 3, Chun
ng, #57, Sec. 2, Zh
g, #1, Sec. 3, Chun
ancellation met
for Android ph
ho is cancelled b
-IP packet com
unication system
3.5G/WiFi wil
he acoustic ech
bility of Amer
;
ne and speake
h is the air, a
ring and Com
P Echo C
Yeh, Shaw
ng-hsiao East Rd
hongshan Rd., Tai
ng-hsiao East Rd
thod of Androi
hone-based VoI
by the hardwar
mmunication wil
ms. Before the 
ll continue to u
ho on Android-
rican Applied 
er environmen
and the second
mputer Scie
Cancellat
w-Hwa Hw
d., Taipei, Taiwan
ichung, Taiwan, R
d., Taipei, Taiwan
id-platform-bas
P applications. 
re chip, and the 
ll be achieved. 
introduction o
undergo the afo
-based VoIP a
Science Rese
nt creates the
d is the hands
ence (SECS
tion
wang 
n, ROC
ROC
n, ROC
sed VoIP was 
However, in t
quality of com
The IMS/VoIP
f 4G with echo
forementioned a
and proposes a 
earch Institute 
e acoustics. T
set case. In th
S 2014) 
analyzed and 
the traditional 
mmunication is 
P will become 
o cancellation 
acoustic echo 
simple echo 
wo acoustic 
he traditional 
© 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license 
(http://creativecommons.org/licenses/by-nc-nd/3.0/).
Peer-review under responsibility of Scientific Committee of American Applied Science Research Institute
89
 Ming-Che Yeh et al. /  AASRI Procedia  8 ( 2014 )  88 – 92 
2G/3
The
softw
canc
First
proc
poin
meth
Fig.1
1
T
impl
evid
2
In
pres
hard
code
The
3
T
audi
impo
the m
4
T
coor
the p
3G circuit swi
LMS algorit
ware app. Th
cellation must
t, the LMS-ba
cess on the An
nts), thus lengt
hods that have
. Acoustic Echo 
.
Android 
This was adde
lemented into
dent. 
.
Android 
n this study, a
ent and the v
dware or the c
e for the CS s
echo was can
.
Software
This algorithm
io data at a tim
ossible. The t
most crucial fe
.
Software
This is the si
rdinated perfe
playing and re
itch communi
thm is comm
he communica
t all be imple
ased echo canc
ndroid platfor
thening the fi
e been propose
API: Class ac
ed to the And
o the authors’ 
GSM codec 
attempts were 
voice quality 
chip had to be
session. The s
ncelled by the 
e computation
m is used to cap
me slot. The L
time delay of 
feature of the V
e computation
implest appro
ctly. The echo
ecording of an
cation mode, 
monly used fo
ation protoco
emented by so
cellation algor
rm is conducte
ilter length an
ed for the And
coustic echo c
droid API lev
VoIP applica
made to use a
was excellen
e determined b
segment of co
hardware and
n: Least mean 
pture echo au
LMS requires a
voice over V
VoIP system. 
n: Echo suppre
oach to impl
o canceller det
n audio device
Audio Signal 
the acoustic e
or echo cance
l, SIP/RTP, t
oftware. Acou
rithm requires
ed frame by f
nd computation
droid platform
canceler 
el 19. In this
ation. Howeve
a traditional 2
nt. Hence, wh
by reading the
ode was then u
d then passed t
squares [1] 
udio samples. 
a high-order b
VoIP is too lon
essor [2] 
lement, and y
termines the c
e. The followin
Spe
Microp
echo cancellat
ellation. How
the speech co
ustic echo can
s high comput
frame. The m
n of the LMS
m are listed as 
 study, attem
er, it did not w
2G/3G circuit 
hether the ec
e android sour
used to simul
to the VoIP.
Most android
buffer length a
ng for commu
yields a high
characteristics
ng section det
eaker
phone 
tion function i
wever, Androi
odec, G.711/G
ncellation is d
tational power
inimal frame 
S algorithm. P
follows: 
mpts were mad
work, or the e
switch (CS) s
ho canceller 
rce code and 
late the echo 
system audio
and computati
unication. Rea
h-quality voic
s of the audio 
tails this appro
is built into th
id-based VoIP
G729, and ac
difficult for t
r. Second, the
size is 10 ms
revious echo 
de for this fun
echo cancellat
session. The e
was impleme
retrieving the
function in th
o drivers captu
ional power, w
al-time comm
ce when par
data relations
oach.
he GSM chip. 
P is a pure 
coustic echo 
two reasons: 
e record/play 
s (80 sample 
cancellation 
nction to be 
tion was not 
echo was not 
ented in the 
e segment of 
he hardware. 
ure 10 ms of 
which seems 
munication is 
rameters are 
ship between 
90  
 Ming-Che Yeh et al. /  AASRI Procedia  8 ( 2014 )  88 – 92 
2. E
Fig.2
In
cont
T
In
play
depe
1
T
the r
2
T
samp
caus
and
1
cho suppress
. Block diagram o
n the echo sup
tains 80 sampl
The value F ex
n comparing t
yback frame e
ends on the fra
.
If ����� �
The audio fram
recorded speak
.
If ����� �
This indic
of the listen
Based on this
The previous d
pled in real tim
ses the echo su
playback mus
.
If ����� �
sor algorithm
of an echo suppre
ppressor appr
le points. 
xpresses an au
the energy of 
energy is �� a
ame (10 ms): 
�
�
�������,
me energy doe
king voice. Th
�������,
cates that a re
er. This is a 
s characteristi
discussion doe
me. The recor
uppressor to c
st be determin
������ � ��, d
m 
ession system 
roach, each sa
�
udio frame. Th
� � �
playback and
and the record
�� � ������� �
�� � ������� �
es not echo. E
hus, the echo 
emote user is s
real situation
ic, the echo su
es not conside
rding has an A
cancel the real
ned. The condi
disabling the e
Echo
ample value is
� � ���� ��� ��
he energy of e
���
� ����
� � �
d recording, nu
ding frame en
���� � ��� ���
���� � ��� ��
Even recordin
suppressor is 
speaking. A p
n in human co
uppressor is en
er the effect o
A/D converter 
l voice, not th
itional equatio
echo suppress
o suppressor
Echo/Spe
classifier
s S, and the e
�� � � ����
ach frame is
��
� � � � ���
�
umerous situa
nergy is ��. A
�� � ��� � � ��
�� � ��� � � ��
ng data contai
disabled in th
person who is
ommunication
nabled in this 
f time delay. 
and the playb
he echo. There
on is modified
sor.
M
S
eech 
energy of each
ations and rul
Audio frame e
��� � ���
��� � ���
n an echo ele
his situation.
speaking the
n. One speak
situation. 
In Android au
back has D/A 
efore, the time
d as follows:
Microphone
Speaker
h frame is E.
es can be con
energy is a se
ement, but are
y does not he
s while the o
udio devices, 
converter. Th
e delay betwee
Each frame 
ncluded. The 
equence that 
e masked by 
ear the voice 
other listens. 
audio is not 
he time delay 
en recording 
91
 Ming-Che Yeh et al. /  AASRI Procedia  8 ( 2014 )  88 – 92 
2.
If ����� ������ � ��, enabling the echo suppressor. 
D is the time delay between sound playback and recording. The impulse response of playback and 
recording is presented in Fig. 3. 
Fig.3. Echo response. 
Fig.4. Echo suppressor envelope. 
The echo response could be determined in this study, and an adverse echo response was generated 
accordingly. The involved equation can be modified as follows: 
1.
If ����� ������� � ��, disabling the echo suppressor. 
2.
If ����� ������� � ��, enabling the echo suppressor envelope function. 
Where r is the rate of decay in echo, ��� � is the echo suppressor envelope, D is the time delay, and �[.] is 
the normalized response from h[.].
3. Experiment results 
Fig.5. Voice in playback 
92  
 Ming-Che Yeh et al. /  AASRI Procedia  8 ( 2014 )  88 – 92 
Fig.6. Voice in recording 
Fig.7. Voice recorded through the echo suppressor 
Fig. 5 shows the original playback voice. Fig. 6 depicts the microphone recording, which contains some 
echoes. Evidently, as shown in Fig. 7, the playback echo was cancelled and disappeared. The experimental 
result shown in Fig. 7 confirms the high performance of the proposed approach. 
4. Conclusion 
This study analyzed the acoustic echo for Android-platform VoIP. A simple acoustic echo cancellation 
method is proposed. The experimental results confirm high performance. 
References 
[1] J. Benesty, T.Gänsler, D.R. Morgan, M. M. Sondhi, and S.L. Gay 2001. Advances in Network and 
Acoustic Echo Cancellation 
[2] Eberhard Hänsler, and Gerhard Schmidt 2004. Acoustic echo and noise control: a practical approach. 
