This paper investigates modal type theories by using a new categorical semantics called change-of-base semantics. Change-of-base semantics is novel in that it is based on (possibly infinitely) iterated enrichment and interpretation of modality as hom objects. In our semantics, the relationship between meta and object levels in multi-staged computation exactly corresponds to the relationship between enriching and enriched categories. As a result, we obtain a categorical explanation of situations where meta and object logics may be completely different. Our categorical models include conventional models of modal type theory (e.g.,

On the type theoretical side, it is shown that Fitch-style modal type theory can be directly interpreted in iterated enrichment of categories. Interestingly, this interpretation suggests the fact that Fitch-style modal type theory is the right adjoint of dual-context calculus. In addition, we present how linear temporal, S4, and linear exponential modalities are described in terms of change-of-base semantics. Finally, we show that the change-of-base semantics can be naturally extended to multi-staged effectful computation and generalized contextual modality a la Nanevski et al. We emphasize that this paper answers the question raised in the survey paper by de Paiva and Ritter in 2011, what a categorical model for Fitch-style type theory is like.

Dual-context system was first introduced in [1] to study exponentials of linear logic (IMELL), and later refined by several authors [10,30] to accommodate more logics including the intuitionistic K and S4. Judgments in dual-context systems have two contexts separated by |, the left side of which is called modal context. As well as Fitch-style, only the right-hand side context is used when deriving non-modal constructs. The box of the dual-context system is characterized by the following two rules.

We establish a mathematically precise formulation of the idea presented in the previous subsection. The major difficulty in formalization is that we need to model infinitely many universes of the logic with infinitely iteratively enriched categories. For calculi with finitely many levels, it suffices to construct a concrete chain of iterated enrichment in which a category of level l is enriched over another category of level l + 1. One approach to generalize finite iteration of enrichment to infinite

For a symmetric monoidal category V, monoidal V-category and related concepts are defined as usual (see also Appendix A). In fact, it is known that symmetric monoidal closed categories enriched over a symmetric monoidal closed category behave quite well. Our approach exploits the following very important result on such enriched categories.

This section gives two constructions of infinitely enriched categories. Both con- structions are finite approximate constructions: they can generate finitely enriched categories of any length from one structure, but cannot produce one with infinitely many non-trivial enrichment. We remark that finite approximation is sufficient for model construction of the type theory since any context stack cannot be infinitely high. We leave finding generic construction methods of truly infinitely enriched categories as an important future work towards the theory of iterated enrichment.

Now, we are ready to construct (cartesian) infinitely enriched categories. We have seen that a finite-product-preserving self-distributive comonad T over a carte- sian closed category with all self-distributive T -coalgebras induces another such by Kleisli lifting. This operation can be repeated arbitrarily for finitely many times. By the next lemma we can regard VT as a V-category, so iterating the operation produces a (cartesian) infinitely enriched category.

Remark 5.4 Cartesian doubly enriched categories arising from the Yoneda embed- ding are also used by Hofmann [24] to offer categorical semantics of higher-order abstract syntax (HOAS), and by Bekki and Masuko [2,3] to study semantics of nat- ural languages. The enriched category-theoretic viewpoint could lead us to further analysis of the underlying connections between modal logics and domain-specific languages.

While boxing of Fitch-style increases the level of a proof, that of dual-context de- creases it. It can be seen easily that assignment of levels does not affect the prov- ability. If we state it formally, the dual-context version of Theorem 2.2 holds.

8 Such an investigation makes sense as far as neither disjunctions nor bottom is dealt with. Since disjunc- tions are usually interpreted as colimits, a left adjoint F has to preserve disjunctions. In this paper, we focus on only box modalities and conjunctions.

We can also extend the semantics to effectful computation. Formal semantics of modal type theories with effects is not well studied because a Kleisli category is not a monoidal category in general. While one of the authors has provided Gentzen-style semantics for the effectful modal type system in [28], this paper proposes Fitch-style semantics allowing each stage to have a different effect.

The authors thank their colleague Hiroki Kobayashi for helpful discussions and comments to an early draft of this paper. They also want to acknowledge criticism and encouragement from members of SLACS 2017 and CSCAT 2018. This work is partially supported by JSPS KAKENHI Grant Number 18J21885.

Defining higher-dimensional monoidal structures is hard work. In [16], a definition of monoidal objects is given in terms of Gray monoids, which are strictified monoidal bicategories. By the coherence theorem of tricategories [21], it is possible to define monoidal objects in any monoidal 2-category as well. For simplicity, we restrict our attention to monoidal (strict) 2-categories in the following. Let U be a symmetric monoidal category.

Example A.6 Monoidal objects coincide with monoidal categories when the ambient category is Cat (i.e., Set-enriched). Also, monoidal 2-categories are exactly monoidal Cat-categories, that is, monoidal objects in 2Cat. Monoidal 2-functor and monoidal 2-natural transformation are similarly defined in terms of monoidal structures in 2Cat.

