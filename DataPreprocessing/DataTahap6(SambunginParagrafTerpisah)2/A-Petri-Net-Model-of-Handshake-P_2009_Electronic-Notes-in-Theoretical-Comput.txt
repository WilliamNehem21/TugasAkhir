We propose a Petri net model of handshake protocols. These are asynchronous communication protocols which enforce several properties such as absence of transmission interference and insensitivity from delays of propagation on wires. We introduce the notion of handshake Petri net, a Petri net with a specific external interface. We show that the set of observable quiescent traces generated by such a net captures the properties defining a handshake protocol. Conversely we show that for any handshake protocol we can construct a corresponding net. We also study different subclasses of the model. Many examples are provided.

The asynchronous style of computation is characterized by several subunits acting locally, independently of each other, as opposed to the synchronous style, where a central clock disciplines everything. Working with asynchronous systems, there are a few situations one would like to avoid. One is transmission interference which may occur when two consecutive messages are sent over the same channel, with the risk of clashing into one another [14]. Another one is computation interference, where a message is delivered to an unready receiver [9,16].

This led us to look for other kinds of models. A graphical representation is probably the most natural choice for dealing with asynchronous circuits: in graphs as in circuits, composition is easy when everything else works properly. Several works have taken a similar perspective ([2],[8],... ). In particular Dan Ghica developed a language for asynchronous hardware design by taking inspiration from the Geometry of Interaction and handshake circuits [6]. However his goal was to improve previous hardware design languages [15,3] and not to capture all handshake behaviors.

The model we present in this paper is based on Petri nets [11]. Petri nets are widely used as models of asynchrony, and are close to the context in which the handshake communication protocol originated [12]. However, the properties of delay- insensitivity and absence of transmission interference had not yet been formalized under a graphical representation. We call our model handshake Petri nets. We show that handshake Petri nets capture precisely the handshake protocol, in the sense that the behavior of every net is a handshake language and that every handshake language is the behavior of some net.

In Section 2 we define the notion of handshake language as set of traces (taking inspiration from [15] and [4]). In Section 3 we introduce handshake Petri nets and some of their subclasses. We put a special emphasis on deterministic behaviors, as well as on those nondeterministic behaviors which cannot be expressed as sums of deterministic components. Finally, in Section 4 we provide an interpretation of handshake Petri nets into handshake languages and we prove the correctness and completeness of this interpretation. Completeness of deterministic handshake Petri nets with respect to deterministic handshake languages will follow as a corollary.

We assume some basic knowledge on Petri Nets, which we will use in their standard graphical representation [11]. Throughout the paper we will consider Petri nets in their unsafe version, where places are allowed to contain several tokens at the same time. This is not just for convenience. Unsafe nets are necessary to carry out our construction. We also stress that the nets we consider are in general not finite, in the sense that they may have infinitely many places and/or transitions.

Marked graphs are significant as they allow to identify places with communi- cation channels and in turn to represent all and only circuits which can be built out of channel, synchronization and fork operations. Moreover they have a special historical importance for the handshake protocol [13]. We call handshake marked graph a handshake Petri net which is also a marked graph.

Marked graphs express only deterministic behaviors but not all deterministic behav- iors are captured by marked graphs. As far as we know, no structural characteriza- tion of determinism in Petri nets exists in the literature. We propose a definition that completely characterizes determinism in the context of handshake nets.

Also, the graphical representation may drive the definition of a more standard notion of syntax in the form of a process calculus. Van Berkel already proposed the handshake process calculus [15] (see also [7]). However their goal was not to cap- ture all possible handshake behaviors and a complete process calculus of handshake circuits is still wanted.

Further directions include a deeper analysis of data-exchange, as in this paper we focused especially on data-less communications. It would also be interesting to exploit those subclasses which allow finite representations of a given subset of handshake languages, as we tried to hint in Section 3.1.

The second definition is less significant, but still useful. Let H be an hpn and t and t' two distinct external transitions of H. We call t' the complement of t, and viceversa, when t and t' belong to the same port.

HL(H) is receptive. Handshake DB nets are unsafe, that means that places may contain an unlimited number of tokens. So, every time an input transition is enabled to fire it can. Note also that the enabling of an input transition depends only on the alternation with its complement output transition. Then HL(H) is receptive.

