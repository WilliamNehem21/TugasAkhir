Data refinement in a state-based language such as Z is defined using a relational model in terms of the behaviour of abstract programs. Downward and upward simulation conditions form a sound and jointly complete methodology to verify relational data refinements. In models of concurrency, refinement takes a number of different forms depending on the exact notion of observation chosen, which can include the events a system is prepared to accept or refuse, or depend on explicit properties of states and transitions. In this paper we continue our program of deriving relational simulation conditions for behavioural notions of refinement by defining embeddings into the relational model that extend our framework to include various notions of automata based refinement.

This paper continues the programme by considering concurrent refinement no- tions in the context of automata based specification. In Section 2 we provide the basic definitions and background. In Section 3 we introduced automata and IO automata, their refinement notions, and derive their relational simulation rules. We conclude in Section 4.

[14], traditionally received the most attention. The standard refinement theory of Z [26,12], for example, is based on this version of the theory. However, later publications by He and Hoare, in particular [13], dropped the restriction to total relations, and proved soundness and joint completeness of the same set of simulation rules in the more general case. De Roever and Engelhardt [9] also present the partial relations theory, without putting much emphasis on this aspect.

In [11] we showed how different process algebraic preorders can be embedded into the relational model. Here we review how this is achieved for the trace preorder which defines refinement as trace inclusion. In the next section, we provide that type of characterisation for each notion of automata refinement.

On the basis of this result, we can extract the simulation rules that correspond to this notion of refinement from the partial relation simulations as applied to this embedding (i.e., without a totalisation in between). These are of course the rules for standard Z refinement but omitting applicability of operations, as used also e.g., in Event-B [1]. The conditions for a downward simulation in the partial relational model are (c.f. Definition 4):

Automata [17] offer another perspective on refinement to those given by a process algebra or state-based context. In [17] Lynch and Vaandrager provide a comprehen- sive treatment of refinement for automata, defining a number of simulation defini- tions and results relating them. In this section we describe the relationship between automata based refinement and our relational characterisation, hence answering the question raised in [17] concerning their connection.

IO automata [16] are a class of automata that distinguish explicitly between the input and output of a system, and thus share characteristics with both standard automata and state-based languages such as Z and B. In such a model the set of actions is partitioned into input and output actions. A particular computational interpretation is taken, viz: output actions are actions initiated by the system, while input actions are under the control of the environment. A system can never refuse to perform its input actions, and its output actions can never be blocked by the environment.

