In this paper, we propose a technique for bounded reachability of linear hybrid automata, based on the reduction of a bounded reachability problem to a MathSAT problem, i.e. satisfiability of a boolean combination of propositional variables and mathematical constraints. The MathSAT solver can be used to check the existence (or absence) of paths of bounded length.

1 This work has been sponsored by the CALCULEMUS! IHP-RTN EC project, contract code HPRN-CT-2000-00102, and has thus benefited of the financial contribution of the Commission through the IHP programme. It has also been partly supported by ESACS, an European sponsored project, contract no. G4RD-CT-2000-00361, and by a grant from Intel Corporation.

In this paper, we address the problem of verifying hybrid automata with continuous variables and triangular constraints. We propose a formal verifica- tion method for bounded reachability. The approach is based on the encoding of a bounded reachability problem into a MathSAT problem, i.e. the problem of checking the satisfiability of a boolean combination of propositional vari- ables and mathematical constraints over real variables. The approach is made practical by the use of the efficient MathSAT solver [1], that extends and inte- grates state-of-the-art techniques for propositional satisfiability (SAT) with a set of mathematical reasoners. The approach presented in this paper is largely similar to bounded model checking [4], and enhances the method presented in [3], limited to timed systems, to dealing with real variables with arbitrary linear dynamics.

The proposed technique is clearly incomplete, and currently limited to the case of linear dynamics. Despite these facts, however, it allows us to represent and to analyze interesting systems from real-world applications [6,5], providing useful information, especially oriented to debugging and goal-directed simula- tion. An experimental analysis shows that our techniques is competitive with state of the art verification tools such as HyTech, and with methods based on the discretization of real variables.

Bounded Model Checking (BMC) is a recent approach to symbolic model checking [4]. Given a Kripke structure M , and an LTL formula f , the idea is to check whether f is true in M by looking for a counterexample (i.e., a witness to the violation of f ) that can be presented within a bound of k steps. Given k, the problem is reduced to the satisfiability of a propositional formula

The encoding of properties basically follows the encoding in [3]. Our ap- proach is bounded complete, in the following sense: if there exists a trace of length k, then the encoding of length k is satisfiable, and can be found by running MathSAT on it. The undecidability of the class of hybrid automata we are dealing with tells us that it is in general impossible to decide if a counterexample might be found with bigger k, or if the problem is unsolvable.

We evaluated the potential of the approach by tackling an example of hybrid systems of industrial relevance, i.e. the model of the SPS. The bounded reach- ability method described in Section 4 can be used both for model debugging (i.e., bug hunting) and for simulation of hybrid systems. In the following we provide some hints about the use of our methodology by showing some experi- the GBX, VALVE, ATSM and PTO components happen along the path, and finally the speed of the gearbox (GBX component) drops below the constant value sg1. The negation of the above property can be seen as a safety property to be verified by the system (i.e., in presence of failures due only to the main engine, the gearbox speed cannot drop below sg1). The rationale behind this property is that the cross-bleed procedure initiated by the SPS computer (see Section 2) is able to recover from an engine failure by using power coming from the opposite engine (which is assumed to be working in this one-sided model).

procedure is not able to prevent the gearbox speed to drop below that par- ticular value). In this case, MathSAT generates an output trace showing an execution of the system which leads to the violation. The trace includes infor- mation on the discrete transitions and the time elapse transitions taken by the automata, the exact time delays and time points at which the transitions take place, and the synchronization channels between different automata. If the

The simulation begins at time T0, when an engine grippage takes place. Both the engine and the gearbox speeds begin to decrease. At time T1, the SPS computer detects a gearbox low speed condition, and therefore issues the opening of the valve (the VALVE and SPS computer automata synchronize on the open channel); as a result, the ATSM begins to increase its speed (SPS and ATSM synchronize on the inc a channel). At time T2, the SPS computer issues a change in the ATSM dynamics (SPS and ATSM synchronize on inc b). The simulation stops at time T3, when the gearbox speed reaches the value

We also attempted a comparison with HyTech [11], a state-of-the-art tool for the analysis of hybrid systems. Differently from our approach, HyTech is based on the calculation of the reachable state space, and is therefore not limited to the bounded case. In principle, HyTech may not terminate when tackling an undecidable class of automata (as in the case of the SPS).

then be checked by a SAT-solver. We also presented the MathSat solver [2,1], an efficient SAT-solver which is based on the integration of SAT techniques [4] with some specialized decision procedures for linear mathematical constraints. A work related to ours, but still limited to timed systems, is [17]. In the present work, as explained in Section 4.2, we have extended the encoding in order to deal with hybrid systems.

The model of hybrid I/O automata presented in [14] is general enough to accommodate our model of hybrid automata. Discrete and continuous communication are achieved by means of, respectively, shared actions and shared variables. However, discrete events are not allowed to change the value of shared variables, as in our case.

This line of research has been carried on inside the ESACS [6] project (see http://www.esacs.org), an European-Union-sponsored project whose main goals are to define a methodology and a shared environment to improve the safety analysis practice for complex systems development. The Secondary Power System [5] is one of the case-studies investigated in ESACS. One of the main motivations for our research is the realization that the use of traditional finite-state model checking, based on the discretization of real variables, has a very hard time in dealing with the complexity of hybrid systems [5]. In fact, the results may depend on the step of discretization, and the state explosion

In this paper, we have addressed the problem of verification of industrial systems that are naturally modeled as linear hybrid automata. The approach is an enhancement of the bounded model checking approach for timed systems proposed in [3] to the case of linear hybrid automata. Efficiency is gained by the use of the MathSAT solver. The main limitations are given by the undecidability of the analyzed class, and the constraints on the linearity of real variables dynamics. Despite this, however, the approach allows us to model and analyze systems of practical relevance, that HyTech is currently unable to deal with.

In the future, we will provide a more thorough experimental evaluation, by enlarging both the set of tools we compare with (some of them are cited in Section 6), and the set of case studies to analyze. Regarding the SPS ex- ample, we plan to experiment with more complex models, at different levels of granularity and abstraction (e.g., a two-sided model of the system). We will investigate how to optimize the MathSAT solver on these specific prob- lems (e.g., by constraining the splitting variables in the style of [9,18]), and will experiment with different encodings. As a first step towards bridging

Gilles Audemard, Alessandro Cimatti, Artur Korni-lowicz, and Roberto Sebastiani. Bounded Model Checking for Timed Systems. In Doron A. Peled and Moshe Y. Vardi, editors, FORTE 2002: Conference on Formal Techniques for Networked and Distributed Systems, volume 2529 of LNCS, Houston, Texas, November 2002. Springer.

