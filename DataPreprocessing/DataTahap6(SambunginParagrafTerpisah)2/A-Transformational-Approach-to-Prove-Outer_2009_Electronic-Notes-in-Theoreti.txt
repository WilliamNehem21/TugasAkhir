We present transformations from a generalized form of left-linear TRSs, called quasi left-linear TRSs, to TRSs such that outermost termination of the original TRS can be concluded from termination of the trans- formed TRS. In this way we can apply state-of-the-art termination tools for automatically proving outermost termination of any given quasi left-linear TRS. Experiments show that this works well for non-trivial ex- amples, some of which could not be automatically proven outermost terminating before. Therefore, our approach substantially increases the class of systems that can be shown outermost terminating automati- cally.

A lot of work has been done on automatically proving termination and innermost termination. However, also termination with respect to the outermost strategy makes sense. For instance, this is the standard strategy in the functional program- ming language Haskell [11], and it can be specified in CafeOBJ [4] and Maude [2]. We will focus on the most general variant of the outermost strategy: reducing a redex is always allowed if it is not a proper subterm of another redex. Termination with respect to this strategy we shortly call outermost termination. This is different from the approaches for proving termination of Haskell presented in [7,16], which feature proving termination for a specific set of terms (ground instantiations of a

Now for sure the TRS remains non-terminating since it still contains the first non- terminating rule. But we expect the combined system to be outermost terminating. This is the kind of examples for which we want to prove outermost termination automatically.

Until now Cariboo [9] was the only tool having facilities for proving outermost termination. Its approach is a stand alone one, while our goal is to make use of the huge effort of the last years to improve the power of termination tools. For making use of the impressive power of termination tools, the natural approach is to make a transformation from TRSs to TRSs such that the modified termination property (in our case outermost termination) of the original TRS can be concluded from termination of the transformed TRS. In the past, a similar approach was successfully applied to context-sensitive termination [5] and liveness problems [8].

The presented approach deals with ground outermost termination. We will see that when fixing the signature there may be a difference between outermost termination and ground outermost termination, but by adding fresh constants there is no difference any more. Therefore it is not a restriction to focus on ground outermost termination.

Using anti-matching we present two other transformations T2 and T3, based on irreducible contexts. Since these contexts can only capture the first level of nesting, this approach is inherently incomplete. However, experiments show that for some examples these transformations are successful, while the transformation T1 gives rise to a problem that is too hard for existing termination tools.

This paper is structured as follows: After introducing the used notations in Section 2, we present our basic transformation T1 and prove soundness in Section 3. Thereafter, we present our alternative transformations T2 and T3 using contexts in Section 4. In these two sections, we assume that we can construct a set of terms that match those terms not being matched by a left-hand side. This problem of anti-matching is treated in Section 5, which proves that our transformations can be applied automatically for quasi left-linear TRSs. In Section 6 we give a short description of our implementation of the transformations and present a number of examples. We conclude in Section 7.

However, this difference only occurs when fixing the signature. It is easy to see that by replacing variables in any infinite outermost reduction by fresh constants, the result is an infinite outermost ground reduction. For quasi left-linear TRSs adding one fresh constant suffices. Hence, we may and shall restrict ourselves to outermost ground termination.

The idea of the first transformation is to only allow a reduction when a certain control symbol down marks the current redex. After having reduced a term, the control symbol is replaced by another control symbol up that is moved outwards. Only when the root of the term is encountered, then the control symbol is replaced by the down symbol again. In order to find the next outermost redex, the symbol down may only descend into subterms when no left-hand side is applicable to the term. For this purpose, we need a set SL such that its elements match exactly those terms that are not matched by a left-hand side. Such a set SL is called anti-matching, which is defined below.

For an infinite TRS R, we clearly have that T1(R) is infinite, too. The TRS T1(R) can also become infinite for a TRS R that is not quasi left-linear, since then an anti-matching set SL might be infinite. This is demonstrated in Section 5. For quasi left-linear TRSs however, we will prove the following theorem by giving a possible construction of a finite anti-matching set SL.

presented in the following are successful. These transformations do not use sym- bols down and up to find the next redex, but only allow to rewrite a redex when a so-called anti-matching context is found. This notion of anti-matching contexts is given in the following definition.

The above transformation T3 is still sound, i.e., from termination of a TRS T3(R) one can conclude outermost ground termination of R, but we again have to omit this proof for space reasons. Also for this transformation it can be observed that a finite TRS T3(R) is only achieved if the TRS R is finite and quasi left-linear.

We consider a term rewrite system R and a set L matching all terms that can be rewritten by R, for example L = lhs(R). For our transformations we have to find an anti-matching set SL that matches the terms which cannot be rewritten by R. Clearly, this is only depending on the left-hand sides of R. One can imagine that there are several possible sets that satisfy this condition. Our goal is to select the smallest such set and to be able to construct it finitely when this is possible.

amples. But their focus is on machine learning, therefore it is hard to directly apply their results. We also want to mention the concept of anti-patterns as introduced in [12]. This is more general since it allows to introduce negation of patterns at

One might wonder why unification is considered, while term rewriting is con- cerned with matching. This becomes clear when formulating what kind of terms we are looking for: the set of terms that match those terms which are not matched by left-hand sides. This means we have to consider two matchings at the same time, when assuming that the set of variables are disjoint then this gives rise to a unification problem.

In the following we restrict ourselves to sets L that only contain linear terms. It should be observed that this also covers the case of a quasi left-linear TRS R: for such a TRS we can define L to be the set of all linear left-hand sides of R and have that L still matches the same terms as lhs(R), due to Lemma 5.4. We want to show that for a linear set L the set SL is finite. For that purpose we need the depth of a term, which is defined as follows.

It can be observed that in the transformed TRS there are no rules that allow the symbol down to descend into a term. This holds because we have SL = {a}, such that no rules are created for it. The transformed TRS can easily be shown terminating within a short amount of time by all of the considered tools. For the next example, this is not the case anymore.

This example could only be proven outermost ground terminating using the tool Jambox, both AProVE and TTT2 failed. However, the techniques used by Jambox to prove termination, namely semantic labelling and polynomial orders, are also implemented in both of the other tools. Hence, this clearly shows that proving termination is also strongly dependent on heuristics and/or search encodings.

As can be seen above, this example has non-linear left-hand sides for the function symbol f. However, these left-hand sides are all instances of the left-hand side f(x, y), which makes this TRS quasi left-linear. Hence, we only have to consider the set L = {f(x, y), g(x)} of linear terms, from which we then compute SL to be SL = {a, i(x)}. Using this set, our transformation yields a finite TRS T1(R6), whose termination can be proven using any of the three considered tools.

Cariboo is unable to prove outermost ground termination of the TRS R7, while the transformed TRS T1(R7) can be proven terminating by all considered tools. Also Example 6.4 and both variants of Example 6.5 cannot be proven outermost ground terminating by Cariboo.

There are also examples where Cariboo succeeds, whereas our transformation fails. First of all, Cariboo can also handle examples that are not quasi left-linear, while our transformation is not applicable in this case. But there are also quasi left-linear examples where Cariboo can prove outermost ground termination, but none of the considered tools can prove termination of the transformed TRS. Such an example is given below.

