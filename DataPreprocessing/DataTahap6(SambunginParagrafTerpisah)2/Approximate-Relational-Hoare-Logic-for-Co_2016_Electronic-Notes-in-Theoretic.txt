Approximate relational Hoare logic (apRHL) is a logic for formal verification of the differential privacy of databases written in the programming language pWHILE. Strictly speaking, however, this logic deals only with discrete random samplings. In this paper, we define the graded relational lifting of the subprobabilistic variant of Giry monad, which described differential privacy. We extend the logic apRHL with this graded lifting to deal with continuous random samplings. We give a generic method to give proof rules of apRHL for continuous random samplings.

In the continuous apRHL, we mainly extend the proof rules for relation com- positions and the frame rule. We also develop a generic method to construct proof rules for random samplings. By importing the new rules added to apRHL+ in [1], we give a formal proof of the differential privacy of the above-threshold algorithm for real-valued queries [8, Section 3.6].

What we modify from the original definition [8, Definition 2.4] is the domain and codomain of c; we replace the domain from N to R, and replace the codomain from a discrete probability space to G(Rn). We apply this definition to the interpretation of pWHILE programs. The input and output spaces can be other spaces: in section 5 we consider the above-threshold algorithm Above whose output space is Z. The above modification is essential in describing and verifying the differential privacy of this algorithm because it takes a sample from Laplace distribution over real line.

We recall and reformulate categorically the language pWHILE [2]. The language pWHILE is constructed in the standard way, hence we sometimes omit the details of its construction. In this paper, we mainly refer to the categorical semantics of a probabilistic language given in [5, Section 2].

In this section, we give a generic method to construct the rules for random sam- plings, and by instantiating the method we show the soundness of the proof rules in prior researches: [Lap] for Laplacian mechanism [7], [Exp] for Exponential mech- anism [15], [Gauss] for Gaussian mechanism [8, Theorem 3.22, Theorem A.1], and [Cauchy] for the mechanism by Cauchy distributions [16].

