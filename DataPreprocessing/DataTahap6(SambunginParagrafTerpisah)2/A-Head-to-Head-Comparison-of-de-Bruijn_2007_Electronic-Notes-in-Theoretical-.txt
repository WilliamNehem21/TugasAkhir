Often debates about pros and cons of various techniques for formalising lambda-calculi rely on subjective arguments, such as de Bruijn indices are hard to read for humans or nominal approaches come close to the style of reasoning employed in informal proofs. In this paper we will compare four formalisations based on de Bruijn indices and on names from the nominal logic work, thus providing some hard facts about the pros and cons of these two formalisation techniques. We conclude that the relative merits of the different approaches, as usual, depend on what task one has at hand and which goals one pursues with a formalisation.

When engineering a formal proof in a theorem prover, blindly applying auto- matic proof tools often leads to a dead end. Usually more successful is the strategy to start with a rough sketch containing a proof idea, and then to try to translate this idea into actual proof steps in the theorem prover. This style of formalising proofs is very much encouraged by the Isar-language of Isabelle [16]. In case of the substitution lemma in the lambda-calculus

The main point of de Bruijn indices and names from the nominal logic work is to allow for more clever methods of representing binders and to substantially reduce the amount of effort needed to formalise proofs. In Section 2 we illustrate this in the context of the substitution lemma. Section 3 contains a brief sketch of the formalisations for the narrowing and transitivity proof of subtyping from the POPLmark-Challenge [3]. Section 4 draws some conclusions.

Like the informal proof by Barendregt, the formalised proof proceeds by in- duction on the structure of M . Unlike the informal proof, however, the induction hypothesis needs to be strengthened to quantify over all indices i and j. This strengthening is necessary in the de Bruijn version in order to get the Lam -case through. With this strengthening the Lam and App case are completely routine.

We have studied formalisations based on de Bruijn indices and on names from the nominal logic work. The former approach is already well-tested featuring in many formalisations, while the latter is still under heavy development in the nominal datatype package. Extrapolating an amazing amount from the submissions to the POPLmark-Challenge, it seems that all problems occurring in programming meta- theory can, in principle, be solved by theorem proving experts using de Bruijn indices. Further, the reasoning infrastructure needed for de Bruijn indices (mainly arithmetic over natural numbers) has been part of theorem provers, for example Coq and Isabelle/HOL, for a long time. In contrast, the nominal datatype package has been implemented in Isabelle/HOL, only. Except some preliminary work reported in [2], there is little work about replicating our results in non-HOL-based theorem provers.

Another advantage of de Bruijn indices is that they do not introduce any classical reasoning into the formalisation process. In contrast, the nominal datatype package employs in several places classical reasoning principles. It is currently unknown whether a constructive variant of the nominal datatype package that offers the same convenience is attainable. Connected with the aspect of constructivity is the infrastructure to extract programs from proofs, which exists in Isabelle for the proofs with de Bruijn indices, but does not exist at all for proofs using the nominal datatype package.

