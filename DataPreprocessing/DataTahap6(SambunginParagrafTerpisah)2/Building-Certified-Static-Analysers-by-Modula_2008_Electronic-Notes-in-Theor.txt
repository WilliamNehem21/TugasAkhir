This paper presents fixpoint calculations on lattice structures as example of highly modular programming in a dependently typed functional language. We propose a library of Coq module functors for constructing complex lattices using efficient data structures. The lattice signature contains a well-foundedness proof obligation which ensures termination of generic fixpoint iteration algorithms. With this library, complex well-foundedness proofs can hence be constructed in a functorial fashion. This paper demonstrates the ability of the recent Coq module system in manipulating algebraic structures and extracting efficient Ocaml implementations from them. The second contribution of this work is a generic result, based on the con- structive notion of accessibility predicate, about preservation of accessibility properties when combining relations.

We first present in Section 2 the module signature that models the kind of lattice we want to build. In Section 3 we motivate this library with a challenging example of lattice to be built in Coq. Sections 4 and 5 then present various lattice functors proposed in the library. Section 4 discusses binary functors, in particular the product functor. Section 5 deals with a functor of functions with various possible implementations. Conclusions are given in Section 6.

The last step concerns the new part of this functor: the proof that the widening operator satisfies its termination criterion. In our previous work [4] the termination criterion for the product of noetherian poset (i.e. that satisfy the ascending chain condition) was proved using a classical result about lexicographic products, but it is not possible for widening operators. Indeed, the key lemma to be established is:

Another important functor concerns functions. Static analyses make heavy use of functions during their computations. Efficiency of the underlying data structures is hence crucial. However proof of termination properties on complex data structures can be hard. This section proposes an abstract notion of function implementation for which we prove termination properties. These proof can then be used for several efficient implementations. We now describe the functor which builds a poset with widening for functions.

We have presented a framework for programming fixpoint computations on lat- tice structures in a dependently typed functional language. In order to construct complex lattices, we propose a library of Coq module functors. We focused our ex- planations on the product and the function functor, but other functors are available in our Coq development.

We have more recently extend our library to handle narrowing operators [7]. Again the technical difficulty relies in the functor product. It is interesting to notice that termination criterion of the narrowing operator is proved with the Theorem 4.6. It confirms that this theoretical result was a cornerstone for our work.

