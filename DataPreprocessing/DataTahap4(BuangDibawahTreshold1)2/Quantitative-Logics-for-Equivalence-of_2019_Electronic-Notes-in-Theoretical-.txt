The use of a Boolean logic does however not readily adapt to several examples of effects, for example the combination of probability and nondeterminism. The lit- erature on compositional program verification shows the usefulness of quantitative (e.g. real-number valued) program logics for verifying programs with probabilis- tic behaviour, possibly in combination with nondeterminism [14,21]. The paper

the examples illustrating the quantitative approach. Some examples such as the combination of nondeterminism with probabilistic choice, or with global store, do not fit into the Boolean-valued framework of [29], but do work here 3. But there are also examples, such as probability, global store, and cost, whose treatment is more natural in our quantitative setting, even though they also fit in the framework of [29].

We use a simply-typed call-by-push-value functional language as in [16,17], together with general recursion and a ground type for natural numbers, making it a call-by- push-value variant of PCF [25]. To this, we add algebraic-effect-triggering operators in the sense of Plotkin and Power [27]. We first focus on the effect-free part of the language, as we want to consider effects independently of the underlying language.

We define a quantitative logic expressing behavioural properties of terms. Each type has a set of formulas, which can be satisfied by terms of that type to varying degrees of satisfaction. These degrees of satisfaction are given by truth values from a countably complete lattice.

Fundamental to the design of the logic is how we interpret algebraic effects. In CBPV, effects are observed in producer types FA. In order to formulate observable properties of FA-terms in our logic, we include a set of quantitative modalities which lift formulas on A to formulas on FA. We bundle our a selection of quantitative modalities together in a set Q.

We add both for neutral nondeterminism. We can see the nondeterministic choice as being controlled by an external agent, which chooses a strategy for resolving the nondeterministic choices, like in a Markov decision process. E.g., E0 and E2 re- spectively maximize and minimize the expected score (see [19] for more descriptions of nondeterminism with probability). Similarly, C0 and C2 respectively minimize and maximize cost.

In this paper, we consider program properties (or observations) as the primary way of describing program behaviour. According to this philosophy, the generalisa- tion to quantitative properties is natural. Alternatively, one could consider relations (or comparisons) as primary, and instead generalise to quantitative relations. The resulting theory is that of metrics, along the lines of [2,4,20]. Relating the logic from this paper, or a variation thereof, to metrics (e.g. like the ones in [7]) is a topic for future research.

The quantitative logic is very expressive, allowing one to deal with some awkward combinations of effects that are not amenable to a boolean treatment. Despite the many examples of combination of effects, there is no general theory for quantitative modalities of combined effects. Such a theory is a potential subject for further research. It would also be interesting to look at other examples of effects which the

