Most (quantum) algorithms take a (classical or quantum) input, calculate, and finally give a (classical or quantum) output. However, this paradigm does not capture the case where a program outputs data before its termination. Then even a non-terminating program may have outputs (possibly an infinitely long one). An example for such a program would be e.g. one that enumerates some set.

We follow the philosophy adapted by [6] and present fully abstract seman- tics for quantum programs with classical output streams. The idea underlying the model is to consider the execution of a program to be a physical measure- ment process on the state of the program. Such a measurement process takes a quantum state as input (the initial state of the system), returns a classical measurement result (the output during the programs execution) and leaves the system in a new state. Such a measurement process can be described by the es- tablished PMVM formalism (cf. Section 1.1). Of course, for a non-terminating program the notion of the state after the execution is not defined, so these programs are to be modelled by measurements without a post-measurement state, so-called POVMs (cf. Section 1.1).

The most interesting construct presented here is that of loops. If non- terminating programs may have outputs, the approach of defining a loop as a least fixpoint is not straightforward. Therefore we present an alternative approach where the semantics of a loop are uniquely defined by some intuitive axioms (see Section 7).

Note that this summary of quantum mechanical formalism does not provide an introduction to quantum mechanics. It is mainly intended to state the nomenclature used in this paper. For a gentler introduction see e.g., [4] or [5], and [1] for the case of POVMs/PMVMs with uncountably many outcomes.

The intuitive meaning of x := a is to assign a to x, and the intuitive mean- ing of the statement (x1,... , xn) := (a1,... , xn) is to assign ai to xi. Note however that using this definition, only the assignment of constant values is possible. In Section 6 we show how to assign the outcome of a measurement. Note that the constructs in this section rely on the implicit or explicit

Let P and Q be mixed measurements. What does the composition QP (Q applied after P ) mean intuitively? First we measure P , yielding outcome xP . Then, if P terminates, we measure Q, yielding outcome xQ. The overall out- come of this experiment shall then be (xP , xQ) or xP (depending on whether Q has been applied or not). This intuition easily gives us the following properties of QP , which turn out to define QP (cf. Definition 2.1):

which are only identical if M and N commute. So if in doubt, explicitly write switch. Also, a program like a:=f(b) could be read as switch (f(b) as x) a:=x (measure f(b) and assign the outcome to a) or switch (b as x) a:=x (measure b and assign f(b) to a). Our convention is to assume the latter case.

would measure the parity of x1,... , xn without performing a complete mea- surement). With such a measurement, getting measurement result m means projecting the state onto the subspace Hm of states where f (x1,... , xn)= m. We mold this into a formal definition:

Here H2 denotes the Hadamard-transform on one qubit, and NOT the bit-flip. If the test a=b fails, a and b are entangled to have opposite values. Otherwise, they are entangled to have the same value, but a gets flipped, so after the if statement they have opposite values, too. So the above example generates an EPR pair.

Assume that a program P and a probability preserving PMVM B with outcomes in {true, false} are given (cf. Definition 6.1). Then the program while (B) P shall intuitively represent the following experiment: Repeatedly measure B. While B yields true, apply P. When B yields false, stop. The overall output shall be the concatenation of the outcomes of all invocations of P.

It turns out to be quite difficult to write the infinite process in the intuitive definition of R in terms of sums and products of operators (as we did e.g. in Definitions 5.1 and 6.3), since no intuitive notion of convergence springs to mind where the following would be meaningful: 9

