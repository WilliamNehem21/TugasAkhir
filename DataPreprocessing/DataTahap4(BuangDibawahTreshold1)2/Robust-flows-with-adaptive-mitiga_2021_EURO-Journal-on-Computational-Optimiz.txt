We use the following robustness measure to take these effects into account: the worst-case shortage still persisting at the the demand nodes after an optimal mitigation has been performed. An optimal mitigation is a flow in the residual network of the supplier capacities that mitigates as much shortage at the demand sites as possible. The goal is to choose a flow that is optimal with respect to this robustness measure.

We describe a mathematical formulation of the problem motivated above based on network flows. It can be considered as a tri-level robust flow problem. We give a linear programming (LP) formulation of the mitigation problem. Using this, we develop a robust problem that takes into account a mitigation that can be chosen adaptively on the scenario. The set of scenarios can be implicitly represented by the integral points of a chosen polyhedron. Thus, the set of scenarios can be chosen arbi- trarily large and customized to the risk assessment.

The Outer Linearization Algorithm is based on a LP reformulation of the entire problem. The Scenario Enumeration Algorithm adds cuts for every scenario to an LP and re-solves it until convergence. The Iterative Cut Generation Algorithm iteratively finds the worst-case scenario for the current solution and adds a corresponding cut to the LP.

Bertsimas et al. (2013b) consider a similar problem as discussed in this paper. They describe a model for adaptive network flows. The goal is to find a nominal flow such that in case of arc failures the maximum flow value is maximized in the network where the arc capacities are given by the nominal flow values. The main difference to our model is, that we consider the amount of flow that is lost by supply failures and that our mitigation flow is bounded by the residual capacities in the network. Thus, both the structural properties of our problem and the corresponding algorithm are different. Also, our focus is more on obtaining exact optimal solutions instead of approximations.

the worst-case scenario for the current solution is found by solving a MIP. A corresponding cut is added to the LP which is then re-solved. This is repeated until the evaluated robustness of the current solution matches the bound given by the optimal LP objective value.

This paper is organized as follows: In Section 2 we formally define the basic model. In Section 3 we show that evaluating a given flow for its robustness in the adaptive setting is NP-hard. Section 4 presents our al- gorithms, the corresponding experimental results are given in Section 5. We conclude in Section 6 where we also discuss extensions of the basic model.

ity of the supplier. Failures do not need to be considered here because of (2b). Constraint (2d) ensures that at each demand node the amount of mitigation is not higher than the shortage. Since the failure x and the nominal flow f are given explicitly in the mitigation problem, it corre- sponds to a capacitated transportation problem which can be solved in polynomial time (Ahuja et al., 2014).

without changing the set of feasible solutions to this linear program. However, the later reformulations in our algorithms would be affected. It would lead to cuts that are less restricting and thus to longer running times. In particular, the running time of the Iterative Cut Generation Algorithm described later would increase by a factor of up to 10.

can be chosen after the realization of the scenario. We assume that the nominal flow f cannot be adapted to the scenario. In practice, this re- striction is due to the fact that already agreed on shipments often cannot be changed anymore. Procurement contracts are often binding for rela- tively long time frames and produced material is in many cases specifi- cally customized to the destination. Hence, for the mitigation, only more flow can be sent, subject to the residual capacities. We assume that the capacity for mitigation is bounded by the same constraints as the nomi-

maximal possible amount of mitigation allowed by the arc capacity. This does not interfere with the mitigation for other demand nodes. Hence each demand node can be considered separately. Note that we cannot mitigate more than the shortage. Hence the unmitigated amount at the demand node d is given by

The finite convergence of Algorithm 2 can be seen as follows: Each solution of the IP (7) corresponds to a cut in the network. The robustness value is completely characterized by the capacity of these cuts. Thus, at the latest after all possible cuts have been added, the algorithm termi- nates.

The advantage of the Scenario Enumeration Algorithm 1 compared to the Iterative Cut Generation Algorithm 2 is its flexibility: Scenarios can be chosen arbitrarily. Also, with a slight modification we can assign probabilities to the scenarios to model not only worst-case robustness but also probabilistic robustness in the form of: The unmitigated value with 95% probability is at least a given value. This allows to optimize with respect to alternative risk measures, like the conditional value-at- risk, which are heavily used in financial mathematics (Rockafellar and Uryasev, 2000).

We implemented the algorithms presented above in Python 3.7. For solving the LPs and IPs we used Gurobi version 8.1 (Gurobi Optimiza- tion, LLC, 2019). The max-flow problems in the Scenario Enumeration algorithm are solved with NetworkX (Hagberg et al., 2008). The bench- marks were run on a personal laptop running Windows 10 with an Intel i7-8665U CPU with 1.9 GHz and 16 GB of RAM.

The Iterative Cut Generation Algorithm is overall the fastest algo- rithm. However, for very small scenario sets, the Outer Linearization Algorithm is faster. For large scenario sets, the Iterative Cut Gener- ation Algorithm is especially suited, since the running time does not increase when the number of suppliers considered in a failure sce- nario increases.

The robust flow model can be extended in various ways. We present here briefly some of those extensions. In most cases, the Iterative Cut Generation Algorithm 2 can be adapted to also solve these extended problems by modifying the outer LP or the inner evaluation IP.

Placement of depots: Additional capacities for mitigation can be in- stalled by opening some depots out of a given set of possible lo- cations. For these depot capacities, a budget is given. The goal is to find an optimal choice of the depots together with an optimal flow.

Future work might consider the above extensions in more detail. The combination with a more detailed model of the sources of failure can lead to further insights. The structural properties of supply chains that are optimal with respect to the robustness measure might be interesting to supply chain practitioners. Also, a more detailed study of the factors

