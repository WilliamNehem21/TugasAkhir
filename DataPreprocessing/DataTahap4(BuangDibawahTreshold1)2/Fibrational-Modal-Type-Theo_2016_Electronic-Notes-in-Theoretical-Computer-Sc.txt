categorical semantics. In the next section we describe a system that like [8] has its origins in Prawitz work, and takes as guiding intuition the categorical modelling of the Curry-Howard correspondence in the style of [6]. Thus we think of modal sys- tems as defined on the same level as their intuitionistic counterparts. Our original motivation was the re-use of the machinery dealing with reduction of the simply typed lambda-calculus.

Weakening for both kinds of variables is admissible because of the typing rule for these variables. Contraction of both kinds of variables follows from the additive way contexts are combined. Exchange is also admissible. Note that we could also have rules for logical conjunctions and disjunctions, but we prefer to concentrate on the essential connectives implication and modality.

The more complex nature of contexts in DIML results in a more subtle meta- theory. Just as there are two rules for typing variables, so there are two substitution lemmas depending on the nature of the variable being substituted. As we learned from the linear lambda-calculus we need an appropriate, double substitution lemma, catering for both kinds of variables, see below. Observe that forgetting about the terms in the lemma below, we obtain two forms of the cut rule, which we can show are admissible in DIML.

We can also model the DIML type theory via fibrations, instead of adjunctions. The usual fibration modelling framework was developed for theories with dependent types. One can use this framework for modelling theories without dependent types by imposing a strong restriction, discussed below.

Having defined a fibrational semantics for constructive modal type theory where all the type constructors are simple types, we now want to have modalities that are themselves dependent types over a system of dependent products. This is the main innovation of this paper. We are not aware of any other work which described dependent modalities as these S4 necessity modalities we describe here.

However the meta-theory of dependent type theories is usually very subtle. In particular subject reduction becomes an important theorem. Luckily we can use the same methodology that is used to show these theorems for standard dependent type theory. As before we have two kinds of substitution lemma:

There is a substantial difficulty in adding the rules for universes to the rules for the dependent products, dependent sums and identity types. These three groups of rules are independent from each other and can be studied separately. The rules for a universe connect the rules from these three groups to each other making it necessary to coordinate their interpretations.

Given the work just presented, we would like to add that there seem to be also modal rules, a fifth class of rules, that appear to be independent from the other sets of rules as well. For a fragment of these (the box-only S4 modal rules), together with dependent products we can provide well-behaved type theories as well as well- behaved categorical semantics in terms of (split indexed) fibrations. We do not know whether it helps or hinders the Homotopy Type Theory program.

We have described modal type theories (a non-dependent) DIML and a (dependent) depDIML for the operator corresponding to constructive necessity in the logic. We showed that these type theories are well-behaved proof-theoretically: their reduc- tion calculus satisfies subject reduction, is confluent and strongly normalising, with modular proofs. We provided fibrational models for both of these modal type the- ories, which we proved sound and complete, using some established and trusted technology. To sum up, this version of constructive necessity is extremely well- behaved, as witnessed by the fact that both the type-theoretical properties as well as the categorical semantics are modular and parallel to each other. Moreover, ex- plicit substitutions [1] can be added to both dependent and non-dependent versions of the type theory, with appropriate operational semantics, if desired. We left to future work to decide whether this modal type theory is useful for Homotopy Type Theory.

