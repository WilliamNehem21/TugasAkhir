Incorporating symmetries. A container is a rigid data structure: it does not allow for data to be permuted in any way among the positions of a given shape. In many situations it is desirable to allow for permutation, so that certain posi- tions within a shape become indistinguishable. In quantum physics, the principle of indistinguishable particles imposes such symmetry at a fundamental level. A fundamental example is the multiset data type, whose extension is the functor

From the viewpoint of species, there are other reasons for this upgrade anyway. In fact, it was soon realised by combinatorists that the 1985 notion of analytic functors is not optimal for enumerative purposes: taking cardinality simply does not yield the exponential generating functions central to enumerative combinatorics! (It does so if the analytic functor is polynomial.) In fact, the Species Book [11] does not mention analytic functors at all.

The issue was sorted out by Baez and Dolan [9]: the problem is that dividing out by the group action in (2) is a bad quotient from the viewpoint of homotopy theory, and does not behave well with respect to cardinality. To get the correct cardinalities, it is necessary to use homotopy quotients, and the result is then no longer a set but a groupoid, and the cardinality has to be homotopy cardinality. So it is necessary to work from the beginning with groupoids instead of sets. Baez and Dolan introduced species in groupoids (3.6), dubbing them stuff types, showed that homotopy cardinality gives the correct generating functions, and illustrated the usefulness of the broader generality by showing how the types needed for a combinatorial description of the quantum harmonic oscillator are stuff types, not classical species [9].

(2) says that every edge is the input edge of a unique node, except the root edge. Condition (3) says that if you walk towards the root, in a finite number of steps you arrive there. The edges not in the image of t are called leaves.

Trees  of  Feynman  graphs.   In the so-called BPHZ renormalisation of perturbative quantum field theories, one is concerned with nestings of 1-particle irreducible (1PI) Feynman graphs, i.e. graphs [30] for which no single edge removal disconnects. Kreimer [36] discovered that the BPHZ procedure is encoded in a Hopf algebra of (non-planar) rooted trees, expressing the nesting of graphs.

