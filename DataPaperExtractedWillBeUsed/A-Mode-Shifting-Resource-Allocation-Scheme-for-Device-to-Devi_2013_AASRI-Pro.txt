 AASRI Procedia  5 ( 2013 )  40 – 47 
2212-6716 © 2013 The Authors. Published by Elsevier B.V.
Selection and/or peer review under responsibility of American Applied Science Research Institute
doi: 10.1016/j.aasri.2013.10.056 
ScienceDirect
2013 AASRI Conference on Parallel and Distributed Computing and Systems 
A Mode Shifting Resource Allocation Scheme for Device-to-
Device Underlaying Cellular Network 
Junshu Gao, Xuewen Liao, Jianguo Deng, Pinyi Ren 
Electrical Engineering and Computer Science 
The School of Electronic and Information Engineering 
Xi’an Jiaotong University 
Xi’an, People’s Republic of China 
 
Abstract 
Device-to-Device (D2D) communication underlaying a cellular network is a promising technique, and it has recently   
been proposed for booming local services, which will greatly improve system capacity by sharing the same resource 
blocks of cellular users at the same time. However, the mutual interference brought by inappropriate resource reuse will 
deteriorate the performance of the whole system. In this paper, a mode shifting resource allocation scheme is presented 
without channel state information (CSI) of D2D link and D2D user to cellular user link. D2D pair traditionally shares 
resource block of cellular user with the best channel to reduce the relative interference to cellular link. While in the other 
way, for the same purpose, the D2D user  can also reuse the resource block over which its transmitter has the worst 
channel between itself and base station (BS), in addition a simple strategy is put up to select the reusing mode that 
provides larger capacity. Numerical results show that our proposed scheme performs significantly better than reference 
scheme in terms of system capacity and outage probability of cellular link, besides the scheme will not cause any extra 
complexity. 
 
© 2013 Junshu Gao, Xuewen Liao, Jianguo Deng, Pinyi Ren. Published by Elsevier B.V. 
Selection and/or peer review under responsibility of American Applied Science Research Institute 
 
Keywords: Device-to-device (D2D) communication, resource allocation
 mode shifting; 
 
Available online at www.sciencedirect.com
© 2013 The Authors. Published by Elsevier B.V.
Selection and/or peer review under responsibility of American Applied Science Research Institute
Open access under CC BY-NC-ND license.
Open access under CC BY-NC-ND license.
41
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
Section 1.  Introduction 
In recent a couple of years, the scarcity of spectrum have drawn much attention from companies and 
research institutes, and to provide some additional technique for local service may be a practical way to solve 
this problem. A researcher from Nokia and his team have firstly brought the conception of device-to-device 
(D2D) communication mode into LTE cellular network [1]. Different from other techniques based on the 
infrastructure of cellular network, D2D pair can set up a link and communicate directly as Fig. 1 shows. In 
cellular network, when D2D users share the same spectral resource blocks (RBs) with some cellular users, the 
spectral efficiency will be improved. Meanwhile the cellular user will be influenced by the interference from 
D2D transmitter. To better control the interference, BS will be still in charge of assigning the sharing RBs to 
D2D devices. Due to its higher spectral efficiency and simple signaling, D2D communication may be an 
efficient part of future network as a supplement communication. Already existing research mainly contains 
two parts: power allocation and transmission mode selection. In [2-6], satisfactory results have been obtained 
in different scenarios on power control and communication mode selection. 
                           
Fig.1. LTE network with D2D link                                            
 
Fig.2. System model of D2D link and one cellular user sharing the same RB. 
42  
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
Yu et al. proposes a simple power control scheme for D2D transmitters on the condition that signal-to-
interference-plus-noise-ratio (SINR) distribution could be derived by statistical methods. So the system can 
set a certain threshold to control the interference from D2D users [2]. Also, their advanced research includes 
another power allocation scheme, in which BS dynamically coordinates the interference between the cellular 
link and D2D link without suspending the cellular link service [3]. What’s more, Hakola describes the system 
throughput by equations to analyze the performance of the system in the cellular network with D2D 
communication mode [4]. In [5], a mode selection procedure has been concluded which takes into account the 
link quality and the situation of D2D pair, when D2D users share either cellular uplink or downlink resource, 
and the working mode of D2D user depends on the values of the two parameters. Furthermore, a more 
detailed power control scheme for D2D devices is proposed, which changes the D2D transmitter power in 
dynamic tuning step [6]. In fact, research in field of resource allocation also improves the performance of 
whole system significantly, and a resource allocation scheme is proposed which allocates appropriate resource 
for D2D users according to the lowest data rate of cellular user as needed to ensure the QoS of cellular user 
[7]. All the research requires that the original power allocation and signaling protocols in LTE network need 
to be changed, and this will affect the compatibility of the algorithm with the original system.  Especially 
when BS needs to know the CSI of those links which are not linked to it directly, the system will pay a lot 
more for signaling overhead. 
In this paper, no power allocation or other relevant protocols in original LTE network will be changed, and 
we are chiefly concerned with how to exploit the difference of channel state information (CSI) when D2D 
transmitter occupies different RBs, and then propose a resource allocation scheme that enhances the signal or 
reduces the interference separately. According to the CSI of cellular users and the CSI of D2D transmitters to 
BS, the system will properly select out the resource allocation mode with larger capacity. The rest of this 
paper is structured as follows. Section 2 describes the basic model when D2D communication exists in LTE 
networks. The detailed proposed resource allocation mechanism is given in Section 3, and Section 4 presents 
some convincing numerical results. The last section comes to the conclusion. 
Section 2. System Model 
Suppose the resource allocation process of cellular users has been complete, then the BS collects the CSI 
of cellular user and D2D transmitter. BS allocates proper resource to D2D users according to the channel 
information linked to it and maximizes the system capacity. In order to achieve higher throughput, we 
formulate the problem as an optimization process of allocating appropriate RBs to D2D users. Users in a D2D 
link enabled network can communicate with each other directly as shown in Fig. 2. C1, C2, C3 and C4 
represent cellular users. Moreover, D1, D2, D3 and D4 are D2D users. The SINR of D2D pair d and the cellular 
user c are calculated as 
d and
c  : 
 
0
d
c
d
dd
c
d
d
c
c
cd
c
P g
N
P g
                                                                                                                        (1) 
0
c
cB
c
d
c
d
dB
d
P g
N
P g
                                                                                                                         (2) 
The problem comes out to be an optimising problem as below: 
43
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
D
C
C
d
c
c
d
c
c
d
c
c
Maximize
n C
n C                                                                                                        (3) 
arg
0
. .
(
),
t
et
d
c
cB
c
c
d
dB
d
s t
P g
N
P g
                                                                                            (4) 
arg
( 0
);
d
t
et
d
c
d
dd
d
c
c
cd
c
c
P g
N
P g
                                                                                (5) 
1;
d
c
d
 
1;
d
c
c
                                                                                                                  (6) 
Nomenclature 
d
c            an indicator variable that 
1
d
c
 when D2D pair d shares RB(s) with cellular user c , otherwise 
            
0
d
c
 
gcd
       the channel gain between cellular user     and  receiver of D2D pair d  
dP           the transmitting power of D2D pairs 
cP          the transmitting power of cellular users 
gdd
        the channel gain between D2D pair 
cB
g         the channel gain between  BS and cellular user      . 
0
N          the power spectral density of  AWGN 
Formula (3) is the optimization objective. Conditions in (4) and (5) guarantee the lowest SINR of the 
cellular link and D2D link, and the constraint in (6) ensures that different cellular users will occupy different 
RBs and each RB can only be reused by one D2D pair at most. In order to integrate the D2D communication   
in to LTE network smoothly, the uplink power control has been applied to cellular users and D2D transmitters 
[8], so here we can ignore the impact of different distances to BS and the receiving power of cellular user and 
D2D user are equal at BS. However, solving the aforementioned problem seems still impossible within such a 
short time delay in LTE networks.  
Section 3. Proposed resource allocation scheme 
In the model described previously, we can find that the problem comes out to be a MINLP one, and an 
exhaustive searching scheme could get a solution under the condition that when we simplify some constraints 
of the problem, however, even so the complexity of exhaustive searching scheme   is exponential, and it goes 
beyond the range that the system can support when the numbers of cellular users and D2D pairs become large. 
Thus some simple heuristic algorithms are needed. 
3.1 Reference scheme 
In literature [9], the authors have proposed a resource allocation algorithm that improves network 
c
c
44  
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
performance in terms of the system capacity. The proposed scheme selects out the best several resource 
blocks of cellular users, and then assigns to D2D pairs in a decreasing order. Through careful observation of 
the expression of
c , we can see that higher channel gain (
gcB
) from cellular user c to BS could obtain 
higher
c . Thus, any cellular user with high channel coefficient can share RBs with the D2D pairs. For each 
RB selected out, the D2D pair whose channel gain between its transmitter and BS is lowest will reuse it, and 
that is to make the maximum in expression (7): 
2
log (1
)
C
celluar
c
c
C
B
                                                                                                                       (7) 
3.2 Proposed scheme 
In our proposed scheme, we not only follow the scheme that assigns the best RBs for cellular users, but 
also focuses on the worst resource block for D2D users in the links between D2D transmitters and BS 
separately to control the interference source.  This would be a perfect supplement to the reference scheme 
without any extra complexity. The scheme can be divided into three steps. 
Step 1:  BS selects out several best resource blocks, as the process has been shown in Algorithm 1, and BS 
will finally get a resource allocation matrix 
d (1)
c
 .Then BS computes the whole capacity under this condition. 
(1)
(1)
D
C
C
d
c
c
d
c
c
d
c
c
C
n C
n C                                                                                                       (8) 
Step 2: BS selects out the resource blocks according to the CSI of one particular D2D pair on each RB that 
could be reused. If the worst resource block for each D2D pair is different, then BS will update the resource 
allocation matrix at once. Otherwise the D2D pair that has the lowest channel gain will share resource block, 
other D2D pairs continue to check its second worst resource block, until each D2D pair has one particular 
resource block to share as shown in Algorithm 2. Then BS computes the whole capacity as (9): 
(2)
(2)
D
C
C
d
c
c
d
c
c
d
c
c
C
n C
n C                                                                                       
                  
(9) 
Step 3: BS compares the capacity of algorithm 1 and algorithm 2, and then it chooses the one that has a 
larger capacity during the time slot. 
max( (1),
(2))
C
C
C
                                                                                                                             (10) 
Repeat the process in every time slot. Actually, the feature of our proposed scheme is considering either 
the CSI of cellular users first or D2D pair first.  In addition, we can figure out that the complexities of the two 
algorithms are the same. Our scheme is the combination of the two algorithms, so the complexity of our 
proposed scheme is the same magnitude as the reference one. 
 
 
 
 
45
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
Table 1.     Algorithm 1 and algorithm 2 
1.   C  : list of Sorting the CSI for users in decreasing order                              2. 
d
G : list of sorting the CSI of D2D pair d  on  
                                                                                                                                          each RB in increasing order.   
D :  List of D2D pairs  to reuse RBs                                                                 D : List of D2D pairs  to reuse RBs 
  begin                                                                                                                      N:  set of RBs that can be reused 
        c=1;                                                                                                                    begin  
        while  D
 and c
C  do                                                                                   d=1; 
        Pick RBs with c
largest value                                                                         while N
 and D
  do 
Choose the D2D transmitter d of which                                                               Choose RBs with smallest 
gdB
from 
d
G   
channel gain 
gdB
is minimum                                                                      For different D2D  pairs,  smaller 
gdB
will share the RB  
0
c
cB
c
d
c
d
dB
d
P g
N
P g
                                                                                 
0
c
cB
c
d
c
d
dB
d
P g
N
P g
 
0
d
c
d
dd
c
d
d
c
c
cd
c
P g
N
P g
                                                                                   
0
d
c
d
dd
c
d
d
c
c
cd
c
P g
N
P g
 
                    if  
targ
et
c
c
 and  
t arg
et
d
d
                                                                           if  
targ
et
c
c
 and  
t arg
et
d
d
 
                   share RBs with D2D pair d                                                                                      share  RBs with D2D pair d  
                                                                                                                                                                          
                   else  do not share RBs with D2D pair                                                                        else  do not share RBs with D2D pair  
                   end                                                                                                                          end 
end                                                                                                                                 end 
 
Section 4. Simulation and results analysis 
In this section, we provide the numerical results for our proposed scheme. We suppose that the RBs that 
each cellular user occupy have the same channel gain for simplicity. In a single cell with ten cellular users and 
several D2D pairs distributed uniformly, we obtain the capacity of relevant cellular users and D2D pairs, and 
the outage probability of the cellular user will be given out as well. The pass loss model is
( )
P d
cd
, where 
( )
P d is the receive power at distance d. c is transmit power and 
is the pass loss exponent, and the values 
of other parameters are set the same as those in [9]. 
0
2
4
6
8
10
12
14
16
18
20
10
4
SNR
dB
Capacity
kbps
 
 
Proposed scheme
Reference scheme
Exhaustive searching scheme
 
Fig. 3(a) The capacity one D2D pair            
{ };
1;
D
D
d
c
c
d
d
{ };
1
D
D
d
d
d
46  
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
0
2
4
6
8
10
12
14
16
18
20
104
10
5
SNR(dB)
Capacity (kbps)
 
 
Proposed scheme
Reference scheme
Exhaustive searching scheme
 
Fig. 3(b)The capacity of four D2D pairs              
0
2
4
6
8
10
12
14
16
18
20
10
-3
10
-2
10
-1
10
0
SNR
dB
Outage
 
 
Proposed scheme
Reference scheme
Exhaustive searching scheme
 
Fig. 4 The outage probability of cellular user 
Fig. 3(a) (b) illustrate that when one D2D pair or more D2D pairs are set in the cell randomly. As Fig.5 
shows, our proposed scheme performs much better compared with the reference scheme in terms of the 
system capacity at the same level complexity. Fig. 4 shows the outage probability of the particular cellular 
user whose resource block is reused. The outage probability of our proposed scheme is only one tenth of the 
reference one when the SNR is 20dB and the threshold rate is 1bps/Hz. Finally, we analyze the impact of 
number of D2D pair on the gain that our proposed scheme obtains. It can be seen clearly that the gap between 
the exhaustive searching scheme and our proposed scheme becomes wider when the number of D2D pair 
increases. For the number of D2D pair increases, BS will select out more resource blocks. However, among 
the selected resource blocks to be reused, we have not yet aimed at the optimal allocation scheme that 
provides maximum capacity under this condition, and we only allocate the resource blocks selected based on 
some simple rules (i.e. the D2D transmitter with lower channel gain will reuse the RB) without increasing the 
algorithm complexity. The simple allocation principles will influence the performance of the system more 
significantly when the number of D2D pair becomes larger. 
Section 5. Conclusion  
In this paper, we study the problem of resource allocation in a D2D link enabled network, where D2D 
users can share the resource blocks with cellular users. Taking full advantage of CSI known at BS, we 
47
 Junshu Gao et al. /  AASRI Procedia  5 ( 2013 )  40 – 47 
proposed a modified resource allocation scheme based on some existing research results, while the 
complexity remains unchanged. In terms of the average capacity and outage probability, the simulation results 
show that our proposed scheme performs better than the reference scheme. 
Acknowledgements 
This work is supported by National Science and Technology Major Project (2010ZX03003-004-01), 
Science and Technology Program of Shaanxi Province
No.2011K06-10) 
References 
[1] K. Doppler, M. P. Rinne, C. Wijting, C. B. Ribeiro, and K. Hugl, “Device-to-device communication as an 
underlay to LTE-advanced networks,” IEEE Commun. Mag., vol. 47, no. 12, pp. 42–29, Dec. 2009. 
[2] C. H. Yu, O. Tirkkonen, K. Doppler, and C. Ribeiro, “On the performance of device-to-device underlay 
communication with simple power control,” in Proc. IEEE VTC 2009-Spring, pp. 1-5, Apr. 2009. 
[3]Chia-Hao,Yu, O. Tirkkonen, “Power optimization of device-to-device communication underlaying cellular 
communication,” Communications. 2009,ICC ’09. IEEE International Conference on, pp.1-5 , 2009. 
[4]S. Hakola, Tao Chen, Lehtomaki, Koskela,“Device-to-Device (D2D) Communication in Cellular Network-
Performance Analysis of Optimum and Practical Communication Mode Selection,”  Wireless Communication 
and  Networking  Conference (WCNC),  2010 IEEE 
[5]K. Doppler, C. H. Yu, C. Ribeiro and P. Janis “Mode selection for Device-to-Device Communication 
underlaying  an LTE-Advanced Network ” Wireless Communication and  Networking  Conference (WCNC), 
2010 IEEE,April 2010. 
[6]Hongnian Xing, and Sami Hakola, “The Investigation of Power Control Schemes for a Device–to-Device 
Communication integrated into OFDMA Cellular System”, Personal Indoor and Mobile Radio 
Communications (PIMRC), 2010 IEEE 21st International Symposium on ,pp.1775-1780, Sep.2010 
[7]Xiaoyue Zhu and Si Wen, “QoS-based Resource Allocation Scheme for Device-to-Device (D2D) Radio 
Underlaying Cellular Networks”, in IEEE International Conference on Telecommunications, 2012 
[8]Stefania Sesia, Issam Touﬁk and Matthew Baker. LTE-The UMTS Long Term Evolution: From Theory to 
Practice; 2009; ISBN: 978-0-470-69716-0. 
[9]M.Zulhasnine and C.Huang “Efficient Resource Allocation for Device-to-Device Communication 
Underlaying LTE Network”,  in IEEE Wireless Communication and Network Conference(WCNC), Sydney, 
Australia,April,2010 
