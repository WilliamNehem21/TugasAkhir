 AASRI Procedia  8 ( 2014 )  93 – 99 
Available online at www.sciencedirect.com
2212-6716 © 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license 
(http://creativecommons.org/licenses/by-nc-nd/3.0/).
Peer-review under responsibility of Scientific Committee of American Applied Science Research Institute
doi: 10.1016/j.aasri.2014.08.016 
ScienceDirect
2014 AASRI Conference on Sports Engineering and Computer Science (SECS 2014) 
A Magnetic Microsystem on a Chip 
Janez Trontelj* 
University of Ljubljana, Faculty of Electrical Engineering, Tržaška 25, 1000 Ljubljana, Slovenia 
 
Abstract 
A magnetic microsystem has been designed on a chip to demonstrate the improved performance of an integrated Hall 
element. The major deficiencies of relatively poor performance of an integrated Hall element has been upgraded through 
the use of a high efficiency, integrated micro coil, which has been optimized using multiphysics finite element tools. An 
extensive characterization of the integrated Hall element has allowed the creation of the most complete simulation model, 
which is usable both in a high level system simulator as well as in a detailed circuit simulation. All results were verified 
by measuring the fabricated ASIC. 
 
© 2014 Janez Trontelj. Published by Elsevier B.V. 
Selection and/or peer review under responsibility of American Applied Science Research Institute 
 
Keywords: magnetic microsystem; self calibation of magnetic microsystem; integrated micro coil  
1. Introduction 
Magnetic Microsystems are used in various applications where the magnetic field carries information about 
the current, the magnetic force, or the position. In all cases the required measurement needs to be extremely 
accurate and independent of any environmental condition. 
For current measurements the typical requirement is a linearity range extending over five or six decades. 
The required linearization and absolute accuracy for a magnetic force measurement is in the range of 0.1% /1/, 
and for the position or rotation angle a 12-bit resolution is a typical specification /2/. There are two or three 
 
 
* Corresponding author. Tel.: +386-1-4768-335; fax: +386-1-4264-644. 
E-mail address: janez.trontelj1@guest.arnes.si. 
© 2014 The Authors. Published by Elsevier B. V. This is an open access article under the CC BY-NC-ND license 
(http://creativecommons.org/licenses/by-nc-nd/3.0/).
Peer-review under responsibility of Scientific Committee of American Applied Science Research Institute
94  
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
possible sensor types of magnetic field available for integration on a chip. There are: Hall-effect sensors, Hall 
elements near field micro coils, and large, integrated coils for AC field generation /3/. The Hall element and 
near field micro coil are investigated in the paper. 
2. Integrated Hall element 
The key parameters of an integrated Hall element are the following: 
� Sensitivity. It is well known that the sensitivity of a Hall element is poor compared to MR or GMR 
sensors, which prevent many designers from using them in their magnetic circuits. However, we will 
demonstrate that in most cases it is possible to effectively compensate for this deficiency. The typical 
sensitivity of an integrated Hall element is around 100μV/1mAmT (100V/AT) in a standard CMOS process, 
while its noise is about 10nV/�Hz.  This means that the equivalent noise is �10nT�Hz at 1mA Hall element 
bias current. The achievable dynamic range in a 1Hz frequency bandwidth is over 100dB. 
� An important parameter is also the temperature coefficient of the Hall element sensitivity, which is highly 
non-linear and very process dependent. Unfortunately, the sensitivity is also dependent on the mechanical 
stress caused by the plastic package. There are few possibilities of converting such an inaccurate sensor 
element into a high precision sensor system. The most promising approach is an alive sensor sensitivity 
calibration using a near field micro coil. 
� Last but not least, the residual offset of the Hall element is an issue to be considered. The root cause of it 
is the asymmetry of the four terminal devices, which can be modeled as a resistor bridge. A well-known 
spinning technique /4/ is the way to minimize the offset. Less known is a requirement that the spinning needs 
to rotate around a fixed voltage potential of a central sensor point, as shown in Figure 1.  
 
Fig.1. Central geometrical point of Hall element stabilized during spinning at various Hall element bias currents 
R
R
+
�
Vb – variable bias current
Hall 
element
Vdd
Vcenter
Vss
VHall
95
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
Finally, the remaining offset voltage is trimmed with both a DC value and its temperature coefficient. 
With such arrangements the achievable offset can be reached in the range of ±10μT. An important issue to 
design a Hall-element sensor is to have an extensive and well characterized simulation model. The 
complexity of the model is seen in Figure 2. 
Fig.2. Model elements of integrated Hall element for 0.35μm mixed signal CMOS technology 
As can be seen, the model is very complex with 20 voltage controlled resistors, 8 voltage controlled current 
sources, 8 current controlled current sources, 7 measuring resistors, 3 voltage sources for current measuring 
and four non-linear and voltage-dependent well resistors. 
3. Near-field micro coil 
The key function of near-field micro coil is to generate a relative strong reference magnetic field on board 
to be used for either online or offline Hall element sensitivity adjustment. The offline adjustment can be 
performed either at wafer sorting or final testing of the device by applying a reference current to the coil and 
measuring and trimming the Hall element response to the desired value. The application of this method is 
simple, however it does not cover the temperature effect of the sensitivity, nor the sensitivity variation due to 
package pressure effect. 
It is advisable to use a bipolar coil current for the magnetic field excitation and observing the response as a 
difference in both coil current directions as follows:  
Vout + Voff - (- Vout + Voff ) = 2 Vout
L
D
rul
rdl
rdr
rur
VCR
VCR
VCR
VCR
VCR
VCR
VCR
VCR
k1Bint
k2Bext
k1Bint
k1Bint
k1Bint
k2Bext
k2Bext
k2Bext
k6I2
k6I2
VCR
VCR
k6I2
k6I2
BIn
vm
hIn
vs
rm
rcoil
hOut
R
rr
U
ru
VCR
Off
voff
roff
k5Voff
VCR
k5Voff
VCR
k5Voff
VCR
k5Voff
rl
rd
k6I2
k6I2
VCR
VCR
k6I2
k6I2
96  
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
which eliminates the offset voltage and any external magnetic field which is not in phase of the coil current 
alternation. Figure 3 shows the application of this principle. 
External resistor Rext is used as accurate voltage to current conversion. The voltage is adjustable according 
to the evaluation circuit as shown in figure 3 
A study of the efficiency of the reference micro coil has been performed to maximize the generated 
magnetic field versus the coil current. 
Fig.3. Bipolar reference coil current generation 
97
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
The most important parameters affecting the efficiency parameters are: numbers of coil turns per metal 
level, the number of metal levels, the coil area, and its position to the Hall element. The area of the Hall 
element has been reduced to 14μm by 14μm as shown in Figure 4, and was optimized for the 0.35 CMOS 
mixed signal technology /5/.  
 
Fig.4. Hall element layout in 0,35um CMOS technology 
In Figure 5a the 3D 12-turn micro coil layout is presented, and in Figure 5b a micro photograph of the 
element is shown. The four terminal Hall element is upgraded to the six terminal providing an on-board 
reference magnetic field generation of 5mT at a 10mA coil current. This is a decent level for a reference field, 
which cannot be compromised by noise even if a very short reference pulses would be applied. When using a 
bipolar reference pulse the problem of offset voltage is eliminated. 
Furthermore, the reference magnetic field should not interfere with normal measurements, so it is 
necessary to perform the calibration at the higher frequency, which is outside the operating bandwidth of the 
system. A good candidate is a spinning frequency, which is usually up to two decades above the operating 
corner frequency of the magnetic system. If the reference current pulse starts in the first spinning cycle, it 
would contribute a positive reference voltage to the output, so the output voltage would be the sum of signal 
voltage Vsig and the reference voltage Vref. The resulting output voltage Vout is: 
Vout = Vsig + Vref.  
98  
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
In the second spinning cycle the reference current is reversed and also the Vout is inverted and sampled to 
a negative input of the summator, so the residual output voltage Vres is:  
Vres = Vsig + Vref – (-Vsig + Vref).  
Therefore, Vres is not disturbed by the reference signal:  
Vres = Vsig + Vsig. 
The signal of the reference voltage in both spinning cycles is on the contrary sampled to a summator, so 
the residual voltage Vrefres of the reference voltage is:  
Vrefres = Vsig + Vref + (-Vsig + Vref) = Vref + Vref. 
 
Fig.5a. 3D layout of the micro coil 
 
Fig.5b. Photomicrograph of the fabricated micro coil 
99
 Janez Trontelj /  AASRI Procedia  8 ( 2014 )  93 – 99 
This is an elegant, out of band generation of the reference voltage without disturbing the normal operation. 
The error signal is produced by comparing the residual reference voltage to a required voltage and simply 
adjusting the sensitivity of the system to an accurate level by changing the Hall element bias current. A high 
level model has been designed and the result of simulation is shown in Figure 6. The measured results match 
very well with the simulation, proving that it is an effective way to calibrate the sensor on-line, without 
disturbing the normal operation. 
The red line is the preset reference voltage to be reached at reference field, generated by the micro coil. 
The blue line is the actual signal value reaching the required value after the self-regulation is completed. The 
step shows the digital or discrete gain settings. Therefore the output is alternating around the final value. This 
alternation frequency is outside of the system bandwidth and it is easily filtered out. 
 
Fig.6. Automatic gain regulation of the sensor using the on-line calibration algorithm 
4. Conclusions 
An accurate magnetic system on chip has been designed, simulated, fabricated, and characterized using 
what’s known as a six terminal Hall sensor with an incorporated near field micro coil. The measured results 
confirmed the concept. 
References 
[1] Trontelj, J.; Šmid, B. “Magnetic system for absolute force measurement with improved linearity” Patent 
no. P-201000306. Issued 5. 11. 2010. Ljubljana, Slovenia 
[2] Trontelj, J.; Trontelj, L. “Magnetic Micro-sensor ASIC for Position Encoder.” 23rd International 
Conference on Microelectronics - MIEL 95 [and] 31st Symposium on Devices and Materials, (Rogla, 
Slovenia). Proceedings. Ljubljana, MIDEM, 1995, 137–141. 
[3] Trontelj, J. “Integrated circuit with magnetic sensors, surrounded with test coils”, patent no.  
SI 20294A: dated 31.12.2000. Ljubljana: Office RS for intellectual property, 2000 
[4] Munter, P. “Spinning-current method for offset reduction in silicon Hall plates,” Delft University Press, 
1992 
[5] ŠMID, Blaž. “Advanced magnetics micro sensor system design”, Ph.D.: thesis. Ljubljana: [B. Šmid], 
2013  
