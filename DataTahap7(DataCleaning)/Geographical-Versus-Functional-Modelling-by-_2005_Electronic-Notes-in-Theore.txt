we can observe however a new trend of the last years in the area of interlocking systems. the recent opening of markets inside europe has seen the end of the traditional strict collaboration between national railway companies and national railway industries, in which in a sense there was a limited need of precise specifications, since every misunderstanding ended up to be resolved by phone. in the case of ris, the principle schemata, a sort of ladder-like, relay based language, widely known by railway engineers, constituted the common reference language by which to describe interlocking systems, since the times interlockings were relay based. in the introduction of computer-based ris some industries had defined their own approach to produce computer based interlockings, more or less formalized, often based on some logic formalism or language, but they were anyway constrained to relate their own development/specification method/language to principle schemata, understood by the e.g. by an extensive testing program, due to the changes done to a single central structure used by all the software modules. we show how the geographical approach may reduce this effort by allowing the re-validation only of those software modules that are actually affected by the changes.



interlocking rules are obviously the core of the system, so their correctness is the main objective to be addressed by a formal specification. the rules aim at allowing only the safe combinations of switches positions, signals and trains in a station in order to avoid collisions. the signal indications, handled by the interlocking system, govern the correct use of the routes, authorizing the movement of train within interlocking limits.



the statecharts formalism is an extension of the classic formalism of finite state machines(fsm), to allow hierarchical parallel interacting state machines to be specified. transition from a state to another of a single machine(a statechart) is driven by trigger events, which can refer to the state of other machines or to global variables; therefore, the communication activity between statecharts is performed using broadcasting: every event is sent to the whole system, and can be received from any other part of the system. during a transition the actions generate events, which are triggered by conditions on other transitions or on global variables. chains of internal events generated by only one external event are possible.



we suggest a way to design an interlocking system starting from its layout and ending in its operational specification. this approach is similar to the one used in euris language. in this work we focus on a methodology that does not use any sort of global summarizing variables, which is usual instead for a functional approach.



with the term summarizing variable we mean a variable whose values depend from the values of a set of other single variables, each related to a physical entity of the layout. as an example we can consider a variable associated to a route, that is true if and only if at least one of the variables recording the occupancy of the track circuits belonging to the route is set to true. the use of summarizing variables, though useful for abstracting certain global aspects of the system, makes the model more distant from the physical topology.



manded routes. in the same way, all the activities performed by functional objects have been distributed to these geographical objects. hence, the control for example of the correct position of a particular switch point is performed from all the interested elements and not by a single object dedicated to the management of all the switch points.



from the statechart model it is also possible to generate c or ada code by using the automatic code generator tool, which is part of the statemate tool. because of the detailed nature of the model, the code generated is immediately usable without need of any other translation into lower level languages. the resulting code shares with the geographical model the correspondence between software modules and yard devices.



actually, in the geographical approach, in case of a change to some parts of the interlocking system there may be some modules that do not need to be changed because they are not affected by the modification done, neither directly nor by propagation. since each object performs its controls independently and the system does not use global summarizing variables, we can assert that those objects do not have to be revalidated. the objects affected by the modification need instead to be revalidated, e.g. using new test scenarios or modifying the already existing ones.



the experience we have presented is part of a wider research project aiming at investigating the design of ris by means of different statechart dialects and different commercial tools that support statecharts, such as for example stateflow(mathworks), telelogic tau generation 2(telelogic), real-time studio(artisan software), visualstate(iar systems). we have concentrated in this paper on the possibility of adopting a geographical approach, with the main aim of investigating the reduction of revalidation effort in case of change. in this direction we need to verify the scalability to larger designs. moreover, we need to assess the suitability of this approach to formal verification on one side(by means of model checkers such as the one integrated in statemate, or such as other academic tools), and, on the other side, to automatic generation of the statechart model from a specification of the physical layout.



u. foschi, m. giuliani, a. morzenti, m. pradella, p. san pietro. the role of formal methods in software procurement for the railway transportation industry, symposium on formal methods for railway operation and control systems(forms 2003), budapest, hungary, 15-16 may 2003.



