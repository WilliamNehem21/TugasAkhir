the data provided to us by lothian buses consists of avl data obtained using periodic gps location measurements. each data entry consists of a bus identifier, a location measurement and a measurement timestamp. our dataset contains information about the full fleet of 745 buses, collected between 28th january 2014 at 11:31:14 and 30th january 2014 at 12:38:31.



the data is not always perfect: in extreme cases, this means that the location data is obviously invalid(e.g., buses appearing in a patch of farmland or the middle of the firth of forth). in less obvious cases, buses seem to freeze for extended time periods before suddenly appearing in distant locations. buses appearing to freeze in locations in the middle of the city may have a significant impact on journey time analysis. hence, it is advisable to have a human check the data for obvious errors using a visualisation tool, for example. self-evidently erroneous observations seem to disproportionately often occur at night; hence, we restrict our data set to only include measurements recorded between 7:30 am and 7:30 pm.



in this paper, we focus on a specific portion of the city, namely princes street in the edinburgh city centre. alongside being a busy shopping street, it is the main artery connecting the west and east of the city and nearly all buses that cross the edinburgh city centre follow a route that takes them along at least a part of princes street. the advantage of focusing on a single street is that the patches can be ordered, in this case starting from the south-west.



traffic intensity varies along the route. a very noticeable example of this is in the part of princes street that is traffic-restricted(i.e., no cars on the road), namely the area that roughly corresponds to patches 4, 5 and 6. we observe that patch 5 has a much lower expected sojourn time than patches 3 and 13 than would be expected if only the difference in size were considered. the effect of the pedestrianisation does not seem to extend to patch 7, as there is not much difference compared to patch 3, which is on the other side of the pedestrianised area.



having obtained the hyper-erlang parameters, we use them to construct a model that can answer questions about the case study involving trams in edinburgh. we first describe the model in a formal and concise manner using prism. we then discuss the performance measures used to evaluate the impact of the trams.



prism works with models expressed in its own language, based on the formalism of reactive modules. in the following we present a brief description of the prism language that is not fully general but which covers the scope of this paper. for a full description, see.



as the name suggests, the idea behind the reactive modules formalism is to decompose a complex system model into a combination of interacting modules. a typical module includes a set of local variables that together represent the state of the module; the global state of the model can then be derived using the states of all the individual modules. the transition structure of the model is described using commands, where each command is linked to a specific module. the commands that we use consist of an action label, a guard, a rate and an update. a guard is a condition imposed on the local variables of the module; for a transition with a given action label to be enabled, the guards of all commands in the system that share this action label must be satisfied. each individual command has an associated rate: the total rate of the transition is the product of the individual rates. in each step of the execution of the system model, a transition is chosen based on the rates of the enabled transitions. specifically, when a transition is chosen the local variables in the modules with the commands that correspond to the transition are changed in a way that is specified using their updates.



the main performance metric that we consider in this paper is on-time performance. specifically, we are interested in whether a service is punctual, which is defined by the scottish government as an arrival that occurs within a so-called window of tolerance of between one minute early and five minutes late. note that government regulators only measure whether a service is punctual at pre-specified timing points, and the portion of the city that we consider does not contain such points. however, since the punctuality on a route depends on the punctuality on the portions that make up the route, this is still an interesting metric, even though the probability of being over five minutes late on such a short part of the route is fairly low.



in section 3.3, we noticed that the presence of bus stops in a patch had a much more profound effect on the sojourn distribution in a patch than the presence of a traffic light. this effect is due to the embarking and disembarking of passengers. the number of passengers at a stop may well decrease when they have the choice to travel by tram instead. the bus stops most likely to be affected by the tram stop in patch 8 are the ones in patches 6 and 10. in an extreme case, these bus stops would stop being used at all, which would mean that the sojourn time distributions in patches 6 and 10 would become similar to the current sojourn time distribution of patch 8. while this is unlikely to happen in practice, it can be helpful to consider this as a worst-case scenario; furthermore, we can use prism to get a good idea about the intermediate scenarios.



typically leads to alternating late and early buses: if a bus is late, it has to pick up passengers intended for the next bus, which means that the late bus gets further behind schedule and the bus after starts to run early because it has to pick up fewer passengers. this phenomenon is also mentioned in. in our paper, we focus on a single bus so this behaviour is not captured. in, a case study is performed involving data provided by the toronto transit commission.



finally, we mention, a comprehensive technical report detailing the state of the art regarding the use of data from avl systems or automatic passenger counters(apc) to improve transit performance in 2006. subjects discussed in the report range from a survey of the potential uses of avl data to practical considerations. a number of case studies are discussed, namely seattle, portland, chicago, new jersey, and minneapolis in the usa, ottawa and montreal in canada and the hague and eindhoven in the netherlands. the uses for avl-apc data discussed by the authors include: analysis of running time, schedule adherence and headway regularity, demand analysis and bus route mapping.



development of the methodology is ongoing with specific focus on several extensions. the first is the generalisation of the model to one that incorporates the movement of several buses that contend for shared resources(in this case, access to bus stops). the structure of the prism model is such that contention between buses is trivially added. the main challenge is the parameterisation: since the empirical sojourn times already include the effect of contention, the effect of adding a bus to the system is hard to interpret. if we are able to match buses to their routes, we can investigate the difference in sojourn time behaviour between buses of routes that do and that do not stop at a bus stop in a patch. this difference can then be incorporated in the parameters. another possibility is to partition the sojourn time dataset according to how many other buses are present when a bus enters a patch. if buses that enter patches that already contain other buses have longer sojourn times on average, then this difference can be incorporated into the parameters.



another research direction is an automated procedure for dividing a portion of a route into patches. currently, the patches are hand-picked. thanks to our cooperation with the city of edinburgh council, we have access to data about the routes that include information about bus stops. the main challenge is to



this work is supported by the eu project quanticol, 600708. the authors thank bill johnston of lothian buses and stuart lowrie of the city of edinburgh council for providing access to the data which was used to parameterise the model in the paper. the visualisation tool used to create representations of the bus data on a map view was originated by shao yuan during his msc work at edinburgh.



