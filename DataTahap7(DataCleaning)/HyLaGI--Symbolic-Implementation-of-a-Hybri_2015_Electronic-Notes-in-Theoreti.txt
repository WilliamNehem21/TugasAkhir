a modeling language for hybrid systems hydla and its implementation hylagi are described. hydla is a constraint-based language that can handle uncertainties of models smoothly. hylagi calculates trajectories by symbolic formula manipulation to exclude errors resulting from floating-point arithmetic. hylagi features a nondeterministic simulation algorithm so it can calculate all possible qualitative different trajectories of models with uncertainties.



a precursor of hydla was hybrid cc[2,5], but its implementation did not completely guarantee the correctness of results. another approach was clp(f), constraint logic programming over real-valued functions. it aimed at rigorous simulation and handled interval constraints, but its control structure was very different from that of hydla.



we have been developing an implementation of hydla named hylagi(hydla guaranteed implementation) 2. hylagi computes trajectories of given hydla programs. hylagi is written in c++ and currently uses mathematica as its backend solver. the c++ part consists of the parser and the high-level part of the simulation algorithm including case analysis. mathematica is used for checking the consistency of conjunctions of constraints, solving odes, solving minimization problems and transforming both arithmetic expressions and logical formulas. we have also developed a frontend system for hylagi, which can visualize simulation results of hylagi by two dimensional plots and animations.



firstly, the results are free from errors caused by floating point arithmetic because hylagi calculates trajectories by formula manipulation. outputs are symbolic representation of state variables at each time point and each time interval. since errors in the simulation of hybrid systems can lead to qualitatively different results, this feature is more important than in ordinary dynamical systems. there are other rigorous tools for hybrid systems, but most of them are based on numerical methods[3,4,13] or theorem proving.



algorithm. the simulation repeats point phases and interval phases until a termination condition(time limit or the number of phases) is satisfied. at each phase, maximal consistent sets of modules are calculated by checking consistency and guard conditions. a point phase is concerned with discrete change at a time point, while an interval phase is concerned with continuous change for a time interval. calculation of interval phases is more complex than that of point phases because it includes solving odes and minimization problems.



the first idea is to analyze the dependency of constraints. the dependency can be represented by a bipartite graph consisting of variable nodes and constraint nodes. graph edges correspond to the references of variables from constraints. the dependency between constraints changes dynamically in the simulation of hylagi because(i) a guarded constraint may be switched on and off,(ii) constraint modules not chosen for a particular phase have no effect, and(iii) the left-hand limit of a variable in a point phase is regarded constant and has no relation with the variable itself. hylagi manages the effectivities of nodes and edges of a dependency graph dynamically and calculates minimal sets of related constraints.



