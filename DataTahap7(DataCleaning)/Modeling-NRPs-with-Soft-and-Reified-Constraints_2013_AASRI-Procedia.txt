nurse rostering has been largely studied from the seventies. classic and exact methods from the mathematical programming area were early used to tackle such a problem [4]. from the nineties, metaheuristics have taken an important place in the rostering research. different solutions have been proposed, some examples use tabu search [2], simulated annealing [13], genetic algorithms [8], variable neighborhood search [7], electromagnetic metaheuristics [9]. in the context of complete search, constraint programming has been also strongly involved in nurse rostering, some examples can be seen in [1, 6, 11, 10, 14]. however, most work is focused on the efficient solving of well-known instances; and the work devoted to real cases of nurse rostering is quite limited.



this paper presents the study of a real case of nurse rostering in mid-size chilean health care centers. we take as sample three clinics and four hospitals that collect the main features of those health centers (similar size, organization and amount of nurses). the problem is represented as a csp (constraint satisfaction problem) involving soft and hard constraints, and solved with cp (constraint programming) algorithms via the jacop solver. we believe that this work will be useful to increase the experience in real cases of nurse rostering as well as to future nrp researchers.



mid-size health care centers in chile employs a particular type of shift assignment called the ``fourth shift'' system. this system is quite uncommon do not fitting with the common 8 hours-shift system used in most hospital and research papers. the ``fourth shift'' system considers two shifts of 12 hours per day: d and n. d corresponds to a day shift (from 08:00 until 20:00); and n corresponds to a night shift (from 20:00 until 8:00 of the next day).



soft constraints allows one to model preferences. for instance, in the studied health-care centers, there exist nurses holding a senior position able to suggest some preferences on the schedule. as common cp solvers do not provide primitives to directly handle soft constraints, we model the soft constraints by using reified constraints. a reified constraint reified(ck,bk) assigns 1 (true) to the variable bk if the constraint ck is satisfied; and it assigns 0 (false) otherwise. then, the idea is to maximize the summation of bk variables as follows, assuming , where p is the number of preferences: maximize example, let us consider three preferences: c1: nurse 5 prefers not to be off on day 1; c2: nurses 2 and 4 prefer to start with a day shift. c3: nurse 11 prefers to be off the third weekend of the cycle. those constraints can be modeled as follows: c1: v5,1 0; c2: v2,1 = 1 v4,1 = 1; c3: v11,20 = 0 v11,21 = 0. finally, we impose three reified constraints and the corresponding objective function in order to obtain a solution:



in an array called b. then, the summation is stored in the summation variable at line 4, which is then imposed in the store of constraints. at line 6, a variable cost with a domain [-inf, 0] is initialized. then, at line 7, the value of summation is multiplied by -1and assigned to the cost variable. this is done since jacop only minimizes, thus, it is mandatory to invert the value of the summation variable. finally, the labeling method triggers a branch and bound algorithm using as cost function the cost variable.



this paper addressed a nrp study for a set of chilean mid-size health care centers. we have presented a model that handles a very uncommon shift pattern and the nurse preferences via soft constraints. soft constraints have been modeled by using reified constraints in conjunction with an objetive function in order to maximize the number of preferences satisfied. in this way, the model becomes an optimization problem that has been solved in the jacop solver. rosters are automatically generated in about 20 minutes considering 40 nurses. the approach presented here can naturally be extended by considering bigger health care centers and more complex soft constraints. using metaheuristics and autonomous search [5, 12] will be an interesting research direction to pursue as well.



