due to the fluctuating and intermittent nature of solar irradiance, the power output of pv power station fluctuates. it brings great difficulties for power output forecasting of pv power station. traditional pv power output forecasting technologies using physical/statistical model combined with nwp failed to provide accurate results. based on the research of on-line analysis on ground-based cloud image captured by total sky imager(tsi), through the technical phases of cloud recognition, cloud blocking prediction, distortion correction, projection transformation and integration with cloud forcing analysis, the roadmap of pv very short term solar irradiance forecasting based on ground-based cloud image analysis was presented in this paper. theoretical analysis proves that the method tends to provide reasonable accurate forecasting results and can be widely used.



the fluctuating and intermittent nature of pv power output may cause the instability of power system integrated with large scale of pv power. pv output power forecasting is used to optimize the dispatching job of the grid and guarantee power quality. pv power forecasting with high accuracy can help to reduce the spare capacity and cut down the operating costs, so as to take full advantage of solar resource and achieve both of social and economic benefit. the intermittency and randomness of surface solar irradiation directly cause the fluctuating of pv output power and bring great difficulties for pv output power forecasting. traditional



the domestic and foreign relevant research(istvan et al., 1998; harshvard et al.,1990) indicates that: the sun being blocked by cloud is mainly responsible for the intermittency of solar irradiance. observing and collecting cloud image, then predicting clouding blocking, and then analyzing the cloud forcing effects are one of the effective way to forecasting the solar irradiation.



in the following part of this paper, the work flow of the solar irradiance forecasting and the method of cloud image data collection are presented first. then the key technology and implementation of cloud blocking prediction are presented. and then, integrated with cloud forcing model(ramanathan and cess, 1989), the cloud blocking prediction results are used to forecasting irradiance. finally, the conclusion. contents of this paper are focused on how to perform cloud blocking prediction using on-line cloud image data.



the job of cloud recognition is to recognize and annotate each cloud in the sky image through 3 phases: 1) image loading and graying; 2) image filtering, preprocessing phase for raw image with noise. this processing can help to improve the quality of the image and make it easy to be recognized. 3) threshold segmentation, using blue-red ratio to distinguish the clouds from clear blue sky, so as to classifying the objects in the image into 3 type: opaque cloud, thin cloud and clear blue sky(long et al., 2006). in those phrases, cloud images are stored and processed as matrix, which are easy to be handled by computer.



in order to perform these processes by computer software, opencv tool suite are chosen to implement the algorithms involved in these phrases. opencv(bradski et al., 2008) is a widely used open source computer vision research tool suite. it includes hundreds of the implementations of general computer vision algorithms. these general computer vision algorithms can help to implement image collection, image graying, image filtering and threshold segmentation.



through recognition and annotation, cloud image are represented as two dimensional matrix, where blue sky pixel as annotated as 0, cloud pixel as none-0 value(red-blue ratio). through iteratively predicting the motion trend of each cloud and solar movement in the image, we are able to predict the block of the sun by cloud at a future time. since solar movement is only relevant to time line and can be tracked by calculation, the key factor of the prediction of cloud blocking focuses on how to predict the motion trend of each cloud.



assumed that the cloud image captured by tsi could be considered as a plan graph without distortion, we could directly calculate the decreasing of solar irradiance based on the prediction result of cloud blocking. however, according to the imaging principle of tsi(long et al., 2001), cloud images in the spherical mirror tend to occur edge distortion. that is to say, the area(pixel count) of the cloud in the edge of the image looks smaller than it is, so the prediction result need for distortion correction.



long et. al., 2006 believe that even if through distortion correction, there still exists difference between the area of cloud in the image and that of the real cloud in the sky. in this sense, to ensure the consistence between the cloud image and observation results by eye, the image should go through a projection transformation procedure to in advance correct the area of the objective cloud during the prediction calculation.



