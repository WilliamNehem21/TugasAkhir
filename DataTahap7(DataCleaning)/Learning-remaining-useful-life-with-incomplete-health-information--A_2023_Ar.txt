current research is focused on developing condition-based predic- tive maintenance procedures that can anticipate battery degradation before failure [14]. steady-state models, like the one proposed in this study, are effective in estimating the remaining useful life (rul) of batteries [15]. specifically, this study builds upon a previous publica- tion [16] that introduced a similar procedure based on empirical risk minimisation.



this study is an extended version of the ref. [16], where a specific procedure for battery health diagnosis was defined. this version pro- vides a theoretical basis to extend this procedure to a broader category of problems, keeping the application to batteries as an example of application. in particular, the novelties of this paper with respect to the previous version are:



the structure of this paper is as follows: section 2 introduces the theoretical problem, defines the health model and particularises the strategies for choosing parameters in the face of incomplete informa- tion. in section 3 the problem is particularised to the study of battery deterioration. a simplified electrochemical model is proposed and the alternatives introduced in the previous section are implemented. sec- tion 4 develops an empirical study with real and simulated batteries. the conclusions of the study are presented in section 5. appendix includes additional details on the degradation mechanisms of batteries of the type used in the empirical study.



the battery terminal voltage is the difference between the positive and negative electrode potentials. each electrode has a resting potential that depends on its degree of lithiation, which is the ratio of the number of moles of lithium ion intercalated in the active material to its capacity. the electrode potential increases when current flows through it [21], non-linearly with the value of the current.



alawa tool [27]. the reason for using simulated batteries is to validate the deterioration learning algorithm in problems with known outcome, to assess the degree of fit of the proposed alternative and to compare it with other uninformed learning techniques. in the second and third parts, the method is applied to real batteries. first, the deterioration of a battery is analysed numerically, showing the difference between different types of diagnosis. finally, the deterioration diagnosis of four cells, two of them with normal ageing and two with accelerated ageing, is shown, showing the influence of the subset of the training dataset on the diagnostic conclusions.



a realistic synthetic 5 ah battery has been simulated. the positive electrode is nmc (nickel, manganese and cobalt) and the negative electrode consists of a combination of graphite and silicon [28]. the capacity of the positive electrode is 5.55 ah. the capacities of the graphite and silicon in the negative electrode are 4.5 ah and 0.5 ah, respectively. the positive electrode is 90% lithiated at the beginning of the charge and is completely de-lithiated at the end of the charge. the negative electrode of the non-deteriorated battery is fully delithiated at



the mean error is better in models with informed learning, the version that offers the best results is the minimin/optimistic alterna- tive. this is an expected result, as the optimistic version is robust to coarsening processes [29]. the pessimistic or minimin-regret versions try to minimise the wrong risk in those phases of the cycle where deteriorations do not manifest themselves.



vector, improves the results because each battery has undergone a single deterioration process in the validation data (i.e., the optimal solution of each problem is a vector in which all components are zero except one; the regularisation penalises solutions with more than one concurrent deterioration and is therefore expected to improve the results of this method for this particular validation set.)



of subsets of the training set. in this set of experiments, the family s consists of charge-only, discharge-only, and combined data, limiting the battery terminal voltage values to lower ranges between 2.8 and 3 v and upper ranges between 3.5 and 4.2 v.



the literature on the use of machine learning for non-destructive diagnosis of battery conditions is extensive, with numerous published algorithms that extract information from current, voltage, and tem- perature measurements made under different assumptions. this paper proposes a new model for the health status of a battery that relies on both data and physical knowledge. the novelty of this approach is that both types of information are assumed to be imprecise, and the model cannot be uniformly fitted to all available data. fitting the model to different subsets of the training set produces varying results. various methods implicitly select instances and use only discharge data, while others select voltage and current values within a specific range of states of charge, disregarding model errors when the battery is almost charged or discharged. nonetheless, we claim that the most appropriate subset must be chosen depending on the parameter to be estimated, making it a crucial part of the learning algorithm. three different types of solutions have been proposed, which return subsets where the fit is maximal (optimistic criterion) or where the fit is best at the worst time instant (pessimistic criteria), and it has been found that in health diagnosis problems, the optimistic criterion is preferable since the subset where the fit is best also includes the best information about the defect.



the most common ageing mode associated to battery degradation is the loss of lithium inventory (lli), which is related to lithium consumption by parasitic reactions (e.g., electrolyte decomposition, solid electrolyte interface growth, etc.) [30]. the second ageing mode is the loss of active material (lam), which commonly results from par- ticle cracking and loss of electrical contact, among other causes [31]. the lam can be further classified into four types, depending on the electrode (positive and negative) and the degree of lithiation (predom- inantly lithiated or delithiated state) [27]. these ageing modes (i.e., lli and lam) can lead to both to capacity and power fade.



in batteries with a negative electrode composed of a blended mix of graphite and silicon, such as those used in this study [28], we can distinguish six types of loss of active material: loss of capacity of the delithiated (lamdpe) or lithiated (lamlpe) positive electrode and loss of capacity in the graphite and silicon fractions of the neg- ative electrode (lamlgr, lamdgr, lamlsi, lamdsi). in addition to the deteriorations related to the amount of energy that can be stored in a cell, there are other effects that limit the power that the cell can provide [27]. in the ohmic resistance increase the electrodes offer more resistance to the passage of current, which increases heat losses and reduces charging efficiency. in the faradaic rate degradation, the reaction rate between the electrode and the lithium ions is reduced, which prevents the energy from being extracted from the battery as quickly as necessary.



